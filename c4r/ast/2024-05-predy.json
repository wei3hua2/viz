[
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/PriceFeed.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/FixedPointMathLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/FixedPointMathLib.sol",
      "parts": [
       "@solmate/src/utils/FixedPointMathLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "FixedPointMathLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "FixedPointMathLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./vendors/AggregatorV3Interface.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./vendors/AggregatorV3Interface.sol",
      "parts": [
       "./vendors/AggregatorV3Interface.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "AggregatorV3Interface",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "AggregatorV3Interface"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./vendors/IPyth.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./vendors/IPyth.sol",
      "parts": [
       "./vendors/IPyth.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPyth",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPyth"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/Constants.sol",
      "parts": [
       "./libraries/Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PriceFeedFactory",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_pyth",
         "identifier": {
          "type": "Identifier",
          "name": "_pyth"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "EventDefinition",
       "name": "PriceFeedCreated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quotePrice",
         "identifier": {
          "type": "Identifier",
          "name": "quotePrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "priceId",
         "identifier": {
          "type": "Identifier",
          "name": "priceId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decimalsDiff",
         "identifier": {
          "type": "Identifier",
          "name": "decimalsDiff"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "priceFeed",
         "identifier": {
          "type": "Identifier",
          "name": "priceFeed"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "pyth",
         "identifier": {
          "type": "Identifier",
          "name": "pyth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_pyth"
           },
           "right": {
            "type": "Identifier",
            "name": "pyth"
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "createPriceFeed",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quotePrice",
         "identifier": {
          "type": "Identifier",
          "name": "quotePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "priceId",
         "identifier": {
          "type": "Identifier",
          "name": "priceId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decimalsDiff",
         "identifier": {
          "type": "Identifier",
          "name": "decimalsDiff"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PriceFeed"
            },
            "name": "priceFeed",
            "identifier": {
             "type": "Identifier",
             "name": "priceFeed"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "NewExpression",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PriceFeed"
            }
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quotePrice"
            },
            {
             "type": "Identifier",
             "name": "_pyth"
            },
            {
             "type": "Identifier",
             "name": "priceId"
            },
            {
             "type": "Identifier",
             "name": "decimalsDiff"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PriceFeedCreated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quotePrice"
            },
            {
             "type": "Identifier",
             "name": "priceId"
            },
            {
             "type": "Identifier",
             "name": "decimalsDiff"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "priceFeed"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "address"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "priceFeed"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    },
    {
     "type": "ContractDefinition",
     "name": "PriceFeed",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_quotePriceFeed",
         "identifier": {
          "type": "Identifier",
          "name": "_quotePriceFeed"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_pyth",
         "identifier": {
          "type": "Identifier",
          "name": "_pyth"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_decimalsDiff",
         "identifier": {
          "type": "Identifier",
          "name": "_decimalsDiff"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "_priceId",
         "identifier": {
          "type": "Identifier",
          "name": "_priceId"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "VALID_TIME_PERIOD",
         "identifier": {
          "type": "Identifier",
          "name": "VALID_TIME_PERIOD"
         },
         "expression": {
          "type": "BinaryOperation",
          "operator": "*",
          "left": {
           "type": "NumberLiteral",
           "number": "5",
           "subdenomination": null
          },
          "right": {
           "type": "NumberLiteral",
           "number": "60",
           "subdenomination": null
          }
         },
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "BinaryOperation",
        "operator": "*",
        "left": {
         "type": "NumberLiteral",
         "number": "5",
         "subdenomination": null
        },
        "right": {
         "type": "NumberLiteral",
         "number": "60",
         "subdenomination": null
        }
       }
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quotePrice",
         "identifier": {
          "type": "Identifier",
          "name": "quotePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "pyth",
         "identifier": {
          "type": "Identifier",
          "name": "pyth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "priceId",
         "identifier": {
          "type": "Identifier",
          "name": "priceId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decimalsDiff",
         "identifier": {
          "type": "Identifier",
          "name": "decimalsDiff"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_quotePriceFeed"
           },
           "right": {
            "type": "Identifier",
            "name": "quotePrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_pyth"
           },
           "right": {
            "type": "Identifier",
            "name": "pyth"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_priceId"
           },
           "right": {
            "type": "Identifier",
            "name": "priceId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_decimalsDiff"
           },
           "right": {
            "type": "Identifier",
            "name": "decimalsDiff"
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtPrice",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           null,
           {
            "type": "VariableDeclaration",
            "name": "quoteAnswer",
            "identifier": {
             "type": "Identifier",
             "name": "quoteAnswer"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           null,
           null,
           null
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "AggregatorV3Interface"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "_quotePriceFeed"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "latestRoundData"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IPyth.Price"
            },
            "name": "basePrice",
            "identifier": {
             "type": "Identifier",
             "name": "basePrice"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IPyth"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "_pyth"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "getPriceNoOlderThan"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_priceId"
            },
            {
             "type": "Identifier",
             "name": "VALID_TIME_PERIOD"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "basePrice"
              },
              "memberName": "expo"
             },
             "right": {
              "type": "UnaryOperation",
              "operator": "-",
              "subExpression": {
               "type": "NumberLiteral",
               "number": "8",
               "subdenomination": null
              },
              "isPrefix": true
             }
            },
            {
             "type": "StringLiteral",
             "value": "INVALID_EXP",
             "parts": [
              "INVALID_EXP"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "quoteAnswer"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "basePrice"
               },
               "memberName": "price"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "price",
            "identifier": {
             "type": "Identifier",
             "name": "price"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "basePrice"
                 },
                 "memberName": "price"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "Q96"
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "quoteAnswer"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "price"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "BinaryOperation",
             "operator": "*",
             "left": {
              "type": "Identifier",
              "name": "price"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "Q96"
             }
            },
            "right": {
             "type": "Identifier",
             "name": "_decimalsDiff"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "sqrtPrice"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FixedPointMathLib"
             },
             "memberName": "sqrt"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "price"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/PredyPool.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
      "parts": [
       "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IUniswapV3Pool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IUniswapV3Pool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/interfaces/callback/IUniswapV3MintCallback.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/interfaces/callback/IUniswapV3MintCallback.sol",
      "parts": [
       "@uniswap/v3-core/contracts/interfaces/callback/IUniswapV3MintCallback.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IUniswapV3MintCallback",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IUniswapV3MintCallback"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin-upgradeable/contracts/proxy/utils/Initializable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin-upgradeable/contracts/proxy/utils/Initializable.sol",
      "parts": [
       "@openzeppelin-upgradeable/contracts/proxy/utils/Initializable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Initializable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Initializable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol",
      "parts": [
       "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ReentrancyGuardUpgradeable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ReentrancyGuardUpgradeable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./interfaces/IPredyPool.sol",
      "parts": [
       "./interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./interfaces/IHooks.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./interfaces/IHooks.sol",
      "parts": [
       "./interfaces/IHooks.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IHooks",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IHooks"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./interfaces/ISettlement.sol",
      "parts": [
       "./interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/Perp.sol",
      "parts": [
       "./libraries/Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/VaultLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/VaultLib.sol",
      "parts": [
       "./libraries/VaultLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "VaultLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "VaultLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/PositionCalculator.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/PositionCalculator.sol",
      "parts": [
       "./libraries/PositionCalculator.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PositionCalculator",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PositionCalculator"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/DataType.sol",
      "parts": [
       "./libraries/DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/InterestRateModel.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/InterestRateModel.sol",
      "parts": [
       "./libraries/InterestRateModel.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "InterestRateModel",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "InterestRateModel"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/UniHelper.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/UniHelper.sol",
      "parts": [
       "./libraries/UniHelper.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "UniHelper",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "UniHelper"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/AddPairLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/AddPairLogic.sol",
      "parts": [
       "./libraries/logic/AddPairLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "AddPairLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "AddPairLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/LiquidationLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/LiquidationLogic.sol",
      "parts": [
       "./libraries/logic/LiquidationLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "LiquidationLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "LiquidationLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/ReallocationLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/ReallocationLogic.sol",
      "parts": [
       "./libraries/logic/ReallocationLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ReallocationLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ReallocationLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/SupplyLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/SupplyLogic.sol",
      "parts": [
       "./libraries/logic/SupplyLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SupplyLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SupplyLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/TradeLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/TradeLogic.sol",
      "parts": [
       "./libraries/logic/TradeLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "TradeLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "TradeLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/ReaderLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/ReaderLogic.sol",
      "parts": [
       "./libraries/logic/ReaderLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ReaderLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ReaderLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./types/GlobalData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./types/GlobalData.sol",
      "parts": [
       "./types/GlobalData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "LockDataLibrary",
       null
      ],
      [
       "GlobalDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "LockDataLibrary"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "GlobalDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PredyPool",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "IPredyPool"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "IUniswapV3MintCallback"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "Initializable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ReentrancyGuardUpgradeable"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GlobalDataLibrary.GlobalData"
       },
       "libraryName": "GlobalDataLibrary",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "LockDataLibrary.LockData"
       },
       "libraryName": "LockDataLibrary",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GlobalDataLibrary.GlobalData"
       },
       "libraryName": "VaultLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "operator",
         "identifier": {
          "type": "Identifier",
          "name": "operator"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "bool",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "allowedUniswapPools",
         "identifier": {
          "type": "Identifier",
          "name": "allowedUniswapPools"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "trader"
          },
          "valueType": {
           "type": "Mapping",
           "keyType": {
            "type": "ElementaryTypeName",
            "name": "uint256",
            "stateMutability": null
           },
           "keyName": {
            "type": "Identifier",
            "name": "pairId"
           },
           "valueType": {
            "type": "ElementaryTypeName",
            "name": "bool",
            "stateMutability": null
           },
           "valueName": null
          },
          "valueName": null
         },
         "name": "allowedTraders",
         "identifier": {
          "type": "Identifier",
          "name": "allowedTraders"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "EventDefinition",
       "name": "OperatorUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "operator",
         "identifier": {
          "type": "Identifier",
          "name": "operator"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "RecepientUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "recipient",
         "identifier": {
          "type": "Identifier",
          "name": "recipient"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "ProtocolRevenueWithdrawn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isStable",
         "identifier": {
          "type": "Identifier",
          "name": "isStable"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "CreatorRevenueWithdrawn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isStable",
         "identifier": {
          "type": "Identifier",
          "name": "isStable"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyOperator",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "Identifier",
            "name": "operator"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "CallerIsNotOperator"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyByLocker",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "locker",
            "identifier": {
             "type": "Identifier",
             "name": "locker"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "lockData"
           },
           "memberName": "locker"
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           },
           "right": {
            "type": "Identifier",
            "name": "locker"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "LockedBy"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "locker"
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyPoolOwner",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            "memberName": "poolOwner"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "CallerIsNotPoolCreator"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyVaultOwner",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "vaults"
             },
             "index": {
              "type": "Identifier",
              "name": "vaultId"
             }
            },
            "memberName": "owner"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "CallerIsNotVaultOwner"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "initialize",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapFactory",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapFactory"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__ReentrancyGuard_init"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "initializeGlobalData"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "uniswapFactory"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "operator"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "initializer",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "uniswapV3MintCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount0",
         "identifier": {
          "type": "Identifier",
          "name": "amount0"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount1",
         "identifier": {
          "type": "Identifier",
          "name": "amount1"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "allowedUniswapPools"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "msg"
              },
              "memberName": "sender"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IUniswapV3Pool"
            },
            "name": "uniswapPool",
            "identifier": {
             "type": "Identifier",
             "name": "uniswapPool"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "IUniswapV3Pool"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "amount0"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "uniswapPool"
                   },
                   "memberName": "token0"
                  },
                  "arguments": [],
                  "names": [],
                  "identifiers": []
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "Identifier",
                "name": "amount0"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "amount1"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "uniswapPool"
                   },
                   "memberName": "token1"
                  },
                  "arguments": [],
                  "names": [],
                  "identifiers": []
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "Identifier",
                "name": "amount1"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setOperator",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "newOperator",
         "identifier": {
          "type": "Identifier",
          "name": "newOperator"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "newOperator"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "operator"
           },
           "right": {
            "type": "Identifier",
            "name": "newOperator"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "OperatorUpdated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "newOperator"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOperator",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "registerPair",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AddPairLogic.AddPairParams"
         },
         "name": "addPairParam",
         "identifier": {
          "type": "Identifier",
          "name": "addPairParam"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "addPair"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "allowedUniswapPools"
            },
            {
             "type": "Identifier",
             "name": "addPairParam"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOperator",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateAssetRiskParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetRiskParams"
         },
         "name": "riskParams",
         "identifier": {
          "type": "Identifier",
          "name": "riskParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "updateAssetRiskParams"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Identifier",
             "name": "riskParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateIRMParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "quoteIrmParams",
         "identifier": {
          "type": "Identifier",
          "name": "quoteIrmParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "baseIrmParams",
         "identifier": {
          "type": "Identifier",
          "name": "baseIrmParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "updateIRMParams"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Identifier",
             "name": "quoteIrmParams"
            },
            {
             "type": "Identifier",
             "name": "baseIrmParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateFeeRatio",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "feeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "feeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "updateFeeRatio"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Identifier",
             "name": "feeRatio"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updatePoolOwner",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "poolOwner",
         "identifier": {
          "type": "Identifier",
          "name": "poolOwner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "updatePoolOwner"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Identifier",
             "name": "poolOwner"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updatePriceOracle",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "priceFeed",
         "identifier": {
          "type": "Identifier",
          "name": "priceFeed"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "updatePriceOracle"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Identifier",
             "name": "priceFeed"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "withdrawProtocolRevenue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Perp.AssetPoolStatus"
            },
            "name": "pool",
            "identifier": {
             "type": "Identifier",
             "name": "pool"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_getAssetStatusPool"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "isQuoteToken"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "amount",
            "identifier": {
             "type": "Identifier",
             "name": "amount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "pool"
           },
           "memberName": "accumulatedProtocolRevenue"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "amount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "AZ",
             "parts": [
              "AZ"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "pool"
            },
            "memberName": "accumulatedProtocolRevenue"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "pool"
                  },
                  "memberName": "token"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "Identifier",
                "name": "amount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ProtocolRevenueWithdrawn"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "isQuoteToken"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOperator",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "withdrawCreatorRevenue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Perp.AssetPoolStatus"
            },
            "name": "pool",
            "identifier": {
             "type": "Identifier",
             "name": "pool"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_getAssetStatusPool"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "isQuoteToken"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "amount",
            "identifier": {
             "type": "Identifier",
             "name": "amount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "pool"
           },
           "memberName": "accumulatedCreatorRevenue"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "amount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "AZ",
             "parts": [
              "AZ"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "pool"
            },
            "memberName": "accumulatedCreatorRevenue"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "pool"
                  },
                  "memberName": "token"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "Identifier",
                "name": "amount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "CreatorRevenueWithdrawn"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "isQuoteToken"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "supply",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteAsset",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteAsset"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "supplyAmount",
         "identifier": {
          "type": "Identifier",
          "name": "supplyAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalSuppliedAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalSuppliedAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SupplyLogic"
            },
            "memberName": "supply"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "supplyAmount"
            },
            {
             "type": "Identifier",
             "name": "isQuoteAsset"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "withdraw",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteAsset",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteAsset"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "withdrawAmount",
         "identifier": {
          "type": "Identifier",
          "name": "withdrawAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalBurnAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalBurnAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalWithdrawAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalWithdrawAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SupplyLogic"
            },
            "memberName": "withdraw"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "withdrawAmount"
            },
            {
             "type": "Identifier",
             "name": "isQuoteAsset"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "reallocate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "relocationOccurred",
         "identifier": {
          "type": "Identifier",
          "name": "relocationOccurred"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ReallocationLogic"
            },
            "memberName": "reallocate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "settlementData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "trade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeParams"
              },
              "memberName": "pairId"
             }
            },
            "memberName": "allowlistEnabled"
           },
           "right": {
            "type": "UnaryOperation",
            "operator": "!",
            "subExpression": {
             "type": "IndexAccess",
             "base": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "allowedTraders"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeParams"
              },
              "memberName": "pairId"
             }
            },
            "isPrefix": true
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "TraderNotAllowed"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeParams"
            },
            "memberName": "vaultId"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "createOrGetVault"
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeParams"
              },
              "memberName": "vaultId"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeParams"
              },
              "memberName": "pairId"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "TradeLogic"
            },
            "memberName": "trade"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "tradeParams"
            },
            {
             "type": "Identifier",
             "name": "settlementData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateRecepient",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "recipient",
         "identifier": {
          "type": "Identifier",
          "name": "recipient"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.Vault"
            },
            "name": "vault",
            "identifier": {
             "type": "Identifier",
             "name": "vault"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "vaults"
           },
           "index": {
            "type": "Identifier",
            "name": "vaultId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "vault"
            },
            "memberName": "recipient"
           },
           "right": {
            "type": "Identifier",
            "name": "recipient"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "RecepientUpdated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vaultId"
            },
            {
             "type": "Identifier",
             "name": "recipient"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyVaultOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "vaultId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "allowTrader",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "enabled",
         "identifier": {
          "type": "Identifier",
          "name": "enabled"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "IndexAccess",
              "base": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "globalData"
               },
               "memberName": "pairs"
              },
              "index": {
               "type": "Identifier",
               "name": "pairId"
              }
             },
             "memberName": "allowlistEnabled"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "allowedTraders"
             },
             "index": {
              "type": "Identifier",
              "name": "trader"
             }
            },
            "index": {
             "type": "Identifier",
             "name": "pairId"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "enabled"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "execLiquidationCall",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "closeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "LiquidationLogic"
            },
            "memberName": "liquidate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vaultId"
            },
            {
             "type": "Identifier",
             "name": "closeRatio"
            },
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "settlementData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "take",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteAsset",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteAsset"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "to",
         "identifier": {
          "type": "Identifier",
          "name": "to"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "take"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "isQuoteAsset"
            },
            {
             "type": "Identifier",
             "name": "to"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyByLocker",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "createVault",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "createOrGetVault"
           },
           "arguments": [
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "UniHelper"
            },
            "memberName": "convertSqrtPrice"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "UniHelper"
              },
              "memberName": "getSqrtPrice"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "globalData"
                  },
                  "memberName": "pairs"
                 },
                 "index": {
                  "type": "Identifier",
                  "name": "pairId"
                 }
                },
                "memberName": "sqrtAssetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "IndexAccess",
              "base": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "globalData"
               },
               "memberName": "pairs"
              },
              "index": {
               "type": "Identifier",
               "name": "pairId"
              }
             },
             "memberName": "isQuoteZero"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtIndexPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PositionCalculator"
            },
            "memberName": "getSqrtIndexPrice"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getPairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "Identifier",
            "name": "pairId"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getVault",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "vaults"
           },
           "index": {
            "type": "Identifier",
            "name": "vaultId"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "revertPairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ReaderLogic"
            },
            "memberName": "getPairStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "revertVaultStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ReaderLogic"
            },
            "memberName": "getVaultStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "vaultId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_getAssetStatusPool",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetPoolStatus"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isQuoteToken"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "pairs"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              "memberName": "quotePool"
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "pairs"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              "memberName": "basePool"
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/vendors/IUniswapV3PoolOracle.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ContractDefinition",
     "name": "IUniswapV3PoolOracle",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "slot0",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtPriceX96",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPriceX96"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tick",
         "identifier": {
          "type": "Identifier",
          "name": "tick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint16",
          "stateMutability": null
         },
         "name": "observationIndex",
         "identifier": {
          "type": "Identifier",
          "name": "observationIndex"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint16",
          "stateMutability": null
         },
         "name": "observationCardinality",
         "identifier": {
          "type": "Identifier",
          "name": "observationCardinality"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint16",
          "stateMutability": null
         },
         "name": "observationCardinalityNext",
         "identifier": {
          "type": "Identifier",
          "name": "observationCardinalityNext"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "feeProtocol",
         "identifier": {
          "type": "Identifier",
          "name": "feeProtocol"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "unlocked",
         "identifier": {
          "type": "Identifier",
          "name": "unlocked"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "liquidity",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint128",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "observe",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint32",
           "stateMutability": null
          },
          "length": null
         },
         "name": "secondsAgos",
         "identifier": {
          "type": "Identifier",
          "name": "secondsAgos"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "int56",
           "stateMutability": null
          },
          "length": null
         },
         "name": "tickCumulatives",
         "identifier": {
          "type": "Identifier",
          "name": "tickCumulatives"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint160",
           "stateMutability": null
          },
          "length": null
         },
         "name": "liquidityCumulatives",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityCumulatives"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "observations",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "index",
         "identifier": {
          "type": "Identifier",
          "name": "index"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "blockTimestamp",
         "identifier": {
          "type": "Identifier",
          "name": "blockTimestamp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int56",
          "stateMutability": null
         },
         "name": "tickCumulative",
         "identifier": {
          "type": "Identifier",
          "name": "tickCumulative"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "liquidityCumulative",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityCumulative"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "initialized",
         "identifier": {
          "type": "Identifier",
          "name": "initialized"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "increaseObservationCardinalityNext",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint16",
          "stateMutability": null
         },
         "name": "observationCardinalityNext",
         "identifier": {
          "type": "Identifier",
          "name": "observationCardinalityNext"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "interface"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/vendors/IPyth.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.0"
    },
    {
     "type": "ContractDefinition",
     "name": "IPyth",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StructDefinition",
       "name": "Price",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int64",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "conf",
         "identifier": {
          "type": "Identifier",
          "name": "conf"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int32",
          "stateMutability": null
         },
         "name": "expo",
         "identifier": {
          "type": "Identifier",
          "name": "expo"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "publishTime",
         "identifier": {
          "type": "Identifier",
          "name": "publishTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "getPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "id",
         "identifier": {
          "type": "Identifier",
          "name": "id"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Price"
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getPriceNoOlderThan",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "id",
         "identifier": {
          "type": "Identifier",
          "name": "id"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "age",
         "identifier": {
          "type": "Identifier",
          "name": "age"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Price"
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "interface"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/vendors/AggregatorV3Interface.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.0"
    },
    {
     "type": "ContractDefinition",
     "name": "AggregatorV3Interface",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "decimals",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "description",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "version",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getRoundData",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint80",
          "stateMutability": null
         },
         "name": "_roundId",
         "identifier": {
          "type": "Identifier",
          "name": "_roundId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint80",
          "stateMutability": null
         },
         "name": "roundId",
         "identifier": {
          "type": "Identifier",
          "name": "roundId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "answer",
         "identifier": {
          "type": "Identifier",
          "name": "answer"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "startedAt",
         "identifier": {
          "type": "Identifier",
          "name": "startedAt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "updatedAt",
         "identifier": {
          "type": "Identifier",
          "name": "updatedAt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint80",
          "stateMutability": null
         },
         "name": "answeredInRound",
         "identifier": {
          "type": "Identifier",
          "name": "answeredInRound"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "latestRoundData",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint80",
          "stateMutability": null
         },
         "name": "roundId",
         "identifier": {
          "type": "Identifier",
          "name": "roundId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "answer",
         "identifier": {
          "type": "Identifier",
          "name": "answer"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "startedAt",
         "identifier": {
          "type": "Identifier",
          "name": "startedAt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "updatedAt",
         "identifier": {
          "type": "Identifier",
          "name": "updatedAt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint80",
          "stateMutability": null
         },
         "name": "answeredInRound",
         "identifier": {
          "type": "Identifier",
          "name": "answeredInRound"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "interface"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/types/LockData.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "LockDataLibrary",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StructDefinition",
       "name": "LockData",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "locker",
         "identifier": {
          "type": "Identifier",
          "name": "locker"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "quoteReserve",
         "identifier": {
          "type": "Identifier",
          "name": "quoteReserve"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "baseReserve",
         "identifier": {
          "type": "Identifier",
          "name": "baseReserve"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/types/GlobalData.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeCast",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeCast"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IHooks.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IHooks.sol",
      "parts": [
       "../interfaces/IHooks.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IHooks",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IHooks"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../libraries/DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../libraries/DataType.sol",
      "parts": [
       "../libraries/DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./LockData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./LockData.sol",
      "parts": [
       "./LockData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "GlobalDataLibrary",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "SafeCast",
       "functions": [],
       "operators": []
      },
      {
       "type": "StructDefinition",
       "name": "GlobalData",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairsCount",
         "identifier": {
          "type": "Identifier",
          "name": "pairsCount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultCount",
         "identifier": {
          "type": "Identifier",
          "name": "vaultCount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapFactory",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapFactory"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.PairStatus"
          },
          "valueName": null
         },
         "name": "pairs",
         "identifier": {
          "type": "Identifier",
          "name": "pairs"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.RebalanceFeeGrowthCache"
          },
          "valueName": null
         },
         "name": "rebalanceFeeGrowthCache",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceFeeGrowthCache"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.Vault"
          },
          "valueName": null
         },
         "name": "vaults",
         "identifier": {
          "type": "Identifier",
          "name": "vaults"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "LockDataLibrary.LockData"
         },
         "name": "lockData",
         "identifier": {
          "type": "Identifier",
          "name": "lockData"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "validateVaultId",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "<=",
            "left": {
             "type": "Identifier",
             "name": "vaultId"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<=",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "vaultCount"
            },
            "right": {
             "type": "Identifier",
             "name": "vaultId"
            }
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "IPredyPool"
             },
             "memberName": "InvalidPairId"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "validate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "<=",
            "left": {
             "type": "Identifier",
             "name": "pairId"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<=",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "pairsCount"
            },
            "right": {
             "type": "Identifier",
             "name": "pairId"
            }
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "IPredyPool"
             },
             "memberName": "InvalidPairId"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "initializeLock",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "lockData"
            },
            "memberName": "locker"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "IPredyPool"
               },
               "memberName": "LockedBy"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "globalData"
                 },
                 "memberName": "lockData"
                },
                "memberName": "locker"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "lockData"
            },
            "memberName": "quoteReserve"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "ERC20"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "IndexAccess",
                  "base": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "globalData"
                   },
                   "memberName": "pairs"
                  },
                  "index": {
                   "type": "Identifier",
                   "name": "pairId"
                  }
                 },
                 "memberName": "quotePool"
                },
                "memberName": "token"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "balanceOf"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "this"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "lockData"
            },
            "memberName": "baseReserve"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "ERC20"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "IndexAccess",
                  "base": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "globalData"
                   },
                   "memberName": "pairs"
                  },
                  "index": {
                   "type": "Identifier",
                   "name": "pairId"
                  }
                 },
                 "memberName": "basePool"
                },
                "memberName": "token"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "balanceOf"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "this"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "lockData"
            },
            "memberName": "locker"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "lockData"
            },
            "memberName": "pairId"
           },
           "right": {
            "type": "Identifier",
            "name": "pairId"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "callSettlementCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "deltaBaseAmount",
         "identifier": {
          "type": "Identifier",
          "name": "deltaBaseAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "pairId",
            "identifier": {
             "type": "Identifier",
             "name": "pairId"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "lockData"
           },
           "memberName": "pairId"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IHooks"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "predySettlementCallback"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "pairs"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              "memberName": "quotePool"
             },
             "memberName": "token"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "pairs"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              "memberName": "basePool"
             },
             "memberName": "token"
            },
            {
             "type": "Identifier",
             "name": "settlementData"
            },
            {
             "type": "Identifier",
             "name": "deltaBaseAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "finalizeLock",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "paidQuote",
         "identifier": {
          "type": "Identifier",
          "name": "paidQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "paidBase",
         "identifier": {
          "type": "Identifier",
          "name": "paidBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "paidQuote"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "settle"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "globalData"
             },
             {
              "type": "BooleanLiteral",
              "value": true
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "paidBase"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "settle"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "globalData"
             },
             {
              "type": "BooleanLiteral",
              "value": false
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "UnaryOperation",
           "operator": "delete",
           "subExpression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "lockData"
           },
           "isPrefix": true
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "take",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteAsset",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteAsset"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "to",
         "identifier": {
          "type": "Identifier",
          "name": "to"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pairStatus",
            "identifier": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "lockData"
            },
            "memberName": "pairId"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "currency",
            "identifier": {
             "type": "Identifier",
             "name": "currency"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isQuoteAsset"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "currency"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "pairStatus"
                },
                "memberName": "quotePool"
               },
               "memberName": "token"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "currency"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "pairStatus"
                },
                "memberName": "basePool"
               },
               "memberName": "token"
              }
             }
            }
           ]
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "currency"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "safeTransfer"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "to"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "settle",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteAsset",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteAsset"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "paid",
         "identifier": {
          "type": "Identifier",
          "name": "paid"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "currency",
            "identifier": {
             "type": "Identifier",
             "name": "currency"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "reservesBefore",
            "identifier": {
             "type": "Identifier",
             "name": "reservesBefore"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isQuoteAsset"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "currency"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "globalData"
                  },
                  "memberName": "pairs"
                 },
                 "index": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "globalData"
                   },
                   "memberName": "lockData"
                  },
                  "memberName": "pairId"
                 }
                },
                "memberName": "quotePool"
               },
               "memberName": "token"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "reservesBefore"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "lockData"
               },
               "memberName": "quoteReserve"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "currency"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "globalData"
                  },
                  "memberName": "pairs"
                 },
                 "index": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "globalData"
                   },
                   "memberName": "lockData"
                  },
                  "memberName": "pairId"
                 }
                },
                "memberName": "basePool"
               },
               "memberName": "token"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "reservesBefore"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "lockData"
               },
               "memberName": "baseReserve"
              }
             }
            }
           ]
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "reserveAfter",
            "identifier": {
             "type": "Identifier",
             "name": "reserveAfter"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "currency"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "balanceOf"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isQuoteAsset"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "lockData"
               },
               "memberName": "quoteReserve"
              },
              "right": {
               "type": "Identifier",
               "name": "reserveAfter"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "lockData"
               },
               "memberName": "baseReserve"
              },
              "right": {
               "type": "Identifier",
               "name": "reserveAfter"
              }
             }
            }
           ]
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "paid"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "-",
            "left": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "reserveAfter"
              },
              "memberName": "toInt256"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "reservesBefore"
              },
              "memberName": "toInt256"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/tokenization/SupplyToken.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/ISupplyToken.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/ISupplyToken.sol",
      "parts": [
       "../interfaces/ISupplyToken.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISupplyToken",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISupplyToken"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "SupplyToken",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ISupplyToken"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_controller",
         "identifier": {
          "type": "Identifier",
          "name": "_controller"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyController",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "Identifier",
              "name": "_controller"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "msg"
              },
              "memberName": "sender"
             }
            },
            {
             "type": "StringLiteral",
             "value": "ST0",
             "parts": [
              "ST0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "controller",
         "identifier": {
          "type": "Identifier",
          "name": "controller"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "_name",
         "identifier": {
          "type": "Identifier",
          "name": "_name"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "_symbol",
         "identifier": {
          "type": "Identifier",
          "name": "_symbol"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "__decimals",
         "identifier": {
          "type": "Identifier",
          "name": "__decimals"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_controller"
           },
           "right": {
            "type": "Identifier",
            "name": "controller"
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "ERC20",
         "arguments": [
          {
           "type": "Identifier",
           "name": "_name"
          },
          {
           "type": "Identifier",
           "name": "_symbol"
          },
          {
           "type": "Identifier",
           "name": "__decimals"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "mint",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "account",
         "identifier": {
          "type": "Identifier",
          "name": "account"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_mint"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "account"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyController",
         "arguments": null
        }
       ],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": true,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "burn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "account",
         "identifier": {
          "type": "Identifier",
          "name": "account"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_burn"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "account"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyController",
         "arguments": null
        }
       ],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": true,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/settlements/UniswapSettlement.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-periphery/contracts/interfaces/ISwapRouter.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-periphery/contracts/interfaces/ISwapRouter.sol",
      "parts": [
       "@uniswap/v3-periphery/contracts/interfaces/ISwapRouter.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISwapRouter",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISwapRouter"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-periphery/contracts/interfaces/IQuoterV2.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-periphery/contracts/interfaces/IQuoterV2.sol",
      "parts": [
       "@uniswap/v3-periphery/contracts/interfaces/IQuoterV2.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IQuoterV2",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IQuoterV2"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/ISettlement.sol",
      "parts": [
       "../interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "UniswapSettlement",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ISettlement"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ISwapRouter"
         },
         "name": "_swapRouter",
         "identifier": {
          "type": "Identifier",
          "name": "_swapRouter"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IQuoterV2"
         },
         "name": "_quoterV2",
         "identifier": {
          "type": "Identifier",
          "name": "_quoterV2"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "swapRouterAddress",
         "identifier": {
          "type": "Identifier",
          "name": "swapRouterAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoterAddress",
         "identifier": {
          "type": "Identifier",
          "name": "quoterAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_swapRouter"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "ISwapRouter"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "swapRouterAddress"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_quoterV2"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "IQuoterV2"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "quoterAddress"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "swapExactIn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "data",
         "identifier": {
          "type": "Identifier",
          "name": "data"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountIn",
         "identifier": {
          "type": "Identifier",
          "name": "amountIn"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountOutMinimum",
         "identifier": {
          "type": "Identifier",
          "name": "amountOutMinimum"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "recipient",
         "identifier": {
          "type": "Identifier",
          "name": "recipient"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountOut",
         "identifier": {
          "type": "Identifier",
          "name": "amountOut"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "baseToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "safeTransferFrom"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "amountIn"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "baseToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "approve"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "_swapRouter"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "amountIn"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "amountOut"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_swapRouter"
             },
             "memberName": "exactInput"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "ISwapRouter"
               },
               "memberName": "ExactInputParams"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "data"
               },
               {
                "type": "Identifier",
                "name": "recipient"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "block"
                },
                "memberName": "timestamp"
               },
               {
                "type": "Identifier",
                "name": "amountIn"
               },
               {
                "type": "Identifier",
                "name": "amountOutMinimum"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "swapExactOut",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "data",
         "identifier": {
          "type": "Identifier",
          "name": "data"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountOut",
         "identifier": {
          "type": "Identifier",
          "name": "amountOut"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountInMaximum",
         "identifier": {
          "type": "Identifier",
          "name": "amountInMaximum"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "recipient",
         "identifier": {
          "type": "Identifier",
          "name": "recipient"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountIn",
         "identifier": {
          "type": "Identifier",
          "name": "amountIn"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "quoteToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "safeTransferFrom"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "amountInMaximum"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "quoteToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "approve"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "_swapRouter"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "amountInMaximum"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "amountIn"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_swapRouter"
             },
             "memberName": "exactOutput"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "ISwapRouter"
               },
               "memberName": "ExactOutputParams"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "data"
               },
               {
                "type": "Identifier",
                "name": "recipient"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "block"
                },
                "memberName": "timestamp"
               },
               {
                "type": "Identifier",
                "name": "amountOut"
               },
               {
                "type": "Identifier",
                "name": "amountInMaximum"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "amountInMaximum"
           },
           "right": {
            "type": "Identifier",
            "name": "amountIn"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "Identifier",
                 "name": "amountInMaximum"
                },
                "right": {
                 "type": "Identifier",
                 "name": "amountIn"
                }
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteSwapExactIn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "data",
         "identifier": {
          "type": "Identifier",
          "name": "data"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountIn",
         "identifier": {
          "type": "Identifier",
          "name": "amountIn"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountOut",
         "identifier": {
          "type": "Identifier",
          "name": "amountOut"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "amountOut"
             },
             null,
             null,
             null
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_quoterV2"
             },
             "memberName": "quoteExactInput"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "data"
             },
             {
              "type": "Identifier",
              "name": "amountIn"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteSwapExactOut",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "data",
         "identifier": {
          "type": "Identifier",
          "name": "data"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountOut",
         "identifier": {
          "type": "Identifier",
          "name": "amountOut"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountIn",
         "identifier": {
          "type": "Identifier",
          "name": "amountIn"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "amountIn"
             },
             null,
             null,
             null
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_quoterV2"
             },
             "memberName": "quoteExactOutput"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "data"
             },
             {
              "type": "Identifier",
              "name": "amountOut"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/L2Decoder.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ContractDefinition",
     "name": "L2Decoder",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "decodeSpotOrderParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "args1",
         "identifier": {
          "type": "Identifier",
          "name": "args1"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "args2",
         "identifier": {
          "type": "Identifier",
          "name": "args2"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLimit",
         "identifier": {
          "type": "Identifier",
          "name": "isLimit"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "startTime",
         "identifier": {
          "type": "Identifier",
          "name": "startTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "endTime",
         "identifier": {
          "type": "Identifier",
          "name": "endTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "deadline",
         "identifier": {
          "type": "Identifier",
          "name": "deadline"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint128",
          "stateMutability": null
         },
         "name": "startAmount",
         "identifier": {
          "type": "Identifier",
          "name": "startAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint128",
          "stateMutability": null
         },
         "name": "endAmount",
         "identifier": {
          "type": "Identifier",
          "name": "endAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint32",
             "stateMutability": null
            },
            "name": "isLimitUint",
            "identifier": {
             "type": "Identifier",
             "name": "isLimitUint"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "deadline"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "args1",
                "arguments": []
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "startTime"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "64"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args1",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "endTime"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "128"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args1",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "isLimitUint"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "192"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args1",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFF"
               }
              ]
             }
            }
           ]
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "isLimitUint"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "isLimit"
              },
              "right": {
               "type": "BooleanLiteral",
               "value": true
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "isLimit"
              },
              "right": {
               "type": "BooleanLiteral",
               "value": false
              }
             }
            }
           ]
          }
         },
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "startAmount"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "args2",
                "arguments": []
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "endAmount"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "128"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args2",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"
               }
              ]
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "decodePerpOrderParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "args",
         "identifier": {
          "type": "Identifier",
          "name": "args"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "deadline",
         "identifier": {
          "type": "Identifier",
          "name": "deadline"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "leverage",
         "identifier": {
          "type": "Identifier",
          "name": "leverage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "deadline"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "args",
                "arguments": []
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "pairId"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "64"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "leverage"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "128"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFF"
               }
              ]
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "decodePerpOrderV3Params",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "args",
         "identifier": {
          "type": "Identifier",
          "name": "args"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "deadline",
         "identifier": {
          "type": "Identifier",
          "name": "deadline"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "leverage",
         "identifier": {
          "type": "Identifier",
          "name": "leverage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "reduceOnly",
         "identifier": {
          "type": "Identifier",
          "name": "reduceOnly"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "closePosition",
         "identifier": {
          "type": "Identifier",
          "name": "closePosition"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "side",
         "identifier": {
          "type": "Identifier",
          "name": "side"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint8",
             "stateMutability": null
            },
            "name": "reduceOnlyUint",
            "identifier": {
             "type": "Identifier",
             "name": "reduceOnlyUint"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint8",
             "stateMutability": null
            },
            "name": "closePositionUint",
            "identifier": {
             "type": "Identifier",
             "name": "closePositionUint"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint8",
             "stateMutability": null
            },
            "name": "sideUint",
            "identifier": {
             "type": "Identifier",
             "name": "sideUint"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "deadline"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "args",
                "arguments": []
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "pairId"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "64"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "leverage"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "128"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "reduceOnlyUint"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "136"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "closePositionUint"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "144"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "sideUint"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "152"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFF"
               }
              ]
             }
            }
           ]
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "reduceOnly"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "reduceOnlyUint"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "1",
             "subdenomination": null
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "closePosition"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "closePositionUint"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "1",
             "subdenomination": null
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "side"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "sideUint"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "1",
             "subdenomination": null
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/spot/SpotOrder.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/OrderInfoLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/OrderInfoLib.sol",
      "parts": [
       "../../libraries/orders/OrderInfoLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "OrderInfo",
       null
      ],
      [
       "OrderInfoLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "OrderInfo"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "OrderInfoLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/ResolvedOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/ResolvedOrder.sol",
      "parts": [
       "../../libraries/orders/ResolvedOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ResolvedOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ResolvedOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "StructDefinition",
     "name": "SpotOrder",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "OrderInfo"
       },
       "name": "info",
       "identifier": {
        "type": "Identifier",
        "name": "info"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "quoteToken",
       "identifier": {
        "type": "Identifier",
        "name": "quoteToken"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "baseToken",
       "identifier": {
        "type": "Identifier",
        "name": "baseToken"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "baseTokenAmount",
       "identifier": {
        "type": "Identifier",
        "name": "baseTokenAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "quoteTokenAmount",
       "identifier": {
        "type": "Identifier",
        "name": "quoteTokenAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "limitQuoteTokenAmount",
       "identifier": {
        "type": "Identifier",
        "name": "limitQuoteTokenAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes",
        "stateMutability": null
       },
       "name": "auctionData",
       "identifier": {
        "type": "Identifier",
        "name": "auctionData"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "SpotOrderLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "OrderInfo"
       },
       "libraryName": "OrderInfoLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "SPOT_ORDER_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "SPOT_ORDER_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "StringLiteral",
            "value": "SpotOrder(",
            "parts": [
             "SpotOrder("
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "OrderInfo info,",
            "parts": [
             "OrderInfo info,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "address quoteToken,",
            "parts": [
             "address quoteToken,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "address baseToken,",
            "parts": [
             "address baseToken,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "int256 baseTokenAmount,",
            "parts": [
             "int256 baseTokenAmount,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 quoteTokenAmount,",
            "parts": [
             "uint256 quoteTokenAmount,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 limitQuoteTokenAmount,",
            "parts": [
             "uint256 limitQuoteTokenAmount,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "bytes auctionData)",
            "parts": [
             "bytes auctionData)"
            ],
            "isUnicode": [
             false
            ]
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "MemberAccess",
         "expression": {
          "type": "Identifier",
          "name": "abi"
         },
         "memberName": "encodePacked"
        },
        "arguments": [
         {
          "type": "StringLiteral",
          "value": "SpotOrder(",
          "parts": [
           "SpotOrder("
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "OrderInfo info,",
          "parts": [
           "OrderInfo info,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "address quoteToken,",
          "parts": [
           "address quoteToken,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "address baseToken,",
          "parts": [
           "address baseToken,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "int256 baseTokenAmount,",
          "parts": [
           "int256 baseTokenAmount,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 quoteTokenAmount,",
          "parts": [
           "uint256 quoteTokenAmount,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 limitQuoteTokenAmount,",
          "parts": [
           "uint256 limitQuoteTokenAmount,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "bytes auctionData)",
          "parts": [
           "bytes auctionData)"
          ],
          "isUnicode": [
           false
          ]
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "ORDER_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "ORDER_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "Identifier",
            "name": "SPOT_ORDER_TYPE"
           },
           {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "OrderInfoLib"
            },
            "memberName": "ORDER_INFO_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "MemberAccess",
         "expression": {
          "type": "Identifier",
          "name": "abi"
         },
         "memberName": "encodePacked"
        },
        "arguments": [
         {
          "type": "Identifier",
          "name": "SPOT_ORDER_TYPE"
         },
         {
          "type": "MemberAccess",
          "expression": {
           "type": "Identifier",
           "name": "OrderInfoLib"
          },
          "memberName": "ORDER_INFO_TYPE"
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "SPOT_ORDER_TYPE_HASH",
         "identifier": {
          "type": "Identifier",
          "name": "SPOT_ORDER_TYPE_HASH"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "Identifier",
           "name": "keccak256"
          },
          "arguments": [
           {
            "type": "Identifier",
            "name": "ORDER_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "Identifier",
         "name": "keccak256"
        },
        "arguments": [
         {
          "type": "Identifier",
          "name": "ORDER_TYPE"
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "TOKEN_PERMISSIONS_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "TOKEN_PERMISSIONS_TYPE"
         },
         "expression": {
          "type": "StringLiteral",
          "value": "TokenPermissions(address token,uint256 amount)",
          "parts": [
           "TokenPermissions(address token,uint256 amount)"
          ],
          "isUnicode": [
           false
          ]
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "StringLiteral",
        "value": "TokenPermissions(address token,uint256 amount)",
        "parts": [
         "TokenPermissions(address token,uint256 amount)"
        ],
        "isUnicode": [
         false
        ]
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "PERMIT2_ORDER_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "PERMIT2_ORDER_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "ElementaryTypeName",
           "name": "string",
           "stateMutability": null
          },
          "arguments": [
           {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "abi"
             },
             "memberName": "encodePacked"
            },
            "arguments": [
             {
              "type": "StringLiteral",
              "value": "SpotOrder witness)",
              "parts": [
               "SpotOrder witness)"
              ],
              "isUnicode": [
               false
              ]
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "OrderInfoLib"
              },
              "memberName": "ORDER_INFO_TYPE"
             },
             {
              "type": "Identifier",
              "name": "SPOT_ORDER_TYPE"
             },
             {
              "type": "Identifier",
              "name": "TOKEN_PERMISSIONS_TYPE"
             }
            ],
            "names": [],
            "identifiers": []
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "ElementaryTypeName",
         "name": "string",
         "stateMutability": null
        },
        "arguments": [
         {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "StringLiteral",
            "value": "SpotOrder witness)",
            "parts": [
             "SpotOrder witness)"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "OrderInfoLib"
            },
            "memberName": "ORDER_INFO_TYPE"
           },
           {
            "type": "Identifier",
            "name": "SPOT_ORDER_TYPE"
           },
           {
            "type": "Identifier",
            "name": "TOKEN_PERMISSIONS_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "FunctionDefinition",
       "name": "hash",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SpotOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "keccak256"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encode"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "SPOT_ORDER_TYPE_HASH"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "info"
                },
                "memberName": "hash"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "quoteToken"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "baseToken"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "baseTokenAmount"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "quoteTokenAmount"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "limitQuoteTokenAmount"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "keccak256"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "auctionData"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "resolve",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SpotOrder"
         },
         "name": "spotOrder",
         "identifier": {
          "type": "Identifier",
          "name": "spotOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "amount",
            "identifier": {
             "type": "Identifier",
             "name": "amount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "token",
            "identifier": {
             "type": "Identifier",
             "name": "token"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "spotOrder"
            },
            "memberName": "baseTokenAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "token"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "spotOrder"
               },
               "memberName": "quoteToken"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "amount"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "spotOrder"
               },
               "memberName": "quoteTokenAmount"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "token"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "spotOrder"
               },
               "memberName": "baseToken"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "amount"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "UnaryOperation",
                 "operator": "-",
                 "subExpression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "spotOrder"
                  },
                  "memberName": "baseTokenAmount"
                 },
                 "isPrefix": true
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ResolvedOrder"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "spotOrder"
             },
             "memberName": "info"
            },
            {
             "type": "Identifier",
             "name": "token"
            },
            {
             "type": "Identifier",
             "name": "amount"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "hash"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "spotOrder"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/spot/SpotMarketL2.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "./SpotMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./SpotMarket.sol",
      "parts": [
       "./SpotMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SpotMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SpotMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./SpotOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./SpotOrder.sol",
      "parts": [
       "./SpotOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SpotOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SpotOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/OrderInfoLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/OrderInfoLib.sol",
      "parts": [
       "../../libraries/orders/OrderInfoLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "OrderInfo",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "OrderInfo"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/math/Math.sol",
      "parts": [
       "../../libraries/math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Math",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Math"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../L2Decoder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../L2Decoder.sol",
      "parts": [
       "../L2Decoder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "L2Decoder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "L2Decoder"
       },
       null
      ]
     ]
    },
    {
     "type": "StructDefinition",
     "name": "SpotMarketOrder",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "trader",
       "identifier": {
        "type": "Identifier",
        "name": "trader"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "nonce",
       "identifier": {
        "type": "Identifier",
        "name": "nonce"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "deadline",
       "identifier": {
        "type": "Identifier",
        "name": "deadline"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "quoteToken",
       "identifier": {
        "type": "Identifier",
        "name": "quoteToken"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "baseToken",
       "identifier": {
        "type": "Identifier",
        "name": "baseToken"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "baseTokenAmount",
       "identifier": {
        "type": "Identifier",
        "name": "baseTokenAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "quoteTokenAmount",
       "identifier": {
        "type": "Identifier",
        "name": "quoteTokenAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes",
        "stateMutability": null
       },
       "name": "auctionData",
       "identifier": {
        "type": "Identifier",
        "name": "auctionData"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "StructDefinition",
     "name": "SpotLimitOrder",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "trader",
       "identifier": {
        "type": "Identifier",
        "name": "trader"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "nonce",
       "identifier": {
        "type": "Identifier",
        "name": "nonce"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "deadline",
       "identifier": {
        "type": "Identifier",
        "name": "deadline"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "quoteToken",
       "identifier": {
        "type": "Identifier",
        "name": "quoteToken"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "baseToken",
       "identifier": {
        "type": "Identifier",
        "name": "baseToken"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "baseTokenAmount",
       "identifier": {
        "type": "Identifier",
        "name": "baseTokenAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "quoteTokenAmount",
       "identifier": {
        "type": "Identifier",
        "name": "quoteTokenAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "limitQuoteTokenAmount",
       "identifier": {
        "type": "Identifier",
        "name": "limitQuoteTokenAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "SpotMarketL2",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "SpotMarket"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "permit2Address",
         "identifier": {
          "type": "Identifier",
          "name": "permit2Address"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "default",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "SpotMarket",
         "arguments": [
          {
           "type": "Identifier",
           "name": "permit2Address"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "executeMarketOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SpotMarketOrder"
         },
         "name": "marketOrder",
         "identifier": {
          "type": "Identifier",
          "name": "marketOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "SpotOrder"
            },
            "name": "order",
            "identifier": {
             "type": "Identifier",
             "name": "order"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "SpotOrder"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "OrderInfo"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "marketOrder"
               },
               "memberName": "trader"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "marketOrder"
               },
               "memberName": "nonce"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "marketOrder"
               },
               "memberName": "deadline"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "marketOrder"
             },
             "memberName": "quoteToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "marketOrder"
             },
             "memberName": "baseToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "marketOrder"
             },
             "memberName": "baseTokenAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "marketOrder"
             },
             "memberName": "quoteTokenAmount"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "marketOrder"
             },
             "memberName": "auctionData"
            }
           ],
           "names": [
            "info",
            "quoteToken",
            "baseToken",
            "baseTokenAmount",
            "quoteTokenAmount",
            "limitQuoteTokenAmount",
            "auctionData"
           ],
           "identifiers": [
            {
             "type": "Identifier",
             "name": "info"
            },
            {
             "type": "Identifier",
             "name": "quoteToken"
            },
            {
             "type": "Identifier",
             "name": "baseToken"
            },
            {
             "type": "Identifier",
             "name": "baseTokenAmount"
            },
            {
             "type": "Identifier",
             "name": "quoteTokenAmount"
            },
            {
             "type": "Identifier",
             "name": "limitQuoteTokenAmount"
            },
            {
             "type": "Identifier",
             "name": "auctionData"
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_executeOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "order"
            },
            {
             "type": "Identifier",
             "name": "sig"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "executeLimitOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SpotLimitOrder"
         },
         "name": "limitOrder",
         "identifier": {
          "type": "Identifier",
          "name": "limitOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "SpotOrder"
            },
            "name": "order",
            "identifier": {
             "type": "Identifier",
             "name": "order"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "SpotOrder"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "OrderInfo"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "limitOrder"
               },
               "memberName": "trader"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "limitOrder"
               },
               "memberName": "nonce"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "limitOrder"
               },
               "memberName": "deadline"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "limitOrder"
             },
             "memberName": "quoteToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "limitOrder"
             },
             "memberName": "baseToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "limitOrder"
             },
             "memberName": "baseTokenAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "limitOrder"
             },
             "memberName": "quoteTokenAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "limitOrder"
             },
             "memberName": "limitQuoteTokenAmount"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "bytes",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "",
               "parts": [
                ""
               ],
               "isUnicode": [
                false
               ]
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [
            "info",
            "quoteToken",
            "baseToken",
            "baseTokenAmount",
            "quoteTokenAmount",
            "limitQuoteTokenAmount",
            "auctionData"
           ],
           "identifiers": [
            {
             "type": "Identifier",
             "name": "info"
            },
            {
             "type": "Identifier",
             "name": "quoteToken"
            },
            {
             "type": "Identifier",
             "name": "baseToken"
            },
            {
             "type": "Identifier",
             "name": "baseTokenAmount"
            },
            {
             "type": "Identifier",
             "name": "quoteTokenAmount"
            },
            {
             "type": "Identifier",
             "name": "limitQuoteTokenAmount"
            },
            {
             "type": "Identifier",
             "name": "auctionData"
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_executeOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "order"
            },
            {
             "type": "Identifier",
             "name": "sig"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/spot/SpotMarket.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-periphery/contracts/libraries/TransferHelper.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-periphery/contracts/libraries/TransferHelper.sol",
      "parts": [
       "@uniswap/v3-periphery/contracts/libraries/TransferHelper.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "TransferHelper",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "TransferHelper"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/permit2/src/interfaces/IPermit2.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/permit2/src/interfaces/IPermit2.sol",
      "parts": [
       "@uniswap/permit2/src/interfaces/IPermit2.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPermit2",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPermit2"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/auth/Owned.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/auth/Owned.sol",
      "parts": [
       "@solmate/src/auth/Owned.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Owned",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Owned"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeCast",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeCast"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/ISettlement.sol",
      "parts": [
       "../../interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IFillerMarket.sol",
      "parts": [
       "../../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/ISpotMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/ISpotMarket.sol",
      "parts": [
       "../../interfaces/ISpotMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISpotMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISpotMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/Permit2Lib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/Permit2Lib.sol",
      "parts": [
       "../../libraries/orders/Permit2Lib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Permit2Lib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Permit2Lib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/Constants.sol",
      "parts": [
       "../../libraries/Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/math/Math.sol",
      "parts": [
       "../../libraries/math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Math",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Math"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/ResolvedOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/ResolvedOrder.sol",
      "parts": [
       "../../libraries/orders/ResolvedOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ResolvedOrderLib",
       null
      ],
      [
       "ResolvedOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ResolvedOrderLib"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "ResolvedOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./SpotOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./SpotOrder.sol",
      "parts": [
       "./SpotOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SpotOrderLib",
       null
      ],
      [
       "SpotOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SpotOrderLib"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "SpotOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/DecayLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/DecayLib.sol",
      "parts": [
       "../../libraries/orders/DecayLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DecayLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DecayLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "SpotMarket",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "IFillerMarket"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ISpotMarket"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "Owned"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ResolvedOrder"
       },
       "libraryName": "ResolvedOrderLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "SpotOrder"
       },
       "libraryName": "SpotOrderLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ResolvedOrder"
       },
       "libraryName": "Permit2Lib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "Math",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "SafeCast",
       "functions": [],
       "operators": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "RequiredQuoteAmountExceedsMax",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "BaseCurrencyNotSettled",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "LimitOrderDoesNotMatch",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "MarketOrderDoesNotMatch",
       "parameters": []
      },
      {
       "type": "StructDefinition",
       "name": "LockData",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "AuctionParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "startAmount",
         "identifier": {
          "type": "Identifier",
          "name": "startAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "endAmount",
         "identifier": {
          "type": "Identifier",
          "name": "endAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "startTime",
         "identifier": {
          "type": "Identifier",
          "name": "startTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "endTime",
         "identifier": {
          "type": "Identifier",
          "name": "endTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "EventDefinition",
       "name": "SpotTraded",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "filler",
         "identifier": {
          "type": "Identifier",
          "name": "filler"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmount",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "validatorAddress",
         "identifier": {
          "type": "Identifier",
          "name": "validatorAddress"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPermit2"
         },
         "name": "_permit2",
         "identifier": {
          "type": "Identifier",
          "name": "_permit2"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "LockData"
         },
         "name": "lockData",
         "identifier": {
          "type": "Identifier",
          "name": "lockData"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "settlementContractAddress"
          },
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "bool",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "_whiteListedSettlements",
         "identifier": {
          "type": "Identifier",
          "name": "_whiteListedSettlements"
         },
         "expression": null,
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "permit2Address",
         "identifier": {
          "type": "Identifier",
          "name": "permit2Address"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_permit2"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "IPermit2"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "permit2Address"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "Owned",
         "arguments": [
          {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "msg"
           },
           "memberName": "sender"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateWhitelistSettlement",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "settlementContractAddress",
         "identifier": {
          "type": "Identifier",
          "name": "settlementContractAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isEnabled",
         "identifier": {
          "type": "Identifier",
          "name": "isEnabled"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "_whiteListedSettlements"
            },
            "index": {
             "type": "Identifier",
             "name": "settlementContractAddress"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "isEnabled"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "executeOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SignedOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "SpotOrder"
            },
            "name": "spotOrder",
            "identifier": {
             "type": "Identifier",
             "name": "spotOrder"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "order"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "SpotOrder"
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_executeOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "spotOrder"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "sig"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_executeOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SpotOrder"
         },
         "name": "spotOrder",
         "identifier": {
          "type": "Identifier",
          "name": "spotOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "ResolvedOrder"
            },
            "name": "resolvedOrder",
            "identifier": {
             "type": "Identifier",
             "name": "resolvedOrder"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SpotOrderLib"
            },
            "memberName": "resolve"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "spotOrder"
            },
            {
             "type": "Identifier",
             "name": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_verifyOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "resolvedOrder"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "baseTokenAmount",
            "identifier": {
             "type": "Identifier",
             "name": "baseTokenAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "spotOrder"
           },
           "memberName": "baseTokenAmount"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "quoteTokenAmount"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "_swap"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "spotOrder"
             },
             {
              "type": "Identifier",
              "name": "settlementParams"
             },
             {
              "type": "Identifier",
              "name": "baseTokenAmount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_validateSwap"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "spotOrder"
             },
             "memberName": "baseTokenAmount"
            },
            {
             "type": "Identifier",
             "name": "quoteTokenAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "spotOrder"
             },
             "memberName": "limitQuoteTokenAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "spotOrder"
             },
             "memberName": "auctionData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "quoteTokenAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "TransferHelper"
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "spotOrder"
                },
                "memberName": "quoteToken"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "spotOrder"
                 },
                 "memberName": "info"
                },
                "memberName": "trader"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteTokenAmount"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "quoteTokenAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "VariableDeclarationStatement",
              "variables": [
               {
                "type": "VariableDeclaration",
                "typeName": {
                 "type": "ElementaryTypeName",
                 "name": "int256",
                 "stateMutability": null
                },
                "name": "diff",
                "identifier": {
                 "type": "Identifier",
                 "name": "diff"
                },
                "storageLocation": null,
                "isStateVar": false,
                "isIndexed": false,
                "expression": null
               }
              ],
              "initialValue": {
               "type": "BinaryOperation",
               "operator": "+",
               "left": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "spotOrder"
                  },
                  "memberName": "quoteTokenAmount"
                 },
                 "memberName": "toInt256"
                },
                "arguments": [],
                "names": [],
                "identifiers": []
               },
               "right": {
                "type": "Identifier",
                "name": "quoteTokenAmount"
               }
              }
             },
             {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "diff"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "RevertStatement",
                 "revertCall": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "RequiredQuoteAmountExceedsMax"
                  },
                  "arguments": [],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             },
             {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": ">",
               "left": {
                "type": "Identifier",
                "name": "diff"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "TransferHelper"
                   },
                   "memberName": "safeTransfer"
                  },
                  "arguments": [
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "spotOrder"
                    },
                    "memberName": "quoteToken"
                   },
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "spotOrder"
                     },
                     "memberName": "info"
                    },
                    "memberName": "trader"
                   },
                   {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "ElementaryTypeName",
                     "name": "uint256",
                     "stateMutability": null
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "diff"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "baseTokenAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "TransferHelper"
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "spotOrder"
                },
                "memberName": "baseToken"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "spotOrder"
                 },
                 "memberName": "info"
                },
                "memberName": "trader"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "baseTokenAmount"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "SpotTraded"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "spotOrder"
              },
              "memberName": "info"
             },
             "memberName": "trader"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "spotOrder"
             },
             "memberName": "baseToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "spotOrder"
             },
             "memberName": "quoteToken"
            },
            {
             "type": "Identifier",
             "name": "baseTokenAmount"
            },
            {
             "type": "Identifier",
             "name": "quoteTokenAmount"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint160",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Conditional",
                 "condition": {
                  "type": "BinaryOperation",
                  "operator": ">",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "spotOrder"
                   },
                   "memberName": "limitQuoteTokenAmount"
                  },
                  "right": {
                   "type": "NumberLiteral",
                   "number": "0",
                   "subdenomination": null
                  }
                 },
                 "trueExpression": {
                  "type": "NumberLiteral",
                  "number": "1",
                  "subdenomination": null
                 },
                 "falseExpression": {
                  "type": "NumberLiteral",
                  "number": "2",
                  "subdenomination": null
                 }
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_validateSwap",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "limitPrice",
         "identifier": {
          "type": "Identifier",
          "name": "limitPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "auctionData",
         "identifier": {
          "type": "Identifier",
          "name": "auctionData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "limitPrice"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "UnaryOperation",
              "operator": "!",
              "subExpression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "_validateMarketOrder"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "tradeAmount"
                },
                {
                 "type": "Identifier",
                 "name": "quoteTokenAmount"
                },
                {
                 "type": "Identifier",
                 "name": "auctionData"
                }
               ],
               "names": [],
               "identifiers": []
              },
              "isPrefix": true
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "RevertStatement",
                "revertCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "MarketOrderDoesNotMatch"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "UnaryOperation",
              "operator": "!",
              "subExpression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "_validateLimitPrice"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "tradeAmount"
                },
                {
                 "type": "Identifier",
                 "name": "quoteTokenAmount"
                },
                {
                 "type": "Identifier",
                 "name": "limitPrice"
                }
               ],
               "names": [],
               "identifiers": []
              },
              "isPrefix": true
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "RevertStatement",
                "revertCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "LimitOrderDoesNotMatch"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_validateMarketOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "baseTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "auctionData",
         "identifier": {
          "type": "Identifier",
          "name": "auctionData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "AuctionParams"
            },
            "name": "auctionParams",
            "identifier": {
             "type": "Identifier",
             "name": "auctionParams"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "auctionData"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "AuctionParams"
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "decayedAmount",
            "identifier": {
             "type": "Identifier",
             "name": "decayedAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "DecayLib"
            },
            "memberName": "decay"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "startAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "endAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "startTime"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "endTime"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "baseTokenAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "quoteTokenAmountAbs",
            "identifier": {
             "type": "Identifier",
             "name": "quoteTokenAmountAbs"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Math"
            },
            "memberName": "abs"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quoteTokenAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "baseTokenAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "decayedAmount"
            },
            "right": {
             "type": "Identifier",
             "name": "quoteTokenAmountAbs"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "baseTokenAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "decayedAmount"
            },
            "right": {
             "type": "Identifier",
             "name": "quoteTokenAmountAbs"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BooleanLiteral",
           "value": true
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_validateLimitPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "baseTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "limitQuoteTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "limitQuoteTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "baseTokenAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "quoteTokenAmountAbs",
            "identifier": {
             "type": "Identifier",
             "name": "quoteTokenAmountAbs"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Math"
            },
            "memberName": "abs"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quoteTokenAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "baseTokenAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "limitQuoteTokenAmount"
            },
            "right": {
             "type": "Identifier",
             "name": "quoteTokenAmountAbs"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "baseTokenAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "limitQuoteTokenAmount"
            },
            "right": {
             "type": "Identifier",
             "name": "quoteTokenAmountAbs"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BooleanLiteral",
           "value": true
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "_swap",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SpotOrder"
         },
         "name": "spotOrder",
         "identifier": {
          "type": "Identifier",
          "name": "spotOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "totalBaseAmount",
         "identifier": {
          "type": "Identifier",
          "name": "totalBaseAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "quoteReserve",
            "identifier": {
             "type": "Identifier",
             "name": "quoteReserve"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "spotOrder"
               },
               "memberName": "quoteToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "balanceOf"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "baseReserve",
            "identifier": {
             "type": "Identifier",
             "name": "baseReserve"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "spotOrder"
               },
               "memberName": "baseToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "balanceOf"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "lockData"
            },
            "memberName": "quoteToken"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "spotOrder"
            },
            "memberName": "quoteToken"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "lockData"
            },
            "memberName": "baseToken"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "spotOrder"
            },
            "memberName": "baseToken"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_execSettlement"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "spotOrder"
             },
             "memberName": "quoteToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "spotOrder"
             },
             "memberName": "baseToken"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            },
            {
             "type": "UnaryOperation",
             "operator": "-",
             "subExpression": {
              "type": "Identifier",
              "name": "totalBaseAmount"
             },
             "isPrefix": true
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "afterQuoteReserve",
            "identifier": {
             "type": "Identifier",
             "name": "afterQuoteReserve"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "spotOrder"
               },
               "memberName": "quoteToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "balanceOf"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "afterBaseReserve",
            "identifier": {
             "type": "Identifier",
             "name": "afterBaseReserve"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "spotOrder"
               },
               "memberName": "baseToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "balanceOf"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "Identifier",
             "name": "totalBaseAmount"
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "baseReserve"
              },
              "memberName": "toInt256"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "afterBaseReserve"
             },
             "memberName": "toInt256"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "BaseCurrencyNotSettled"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "afterQuoteReserve"
             },
             "memberName": "toInt256"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "quoteReserve"
             },
             "memberName": "toInt256"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_execSettlement",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "fee"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransferFrom"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "this"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "settlementParams"
                   },
                   "memberName": "fee"
                  },
                  "isPrefix": true
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "baseAmountDelta"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_execSell"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "quoteToken"
               },
               {
                "type": "Identifier",
                "name": "baseToken"
               },
               {
                "type": "Identifier",
                "name": "settlementParams"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "settlementParams"
                },
                "memberName": "price"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "baseAmountDelta"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "baseAmountDelta"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "_execBuy"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "quoteToken"
                },
                {
                 "type": "Identifier",
                 "name": "baseToken"
                },
                {
                 "type": "Identifier",
                 "name": "settlementParams"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "settlementParams"
                 },
                 "memberName": "price"
                },
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "UnaryOperation",
                   "operator": "-",
                   "subExpression": {
                    "type": "Identifier",
                    "name": "baseAmountDelta"
                   },
                   "isPrefix": true
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "fee"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "settlementParams"
                  },
                  "memberName": "fee"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_execSell",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sellAmount",
         "identifier": {
          "type": "Identifier",
          "name": "sellAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "contractAddress"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "sellAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "baseToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "Identifier",
                "name": "sellAmount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransferFrom"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "this"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "quoteAmount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "baseToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "approve"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "contractAddress"
            },
            {
             "type": "Identifier",
             "name": "sellAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "quoteAmountFromUni",
            "identifier": {
             "type": "Identifier",
             "name": "quoteAmountFromUni"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ISettlement"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "swapExactIn"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quoteToken"
            },
            {
             "type": "Identifier",
             "name": "baseToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "encodedData"
            },
            {
             "type": "Identifier",
             "name": "sellAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "maxQuoteAmount"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "price"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "sellAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "quoteAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "quoteAmountFromUni"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "Identifier",
                    "name": "ERC20"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "quoteToken"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  "memberName": "safeTransferFrom"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "msg"
                   },
                   "memberName": "sender"
                  },
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "Identifier",
                    "name": "address"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "this"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "Identifier",
                    "name": "quoteAmount"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "quoteAmountFromUni"
                   }
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": ">",
               "left": {
                "type": "Identifier",
                "name": "quoteAmountFromUni"
               },
               "right": {
                "type": "Identifier",
                "name": "quoteAmount"
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "ERC20"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "quoteToken"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   "memberName": "safeTransfer"
                  },
                  "arguments": [
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "msg"
                    },
                    "memberName": "sender"
                   },
                   {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "Identifier",
                     "name": "quoteAmountFromUni"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "quoteAmount"
                    }
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_execBuy",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "buyAmount",
         "identifier": {
          "type": "Identifier",
          "name": "buyAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "contractAddress"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "buyAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "Identifier",
                "name": "quoteAmount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "baseToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransferFrom"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "this"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "buyAmount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "quoteToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "approve"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "contractAddress"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "maxQuoteAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "quoteAmountToUni",
            "identifier": {
             "type": "Identifier",
             "name": "quoteAmountToUni"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ISettlement"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "swapExactOut"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quoteToken"
            },
            {
             "type": "Identifier",
             "name": "baseToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "encodedData"
            },
            {
             "type": "Identifier",
             "name": "buyAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "maxQuoteAmount"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "price"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "buyAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "quoteAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "quoteAmountToUni"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "Identifier",
                    "name": "ERC20"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "quoteToken"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  "memberName": "safeTransfer"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "msg"
                   },
                   "memberName": "sender"
                  },
                  {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "Identifier",
                    "name": "quoteAmount"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "quoteAmountToUni"
                   }
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": ">",
               "left": {
                "type": "Identifier",
                "name": "quoteAmountToUni"
               },
               "right": {
                "type": "Identifier",
                "name": "quoteAmount"
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "ERC20"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "quoteToken"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   "memberName": "safeTransferFrom"
                  },
                  "arguments": [
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "msg"
                    },
                    "memberName": "sender"
                   },
                   {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "address"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "this"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "Identifier",
                     "name": "quoteAmountToUni"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "quoteAmount"
                    }
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteSettlement",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "quoteAmount",
            "identifier": {
             "type": "Identifier",
             "name": "quoteAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "UnaryOperation",
           "operator": "-",
           "subExpression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "fee"
           },
           "isPrefix": true
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "baseAmountDelta"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "Identifier",
               "name": "quoteAmount"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "_quoteSell"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "settlementParams"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "settlementParams"
                 },
                 "memberName": "price"
                },
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "baseAmountDelta"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "baseAmountDelta"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "+=",
               "left": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "_quoteBuy"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "settlementParams"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "settlementParams"
                  },
                  "memberName": "price"
                 },
                 {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "ElementaryTypeName",
                   "name": "uint256",
                   "stateMutability": null
                  },
                  "arguments": [
                   {
                    "type": "UnaryOperation",
                    "operator": "-",
                    "subExpression": {
                     "type": "Identifier",
                     "name": "baseAmountDelta"
                    },
                    "isPrefix": true
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_revertQuoteAmount"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quoteAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_quoteSell",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sellAmount",
         "identifier": {
          "type": "Identifier",
          "name": "sellAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "contractAddress"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "sellAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "memberName": "toInt256"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "quoteAmountFromUni",
            "identifier": {
             "type": "Identifier",
             "name": "quoteAmountFromUni"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ISettlement"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "quoteSwapExactIn"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "encodedData"
            },
            {
             "type": "Identifier",
             "name": "sellAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "price"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "quoteAmountFromUni"
               },
               "memberName": "toInt256"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "sellAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "memberName": "toInt256"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_quoteBuy",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "buyAmount",
         "identifier": {
          "type": "Identifier",
          "name": "buyAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "contractAddress"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "buyAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "UnaryOperation",
              "operator": "-",
              "subExpression": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "quoteAmount"
                },
                "memberName": "toInt256"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              "isPrefix": true
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "quoteAmountToUni",
            "identifier": {
             "type": "Identifier",
             "name": "quoteAmountToUni"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ISettlement"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "quoteSwapExactOut"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "encodedData"
            },
            {
             "type": "Identifier",
             "name": "buyAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "price"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "UnaryOperation",
              "operator": "-",
              "subExpression": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "quoteAmountToUni"
                },
                "memberName": "toInt256"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              "isPrefix": true
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "buyAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "UnaryOperation",
              "operator": "-",
              "subExpression": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "quoteAmount"
                },
                "memberName": "toInt256"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              "isPrefix": true
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_verifyOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "order"
            },
            "memberName": "validate"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_permit2"
            },
            "memberName": "permitWitnessTransferFrom"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "toPermit"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "transferDetails"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "info"
             },
             "memberName": "trader"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "hash"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "SpotOrderLib"
             },
             "memberName": "PERMIT2_ORDER_TYPE"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_revertQuoteAmount",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyLocalDefinition",
             "names": [
              {
               "type": "Identifier",
               "name": "ptr"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "mload",
              "arguments": [
               {
                "type": "HexNumber",
                "value": "0x40"
               }
              ]
             }
            },
            {
             "type": "AssemblyCall",
             "functionName": "mstore",
             "arguments": [
              {
               "type": "AssemblyCall",
               "functionName": "ptr",
               "arguments": []
              },
              {
               "type": "AssemblyCall",
               "functionName": "quoteAmount",
               "arguments": []
              }
             ]
            },
            {
             "type": "AssemblyCall",
             "functionName": "revert",
             "arguments": [
              {
               "type": "AssemblyCall",
               "functionName": "ptr",
               "arguments": []
              },
              {
               "type": "DecimalNumber",
               "value": "32"
              }
             ]
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/perp/PerpOrderV3.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/OrderInfoLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/OrderInfoLib.sol",
      "parts": [
       "../../libraries/orders/OrderInfoLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "OrderInfo",
       null
      ],
      [
       "OrderInfoLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "OrderInfo"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "OrderInfoLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IFillerMarket.sol",
      "parts": [
       "../../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/ResolvedOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/ResolvedOrder.sol",
      "parts": [
       "../../libraries/orders/ResolvedOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ResolvedOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ResolvedOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "StructDefinition",
     "name": "PerpOrderV3",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "OrderInfo"
       },
       "name": "info",
       "identifier": {
        "type": "Identifier",
        "name": "info"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint64",
        "stateMutability": null
       },
       "name": "pairId",
       "identifier": {
        "type": "Identifier",
        "name": "pairId"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "entryTokenAddress",
       "identifier": {
        "type": "Identifier",
        "name": "entryTokenAddress"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "string",
        "stateMutability": null
       },
       "name": "side",
       "identifier": {
        "type": "Identifier",
        "name": "side"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "quantity",
       "identifier": {
        "type": "Identifier",
        "name": "quantity"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "marginAmount",
       "identifier": {
        "type": "Identifier",
        "name": "marginAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "limitPrice",
       "identifier": {
        "type": "Identifier",
        "name": "limitPrice"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "stopPrice",
       "identifier": {
        "type": "Identifier",
        "name": "stopPrice"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint8",
        "stateMutability": null
       },
       "name": "leverage",
       "identifier": {
        "type": "Identifier",
        "name": "leverage"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bool",
        "stateMutability": null
       },
       "name": "reduceOnly",
       "identifier": {
        "type": "Identifier",
        "name": "reduceOnly"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bool",
        "stateMutability": null
       },
       "name": "closePosition",
       "identifier": {
        "type": "Identifier",
        "name": "closePosition"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes",
        "stateMutability": null
       },
       "name": "auctionData",
       "identifier": {
        "type": "Identifier",
        "name": "auctionData"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PerpOrderV3Lib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "OrderInfo"
       },
       "libraryName": "OrderInfoLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "PERP_ORDER_V3_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "PERP_ORDER_V3_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "StringLiteral",
            "value": "PerpOrderV3(",
            "parts": [
             "PerpOrderV3("
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "OrderInfo info,",
            "parts": [
             "OrderInfo info,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint64 pairId,",
            "parts": [
             "uint64 pairId,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "address entryTokenAddress,",
            "parts": [
             "address entryTokenAddress,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "string side,",
            "parts": [
             "string side,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 quantity,",
            "parts": [
             "uint256 quantity,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 marginAmount,",
            "parts": [
             "uint256 marginAmount,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 limitPrice,",
            "parts": [
             "uint256 limitPrice,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 stopPrice,",
            "parts": [
             "uint256 stopPrice,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint8 leverage,",
            "parts": [
             "uint8 leverage,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "bool reduceOnly,",
            "parts": [
             "bool reduceOnly,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "bool closePosition,",
            "parts": [
             "bool closePosition,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "bytes auctionData)",
            "parts": [
             "bytes auctionData)"
            ],
            "isUnicode": [
             false
            ]
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "MemberAccess",
         "expression": {
          "type": "Identifier",
          "name": "abi"
         },
         "memberName": "encodePacked"
        },
        "arguments": [
         {
          "type": "StringLiteral",
          "value": "PerpOrderV3(",
          "parts": [
           "PerpOrderV3("
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "OrderInfo info,",
          "parts": [
           "OrderInfo info,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint64 pairId,",
          "parts": [
           "uint64 pairId,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "address entryTokenAddress,",
          "parts": [
           "address entryTokenAddress,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "string side,",
          "parts": [
           "string side,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 quantity,",
          "parts": [
           "uint256 quantity,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 marginAmount,",
          "parts": [
           "uint256 marginAmount,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 limitPrice,",
          "parts": [
           "uint256 limitPrice,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 stopPrice,",
          "parts": [
           "uint256 stopPrice,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint8 leverage,",
          "parts": [
           "uint8 leverage,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "bool reduceOnly,",
          "parts": [
           "bool reduceOnly,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "bool closePosition,",
          "parts": [
           "bool closePosition,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "bytes auctionData)",
          "parts": [
           "bytes auctionData)"
          ],
          "isUnicode": [
           false
          ]
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "ORDER_V3_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "ORDER_V3_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "Identifier",
            "name": "PERP_ORDER_V3_TYPE"
           },
           {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "OrderInfoLib"
            },
            "memberName": "ORDER_INFO_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "MemberAccess",
         "expression": {
          "type": "Identifier",
          "name": "abi"
         },
         "memberName": "encodePacked"
        },
        "arguments": [
         {
          "type": "Identifier",
          "name": "PERP_ORDER_V3_TYPE"
         },
         {
          "type": "MemberAccess",
          "expression": {
           "type": "Identifier",
           "name": "OrderInfoLib"
          },
          "memberName": "ORDER_INFO_TYPE"
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "PERP_ORDER_V3_TYPE_HASH",
         "identifier": {
          "type": "Identifier",
          "name": "PERP_ORDER_V3_TYPE_HASH"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "Identifier",
           "name": "keccak256"
          },
          "arguments": [
           {
            "type": "Identifier",
            "name": "ORDER_V3_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "Identifier",
         "name": "keccak256"
        },
        "arguments": [
         {
          "type": "Identifier",
          "name": "ORDER_V3_TYPE"
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "TOKEN_PERMISSIONS_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "TOKEN_PERMISSIONS_TYPE"
         },
         "expression": {
          "type": "StringLiteral",
          "value": "TokenPermissions(address token,uint256 amount)",
          "parts": [
           "TokenPermissions(address token,uint256 amount)"
          ],
          "isUnicode": [
           false
          ]
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "StringLiteral",
        "value": "TokenPermissions(address token,uint256 amount)",
        "parts": [
         "TokenPermissions(address token,uint256 amount)"
        ],
        "isUnicode": [
         false
        ]
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "PERMIT2_ORDER_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "PERMIT2_ORDER_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "ElementaryTypeName",
           "name": "string",
           "stateMutability": null
          },
          "arguments": [
           {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "abi"
             },
             "memberName": "encodePacked"
            },
            "arguments": [
             {
              "type": "StringLiteral",
              "value": "PerpOrderV3 witness)",
              "parts": [
               "PerpOrderV3 witness)"
              ],
              "isUnicode": [
               false
              ]
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "OrderInfoLib"
              },
              "memberName": "ORDER_INFO_TYPE"
             },
             {
              "type": "Identifier",
              "name": "PERP_ORDER_V3_TYPE"
             },
             {
              "type": "Identifier",
              "name": "TOKEN_PERMISSIONS_TYPE"
             }
            ],
            "names": [],
            "identifiers": []
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "ElementaryTypeName",
         "name": "string",
         "stateMutability": null
        },
        "arguments": [
         {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "StringLiteral",
            "value": "PerpOrderV3 witness)",
            "parts": [
             "PerpOrderV3 witness)"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "OrderInfoLib"
            },
            "memberName": "ORDER_INFO_TYPE"
           },
           {
            "type": "Identifier",
            "name": "PERP_ORDER_V3_TYPE"
           },
           {
            "type": "Identifier",
            "name": "TOKEN_PERMISSIONS_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "FunctionDefinition",
       "name": "hash",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpOrderV3"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "keccak256"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encode"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "PERP_ORDER_V3_TYPE_HASH"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "info"
                },
                "memberName": "hash"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "pairId"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "entryTokenAddress"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "keccak256"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "bytes",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "order"
                   },
                   "memberName": "side"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "quantity"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "marginAmount"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "limitPrice"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "stopPrice"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "leverage"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "reduceOnly"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "closePosition"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "keccak256"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "auctionData"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "resolve",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpOrderV3"
         },
         "name": "perpOrder",
         "identifier": {
          "type": "Identifier",
          "name": "perpOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ResolvedOrder"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "info"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "entryTokenAddress"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "marginAmount"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "hash"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "perpOrder"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/perp/PerpOrder.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/OrderInfoLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/OrderInfoLib.sol",
      "parts": [
       "../../libraries/orders/OrderInfoLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "OrderInfo",
       null
      ],
      [
       "OrderInfoLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "OrderInfo"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "OrderInfoLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IFillerMarket.sol",
      "parts": [
       "../../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/ResolvedOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/ResolvedOrder.sol",
      "parts": [
       "../../libraries/orders/ResolvedOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ResolvedOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ResolvedOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "StructDefinition",
     "name": "PerpOrder",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "OrderInfo"
       },
       "name": "info",
       "identifier": {
        "type": "Identifier",
        "name": "info"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint64",
        "stateMutability": null
       },
       "name": "pairId",
       "identifier": {
        "type": "Identifier",
        "name": "pairId"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "entryTokenAddress",
       "identifier": {
        "type": "Identifier",
        "name": "entryTokenAddress"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "tradeAmount",
       "identifier": {
        "type": "Identifier",
        "name": "tradeAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "marginAmount",
       "identifier": {
        "type": "Identifier",
        "name": "marginAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "takeProfitPrice",
       "identifier": {
        "type": "Identifier",
        "name": "takeProfitPrice"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "stopLossPrice",
       "identifier": {
        "type": "Identifier",
        "name": "stopLossPrice"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint64",
        "stateMutability": null
       },
       "name": "slippageTolerance",
       "identifier": {
        "type": "Identifier",
        "name": "slippageTolerance"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint8",
        "stateMutability": null
       },
       "name": "leverage",
       "identifier": {
        "type": "Identifier",
        "name": "leverage"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "validatorAddress",
       "identifier": {
        "type": "Identifier",
        "name": "validatorAddress"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes",
        "stateMutability": null
       },
       "name": "validationData",
       "identifier": {
        "type": "Identifier",
        "name": "validationData"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PerpOrderLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "OrderInfo"
       },
       "libraryName": "OrderInfoLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "PERP_ORDER_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "PERP_ORDER_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "StringLiteral",
            "value": "PerpOrder(",
            "parts": [
             "PerpOrder("
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "OrderInfo info,",
            "parts": [
             "OrderInfo info,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint64 pairId,",
            "parts": [
             "uint64 pairId,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "address entryTokenAddress,",
            "parts": [
             "address entryTokenAddress,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "int256 tradeAmount,",
            "parts": [
             "int256 tradeAmount,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "int256 marginAmount,",
            "parts": [
             "int256 marginAmount,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 takeProfitPrice,",
            "parts": [
             "uint256 takeProfitPrice,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 stopLossPrice,",
            "parts": [
             "uint256 stopLossPrice,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint64 slippageTolerance,",
            "parts": [
             "uint64 slippageTolerance,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint8 leverage,",
            "parts": [
             "uint8 leverage,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "address validatorAddress,",
            "parts": [
             "address validatorAddress,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "bytes validationData)",
            "parts": [
             "bytes validationData)"
            ],
            "isUnicode": [
             false
            ]
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "MemberAccess",
         "expression": {
          "type": "Identifier",
          "name": "abi"
         },
         "memberName": "encodePacked"
        },
        "arguments": [
         {
          "type": "StringLiteral",
          "value": "PerpOrder(",
          "parts": [
           "PerpOrder("
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "OrderInfo info,",
          "parts": [
           "OrderInfo info,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint64 pairId,",
          "parts": [
           "uint64 pairId,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "address entryTokenAddress,",
          "parts": [
           "address entryTokenAddress,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "int256 tradeAmount,",
          "parts": [
           "int256 tradeAmount,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "int256 marginAmount,",
          "parts": [
           "int256 marginAmount,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 takeProfitPrice,",
          "parts": [
           "uint256 takeProfitPrice,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 stopLossPrice,",
          "parts": [
           "uint256 stopLossPrice,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint64 slippageTolerance,",
          "parts": [
           "uint64 slippageTolerance,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint8 leverage,",
          "parts": [
           "uint8 leverage,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "address validatorAddress,",
          "parts": [
           "address validatorAddress,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "bytes validationData)",
          "parts": [
           "bytes validationData)"
          ],
          "isUnicode": [
           false
          ]
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "ORDER_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "ORDER_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "Identifier",
            "name": "PERP_ORDER_TYPE"
           },
           {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "OrderInfoLib"
            },
            "memberName": "ORDER_INFO_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "MemberAccess",
         "expression": {
          "type": "Identifier",
          "name": "abi"
         },
         "memberName": "encodePacked"
        },
        "arguments": [
         {
          "type": "Identifier",
          "name": "PERP_ORDER_TYPE"
         },
         {
          "type": "MemberAccess",
          "expression": {
           "type": "Identifier",
           "name": "OrderInfoLib"
          },
          "memberName": "ORDER_INFO_TYPE"
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "PERP_ORDER_TYPE_HASH",
         "identifier": {
          "type": "Identifier",
          "name": "PERP_ORDER_TYPE_HASH"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "Identifier",
           "name": "keccak256"
          },
          "arguments": [
           {
            "type": "Identifier",
            "name": "ORDER_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "Identifier",
         "name": "keccak256"
        },
        "arguments": [
         {
          "type": "Identifier",
          "name": "ORDER_TYPE"
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "TOKEN_PERMISSIONS_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "TOKEN_PERMISSIONS_TYPE"
         },
         "expression": {
          "type": "StringLiteral",
          "value": "TokenPermissions(address token,uint256 amount)",
          "parts": [
           "TokenPermissions(address token,uint256 amount)"
          ],
          "isUnicode": [
           false
          ]
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "StringLiteral",
        "value": "TokenPermissions(address token,uint256 amount)",
        "parts": [
         "TokenPermissions(address token,uint256 amount)"
        ],
        "isUnicode": [
         false
        ]
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "PERMIT2_ORDER_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "PERMIT2_ORDER_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "ElementaryTypeName",
           "name": "string",
           "stateMutability": null
          },
          "arguments": [
           {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "abi"
             },
             "memberName": "encodePacked"
            },
            "arguments": [
             {
              "type": "StringLiteral",
              "value": "PerpOrder witness)",
              "parts": [
               "PerpOrder witness)"
              ],
              "isUnicode": [
               false
              ]
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "OrderInfoLib"
              },
              "memberName": "ORDER_INFO_TYPE"
             },
             {
              "type": "Identifier",
              "name": "PERP_ORDER_TYPE"
             },
             {
              "type": "Identifier",
              "name": "TOKEN_PERMISSIONS_TYPE"
             }
            ],
            "names": [],
            "identifiers": []
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "ElementaryTypeName",
         "name": "string",
         "stateMutability": null
        },
        "arguments": [
         {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "StringLiteral",
            "value": "PerpOrder witness)",
            "parts": [
             "PerpOrder witness)"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "OrderInfoLib"
            },
            "memberName": "ORDER_INFO_TYPE"
           },
           {
            "type": "Identifier",
            "name": "PERP_ORDER_TYPE"
           },
           {
            "type": "Identifier",
            "name": "TOKEN_PERMISSIONS_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "FunctionDefinition",
       "name": "hash",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "keccak256"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encode"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "PERP_ORDER_TYPE_HASH"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "info"
                },
                "memberName": "hash"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "pairId"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "entryTokenAddress"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "tradeAmount"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "marginAmount"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "takeProfitPrice"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "stopLossPrice"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "slippageTolerance"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "leverage"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "validatorAddress"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "keccak256"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "validationData"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "resolve",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpOrder"
         },
         "name": "perpOrder",
         "identifier": {
          "type": "Identifier",
          "name": "perpOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "amount",
            "identifier": {
             "type": "Identifier",
             "name": "amount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "Conditional",
           "condition": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "marginAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "perpOrder"
              },
              "memberName": "marginAmount"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "falseExpression": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ResolvedOrder"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "info"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "entryTokenAddress"
            },
            {
             "type": "Identifier",
             "name": "amount"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "hash"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "perpOrder"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/perp/PerpMarketV1.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/permit2/src/interfaces/IPermit2.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/permit2/src/interfaces/IPermit2.sol",
      "parts": [
       "@uniswap/permit2/src/interfaces/IPermit2.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPermit2",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPermit2"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeCast",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeCast"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol",
      "parts": [
       "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ReentrancyGuardUpgradeable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ReentrancyGuardUpgradeable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../../base/BaseMarketUpgradable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../base/BaseMarketUpgradable.sol",
      "parts": [
       "../../base/BaseMarketUpgradable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "BaseMarketUpgradable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "BaseMarketUpgradable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../base/BaseHookCallbackUpgradable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../base/BaseHookCallbackUpgradable.sol",
      "parts": [
       "../../base/BaseHookCallbackUpgradable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "BaseHookCallbackUpgradable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "BaseHookCallbackUpgradable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/Permit2Lib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/Permit2Lib.sol",
      "parts": [
       "../../libraries/orders/Permit2Lib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/ResolvedOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/ResolvedOrder.sol",
      "parts": [
       "../../libraries/orders/ResolvedOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/SlippageLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/SlippageLib.sol",
      "parts": [
       "../../libraries/SlippageLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SlippageLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SlippageLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/PositionCalculator.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/PositionCalculator.sol",
      "parts": [
       "../../libraries/PositionCalculator.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PositionCalculator",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PositionCalculator"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/Constants.sol",
      "parts": [
       "../../libraries/Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/Perp.sol",
      "parts": [
       "../../libraries/Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/math/Bps.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/math/Bps.sol",
      "parts": [
       "../../libraries/math/Bps.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Bps",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Bps"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/math/Math.sol",
      "parts": [
       "../../libraries/math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Math",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Math"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./PerpOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./PerpOrder.sol",
      "parts": [
       "./PerpOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./PerpOrderV3.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./PerpOrderV3.sol",
      "parts": [
       "./PerpOrderV3.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../../lens/PredyPoolQuoter.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../lens/PredyPoolQuoter.sol",
      "parts": [
       "../../lens/PredyPoolQuoter.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PredyPoolQuoter",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PredyPoolQuoter"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../base/SettlementCallbackLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../base/SettlementCallbackLib.sol",
      "parts": [
       "../../base/SettlementCallbackLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SettlementCallbackLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SettlementCallbackLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./PerpMarketLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./PerpMarketLib.sol",
      "parts": [
       "./PerpMarketLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PerpMarketLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PerpMarketLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PerpMarketV1",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "BaseMarketUpgradable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ReentrancyGuardUpgradeable"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ResolvedOrder"
       },
       "libraryName": "ResolvedOrderLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "PerpOrder"
       },
       "libraryName": "PerpOrderLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ResolvedOrder"
       },
       "libraryName": "Permit2Lib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "SafeCast",
       "functions": [],
       "operators": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "TPSLConditionDoesNotMatch",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "UpdateMarginMustNotBePositive",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "AmountIsZero",
       "parameters": []
      },
      {
       "type": "StructDefinition",
       "name": "UserPosition",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "takeProfitPrice",
         "identifier": {
          "type": "Identifier",
          "name": "takeProfitPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "stopLossPrice",
         "identifier": {
          "type": "Identifier",
          "name": "stopLossPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "slippageTolerance",
         "identifier": {
          "type": "Identifier",
          "name": "slippageTolerance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "lastLeverage",
         "identifier": {
          "type": "Identifier",
          "name": "lastLeverage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "EnumDefinition",
       "name": "CallbackSource",
       "members": [
        {
         "type": "EnumValue",
         "name": "TRADE"
        },
        {
         "type": "EnumValue",
         "name": "TRADE3"
        },
        {
         "type": "EnumValue",
         "name": "QUOTE"
        },
        {
         "type": "EnumValue",
         "name": "QUOTE3"
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "CallbackData",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "CallbackSource"
         },
         "name": "callbackSource",
         "identifier": {
          "type": "Identifier",
          "name": "callbackSource"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "marginAmountUpdate",
         "identifier": {
          "type": "Identifier",
          "name": "marginAmountUpdate"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "leverage",
         "identifier": {
          "type": "Identifier",
          "name": "leverage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": "resolvedOrder",
         "identifier": {
          "type": "Identifier",
          "name": "resolvedOrder"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "orderId",
         "identifier": {
          "type": "Identifier",
          "name": "orderId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPermit2"
         },
         "name": "_permit2",
         "identifier": {
          "type": "Identifier",
          "name": "_permit2"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "owner"
          },
          "valueType": {
           "type": "Mapping",
           "keyType": {
            "type": "ElementaryTypeName",
            "name": "uint256",
            "stateMutability": null
           },
           "keyName": {
            "type": "Identifier",
            "name": "pairId"
           },
           "valueType": {
            "type": "UserDefinedTypeName",
            "namePath": "UserPosition"
           },
           "valueName": null
          },
          "valueName": null
         },
         "name": "userPositions",
         "identifier": {
          "type": "Identifier",
          "name": "userPositions"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "EventDefinition",
       "name": "PerpTraded",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.Payoff"
         },
         "name": "payoff",
         "identifier": {
          "type": "Identifier",
          "name": "payoff"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "marginAmount",
         "identifier": {
          "type": "Identifier",
          "name": "marginAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "PerpTraded2",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.Payoff"
         },
         "name": "payoff",
         "identifier": {
          "type": "Identifier",
          "name": "payoff"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "marginAmount",
         "identifier": {
          "type": "Identifier",
          "name": "marginAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "orderId",
         "identifier": {
          "type": "Identifier",
          "name": "orderId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "initialize",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "permit2Address",
         "identifier": {
          "type": "Identifier",
          "name": "permit2Address"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "whitelistFiller",
         "identifier": {
          "type": "Identifier",
          "name": "whitelistFiller"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoterAddress",
         "identifier": {
          "type": "Identifier",
          "name": "quoterAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__ReentrancyGuard_init"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__BaseMarket_init"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "predyPool"
            },
            {
             "type": "Identifier",
             "name": "whitelistFiller"
            },
            {
             "type": "Identifier",
             "name": "quoterAddress"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_permit2"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "IPermit2"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "permit2Address"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "initializer",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "predyTradeAfterCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "CallbackData"
            },
            "name": "callbackData",
            "identifier": {
             "type": "Identifier",
             "name": "callbackData"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "extraData"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "CallbackData"
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "ERC20"
            },
            "name": "quoteToken",
            "identifier": {
             "type": "Identifier",
             "name": "quoteToken"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ERC20"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "_getQuoteTokenAddress"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tradeParams"
               },
               "memberName": "pairId"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "callbackData"
            },
            "memberName": "callbackSource"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "CallbackSource"
            },
            "memberName": "QUOTE"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_revertTradeResult"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "tradeResult"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "callbackData"
             },
             "memberName": "callbackSource"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "CallbackSource"
             },
             "memberName": "QUOTE3"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "_revertTradeResult"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "tradeResult"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            ]
           },
           "falseBody": {
            "type": "IfStatement",
            "condition": {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "callbackData"
              },
              "memberName": "callbackSource"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "CallbackSource"
              },
              "memberName": "TRADE3"
             }
            },
            "trueBody": {
             "type": "Block",
             "statements": [
              {
               "type": "VariableDeclarationStatement",
               "variables": [
                {
                 "type": "VariableDeclaration",
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "int256",
                  "stateMutability": null
                 },
                 "name": "marginAmountUpdate",
                 "identifier": {
                  "type": "Identifier",
                  "name": "marginAmountUpdate"
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                }
               ],
               "initialValue": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "_calculateInitialMargin"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "tradeParams"
                  },
                  "memberName": "vaultId"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "tradeParams"
                  },
                  "memberName": "pairId"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "callbackData"
                  },
                  "memberName": "leverage"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              {
               "type": "VariableDeclarationStatement",
               "variables": [
                {
                 "type": "VariableDeclaration",
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "name": "cost",
                 "identifier": {
                  "type": "Identifier",
                  "name": "cost"
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                }
               ],
               "initialValue": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              {
               "type": "IfStatement",
               "condition": {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "Identifier",
                 "name": "marginAmountUpdate"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "cost"
                   },
                   "right": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "ElementaryTypeName",
                     "name": "uint256",
                     "stateMutability": null
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "marginAmountUpdate"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  }
                 }
                ]
               },
               "falseBody": null
              },
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "_verifyOrderV3"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "callbackData"
                  },
                  "memberName": "resolvedOrder"
                 },
                 {
                  "type": "Identifier",
                  "name": "cost"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              {
               "type": "IfStatement",
               "condition": {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "Identifier",
                 "name": "marginAmountUpdate"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "quoteToken"
                    },
                    "memberName": "safeTransfer"
                   },
                   "arguments": [
                    {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "Identifier",
                      "name": "address"
                     },
                     "arguments": [
                      {
                       "type": "Identifier",
                       "name": "_predyPool"
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    },
                    {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "ElementaryTypeName",
                      "name": "uint256",
                      "stateMutability": null
                     },
                     "arguments": [
                      {
                       "type": "Identifier",
                       "name": "marginAmountUpdate"
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  }
                 }
                ]
               },
               "falseBody": {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": "<",
                 "left": {
                  "type": "Identifier",
                  "name": "marginAmountUpdate"
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "_predyPool"
                     },
                     "memberName": "take"
                    },
                    "arguments": [
                     {
                      "type": "BooleanLiteral",
                      "value": true
                     },
                     {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "callbackData"
                      },
                      "memberName": "trader"
                     },
                     {
                      "type": "FunctionCall",
                      "expression": {
                       "type": "ElementaryTypeName",
                       "name": "uint256",
                       "stateMutability": null
                      },
                      "arguments": [
                       {
                        "type": "UnaryOperation",
                        "operator": "-",
                        "subExpression": {
                         "type": "Identifier",
                         "name": "marginAmountUpdate"
                        },
                        "isPrefix": true
                       }
                      ],
                      "names": [],
                      "identifiers": []
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  }
                 ]
                },
                "falseBody": null
               }
              },
              {
               "type": "EmitStatement",
               "eventCall": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpTraded2"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "callbackData"
                  },
                  "memberName": "trader"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "tradeParams"
                  },
                  "memberName": "pairId"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "tradeResult"
                  },
                  "memberName": "vaultId"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "tradeParams"
                  },
                  "memberName": "tradeAmount"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "tradeResult"
                  },
                  "memberName": "payoff"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "tradeResult"
                  },
                  "memberName": "fee"
                 },
                 {
                  "type": "Identifier",
                  "name": "marginAmountUpdate"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "callbackData"
                  },
                  "memberName": "orderId"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             ]
            },
            "falseBody": null
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPredyPool",
         "arguments": null
        }
       ],
       "override": [
        {
         "type": "UserDefinedTypeName",
         "namePath": "BaseHookCallbackUpgradable"
        }
       ],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "executeOrderV3",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SignedOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpOrderV3"
            },
            "name": "perpOrder",
            "identifier": {
             "type": "Identifier",
             "name": "perpOrder"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "order"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "PerpOrderV3"
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_executeOrderV3"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "perpOrder"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "sig"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_executeOrderV3",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpOrderV3"
         },
         "name": "perpOrder",
         "identifier": {
          "type": "Identifier",
          "name": "perpOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "orderId",
         "identifier": {
          "type": "Identifier",
          "name": "orderId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "ResolvedOrder"
            },
            "name": "resolvedOrder",
            "identifier": {
             "type": "Identifier",
             "name": "resolvedOrder"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpOrderV3Lib"
            },
            "memberName": "resolve"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "perpOrder"
            },
            {
             "type": "Identifier",
             "name": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_validateQuoteTokenAddress"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "entryTokenAddress"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "UserPosition"
            },
            "name": "userPosition",
            "identifier": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "userPositions"
            },
            "index": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "perpOrder"
              },
              "memberName": "info"
             },
             "memberName": "trader"
            }
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "perpOrder"
            },
            "memberName": "pairId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "lastLeverage"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "perpOrder"
            },
            "memberName": "leverage"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "tradeAmount",
            "identifier": {
             "type": "Identifier",
             "name": "tradeAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpMarketLib"
            },
            "memberName": "getFinalTradeAmount"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_predyPool"
                 },
                 "memberName": "getVault"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "userPosition"
                  },
                  "memberName": "vaultId"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "openPosition"
              },
              "memberName": "perp"
             },
             "memberName": "amount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "side"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "quantity"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "reduceOnly"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "closePosition"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "tradeAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "AmountIsZero"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "tradeResult"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_predyPool"
             },
             "memberName": "trade"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "IPredyPool"
               },
               "memberName": "TradeParams"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "perpOrder"
                },
                "memberName": "pairId"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "userPosition"
                },
                "memberName": "vaultId"
               },
               {
                "type": "Identifier",
                "name": "tradeAmount"
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "abi"
                 },
                 "memberName": "encode"
                },
                "arguments": [
                 {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "CallbackData"
                  },
                  "arguments": [
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "CallbackSource"
                    },
                    "memberName": "TRADE3"
                   },
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "perpOrder"
                     },
                     "memberName": "info"
                    },
                    "memberName": "trader"
                   },
                   {
                    "type": "NumberLiteral",
                    "number": "0",
                    "subdenomination": null
                   },
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "perpOrder"
                    },
                    "memberName": "leverage"
                   },
                   {
                    "type": "Identifier",
                    "name": "resolvedOrder"
                   },
                   {
                    "type": "Identifier",
                    "name": "orderId"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_getSettlementDataFromV3"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "settlementParams"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "minMargin"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              },
              "right": {
               "type": "Identifier",
               "name": "whitelistFiller"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "RevertStatement",
                "revertCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "CallerIsNotFiller"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "vaultId"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userPosition"
               },
               "memberName": "vaultId"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tradeResult"
               },
               "memberName": "vaultId"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_predyPool"
               },
               "memberName": "updateRecepient"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "tradeResult"
                },
                "memberName": "vaultId"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "perpOrder"
                 },
                 "memberName": "info"
                },
                "memberName": "trader"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpMarketLib"
            },
            "memberName": "validateTrade"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tradeResult"
            },
            {
             "type": "Identifier",
             "name": "tradeAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "limitPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "stopPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "auctionData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "tradeResult"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_calculateInitialMargin",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "leverage",
         "identifier": {
          "type": "Identifier",
          "name": "leverage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.Vault"
            },
            "name": "vault",
            "identifier": {
             "type": "Identifier",
             "name": "vault"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getVault"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vaultId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "sqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getSqrtIndexPrice"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "price",
            "identifier": {
             "type": "Identifier",
             "name": "price"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Math"
            },
            "memberName": "calSqrtPriceToPrice"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "sqrtPrice"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "netValue",
            "identifier": {
             "type": "Identifier",
             "name": "netValue"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_calculateNetValue"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vault"
            },
            {
             "type": "Identifier",
             "name": "price"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BinaryOperation",
                "operator": "/",
                "left": {
                 "type": "Identifier",
                 "name": "netValue"
                },
                "right": {
                 "type": "Identifier",
                 "name": "leverage"
                }
               }
              ],
              "isArray": false
             },
             "memberName": "toInt256"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "_calculatePositionValue"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "vault"
             },
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_calculateNetValue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "vault",
         "identifier": {
          "type": "Identifier",
          "name": "vault"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "positionAmount",
            "identifier": {
             "type": "Identifier",
             "name": "positionAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "vault"
             },
             "memberName": "openPosition"
            },
            "memberName": "perp"
           },
           "memberName": "amount"
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Math"
              },
              "memberName": "abs"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "positionAmount"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "right": {
             "type": "Identifier",
             "name": "price"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Constants"
            },
            "memberName": "Q96"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "_calculatePositionValue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "vault",
         "identifier": {
          "type": "Identifier",
          "name": "vault"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PositionCalculator"
             },
             "memberName": "calculateValue"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PositionCalculator"
               },
               "memberName": "getPosition"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "vault"
                },
                "memberName": "openPosition"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "vault"
            },
            "memberName": "margin"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getUserPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "owner",
         "identifier": {
          "type": "Identifier",
          "name": "owner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserPosition"
         },
         "name": "userPosition",
         "identifier": {
          "type": "Identifier",
          "name": "userPosition"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.VaultStatus"
         },
         "name": "vaultStatus",
         "identifier": {
          "type": "Identifier",
          "name": "vaultStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "vault",
         "identifier": {
          "type": "Identifier",
          "name": "vault"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "userPosition"
           },
           "right": {
            "type": "IndexAccess",
            "base": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "userPositions"
             },
             "index": {
              "type": "Identifier",
              "name": "owner"
             }
            },
            "index": {
             "type": "Identifier",
             "name": "pairId"
            }
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "vaultId"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "Identifier",
                "name": "userPosition"
               },
               {
                "type": "Identifier",
                "name": "vaultStatus"
               },
               {
                "type": "Identifier",
                "name": "vault"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "Identifier",
             "name": "userPosition"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_quoter"
              },
              "memberName": "quoteVaultStatus"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userPosition"
               },
               "memberName": "vaultId"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_predyPool"
              },
              "memberName": "getVault"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userPosition"
               },
               "memberName": "vaultId"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_saveUserPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserPosition"
         },
         "name": "userPosition",
         "identifier": {
          "type": "Identifier",
          "name": "userPosition"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpOrder"
         },
         "name": "perpOrder",
         "identifier": {
          "type": "Identifier",
          "name": "perpOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "<=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "perpOrder"
              },
              "memberName": "slippageTolerance"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Bps"
              },
              "memberName": "ONE"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "takeProfitPrice"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "perpOrder"
            },
            "memberName": "takeProfitPrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "stopLossPrice"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "perpOrder"
            },
            "memberName": "stopLossPrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "slippageTolerance"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "perpOrder"
            },
            "memberName": "slippageTolerance"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "lastLeverage"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "perpOrder"
            },
            "memberName": "leverage"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteExecuteOrderV3",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpOrderV3"
         },
         "name": "perpOrder",
         "identifier": {
          "type": "Identifier",
          "name": "perpOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "filler",
         "identifier": {
          "type": "Identifier",
          "name": "filler"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "UserPosition"
            },
            "name": "userPosition",
            "identifier": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "userPositions"
            },
            "index": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "perpOrder"
              },
              "memberName": "info"
             },
             "memberName": "trader"
            }
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "perpOrder"
            },
            "memberName": "pairId"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "tradeAmount",
            "identifier": {
             "type": "Identifier",
             "name": "tradeAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpMarketLib"
            },
            "memberName": "getFinalTradeAmount"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_predyPool"
                 },
                 "memberName": "getVault"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "userPosition"
                  },
                  "memberName": "vaultId"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "openPosition"
              },
              "memberName": "perp"
             },
             "memberName": "amount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "side"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "quantity"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "reduceOnly"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "perpOrder"
             },
             "memberName": "closePosition"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "tradeAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "AmountIsZero"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "trade"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "IPredyPool"
              },
              "memberName": "TradeParams"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "perpOrder"
               },
               "memberName": "pairId"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userPosition"
               },
               "memberName": "vaultId"
              },
              {
               "type": "Identifier",
               "name": "tradeAmount"
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "abi"
                },
                "memberName": "encode"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "CallbackData"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "CallbackSource"
                   },
                   "memberName": "QUOTE3"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "perpOrder"
                    },
                    "memberName": "info"
                   },
                   "memberName": "trader"
                  },
                  {
                   "type": "NumberLiteral",
                   "number": "0",
                   "subdenomination": null
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "perpOrder"
                   },
                   "memberName": "leverage"
                  },
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "PerpOrderV3Lib"
                    },
                    "memberName": "resolve"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "perpOrder"
                    },
                    {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "ElementaryTypeName",
                      "name": "bytes",
                      "stateMutability": null
                     },
                     "arguments": [
                      {
                       "type": "StringLiteral",
                       "value": "",
                       "parts": [
                        ""
                       ],
                       "isUnicode": [
                        false
                       ]
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "NumberLiteral",
                   "number": "0",
                   "subdenomination": null
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "_getSettlementDataFromV3"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "settlementParams"
              },
              {
               "type": "Identifier",
               "name": "filler"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_verifyOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "order"
            },
            "memberName": "validate"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_permit2"
            },
            "memberName": "permitWitnessTransferFrom"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "toPermit"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "ISignatureTransfer"
              },
              "memberName": "SignatureTransferDetails"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "Identifier",
               "name": "amount"
              }
             ],
             "names": [
              "to",
              "requestedAmount"
             ],
             "identifiers": [
              {
               "type": "Identifier",
               "name": "to"
              },
              {
               "type": "Identifier",
               "name": "requestedAmount"
              }
             ]
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "info"
             },
             "memberName": "trader"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "hash"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpOrderLib"
             },
             "memberName": "PERMIT2_ORDER_TYPE"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_verifyOrderV3",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "order"
            },
            "memberName": "validate"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_permit2"
            },
            "memberName": "permitWitnessTransferFrom"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "toPermit"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "ISignatureTransfer"
              },
              "memberName": "SignatureTransferDetails"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "Identifier",
               "name": "amount"
              }
             ],
             "names": [
              "to",
              "requestedAmount"
             ],
             "identifiers": [
              {
               "type": "Identifier",
               "name": "to"
              },
              {
               "type": "Identifier",
               "name": "requestedAmount"
              }
             ]
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "info"
             },
             "memberName": "trader"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "hash"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpOrderV3Lib"
             },
             "memberName": "PERMIT2_ORDER_TYPE"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/perp/PerpMarketLib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/Constants.sol",
      "parts": [
       "../../libraries/Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/DecayLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/DecayLib.sol",
      "parts": [
       "../../libraries/orders/DecayLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DecayLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DecayLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/math/Bps.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/math/Bps.sol",
      "parts": [
       "../../libraries/math/Bps.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Bps",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Bps"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/math/Math.sol",
      "parts": [
       "../../libraries/math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Math",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Math"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PerpMarketLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "CustomErrorDefinition",
       "name": "LimitPriceDoesNotMatch",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "StopPriceDoesNotMatch",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "LimitStopOrderDoesNotMatch",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "MarketOrderDoesNotMatch",
       "parameters": []
      },
      {
       "type": "StructDefinition",
       "name": "AuctionParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "startPrice",
         "identifier": {
          "type": "Identifier",
          "name": "startPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "endPrice",
         "identifier": {
          "type": "Identifier",
          "name": "endPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "startTime",
         "identifier": {
          "type": "Identifier",
          "name": "startTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "endTime",
         "identifier": {
          "type": "Identifier",
          "name": "endTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "getFinalTradeAmount",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "currentPositionAmount",
         "identifier": {
          "type": "Identifier",
          "name": "currentPositionAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "side",
         "identifier": {
          "type": "Identifier",
          "name": "side"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "quantity",
         "identifier": {
          "type": "Identifier",
          "name": "quantity"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "reduceOnly",
         "identifier": {
          "type": "Identifier",
          "name": "reduceOnly"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "closePosition",
         "identifier": {
          "type": "Identifier",
          "name": "closePosition"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "finalTradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalTradeAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "isLong",
            "identifier": {
             "type": "Identifier",
             "name": "isLong"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "keccak256"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "bytes",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "side"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "keccak256"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "StringLiteral",
                "value": "Buy",
                "parts": [
                 "Buy"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "tradeAmount",
            "identifier": {
             "type": "Identifier",
             "name": "tradeAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "Conditional",
           "condition": {
            "type": "Identifier",
            "name": "isLong"
           },
           "trueExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "quantity"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "falseExpression": {
            "type": "UnaryOperation",
            "operator": "-",
            "subExpression": {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "int256",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "quantity"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "isPrefix": true
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "closePosition"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "Identifier",
               "name": "isLong"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": ">=",
               "left": {
                "type": "Identifier",
                "name": "currentPositionAmount"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "UnaryOperation",
               "operator": "!",
               "subExpression": {
                "type": "Identifier",
                "name": "isLong"
               },
               "isPrefix": true
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "<=",
               "left": {
                "type": "Identifier",
                "name": "currentPositionAmount"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "UnaryOperation",
              "operator": "-",
              "subExpression": {
               "type": "Identifier",
               "name": "currentPositionAmount"
              },
              "isPrefix": true
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "reduceOnly"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "Identifier",
               "name": "currentPositionAmount"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "currentPositionAmount"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": "<",
                 "left": {
                  "type": "Identifier",
                  "name": "tradeAmount"
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "IfStatement",
                   "condition": {
                    "type": "BinaryOperation",
                    "operator": ">",
                    "left": {
                     "type": "Identifier",
                     "name": "currentPositionAmount"
                    },
                    "right": {
                     "type": "UnaryOperation",
                     "operator": "-",
                     "subExpression": {
                      "type": "Identifier",
                      "name": "tradeAmount"
                     },
                     "isPrefix": true
                    }
                   },
                   "trueBody": {
                    "type": "Block",
                    "statements": [
                     {
                      "type": "ReturnStatement",
                      "expression": {
                       "type": "Identifier",
                       "name": "tradeAmount"
                      }
                     }
                    ]
                   },
                   "falseBody": {
                    "type": "Block",
                    "statements": [
                     {
                      "type": "ReturnStatement",
                      "expression": {
                       "type": "UnaryOperation",
                       "operator": "-",
                       "subExpression": {
                        "type": "Identifier",
                        "name": "currentPositionAmount"
                       },
                       "isPrefix": true
                      }
                     }
                    ]
                   }
                  }
                 ]
                },
                "falseBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ReturnStatement",
                   "expression": {
                    "type": "NumberLiteral",
                    "number": "0",
                    "subdenomination": null
                   }
                  }
                 ]
                }
               }
              ]
             },
             "falseBody": {
              "type": "Block",
              "statements": [
               {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": ">",
                 "left": {
                  "type": "Identifier",
                  "name": "tradeAmount"
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "IfStatement",
                   "condition": {
                    "type": "BinaryOperation",
                    "operator": ">",
                    "left": {
                     "type": "UnaryOperation",
                     "operator": "-",
                     "subExpression": {
                      "type": "Identifier",
                      "name": "currentPositionAmount"
                     },
                     "isPrefix": true
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "tradeAmount"
                    }
                   },
                   "trueBody": {
                    "type": "Block",
                    "statements": [
                     {
                      "type": "ReturnStatement",
                      "expression": {
                       "type": "Identifier",
                       "name": "tradeAmount"
                      }
                     }
                    ]
                   },
                   "falseBody": {
                    "type": "Block",
                    "statements": [
                     {
                      "type": "ReturnStatement",
                      "expression": {
                       "type": "UnaryOperation",
                       "operator": "-",
                       "subExpression": {
                        "type": "Identifier",
                        "name": "currentPositionAmount"
                       },
                       "isPrefix": true
                      }
                     }
                    ]
                   }
                  }
                 ]
                },
                "falseBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ReturnStatement",
                   "expression": {
                    "type": "NumberLiteral",
                    "number": "0",
                    "subdenomination": null
                   }
                  }
                 ]
                }
               }
              ]
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "tradeAmount"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "validateTrade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "limitPrice",
         "identifier": {
          "type": "Identifier",
          "name": "limitPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "stopPrice",
         "identifier": {
          "type": "Identifier",
          "name": "stopPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "auctionData",
         "identifier": {
          "type": "Identifier",
          "name": "auctionData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "tradePrice",
            "identifier": {
             "type": "Identifier",
             "name": "tradePrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Math"
              },
              "memberName": "abs"
             },
             "arguments": [
              {
               "type": "BinaryOperation",
               "operator": "+",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "tradeResult"
                 },
                 "memberName": "payoff"
                },
                "memberName": "perpEntryUpdate"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "tradeResult"
                 },
                 "memberName": "payoff"
                },
                "memberName": "perpPayoff"
               }
              }
             ],
             "names": [],
             "identifiers": []
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "Q96"
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Math"
             },
             "memberName": "abs"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "tradeAmount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "oraclePrice",
            "identifier": {
             "type": "Identifier",
             "name": "oraclePrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Math"
            },
            "memberName": "calSqrtPriceToPrice"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeResult"
             },
             "memberName": "sqrtTwap"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "limitPrice"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "stopPrice"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "UnaryOperation",
              "operator": "!",
              "subExpression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "validateMarketOrder"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "tradePrice"
                },
                {
                 "type": "Identifier",
                 "name": "tradeAmount"
                },
                {
                 "type": "Identifier",
                 "name": "auctionData"
                }
               ],
               "names": [],
               "identifiers": []
              },
              "isPrefix": true
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "RevertStatement",
                "revertCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "MarketOrderDoesNotMatch"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "&&",
            "left": {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "limitPrice"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            "right": {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "stopPrice"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": "&&",
               "left": {
                "type": "UnaryOperation",
                "operator": "!",
                "subExpression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "validateLimitPrice"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "tradePrice"
                  },
                  {
                   "type": "Identifier",
                   "name": "tradeAmount"
                  },
                  {
                   "type": "Identifier",
                   "name": "limitPrice"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "isPrefix": true
               },
               "right": {
                "type": "UnaryOperation",
                "operator": "!",
                "subExpression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "validateStopPrice"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "oraclePrice"
                  },
                  {
                   "type": "Identifier",
                   "name": "tradePrice"
                  },
                  {
                   "type": "Identifier",
                   "name": "tradeAmount"
                  },
                  {
                   "type": "Identifier",
                   "name": "stopPrice"
                  },
                  {
                   "type": "Identifier",
                   "name": "auctionData"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "isPrefix": true
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "RevertStatement",
                 "revertCall": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "LimitStopOrderDoesNotMatch"
                  },
                  "arguments": [],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             }
            ]
           },
           "falseBody": {
            "type": "IfStatement",
            "condition": {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "limitPrice"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            "trueBody": {
             "type": "Block",
             "statements": [
              {
               "type": "IfStatement",
               "condition": {
                "type": "UnaryOperation",
                "operator": "!",
                "subExpression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "validateLimitPrice"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "tradePrice"
                  },
                  {
                   "type": "Identifier",
                   "name": "tradeAmount"
                  },
                  {
                   "type": "Identifier",
                   "name": "limitPrice"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "isPrefix": true
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "RevertStatement",
                  "revertCall": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "Identifier",
                    "name": "LimitPriceDoesNotMatch"
                   },
                   "arguments": [],
                   "names": [],
                   "identifiers": []
                  }
                 }
                ]
               },
               "falseBody": null
              }
             ]
            },
            "falseBody": {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "stopPrice"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "IfStatement",
                "condition": {
                 "type": "UnaryOperation",
                 "operator": "!",
                 "subExpression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "validateStopPrice"
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "oraclePrice"
                   },
                   {
                    "type": "Identifier",
                    "name": "tradePrice"
                   },
                   {
                    "type": "Identifier",
                    "name": "tradeAmount"
                   },
                   {
                    "type": "Identifier",
                    "name": "stopPrice"
                   },
                   {
                    "type": "Identifier",
                    "name": "auctionData"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "isPrefix": true
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "RevertStatement",
                   "revertCall": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "StopPriceDoesNotMatch"
                    },
                    "arguments": [],
                    "names": [],
                    "identifiers": []
                   }
                  }
                 ]
                },
                "falseBody": null
               }
              ]
             },
             "falseBody": null
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "validateLimitPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tradePrice",
         "identifier": {
          "type": "Identifier",
          "name": "tradePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "limitPrice",
         "identifier": {
          "type": "Identifier",
          "name": "limitPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "tradeAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "tradeAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "limitPrice"
            },
            "right": {
             "type": "Identifier",
             "name": "tradePrice"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "tradeAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "limitPrice"
            },
            "right": {
             "type": "Identifier",
             "name": "tradePrice"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BooleanLiteral",
           "value": true
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "validateStopPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "oraclePrice",
         "identifier": {
          "type": "Identifier",
          "name": "oraclePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tradePrice",
         "identifier": {
          "type": "Identifier",
          "name": "tradePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "stopPrice",
         "identifier": {
          "type": "Identifier",
          "name": "stopPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "auctionData",
         "identifier": {
          "type": "Identifier",
          "name": "auctionData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "AuctionParams"
            },
            "name": "auctionParams",
            "identifier": {
             "type": "Identifier",
             "name": "auctionParams"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "auctionData"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "AuctionParams"
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "decayedSlippageTorelance",
            "identifier": {
             "type": "Identifier",
             "name": "decayedSlippageTorelance"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "DecayLib"
            },
            "memberName": "decay2"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "startPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "endPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "startTime"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "endTime"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ratio"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "oraclePrice"
              },
              {
               "type": "Identifier",
               "name": "stopPrice"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "tradeAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "stopPrice"
              },
              "right": {
               "type": "Identifier",
               "name": "oraclePrice"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "BooleanLiteral",
                 "value": false
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "tradePrice"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Bps"
                },
                "memberName": "upper"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "oraclePrice"
                },
                {
                 "type": "Identifier",
                 "name": "decayedSlippageTorelance"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "BooleanLiteral",
                 "value": false
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "tradeAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "stopPrice"
               },
               "right": {
                "type": "Identifier",
                "name": "oraclePrice"
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "ReturnStatement",
                 "expression": {
                  "type": "BooleanLiteral",
                  "value": false
                 }
                }
               ]
              },
              "falseBody": null
             },
             {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "tradePrice"
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "Bps"
                 },
                 "memberName": "lower"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "oraclePrice"
                 },
                 {
                  "type": "Identifier",
                  "name": "decayedSlippageTorelance"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "ReturnStatement",
                 "expression": {
                  "type": "BooleanLiteral",
                  "value": false
                 }
                }
               ]
              },
              "falseBody": null
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BooleanLiteral",
           "value": true
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "ratio",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price1",
         "identifier": {
          "type": "Identifier",
          "name": "price1"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price2",
         "identifier": {
          "type": "Identifier",
          "name": "price2"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "price1"
           },
           "right": {
            "type": "Identifier",
            "name": "price2"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "price1"
            },
            "right": {
             "type": "Identifier",
             "name": "price2"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "TupleExpression",
                 "components": [
                  {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "Identifier",
                    "name": "price1"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "price2"
                   }
                  }
                 ],
                 "isArray": false
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "Bps"
                 },
                 "memberName": "ONE"
                }
               },
               "right": {
                "type": "Identifier",
                "name": "price2"
               }
              }
             }
            ]
           },
           "falseBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "TupleExpression",
                 "components": [
                  {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "Identifier",
                    "name": "price2"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "price1"
                   }
                  }
                 ],
                 "isArray": false
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "Bps"
                 },
                 "memberName": "ONE"
                }
               },
               "right": {
                "type": "Identifier",
                "name": "price2"
               }
              }
             }
            ]
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "validateMarketOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tradePrice",
         "identifier": {
          "type": "Identifier",
          "name": "tradePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "auctionData",
         "identifier": {
          "type": "Identifier",
          "name": "auctionData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "AuctionParams"
            },
            "name": "auctionParams",
            "identifier": {
             "type": "Identifier",
             "name": "auctionParams"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "auctionData"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "AuctionParams"
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "decayedPrice",
            "identifier": {
             "type": "Identifier",
             "name": "decayedPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "DecayLib"
            },
            "memberName": "decay"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "startPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "endPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "startTime"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "auctionParams"
             },
             "memberName": "endTime"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "Identifier",
            "name": "tradeAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": ">",
               "left": {
                "type": "Identifier",
                "name": "tradeAmount"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "decayedPrice"
               },
               "right": {
                "type": "Identifier",
                "name": "tradePrice"
               }
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "BooleanLiteral",
                 "value": false
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "tradeAmount"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": ">",
               "left": {
                "type": "Identifier",
                "name": "decayedPrice"
               },
               "right": {
                "type": "Identifier",
                "name": "tradePrice"
               }
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "BooleanLiteral",
                 "value": false
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BooleanLiteral",
           "value": true
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/perp/PerpMarket.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "./PerpMarketV1.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./PerpMarketV1.sol",
      "parts": [
       "./PerpMarketV1.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PerpMarketV1",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PerpMarketV1"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./PerpOrderV3.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./PerpOrderV3.sol",
      "parts": [
       "./PerpOrderV3.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PerpOrderV3",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PerpOrderV3"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/OrderInfoLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/OrderInfoLib.sol",
      "parts": [
       "../../libraries/orders/OrderInfoLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "OrderInfo",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "OrderInfo"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../L2Decoder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../L2Decoder.sol",
      "parts": [
       "../L2Decoder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "L2Decoder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "L2Decoder"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/math/Bps.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/math/Bps.sol",
      "parts": [
       "../../libraries/math/Bps.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Bps",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Bps"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/DataType.sol",
      "parts": [
       "../../libraries/DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "StructDefinition",
     "name": "PerpOrderV3L2",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "trader",
       "identifier": {
        "type": "Identifier",
        "name": "trader"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "nonce",
       "identifier": {
        "type": "Identifier",
        "name": "nonce"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "quantity",
       "identifier": {
        "type": "Identifier",
        "name": "quantity"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "marginAmount",
       "identifier": {
        "type": "Identifier",
        "name": "marginAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "limitPrice",
       "identifier": {
        "type": "Identifier",
        "name": "limitPrice"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "stopPrice",
       "identifier": {
        "type": "Identifier",
        "name": "stopPrice"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes32",
        "stateMutability": null
       },
       "name": "data1",
       "identifier": {
        "type": "Identifier",
        "name": "data1"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes",
        "stateMutability": null
       },
       "name": "auctionData",
       "identifier": {
        "type": "Identifier",
        "name": "auctionData"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PerpMarket",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "PerpMarketV1"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "executeOrderV3L2",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpOrderV3L2"
         },
         "name": "compressedOrder",
         "identifier": {
          "type": "Identifier",
          "name": "compressedOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "orderId",
         "identifier": {
          "type": "Identifier",
          "name": "orderId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "deadline",
            "identifier": {
             "type": "Identifier",
             "name": "deadline"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint64",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "pairId",
            "identifier": {
             "type": "Identifier",
             "name": "pairId"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint64",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "leverage",
            "identifier": {
             "type": "Identifier",
             "name": "leverage"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint8",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "reduceOnly",
            "identifier": {
             "type": "Identifier",
             "name": "reduceOnly"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "closePosition",
            "identifier": {
             "type": "Identifier",
             "name": "closePosition"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "side",
            "identifier": {
             "type": "Identifier",
             "name": "side"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "L2Decoder"
            },
            "memberName": "decodePerpOrderV3Params"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "compressedOrder"
             },
             "memberName": "data1"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpOrderV3"
            },
            "name": "order",
            "identifier": {
             "type": "Identifier",
             "name": "order"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PerpOrderV3"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "OrderInfo"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "compressedOrder"
               },
               "memberName": "trader"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "compressedOrder"
               },
               "memberName": "nonce"
              },
              {
               "type": "Identifier",
               "name": "deadline"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "_quoteTokenMap"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Conditional",
             "condition": {
              "type": "Identifier",
              "name": "side"
             },
             "trueExpression": {
              "type": "StringLiteral",
              "value": "Buy",
              "parts": [
               "Buy"
              ],
              "isUnicode": [
               false
              ]
             },
             "falseExpression": {
              "type": "StringLiteral",
              "value": "Sell",
              "parts": [
               "Sell"
              ],
              "isUnicode": [
               false
              ]
             }
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "compressedOrder"
             },
             "memberName": "quantity"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "compressedOrder"
             },
             "memberName": "marginAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "compressedOrder"
             },
             "memberName": "limitPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "compressedOrder"
             },
             "memberName": "stopPrice"
            },
            {
             "type": "Identifier",
             "name": "leverage"
            },
            {
             "type": "Identifier",
             "name": "reduceOnly"
            },
            {
             "type": "Identifier",
             "name": "closePosition"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "compressedOrder"
             },
             "memberName": "auctionData"
            }
           ],
           "names": [
            "info",
            "pairId",
            "entryTokenAddress",
            "side",
            "quantity",
            "marginAmount",
            "limitPrice",
            "stopPrice",
            "leverage",
            "reduceOnly",
            "closePosition",
            "auctionData"
           ],
           "identifiers": [
            {
             "type": "Identifier",
             "name": "info"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "entryTokenAddress"
            },
            {
             "type": "Identifier",
             "name": "side"
            },
            {
             "type": "Identifier",
             "name": "quantity"
            },
            {
             "type": "Identifier",
             "name": "marginAmount"
            },
            {
             "type": "Identifier",
             "name": "limitPrice"
            },
            {
             "type": "Identifier",
             "name": "stopPrice"
            },
            {
             "type": "Identifier",
             "name": "leverage"
            },
            {
             "type": "Identifier",
             "name": "reduceOnly"
            },
            {
             "type": "Identifier",
             "name": "closePosition"
            },
            {
             "type": "Identifier",
             "name": "auctionData"
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_executeOrderV3"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "order"
            },
            {
             "type": "Identifier",
             "name": "sig"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            },
            {
             "type": "Identifier",
             "name": "orderId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/gamma/L2GammaDecoder.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "./GammaOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./GammaOrder.sol",
      "parts": [
       "./GammaOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GammaModifyInfo",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GammaModifyInfo"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "L2GammaDecoder",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "decodeGammaModifyInfo",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "args",
         "identifier": {
          "type": "Identifier",
          "name": "args"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lowerLimit",
         "identifier": {
          "type": "Identifier",
          "name": "lowerLimit"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "upperLimit",
         "identifier": {
          "type": "Identifier",
          "name": "upperLimit"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int64",
          "stateMutability": null
         },
         "name": "maximaDeviation",
         "identifier": {
          "type": "Identifier",
          "name": "maximaDeviation"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaModifyInfo"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "isEnabled",
            "identifier": {
             "type": "Identifier",
             "name": "isEnabled"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "expiration",
            "identifier": {
             "type": "Identifier",
             "name": "expiration"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint64",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "hedgeInterval",
            "identifier": {
             "type": "Identifier",
             "name": "hedgeInterval"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint32",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "sqrtPriceTrigger",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPriceTrigger"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint32",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "minSlippageTolerance",
            "identifier": {
             "type": "Identifier",
             "name": "minSlippageTolerance"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint32",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "maxSlippageTolerance",
            "identifier": {
             "type": "Identifier",
             "name": "maxSlippageTolerance"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint32",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "auctionPeriod",
            "identifier": {
             "type": "Identifier",
             "name": "auctionPeriod"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint16",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "auctionRange",
            "identifier": {
             "type": "Identifier",
             "name": "auctionRange"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint32",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "decodeGammaModifyParam"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "args"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "GammaModifyInfo"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "isEnabled"
            },
            {
             "type": "Identifier",
             "name": "expiration"
            },
            {
             "type": "Identifier",
             "name": "maximaDeviation"
            },
            {
             "type": "Identifier",
             "name": "lowerLimit"
            },
            {
             "type": "Identifier",
             "name": "upperLimit"
            },
            {
             "type": "Identifier",
             "name": "hedgeInterval"
            },
            {
             "type": "Identifier",
             "name": "sqrtPriceTrigger"
            },
            {
             "type": "Identifier",
             "name": "minSlippageTolerance"
            },
            {
             "type": "Identifier",
             "name": "maxSlippageTolerance"
            },
            {
             "type": "Identifier",
             "name": "auctionPeriod"
            },
            {
             "type": "Identifier",
             "name": "auctionRange"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "decodeGammaParam",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "args",
         "identifier": {
          "type": "Identifier",
          "name": "args"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "deadline",
         "identifier": {
          "type": "Identifier",
          "name": "deadline"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "slippageTolerance",
         "identifier": {
          "type": "Identifier",
          "name": "slippageTolerance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "leverage",
         "identifier": {
          "type": "Identifier",
          "name": "leverage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "deadline"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "args",
                "arguments": []
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "pairId"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "64"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "slippageTolerance"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "128"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "leverage"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "160"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFF"
               }
              ]
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "decodeGammaModifyParam",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "args",
         "identifier": {
          "type": "Identifier",
          "name": "args"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isEnabled",
         "identifier": {
          "type": "Identifier",
          "name": "isEnabled"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "expiration",
         "identifier": {
          "type": "Identifier",
          "name": "expiration"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "hedgeInterval",
         "identifier": {
          "type": "Identifier",
          "name": "hedgeInterval"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "sqrtPriceTrigger",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPriceTrigger"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "minSlippageTolerance",
         "identifier": {
          "type": "Identifier",
          "name": "minSlippageTolerance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "maxSlippageTolerance",
         "identifier": {
          "type": "Identifier",
          "name": "maxSlippageTolerance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint16",
          "stateMutability": null
         },
         "name": "auctionPeriod",
         "identifier": {
          "type": "Identifier",
          "name": "auctionPeriod"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "auctionRange",
         "identifier": {
          "type": "Identifier",
          "name": "auctionRange"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint32",
             "stateMutability": null
            },
            "name": "isEnabledUint",
            "identifier": {
             "type": "Identifier",
             "name": "isEnabledUint"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "NumberLiteral",
           "number": "0",
           "subdenomination": null
          }
         },
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "expiration"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "args",
                "arguments": []
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFFFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "hedgeInterval"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "64"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "sqrtPriceTrigger"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "96"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "minSlippageTolerance"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "128"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "maxSlippageTolerance"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "160"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "auctionRange"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "192"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFFFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "isEnabledUint"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "224"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFF"
               }
              ]
             }
            },
            {
             "type": "AssemblyAssignment",
             "names": [
              {
               "type": "Identifier",
               "name": "auctionPeriod"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "and",
              "arguments": [
               {
                "type": "AssemblyCall",
                "functionName": "shr",
                "arguments": [
                 {
                  "type": "DecimalNumber",
                  "value": "240"
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "args",
                  "arguments": []
                 }
                ]
               },
               {
                "type": "HexNumber",
                "value": "0xFFFF"
               }
              ]
             }
            }
           ]
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "isEnabledUint"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "isEnabled"
              },
              "right": {
               "type": "BooleanLiteral",
               "value": true
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "isEnabled"
              },
              "right": {
               "type": "BooleanLiteral",
               "value": false
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/gamma/GammaTradeMarketWrapper.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "./GammaTradeMarketL2.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./GammaTradeMarketL2.sol",
      "parts": [
       "./GammaTradeMarketL2.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GammaTradeMarketL2",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GammaTradeMarketL2"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IFillerMarket.sol",
      "parts": [
       "../../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./GammaOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./GammaOrder.sol",
      "parts": [
       "./GammaOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GammaOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GammaOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "GammaTradeMarketWrapper",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "GammaTradeMarketL2"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "executeTrade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaOrder"
         },
         "name": "gammaOrder",
         "identifier": {
          "type": "Identifier",
          "name": "gammaOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_executeTrade"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "gammaOrder"
            },
            {
             "type": "Identifier",
             "name": "sig"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/gamma/GammaTradeMarketLib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/math/Bps.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/math/Bps.sol",
      "parts": [
       "../../libraries/math/Bps.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Bps",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Bps"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/Constants.sol",
      "parts": [
       "../../libraries/Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/DataType.sol",
      "parts": [
       "../../libraries/DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/SlippageLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/SlippageLib.sol",
      "parts": [
       "../../libraries/SlippageLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SlippageLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SlippageLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./GammaOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./GammaOrder.sol",
      "parts": [
       "./GammaOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GammaModifyInfo",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GammaModifyInfo"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "GammaTradeMarketLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "CustomErrorDefinition",
       "name": "TooShortHedgeInterval",
       "parameters": []
      },
      {
       "type": "StructDefinition",
       "name": "UserPosition",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "owner",
         "identifier": {
          "type": "Identifier",
          "name": "owner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "leverage",
         "identifier": {
          "type": "Identifier",
          "name": "leverage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int64",
          "stateMutability": null
         },
         "name": "maximaDeviation",
         "identifier": {
          "type": "Identifier",
          "name": "maximaDeviation"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "expiration",
         "identifier": {
          "type": "Identifier",
          "name": "expiration"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lowerLimit",
         "identifier": {
          "type": "Identifier",
          "name": "lowerLimit"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "upperLimit",
         "identifier": {
          "type": "Identifier",
          "name": "upperLimit"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lastHedgedTime",
         "identifier": {
          "type": "Identifier",
          "name": "lastHedgedTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "hedgeInterval",
         "identifier": {
          "type": "Identifier",
          "name": "hedgeInterval"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lastHedgedSqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "lastHedgedSqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtPriceTrigger",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPriceTrigger"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarketLib.AuctionParams"
         },
         "name": "auctionParams",
         "identifier": {
          "type": "Identifier",
          "name": "auctionParams"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "AuctionParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "minSlippageTolerance",
         "identifier": {
          "type": "Identifier",
          "name": "minSlippageTolerance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "maxSlippageTolerance",
         "identifier": {
          "type": "Identifier",
          "name": "maxSlippageTolerance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint16",
          "stateMutability": null
         },
         "name": "auctionPeriod",
         "identifier": {
          "type": "Identifier",
          "name": "auctionPeriod"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "auctionRange",
         "identifier": {
          "type": "Identifier",
          "name": "auctionRange"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "EnumDefinition",
       "name": "CallbackType",
       "members": [
        {
         "type": "EnumValue",
         "name": "NONE"
        },
        {
         "type": "EnumValue",
         "name": "QUOTE"
        },
        {
         "type": "EnumValue",
         "name": "TRADE"
        },
        {
         "type": "EnumValue",
         "name": "CLOSE"
        },
        {
         "type": "EnumValue",
         "name": "HEDGE_BY_TIME"
        },
        {
         "type": "EnumValue",
         "name": "HEDGE_BY_PRICE"
        },
        {
         "type": "EnumValue",
         "name": "CLOSE_BY_TIME"
        },
        {
         "type": "EnumValue",
         "name": "CLOSE_BY_PRICE"
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateDelta",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "_sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int64",
          "stateMutability": null
         },
         "name": "maximaDeviation",
         "identifier": {
          "type": "Identifier",
          "name": "maximaDeviation"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_sqrtAmount",
         "identifier": {
          "type": "Identifier",
          "name": "_sqrtAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "perpAmount",
         "identifier": {
          "type": "Identifier",
          "name": "perpAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "sqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "int256",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "_sqrtPrice"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "right": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "+",
               "left": {
                "type": "NumberLiteral",
                "number": "1e6",
                "subdenomination": null
               },
               "right": {
                "type": "Identifier",
                "name": "maximaDeviation"
               }
              }
             ],
             "isArray": false
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1e6",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+",
           "left": {
            "type": "Identifier",
            "name": "perpAmount"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "BinaryOperation",
             "operator": "*",
             "left": {
              "type": "Identifier",
              "name": "_sqrtAmount"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Constants"
                },
                "memberName": "Q96"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            "right": {
             "type": "Identifier",
             "name": "sqrtPrice"
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "validateHedgeCondition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarketLib.UserPosition"
         },
         "name": "userPosition",
         "identifier": {
          "type": "Identifier",
          "name": "userPosition"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtIndexPrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtIndexPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slippageTolerance",
         "identifier": {
          "type": "Identifier",
          "name": "slippageTolerance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarketLib.CallbackType"
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "hedgeInterval"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<=",
            "left": {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "userPosition"
              },
              "memberName": "lastHedgedTime"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "userPosition"
              },
              "memberName": "hedgeInterval"
             }
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "block"
             },
             "memberName": "timestamp"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BooleanLiteral",
                "value": true
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "calculateSlippageTolerance"
                },
                "arguments": [
                 {
                  "type": "BinaryOperation",
                  "operator": "+",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "userPosition"
                   },
                   "memberName": "lastHedgedTime"
                  },
                  "right": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "userPosition"
                   },
                   "memberName": "hedgeInterval"
                  }
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "block"
                  },
                  "memberName": "timestamp"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "userPosition"
                  },
                  "memberName": "auctionParams"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "GammaTradeMarketLib"
                 },
                 "memberName": "CallbackType"
                },
                "memberName": "HEDGE_BY_TIME"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "sqrtPriceTrigger"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BooleanLiteral",
                "value": false
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "GammaTradeMarketLib"
                 },
                 "memberName": "CallbackType"
                },
                "memberName": "NONE"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "upperThreshold",
            "identifier": {
             "type": "Identifier",
             "name": "upperThreshold"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "lastHedgedSqrtPrice"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "sqrtPriceTrigger"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Bps"
            },
            "memberName": "ONE"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "lowerThreshold",
            "identifier": {
             "type": "Identifier",
             "name": "lowerThreshold"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "lastHedgedSqrtPrice"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Bps"
             },
             "memberName": "ONE"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "sqrtPriceTrigger"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">=",
           "left": {
            "type": "Identifier",
            "name": "lowerThreshold"
           },
           "right": {
            "type": "Identifier",
            "name": "sqrtIndexPrice"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BooleanLiteral",
                "value": true
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "calculateSlippageToleranceByPrice"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "sqrtIndexPrice"
                 },
                 {
                  "type": "Identifier",
                  "name": "lowerThreshold"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "userPosition"
                  },
                  "memberName": "auctionParams"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "GammaTradeMarketLib"
                 },
                 "memberName": "CallbackType"
                },
                "memberName": "HEDGE_BY_PRICE"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "Identifier",
            "name": "upperThreshold"
           },
           "right": {
            "type": "Identifier",
            "name": "sqrtIndexPrice"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BooleanLiteral",
                "value": true
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "calculateSlippageToleranceByPrice"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "upperThreshold"
                 },
                 {
                  "type": "Identifier",
                  "name": "sqrtIndexPrice"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "userPosition"
                  },
                  "memberName": "auctionParams"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "GammaTradeMarketLib"
                 },
                 "memberName": "CallbackType"
                },
                "memberName": "HEDGE_BY_PRICE"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "BooleanLiteral",
             "value": false
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "GammaTradeMarketLib"
              },
              "memberName": "CallbackType"
             },
             "memberName": "NONE"
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "validateCloseCondition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserPosition"
         },
         "name": "userPosition",
         "identifier": {
          "type": "Identifier",
          "name": "userPosition"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtIndexPrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtIndexPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slippageTolerance",
         "identifier": {
          "type": "Identifier",
          "name": "slippageTolerance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "CallbackType"
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "expiration"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BooleanLiteral",
                "value": true
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "calculateSlippageTolerance"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "userPosition"
                  },
                  "memberName": "expiration"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "block"
                  },
                  "memberName": "timestamp"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "userPosition"
                  },
                  "memberName": "auctionParams"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "CallbackType"
                },
                "memberName": "CLOSE_BY_TIME"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "upperThreshold",
            "identifier": {
             "type": "Identifier",
             "name": "upperThreshold"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "userPosition"
           },
           "memberName": "upperLimit"
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "lowerThreshold",
            "identifier": {
             "type": "Identifier",
             "name": "lowerThreshold"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "userPosition"
           },
           "memberName": "lowerLimit"
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "lowerThreshold"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": ">=",
            "left": {
             "type": "Identifier",
             "name": "lowerThreshold"
            },
            "right": {
             "type": "Identifier",
             "name": "sqrtIndexPrice"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BooleanLiteral",
                "value": true
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "calculateSlippageToleranceByPrice"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "sqrtIndexPrice"
                 },
                 {
                  "type": "Identifier",
                  "name": "lowerThreshold"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "userPosition"
                  },
                  "memberName": "auctionParams"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "CallbackType"
                },
                "memberName": "CLOSE_BY_PRICE"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "upperThreshold"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<=",
            "left": {
             "type": "Identifier",
             "name": "upperThreshold"
            },
            "right": {
             "type": "Identifier",
             "name": "sqrtIndexPrice"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BooleanLiteral",
                "value": true
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "calculateSlippageToleranceByPrice"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "upperThreshold"
                 },
                 {
                  "type": "Identifier",
                  "name": "sqrtIndexPrice"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "userPosition"
                  },
                  "memberName": "auctionParams"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "CallbackType"
                },
                "memberName": "CLOSE_BY_PRICE"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "BooleanLiteral",
             "value": false
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "CallbackType"
             },
             "memberName": "NONE"
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateSlippageTolerance",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "startTime",
         "identifier": {
          "type": "Identifier",
          "name": "startTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "currentTime",
         "identifier": {
          "type": "Identifier",
          "name": "currentTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AuctionParams"
         },
         "name": "auctionParams",
         "identifier": {
          "type": "Identifier",
          "name": "auctionParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "Identifier",
            "name": "currentTime"
           },
           "right": {
            "type": "Identifier",
            "name": "startTime"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "auctionParams"
              },
              "memberName": "minSlippageTolerance"
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "elapsed",
            "identifier": {
             "type": "Identifier",
             "name": "elapsed"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "Identifier",
                "name": "currentTime"
               },
               "right": {
                "type": "Identifier",
                "name": "startTime"
               }
              }
             ],
             "isArray": false
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Bps"
             },
             "memberName": "ONE"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "auctionParams"
            },
            "memberName": "auctionPeriod"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "elapsed"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Bps"
            },
            "memberName": "ONE"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "auctionParams"
              },
              "memberName": "maxSlippageTolerance"
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "auctionParams"
              },
              "memberName": "minSlippageTolerance"
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "elapsed"
               },
               "right": {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "BinaryOperation",
                  "operator": "-",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "auctionParams"
                   },
                   "memberName": "maxSlippageTolerance"
                  },
                  "right": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "auctionParams"
                   },
                   "memberName": "minSlippageTolerance"
                  }
                 }
                ],
                "isArray": false
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Bps"
               },
               "memberName": "ONE"
              }
             }
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateSlippageToleranceByPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price1",
         "identifier": {
          "type": "Identifier",
          "name": "price1"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price2",
         "identifier": {
          "type": "Identifier",
          "name": "price2"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AuctionParams"
         },
         "name": "auctionParams",
         "identifier": {
          "type": "Identifier",
          "name": "auctionParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "Identifier",
            "name": "price2"
           },
           "right": {
            "type": "Identifier",
            "name": "price1"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "auctionParams"
              },
              "memberName": "minSlippageTolerance"
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "ratio",
            "identifier": {
             "type": "Identifier",
             "name": "ratio"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "price2"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Bps"
                },
                "memberName": "ONE"
               }
              },
              "right": {
               "type": "Identifier",
               "name": "price1"
              }
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Bps"
              },
              "memberName": "ONE"
             }
            }
           ],
           "isArray": false
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "ratio"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "auctionParams"
            },
            "memberName": "auctionRange"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "auctionParams"
              },
              "memberName": "maxSlippageTolerance"
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "auctionParams"
              },
              "memberName": "minSlippageTolerance"
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "ratio"
               },
               "right": {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "BinaryOperation",
                  "operator": "-",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "auctionParams"
                   },
                   "memberName": "maxSlippageTolerance"
                  },
                  "right": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "auctionParams"
                   },
                   "memberName": "minSlippageTolerance"
                  }
                 }
                ],
                "isArray": false
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "auctionParams"
               },
               "memberName": "auctionRange"
              }
             }
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "saveUserPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarketLib.UserPosition"
         },
         "name": "userPosition",
         "identifier": {
          "type": "Identifier",
          "name": "userPosition"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaModifyInfo"
         },
         "name": "modifyInfo",
         "identifier": {
          "type": "Identifier",
          "name": "modifyInfo"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "isEnabled"
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "modifyInfo"
             },
             "memberName": "hedgeInterval"
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "NumberLiteral",
             "number": "10",
             "subdenomination": "minutes"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "modifyInfo"
             },
             "memberName": "hedgeInterval"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "TooShortHedgeInterval"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "modifyInfo"
              },
              "memberName": "maxSlippageTolerance"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "modifyInfo"
              },
              "memberName": "minSlippageTolerance"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "<=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "modifyInfo"
              },
              "memberName": "maxSlippageTolerance"
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "NumberLiteral",
               "number": "2",
               "subdenomination": null
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Bps"
               },
               "memberName": "ONE"
              }
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": "<",
              "left": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "NumberLiteral",
                "number": "1e6",
                "subdenomination": null
               },
               "isPrefix": true
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "modifyInfo"
               },
               "memberName": "maximaDeviation"
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "<",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "modifyInfo"
               },
               "memberName": "maximaDeviation"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "1e6",
               "subdenomination": null
              }
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "expiration"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "expiration"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "lowerLimit"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "lowerLimit"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "upperLimit"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "upperLimit"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "maximaDeviation"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "maximaDeviation"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "hedgeInterval"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "hedgeInterval"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "sqrtPriceTrigger"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "sqrtPriceTrigger"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "auctionParams"
            },
            "memberName": "minSlippageTolerance"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "minSlippageTolerance"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "auctionParams"
            },
            "memberName": "maxSlippageTolerance"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "maxSlippageTolerance"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "auctionParams"
            },
            "memberName": "auctionPeriod"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "auctionPeriod"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "auctionParams"
            },
            "memberName": "auctionRange"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "memberName": "auctionRange"
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BooleanLiteral",
           "value": true
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/gamma/GammaTradeMarketL2.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "./GammaTradeMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./GammaTradeMarket.sol",
      "parts": [
       "./GammaTradeMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GammaTradeMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GammaTradeMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/OrderInfoLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/OrderInfoLib.sol",
      "parts": [
       "../../libraries/orders/OrderInfoLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "OrderInfo",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "OrderInfo"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./GammaOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./GammaOrder.sol",
      "parts": [
       "./GammaOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GammaOrder",
       null
      ],
      [
       "GammaOrderLib",
       null
      ],
      [
       "GammaModifyInfo",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GammaOrder"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "GammaOrderLib"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "GammaModifyInfo"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./L2GammaDecoder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./L2GammaDecoder.sol",
      "parts": [
       "./L2GammaDecoder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "L2GammaDecoder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "L2GammaDecoder"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "StructDefinition",
     "name": "GammaOrderL2",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "trader",
       "identifier": {
        "type": "Identifier",
        "name": "trader"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "nonce",
       "identifier": {
        "type": "Identifier",
        "name": "nonce"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "positionId",
       "identifier": {
        "type": "Identifier",
        "name": "positionId"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "quantity",
       "identifier": {
        "type": "Identifier",
        "name": "quantity"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "quantitySqrt",
       "identifier": {
        "type": "Identifier",
        "name": "quantitySqrt"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "marginAmount",
       "identifier": {
        "type": "Identifier",
        "name": "marginAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "baseSqrtPrice",
       "identifier": {
        "type": "Identifier",
        "name": "baseSqrtPrice"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes32",
        "stateMutability": null
       },
       "name": "param",
       "identifier": {
        "type": "Identifier",
        "name": "param"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes32",
        "stateMutability": null
       },
       "name": "modifyParam",
       "identifier": {
        "type": "Identifier",
        "name": "modifyParam"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "lowerLimit",
       "identifier": {
        "type": "Identifier",
        "name": "lowerLimit"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "upperLimit",
       "identifier": {
        "type": "Identifier",
        "name": "upperLimit"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int64",
        "stateMutability": null
       },
       "name": "maximaDeviation",
       "identifier": {
        "type": "Identifier",
        "name": "maximaDeviation"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "StructDefinition",
     "name": "GammaModifyOrderL2",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "trader",
       "identifier": {
        "type": "Identifier",
        "name": "trader"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "nonce",
       "identifier": {
        "type": "Identifier",
        "name": "nonce"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "deadline",
       "identifier": {
        "type": "Identifier",
        "name": "deadline"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "positionId",
       "identifier": {
        "type": "Identifier",
        "name": "positionId"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes32",
        "stateMutability": null
       },
       "name": "param",
       "identifier": {
        "type": "Identifier",
        "name": "param"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "lowerLimit",
       "identifier": {
        "type": "Identifier",
        "name": "lowerLimit"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "upperLimit",
       "identifier": {
        "type": "Identifier",
        "name": "upperLimit"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int64",
        "stateMutability": null
       },
       "name": "maximaDeviation",
       "identifier": {
        "type": "Identifier",
        "name": "maximaDeviation"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "GammaTradeMarketL2",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "GammaTradeMarket"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "executeTradeL2",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaOrderL2"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "GammaModifyInfo"
            },
            "name": "modifyInfo",
            "identifier": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "L2GammaDecoder"
            },
            "memberName": "decodeGammaModifyInfo"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "modifyParam"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "lowerLimit"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "upperLimit"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "maximaDeviation"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "deadline",
            "identifier": {
             "type": "Identifier",
             "name": "deadline"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint64",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "pairId",
            "identifier": {
             "type": "Identifier",
             "name": "pairId"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint64",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "slippageTolerance",
            "identifier": {
             "type": "Identifier",
             "name": "slippageTolerance"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint32",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "leverage",
            "identifier": {
             "type": "Identifier",
             "name": "leverage"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint8",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "L2GammaDecoder"
            },
            "memberName": "decodeGammaParam"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "param"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_executeTrade"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "GammaOrder"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "OrderInfo"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "address"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "this"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "trader"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "nonce"
                },
                {
                 "type": "Identifier",
                 "name": "deadline"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "Identifier",
               "name": "pairId"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "positionId"
              },
              {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "_quoteTokenMap"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "quantity"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "quantitySqrt"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "marginAmount"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "baseSqrtPrice"
              },
              {
               "type": "Identifier",
               "name": "slippageTolerance"
              },
              {
               "type": "Identifier",
               "name": "leverage"
              },
              {
               "type": "Identifier",
               "name": "modifyInfo"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "sig"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "modifyAutoHedgeAndClose",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaModifyOrderL2"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "GammaModifyInfo"
            },
            "name": "modifyInfo",
            "identifier": {
             "type": "Identifier",
             "name": "modifyInfo"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "L2GammaDecoder"
            },
            "memberName": "decodeGammaModifyInfo"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "param"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "lowerLimit"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "upperLimit"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "maximaDeviation"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint64",
             "stateMutability": null
            },
            "name": "pairId",
            "identifier": {
             "type": "Identifier",
             "name": "pairId"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "userPositions"
            },
            "index": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "positionId"
            }
           },
           "memberName": "pairId"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_modifyAutoHedgeAndClose"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "GammaOrder"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "OrderInfo"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "address"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "this"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "trader"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "nonce"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "deadline"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "Identifier",
               "name": "pairId"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "positionId"
              },
              {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "_quoteTokenMap"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "Identifier",
               "name": "modifyInfo"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/gamma/GammaTradeMarket.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol",
      "parts": [
       "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ReentrancyGuardUpgradeable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ReentrancyGuardUpgradeable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/permit2/src/interfaces/IPermit2.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/permit2/src/interfaces/IPermit2.sol",
      "parts": [
       "@uniswap/permit2/src/interfaces/IPermit2.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPermit2",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPermit2"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IFillerMarket.sol",
      "parts": [
       "../../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../base/BaseMarketUpgradable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../base/BaseMarketUpgradable.sol",
      "parts": [
       "../../base/BaseMarketUpgradable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "BaseMarketUpgradable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "BaseMarketUpgradable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../base/BaseHookCallbackUpgradable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../base/BaseHookCallbackUpgradable.sol",
      "parts": [
       "../../base/BaseHookCallbackUpgradable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "BaseHookCallbackUpgradable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "BaseHookCallbackUpgradable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/Permit2Lib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/Permit2Lib.sol",
      "parts": [
       "../../libraries/orders/Permit2Lib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Permit2Lib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Permit2Lib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/ResolvedOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/ResolvedOrder.sol",
      "parts": [
       "../../libraries/orders/ResolvedOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ResolvedOrder",
       null
      ],
      [
       "ResolvedOrderLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ResolvedOrder"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "ResolvedOrderLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/SlippageLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/SlippageLib.sol",
      "parts": [
       "../../libraries/SlippageLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SlippageLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SlippageLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/math/Bps.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/math/Bps.sol",
      "parts": [
       "../../libraries/math/Bps.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Bps",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Bps"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/DataType.sol",
      "parts": [
       "../../libraries/DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./GammaOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./GammaOrder.sol",
      "parts": [
       "./GammaOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GammaOrder",
       null
      ],
      [
       "GammaOrderLib",
       null
      ],
      [
       "GammaModifyInfo",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GammaOrder"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "GammaOrderLib"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "GammaModifyInfo"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./ArrayLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./ArrayLib.sol",
      "parts": [
       "./ArrayLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ArrayLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ArrayLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./GammaTradeMarketLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./GammaTradeMarketLib.sol",
      "parts": [
       "./GammaTradeMarketLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GammaTradeMarketLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GammaTradeMarketLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "GammaTradeMarket",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "IFillerMarket"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "BaseMarketUpgradable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ReentrancyGuardUpgradeable"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ResolvedOrder"
       },
       "libraryName": "ResolvedOrderLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ArrayTypeName",
        "baseTypeName": {
         "type": "ElementaryTypeName",
         "name": "uint256",
         "stateMutability": null
        },
        "length": null
       },
       "libraryName": "ArrayLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GammaOrder"
       },
       "libraryName": "GammaOrderLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ResolvedOrder"
       },
       "libraryName": "Permit2Lib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "PositionNotFound",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "PositionHasDifferentPairId",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "PositionIsNotClosed",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "InvalidOrder",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "SignerIsNotPositionOwner",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "HedgeTriggerNotMatched",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "DeltaIsZero",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "AlreadyClosed",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "AutoCloseTriggerNotMatched",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "MarginUpdateMustBeZero",
       "parameters": []
      },
      {
       "type": "StructDefinition",
       "name": "CallbackData",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarketLib.CallbackType"
         },
         "name": "callbackType",
         "identifier": {
          "type": "Identifier",
          "name": "callbackType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "marginAmountUpdate",
         "identifier": {
          "type": "Identifier",
          "name": "marginAmountUpdate"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPermit2"
         },
         "name": "_permit2",
         "identifier": {
          "type": "Identifier",
          "name": "_permit2"
         },
         "expression": null,
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "owner"
          },
          "valueType": {
           "type": "ArrayTypeName",
           "baseTypeName": {
            "type": "ElementaryTypeName",
            "name": "uint256",
            "stateMutability": null
           },
           "length": null
          },
          "valueName": null
         },
         "name": "positionIDs",
         "identifier": {
          "type": "Identifier",
          "name": "positionIDs"
         },
         "expression": null,
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "positionId"
          },
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "GammaTradeMarketLib.UserPosition"
          },
          "valueName": null
         },
         "name": "userPositions",
         "identifier": {
          "type": "Identifier",
          "name": "userPositions"
         },
         "expression": null,
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "EventDefinition",
       "name": "GammaPositionTraded",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quantity",
         "identifier": {
          "type": "Identifier",
          "name": "quantity"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quantitySqrt",
         "identifier": {
          "type": "Identifier",
          "name": "quantitySqrt"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.Payoff"
         },
         "name": "payoff",
         "identifier": {
          "type": "Identifier",
          "name": "payoff"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "marginAmount",
         "identifier": {
          "type": "Identifier",
          "name": "marginAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarketLib.CallbackType"
         },
         "name": "callbackType",
         "identifier": {
          "type": "Identifier",
          "name": "callbackType"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "GammaPositionModified",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaModifyInfo"
         },
         "name": "modifyInfo",
         "identifier": {
          "type": "Identifier",
          "name": "modifyInfo"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "initialize",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "permit2Address",
         "identifier": {
          "type": "Identifier",
          "name": "permit2Address"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "whitelistFiller",
         "identifier": {
          "type": "Identifier",
          "name": "whitelistFiller"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoterAddress",
         "identifier": {
          "type": "Identifier",
          "name": "quoterAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__ReentrancyGuard_init"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__BaseMarket_init"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "predyPool"
            },
            {
             "type": "Identifier",
             "name": "whitelistFiller"
            },
            {
             "type": "Identifier",
             "name": "quoterAddress"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_permit2"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "IPermit2"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "permit2Address"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "initializer",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "predyTradeAfterCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "CallbackData"
            },
            "name": "callbackData",
            "identifier": {
             "type": "Identifier",
             "name": "callbackData"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "extraData"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "CallbackData"
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "ERC20"
            },
            "name": "quoteToken",
            "identifier": {
             "type": "Identifier",
             "name": "quoteToken"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ERC20"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "_getQuoteTokenAddress"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tradeParams"
               },
               "memberName": "pairId"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "callbackData"
            },
            "memberName": "callbackType"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "GammaTradeMarketLib"
             },
             "memberName": "CallbackType"
            },
            "memberName": "QUOTE"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_revertTradeResult"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "tradeResult"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tradeResult"
               },
               "memberName": "minMargin"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": "!=",
                 "left": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "callbackData"
                  },
                  "memberName": "marginAmountUpdate"
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "RevertStatement",
                   "revertCall": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "MarginUpdateMustBeZero"
                    },
                    "arguments": [],
                    "names": [],
                    "identifiers": []
                   }
                  }
                 ]
                },
                "falseBody": null
               },
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 {
                  "type": "VariableDeclaration",
                  "typeName": {
                   "type": "UserDefinedTypeName",
                   "namePath": "DataType.Vault"
                  },
                  "name": "vault",
                  "identifier": {
                   "type": "Identifier",
                   "name": "vault"
                  },
                  "storageLocation": "memory",
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "_predyPool"
                  },
                  "memberName": "getVault"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeParams"
                   },
                   "memberName": "vaultId"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "_predyPool"
                  },
                  "memberName": "take"
                 },
                 "arguments": [
                  {
                   "type": "BooleanLiteral",
                   "value": true
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "callbackData"
                   },
                   "memberName": "trader"
                  },
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "ElementaryTypeName",
                    "name": "uint256",
                    "stateMutability": null
                   },
                   "arguments": [
                    {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "vault"
                     },
                     "memberName": "margin"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "_removePosition"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeParams"
                   },
                   "memberName": "vaultId"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "EmitStatement",
                "eventCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "GammaPositionTraded"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "callbackData"
                   },
                   "memberName": "trader"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeParams"
                   },
                   "memberName": "pairId"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeParams"
                   },
                   "memberName": "vaultId"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeParams"
                   },
                   "memberName": "tradeAmount"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeParams"
                   },
                   "memberName": "tradeAmountSqrt"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeResult"
                   },
                   "memberName": "payoff"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeResult"
                   },
                   "memberName": "fee"
                  },
                  {
                   "type": "UnaryOperation",
                   "operator": "-",
                   "subExpression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "vault"
                    },
                    "memberName": "margin"
                   },
                   "isPrefix": true
                  },
                  {
                   "type": "Conditional",
                   "condition": {
                    "type": "BinaryOperation",
                    "operator": "==",
                    "left": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "callbackData"
                     },
                     "memberName": "callbackType"
                    },
                    "right": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "GammaTradeMarketLib"
                      },
                      "memberName": "CallbackType"
                     },
                     "memberName": "TRADE"
                    }
                   },
                   "trueExpression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "GammaTradeMarketLib"
                     },
                     "memberName": "CallbackType"
                    },
                    "memberName": "CLOSE"
                   },
                   "falseExpression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "callbackData"
                    },
                    "memberName": "callbackType"
                   }
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": {
              "type": "Block",
              "statements": [
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 {
                  "type": "VariableDeclaration",
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "int256",
                   "stateMutability": null
                  },
                  "name": "marginAmountUpdate",
                  "identifier": {
                   "type": "Identifier",
                   "name": "marginAmountUpdate"
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "callbackData"
                 },
                 "memberName": "marginAmountUpdate"
                }
               },
               {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": ">",
                 "left": {
                  "type": "Identifier",
                  "name": "marginAmountUpdate"
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "quoteToken"
                     },
                     "memberName": "safeTransfer"
                    },
                    "arguments": [
                     {
                      "type": "FunctionCall",
                      "expression": {
                       "type": "Identifier",
                       "name": "address"
                      },
                      "arguments": [
                       {
                        "type": "Identifier",
                        "name": "_predyPool"
                       }
                      ],
                      "names": [],
                      "identifiers": []
                     },
                     {
                      "type": "FunctionCall",
                      "expression": {
                       "type": "ElementaryTypeName",
                       "name": "uint256",
                       "stateMutability": null
                      },
                      "arguments": [
                       {
                        "type": "Identifier",
                        "name": "marginAmountUpdate"
                       }
                      ],
                      "names": [],
                      "identifiers": []
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  }
                 ]
                },
                "falseBody": {
                 "type": "IfStatement",
                 "condition": {
                  "type": "BinaryOperation",
                  "operator": "<",
                  "left": {
                   "type": "Identifier",
                   "name": "marginAmountUpdate"
                  },
                  "right": {
                   "type": "NumberLiteral",
                   "number": "0",
                   "subdenomination": null
                  }
                 },
                 "trueBody": {
                  "type": "Block",
                  "statements": [
                   {
                    "type": "ExpressionStatement",
                    "expression": {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "_predyPool"
                      },
                      "memberName": "take"
                     },
                     "arguments": [
                      {
                       "type": "BooleanLiteral",
                       "value": true
                      },
                      {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "Identifier",
                        "name": "callbackData"
                       },
                       "memberName": "trader"
                      },
                      {
                       "type": "FunctionCall",
                       "expression": {
                        "type": "ElementaryTypeName",
                        "name": "uint256",
                        "stateMutability": null
                       },
                       "arguments": [
                        {
                         "type": "UnaryOperation",
                         "operator": "-",
                         "subExpression": {
                          "type": "Identifier",
                          "name": "marginAmountUpdate"
                         },
                         "isPrefix": true
                        }
                       ],
                       "names": [],
                       "identifiers": []
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    }
                   }
                  ]
                 },
                 "falseBody": null
                }
               },
               {
                "type": "EmitStatement",
                "eventCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "GammaPositionTraded"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "callbackData"
                   },
                   "memberName": "trader"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeParams"
                   },
                   "memberName": "pairId"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeParams"
                   },
                   "memberName": "vaultId"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeParams"
                   },
                   "memberName": "tradeAmount"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeParams"
                   },
                   "memberName": "tradeAmountSqrt"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeResult"
                   },
                   "memberName": "payoff"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeResult"
                   },
                   "memberName": "fee"
                  },
                  {
                   "type": "Identifier",
                   "name": "marginAmountUpdate"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "callbackData"
                   },
                   "memberName": "callbackType"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPredyPool",
         "arguments": null
        }
       ],
       "override": [
        {
         "type": "UserDefinedTypeName",
         "namePath": "BaseHookCallbackUpgradable"
        }
       ],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "execLiquidationCall",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "closeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "tradeResult"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_predyPool"
             },
             "memberName": "execLiquidationCall"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "vaultId"
             },
             {
              "type": "Identifier",
              "name": "closeRatio"
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_getSettlementDataFromV3"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "settlementParams"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "closeRatio"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1e18",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_removePosition"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "vaultId"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_executeTrade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaOrder"
         },
         "name": "gammaOrder",
         "identifier": {
          "type": "Identifier",
          "name": "gammaOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "ResolvedOrder"
            },
            "name": "resolvedOrder",
            "identifier": {
             "type": "Identifier",
             "name": "resolvedOrder"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "GammaOrderLib"
            },
            "memberName": "resolve"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "gammaOrder"
            },
            {
             "type": "Identifier",
             "name": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_validateQuoteTokenAddress"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "entryTokenAddress"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_verifyOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "resolvedOrder"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "tradeResult"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_predyPool"
             },
             "memberName": "trade"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "IPredyPool"
               },
               "memberName": "TradeParams"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "gammaOrder"
                },
                "memberName": "pairId"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "gammaOrder"
                },
                "memberName": "positionId"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "gammaOrder"
                },
                "memberName": "quantity"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "gammaOrder"
                },
                "memberName": "quantitySqrt"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "abi"
                 },
                 "memberName": "encode"
                },
                "arguments": [
                 {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "CallbackData"
                  },
                  "arguments": [
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "GammaTradeMarketLib"
                     },
                     "memberName": "CallbackType"
                    },
                    "memberName": "TRADE"
                   },
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "gammaOrder"
                     },
                     "memberName": "info"
                    },
                    "memberName": "trader"
                   },
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "gammaOrder"
                    },
                    "memberName": "marginAmount"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_getSettlementDataFromV3"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "settlementParams"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "minMargin"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              },
              "right": {
               "type": "Identifier",
               "name": "whitelistFiller"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "RevertStatement",
                "revertCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "CallerIsNotFiller"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "GammaTradeMarketLib.UserPosition"
            },
            "name": "userPosition",
            "identifier": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_getOrInitPosition"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeResult"
             },
             "memberName": "vaultId"
            },
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "gammaOrder"
              },
              "memberName": "positionId"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "gammaOrder"
              },
              "memberName": "info"
             },
             "memberName": "trader"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_saveUserPosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "userPosition"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "modifyInfo"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "leverage"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "gammaOrder"
            },
            "memberName": "leverage"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "lastHedgedSqrtPrice"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "sqrtTwap"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "lastHedgedTime"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "gammaOrder"
            },
            "memberName": "positionId"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_addPositionIndex"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "gammaOrder"
                 },
                 "memberName": "info"
                },
                "memberName": "trader"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "userPosition"
                },
                "memberName": "vaultId"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_predyPool"
               },
               "memberName": "updateRecepient"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "tradeResult"
                },
                "memberName": "vaultId"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "gammaOrder"
                 },
                 "memberName": "info"
                },
                "memberName": "trader"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SlippageLib"
            },
            "memberName": "checkPrice"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "baseSqrtPrice"
            },
            {
             "type": "Identifier",
             "name": "tradeResult"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "slippageTolerance"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "SlippageLib"
             },
             "memberName": "MAX_ACCEPTABLE_SQRT_PRICE_RANGE"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_modifyAutoHedgeAndClose",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaOrder"
         },
         "name": "gammaOrder",
         "identifier": {
          "type": "Identifier",
          "name": "gammaOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "||",
            "left": {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "gammaOrder"
              },
              "memberName": "quantity"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            "right": {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "gammaOrder"
              },
              "memberName": "quantitySqrt"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "!=",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "marginAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "InvalidOrder"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "ResolvedOrder"
            },
            "name": "resolvedOrder",
            "identifier": {
             "type": "Identifier",
             "name": "resolvedOrder"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "GammaOrderLib"
            },
            "memberName": "resolve"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "gammaOrder"
            },
            {
             "type": "Identifier",
             "name": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_verifyOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "resolvedOrder"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "GammaTradeMarketLib.UserPosition"
            },
            "name": "userPosition",
            "identifier": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_getOrInitPosition"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "positionId"
            },
            {
             "type": "BooleanLiteral",
             "value": false
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "gammaOrder"
              },
              "memberName": "info"
             },
             "memberName": "trader"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_saveUserPosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "userPosition"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "modifyInfo"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "autoHedge",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "GammaTradeMarketLib.UserPosition"
            },
            "name": "userPosition",
            "identifier": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "userPositions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "vaultId"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "!=",
            "left": {
             "type": "Identifier",
             "name": "positionId"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "vaultId"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "PositionNotFound"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "sqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getSqrtIndexPrice"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "hedgeRequired",
            "identifier": {
             "type": "Identifier",
             "name": "hedgeRequired"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "slippageTorelance",
            "identifier": {
             "type": "Identifier",
             "name": "slippageTorelance"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "triggerType",
            "identifier": {
             "type": "Identifier",
             "name": "triggerType"
            },
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "GammaTradeMarketLib.CallbackType"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "GammaTradeMarketLib"
            },
            "memberName": "validateHedgeCondition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "userPosition"
            },
            {
             "type": "Identifier",
             "name": "sqrtPrice"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "Identifier",
            "name": "hedgeRequired"
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "HedgeTriggerNotMatched"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "lastHedgedSqrtPrice"
           },
           "right": {
            "type": "Identifier",
            "name": "sqrtPrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "lastHedgedTime"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.Vault"
            },
            "name": "vault",
            "identifier": {
             "type": "Identifier",
             "name": "vault"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getVault"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "vaultId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "delta",
            "identifier": {
             "type": "Identifier",
             "name": "delta"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "GammaTradeMarketLib"
            },
            "memberName": "calculateDelta"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "maximaDeviation"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "openPosition"
              },
              "memberName": "sqrtPerp"
             },
             "memberName": "amount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "openPosition"
              },
              "memberName": "perp"
             },
             "memberName": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "delta"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "DeltaIsZero"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IPredyPool.TradeParams"
            },
            "name": "tradeParams",
            "identifier": {
             "type": "Identifier",
             "name": "tradeParams"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "IPredyPool"
            },
            "memberName": "TradeParams"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "vaultId"
            },
            {
             "type": "UnaryOperation",
             "operator": "-",
             "subExpression": {
              "type": "Identifier",
              "name": "delta"
             },
             "isPrefix": true
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encode"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "CallbackData"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "triggerType"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "userPosition"
                 },
                 "memberName": "owner"
                },
                {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "tradeResult"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_predyPool"
             },
             "memberName": "trade"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "tradeParams"
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_getSettlementDataFromV3"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "settlementParams"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SlippageLib"
            },
            "memberName": "checkPrice"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            {
             "type": "Identifier",
             "name": "tradeResult"
            },
            {
             "type": "Identifier",
             "name": "slippageTorelance"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "SlippageLib"
             },
             "memberName": "MAX_ACCEPTABLE_SQRT_PRICE_RANGE"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "autoClose",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "GammaTradeMarketLib.UserPosition"
            },
            "name": "userPosition",
            "identifier": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "userPositions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "vaultId"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "!=",
            "left": {
             "type": "Identifier",
             "name": "positionId"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "vaultId"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "PositionNotFound"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "sqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getSqrtIndexPrice"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "closeRequired",
            "identifier": {
             "type": "Identifier",
             "name": "closeRequired"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "slippageTorelance",
            "identifier": {
             "type": "Identifier",
             "name": "slippageTorelance"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "triggerType",
            "identifier": {
             "type": "Identifier",
             "name": "triggerType"
            },
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "GammaTradeMarketLib.CallbackType"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "GammaTradeMarketLib"
            },
            "memberName": "validateCloseCondition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "userPosition"
            },
            {
             "type": "Identifier",
             "name": "sqrtPrice"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "Identifier",
            "name": "closeRequired"
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "AutoCloseTriggerNotMatched"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.Vault"
            },
            "name": "vault",
            "identifier": {
             "type": "Identifier",
             "name": "vault"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getVault"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "vaultId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IPredyPool.TradeParams"
            },
            "name": "tradeParams",
            "identifier": {
             "type": "Identifier",
             "name": "tradeParams"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "IPredyPool"
            },
            "memberName": "TradeParams"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "vaultId"
            },
            {
             "type": "UnaryOperation",
             "operator": "-",
             "subExpression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "vault"
                },
                "memberName": "openPosition"
               },
               "memberName": "perp"
              },
              "memberName": "amount"
             },
             "isPrefix": true
            },
            {
             "type": "UnaryOperation",
             "operator": "-",
             "subExpression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "vault"
                },
                "memberName": "openPosition"
               },
               "memberName": "sqrtPerp"
              },
              "memberName": "amount"
             },
             "isPrefix": true
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encode"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "CallbackData"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "triggerType"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "userPosition"
                 },
                 "memberName": "owner"
                },
                {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "tradeAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "tradeAmountSqrt"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "AlreadyClosed"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "tradeResult"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_predyPool"
             },
             "memberName": "trade"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "tradeParams"
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_getSettlementDataFromV3"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "settlementParams"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SlippageLib"
            },
            "memberName": "checkPrice"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            {
             "type": "Identifier",
             "name": "tradeResult"
            },
            {
             "type": "Identifier",
             "name": "slippageTorelance"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "SlippageLib"
             },
             "memberName": "MAX_ACCEPTABLE_SQRT_PRICE_RANGE"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteTrade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaOrder"
         },
         "name": "gammaOrder",
         "identifier": {
          "type": "Identifier",
          "name": "gammaOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "trade"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "IPredyPool"
              },
              "memberName": "TradeParams"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "gammaOrder"
               },
               "memberName": "pairId"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "gammaOrder"
               },
               "memberName": "positionId"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "gammaOrder"
               },
               "memberName": "quantity"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "gammaOrder"
               },
               "memberName": "quantitySqrt"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "abi"
                },
                "memberName": "encode"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "CallbackData"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "GammaTradeMarketLib"
                    },
                    "memberName": "CallbackType"
                   },
                   "memberName": "QUOTE"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "gammaOrder"
                    },
                    "memberName": "info"
                   },
                   "memberName": "trader"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "gammaOrder"
                   },
                   "memberName": "marginAmount"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "_getSettlementDataFromV3"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "settlementParams"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "checkAutoHedgeAndClose",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "hedgeRequired",
         "identifier": {
          "type": "Identifier",
          "name": "hedgeRequired"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "closeRequired",
         "identifier": {
          "type": "Identifier",
          "name": "closeRequired"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "resultPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "resultPositionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "GammaTradeMarketLib.UserPosition"
            },
            "name": "userPosition",
            "identifier": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "userPositions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.Vault"
            },
            "name": "vault",
            "identifier": {
             "type": "Identifier",
             "name": "vault"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getVault"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "vaultId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "openPosition"
              },
              "memberName": "perp"
             },
             "memberName": "amount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "openPosition"
              },
              "memberName": "sqrtPerp"
             },
             "memberName": "amount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BooleanLiteral",
                "value": false
               },
               {
                "type": "BooleanLiteral",
                "value": false
               },
               {
                "type": "Identifier",
                "name": "positionId"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "sqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getSqrtIndexPrice"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "hedgeRequired"
             },
             null,
             null
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "GammaTradeMarketLib"
             },
             "memberName": "validateHedgeCondition"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "userPosition"
             },
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "closeRequired"
             },
             null,
             null
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "GammaTradeMarketLib"
             },
             "memberName": "validateCloseCondition"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "userPosition"
             },
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "resultPositionId"
           },
           "right": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "StructDefinition",
       "name": "UserPositionResult",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarketLib.UserPosition"
         },
         "name": "userPosition",
         "identifier": {
          "type": "Identifier",
          "name": "userPosition"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.VaultStatus"
         },
         "name": "vaultStatus",
         "identifier": {
          "type": "Identifier",
          "name": "vaultStatus"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "vault",
         "identifier": {
          "type": "Identifier",
          "name": "vault"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "getUserPositions",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "owner",
         "identifier": {
          "type": "Identifier",
          "name": "owner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "UserPositionResult"
          },
          "length": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "length": null
            },
            "name": "userPositionIDs",
            "identifier": {
             "type": "Identifier",
             "name": "userPositionIDs"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positionIDs"
           },
           "index": {
            "type": "Identifier",
            "name": "owner"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "UserDefinedTypeName",
              "namePath": "UserPositionResult"
             },
             "length": null
            },
            "name": "results",
            "identifier": {
             "type": "Identifier",
             "name": "results"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "NewExpression",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "UserDefinedTypeName",
              "namePath": "UserPositionResult"
             },
             "length": null
            }
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPositionIDs"
             },
             "memberName": "length"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint64",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPositionIDs"
            },
            "memberName": "length"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "positionId",
               "identifier": {
                "type": "Identifier",
                "name": "positionId"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "userPositionIDs"
              },
              "index": {
               "type": "Identifier",
               "name": "i"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "results"
               },
               "index": {
                "type": "Identifier",
                "name": "i"
               }
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "_getUserPosition"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "positionId"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "results"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_getUserPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserPositionResult"
         },
         "name": "result",
         "identifier": {
          "type": "Identifier",
          "name": "result"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "GammaTradeMarketLib.UserPosition"
            },
            "name": "userPosition",
            "identifier": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "userPositions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "vaultId"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "Identifier",
              "name": "result"
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "UserPositionResult"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "userPosition"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_quoter"
              },
              "memberName": "quoteVaultStatus"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userPosition"
               },
               "memberName": "vaultId"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_predyPool"
              },
              "memberName": "getVault"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userPosition"
               },
               "memberName": "vaultId"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_addPositionIndex",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "newPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "newPositionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "positionIDs"
             },
             "index": {
              "type": "Identifier",
              "name": "trader"
             }
            },
            "memberName": "addItem"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "newPositionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "removePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.Vault"
            },
            "name": "vault",
            "identifier": {
             "type": "Identifier",
             "name": "vault"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getVault"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "userPositions"
              },
              "index": {
               "type": "Identifier",
               "name": "positionId"
              }
             },
             "memberName": "vaultId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "||",
            "left": {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "vault"
              },
              "memberName": "margin"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            "right": {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "vault"
                },
                "memberName": "openPosition"
               },
               "memberName": "perp"
              },
              "memberName": "amount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "!=",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "openPosition"
              },
              "memberName": "sqrtPerp"
             },
             "memberName": "amount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "PositionIsNotClosed"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_removePosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyFiller",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_removePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "trader",
            "identifier": {
             "type": "Identifier",
             "name": "trader"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "userPositions"
            },
            "index": {
             "type": "Identifier",
             "name": "positionId"
            }
           },
           "memberName": "owner"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "positionIDs"
             },
             "index": {
              "type": "Identifier",
              "name": "trader"
             }
            },
            "memberName": "removeItem"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_getOrInitPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isCreatedNew",
         "identifier": {
          "type": "Identifier",
          "name": "isCreatedNew"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarketLib.UserPosition"
         },
         "name": "userPosition",
         "identifier": {
          "type": "Identifier",
          "name": "userPosition"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "userPosition"
           },
           "right": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "userPositions"
            },
            "index": {
             "type": "Identifier",
             "name": "positionId"
            }
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isCreatedNew"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userPosition"
               },
               "memberName": "vaultId"
              },
              "right": {
               "type": "Identifier",
               "name": "positionId"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userPosition"
               },
               "memberName": "owner"
              },
              "right": {
               "type": "Identifier",
               "name": "trader"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userPosition"
               },
               "memberName": "pairId"
              },
              "right": {
               "type": "Identifier",
               "name": "pairId"
              }
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "positionId"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userPosition"
             },
             "memberName": "vaultId"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "PositionNotFound"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "owner"
           },
           "right": {
            "type": "Identifier",
            "name": "trader"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "SignerIsNotPositionOwner"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userPosition"
            },
            "memberName": "pairId"
           },
           "right": {
            "type": "Identifier",
            "name": "pairId"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "PositionHasDifferentPairId"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "userPosition"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_saveUserPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarketLib.UserPosition"
         },
         "name": "userPosition",
         "identifier": {
          "type": "Identifier",
          "name": "userPosition"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaModifyInfo"
         },
         "name": "modifyInfo",
         "identifier": {
          "type": "Identifier",
          "name": "modifyInfo"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "GammaTradeMarketLib"
            },
            "memberName": "saveUserPosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "userPosition"
            },
            {
             "type": "Identifier",
             "name": "modifyInfo"
            }
           ],
           "names": [],
           "identifiers": []
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "EmitStatement",
             "eventCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "GammaPositionModified"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "userPosition"
                },
                "memberName": "owner"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "userPosition"
                },
                "memberName": "pairId"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "userPosition"
                },
                "memberName": "vaultId"
               },
               {
                "type": "Identifier",
                "name": "modifyInfo"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_verifyOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "order"
            },
            "memberName": "validate"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_permit2"
            },
            "memberName": "permitWitnessTransferFrom"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "toPermit"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "transferDetails"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "info"
             },
             "memberName": "trader"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "hash"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "GammaOrderLib"
             },
             "memberName": "PERMIT2_ORDER_TYPE"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/gamma/GammaOrder.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/OrderInfoLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/OrderInfoLib.sol",
      "parts": [
       "../../libraries/orders/OrderInfoLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "OrderInfo",
       null
      ],
      [
       "OrderInfoLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "OrderInfo"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "OrderInfoLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IFillerMarket.sol",
      "parts": [
       "../../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../libraries/orders/ResolvedOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../libraries/orders/ResolvedOrder.sol",
      "parts": [
       "../../libraries/orders/ResolvedOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ResolvedOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ResolvedOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "StructDefinition",
     "name": "GammaModifyInfo",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bool",
        "stateMutability": null
       },
       "name": "isEnabled",
       "identifier": {
        "type": "Identifier",
        "name": "isEnabled"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint64",
        "stateMutability": null
       },
       "name": "expiration",
       "identifier": {
        "type": "Identifier",
        "name": "expiration"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int64",
        "stateMutability": null
       },
       "name": "maximaDeviation",
       "identifier": {
        "type": "Identifier",
        "name": "maximaDeviation"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "lowerLimit",
       "identifier": {
        "type": "Identifier",
        "name": "lowerLimit"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "upperLimit",
       "identifier": {
        "type": "Identifier",
        "name": "upperLimit"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint32",
        "stateMutability": null
       },
       "name": "hedgeInterval",
       "identifier": {
        "type": "Identifier",
        "name": "hedgeInterval"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint32",
        "stateMutability": null
       },
       "name": "sqrtPriceTrigger",
       "identifier": {
        "type": "Identifier",
        "name": "sqrtPriceTrigger"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint32",
        "stateMutability": null
       },
       "name": "minSlippageTolerance",
       "identifier": {
        "type": "Identifier",
        "name": "minSlippageTolerance"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint32",
        "stateMutability": null
       },
       "name": "maxSlippageTolerance",
       "identifier": {
        "type": "Identifier",
        "name": "maxSlippageTolerance"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint16",
        "stateMutability": null
       },
       "name": "auctionPeriod",
       "identifier": {
        "type": "Identifier",
        "name": "auctionPeriod"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint32",
        "stateMutability": null
       },
       "name": "auctionRange",
       "identifier": {
        "type": "Identifier",
        "name": "auctionRange"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "GammaModifyInfoLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "GAMMA_MODIFY_INFO_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "GAMMA_MODIFY_INFO_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "StringLiteral",
            "value": "GammaModifyInfo(",
            "parts": [
             "GammaModifyInfo("
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "bool isEnabled,",
            "parts": [
             "bool isEnabled,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint64 expiration,",
            "parts": [
             "uint64 expiration,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "int64 maximaDeviation,",
            "parts": [
             "int64 maximaDeviation,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 lowerLimit,",
            "parts": [
             "uint256 lowerLimit,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 upperLimit,",
            "parts": [
             "uint256 upperLimit,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint32 hedgeInterval,",
            "parts": [
             "uint32 hedgeInterval,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint32 sqrtPriceTrigger,",
            "parts": [
             "uint32 sqrtPriceTrigger,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint32 minSlippageTolerance,",
            "parts": [
             "uint32 minSlippageTolerance,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint32 maxSlippageTolerance,",
            "parts": [
             "uint32 maxSlippageTolerance,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint16 auctionPeriod,",
            "parts": [
             "uint16 auctionPeriod,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint32 auctionRange)",
            "parts": [
             "uint32 auctionRange)"
            ],
            "isUnicode": [
             false
            ]
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "MemberAccess",
         "expression": {
          "type": "Identifier",
          "name": "abi"
         },
         "memberName": "encodePacked"
        },
        "arguments": [
         {
          "type": "StringLiteral",
          "value": "GammaModifyInfo(",
          "parts": [
           "GammaModifyInfo("
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "bool isEnabled,",
          "parts": [
           "bool isEnabled,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint64 expiration,",
          "parts": [
           "uint64 expiration,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "int64 maximaDeviation,",
          "parts": [
           "int64 maximaDeviation,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 lowerLimit,",
          "parts": [
           "uint256 lowerLimit,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 upperLimit,",
          "parts": [
           "uint256 upperLimit,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint32 hedgeInterval,",
          "parts": [
           "uint32 hedgeInterval,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint32 sqrtPriceTrigger,",
          "parts": [
           "uint32 sqrtPriceTrigger,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint32 minSlippageTolerance,",
          "parts": [
           "uint32 minSlippageTolerance,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint32 maxSlippageTolerance,",
          "parts": [
           "uint32 maxSlippageTolerance,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint16 auctionPeriod,",
          "parts": [
           "uint16 auctionPeriod,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint32 auctionRange)",
          "parts": [
           "uint32 auctionRange)"
          ],
          "isUnicode": [
           false
          ]
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "GAMMA_MODIFY_INFO_TYPE_HASH",
         "identifier": {
          "type": "Identifier",
          "name": "GAMMA_MODIFY_INFO_TYPE_HASH"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "Identifier",
           "name": "keccak256"
          },
          "arguments": [
           {
            "type": "Identifier",
            "name": "GAMMA_MODIFY_INFO_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "Identifier",
         "name": "keccak256"
        },
        "arguments": [
         {
          "type": "Identifier",
          "name": "GAMMA_MODIFY_INFO_TYPE"
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "FunctionDefinition",
       "name": "hash",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaModifyInfo"
         },
         "name": "info",
         "identifier": {
          "type": "Identifier",
          "name": "info"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "keccak256"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encode"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "GAMMA_MODIFY_INFO_TYPE_HASH"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "isEnabled"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "expiration"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "maximaDeviation"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "lowerLimit"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "upperLimit"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "hedgeInterval"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "sqrtPriceTrigger"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "minSlippageTolerance"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "maxSlippageTolerance"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "auctionPeriod"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "auctionRange"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    },
    {
     "type": "StructDefinition",
     "name": "GammaOrder",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "OrderInfo"
       },
       "name": "info",
       "identifier": {
        "type": "Identifier",
        "name": "info"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint64",
        "stateMutability": null
       },
       "name": "pairId",
       "identifier": {
        "type": "Identifier",
        "name": "pairId"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "positionId",
       "identifier": {
        "type": "Identifier",
        "name": "positionId"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "entryTokenAddress",
       "identifier": {
        "type": "Identifier",
        "name": "entryTokenAddress"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "quantity",
       "identifier": {
        "type": "Identifier",
        "name": "quantity"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "quantitySqrt",
       "identifier": {
        "type": "Identifier",
        "name": "quantitySqrt"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "name": "marginAmount",
       "identifier": {
        "type": "Identifier",
        "name": "marginAmount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "baseSqrtPrice",
       "identifier": {
        "type": "Identifier",
        "name": "baseSqrtPrice"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint32",
        "stateMutability": null
       },
       "name": "slippageTolerance",
       "identifier": {
        "type": "Identifier",
        "name": "slippageTolerance"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint8",
        "stateMutability": null
       },
       "name": "leverage",
       "identifier": {
        "type": "Identifier",
        "name": "leverage"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GammaModifyInfo"
       },
       "name": "modifyInfo",
       "identifier": {
        "type": "Identifier",
        "name": "modifyInfo"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "GammaOrderLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "OrderInfo"
       },
       "libraryName": "OrderInfoLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "GAMMA_ORDER_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "GAMMA_ORDER_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "StringLiteral",
            "value": "GammaOrder(",
            "parts": [
             "GammaOrder("
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "OrderInfo info,",
            "parts": [
             "OrderInfo info,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint64 pairId,",
            "parts": [
             "uint64 pairId,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 positionId,",
            "parts": [
             "uint256 positionId,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "address entryTokenAddress,",
            "parts": [
             "address entryTokenAddress,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "int256 quantity,",
            "parts": [
             "int256 quantity,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "int256 quantitySqrt,",
            "parts": [
             "int256 quantitySqrt,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "int256 marginAmount,",
            "parts": [
             "int256 marginAmount,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint256 baseSqrtPrice,",
            "parts": [
             "uint256 baseSqrtPrice,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint32 slippageTolerance,",
            "parts": [
             "uint32 slippageTolerance,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "uint8 leverage,",
            "parts": [
             "uint8 leverage,"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "StringLiteral",
            "value": "GammaModifyInfo modifyInfo)",
            "parts": [
             "GammaModifyInfo modifyInfo)"
            ],
            "isUnicode": [
             false
            ]
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "MemberAccess",
         "expression": {
          "type": "Identifier",
          "name": "abi"
         },
         "memberName": "encodePacked"
        },
        "arguments": [
         {
          "type": "StringLiteral",
          "value": "GammaOrder(",
          "parts": [
           "GammaOrder("
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "OrderInfo info,",
          "parts": [
           "OrderInfo info,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint64 pairId,",
          "parts": [
           "uint64 pairId,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 positionId,",
          "parts": [
           "uint256 positionId,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "address entryTokenAddress,",
          "parts": [
           "address entryTokenAddress,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "int256 quantity,",
          "parts": [
           "int256 quantity,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "int256 quantitySqrt,",
          "parts": [
           "int256 quantitySqrt,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "int256 marginAmount,",
          "parts": [
           "int256 marginAmount,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint256 baseSqrtPrice,",
          "parts": [
           "uint256 baseSqrtPrice,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint32 slippageTolerance,",
          "parts": [
           "uint32 slippageTolerance,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "uint8 leverage,",
          "parts": [
           "uint8 leverage,"
          ],
          "isUnicode": [
           false
          ]
         },
         {
          "type": "StringLiteral",
          "value": "GammaModifyInfo modifyInfo)",
          "parts": [
           "GammaModifyInfo modifyInfo)"
          ],
          "isUnicode": [
           false
          ]
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "ORDER_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "ORDER_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "Identifier",
            "name": "GAMMA_ORDER_TYPE"
           },
           {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "GammaModifyInfoLib"
            },
            "memberName": "GAMMA_MODIFY_INFO_TYPE"
           },
           {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "OrderInfoLib"
            },
            "memberName": "ORDER_INFO_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "MemberAccess",
         "expression": {
          "type": "Identifier",
          "name": "abi"
         },
         "memberName": "encodePacked"
        },
        "arguments": [
         {
          "type": "Identifier",
          "name": "GAMMA_ORDER_TYPE"
         },
         {
          "type": "MemberAccess",
          "expression": {
           "type": "Identifier",
           "name": "GammaModifyInfoLib"
          },
          "memberName": "GAMMA_MODIFY_INFO_TYPE"
         },
         {
          "type": "MemberAccess",
          "expression": {
           "type": "Identifier",
           "name": "OrderInfoLib"
          },
          "memberName": "ORDER_INFO_TYPE"
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "GAMMA_ORDER_TYPE_HASH",
         "identifier": {
          "type": "Identifier",
          "name": "GAMMA_ORDER_TYPE_HASH"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "Identifier",
           "name": "keccak256"
          },
          "arguments": [
           {
            "type": "Identifier",
            "name": "ORDER_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "Identifier",
         "name": "keccak256"
        },
        "arguments": [
         {
          "type": "Identifier",
          "name": "ORDER_TYPE"
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "TOKEN_PERMISSIONS_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "TOKEN_PERMISSIONS_TYPE"
         },
         "expression": {
          "type": "StringLiteral",
          "value": "TokenPermissions(address token,uint256 amount)",
          "parts": [
           "TokenPermissions(address token,uint256 amount)"
          ],
          "isUnicode": [
           false
          ]
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "StringLiteral",
        "value": "TokenPermissions(address token,uint256 amount)",
        "parts": [
         "TokenPermissions(address token,uint256 amount)"
        ],
        "isUnicode": [
         false
        ]
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "PERMIT2_ORDER_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "PERMIT2_ORDER_TYPE"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "ElementaryTypeName",
           "name": "string",
           "stateMutability": null
          },
          "arguments": [
           {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "abi"
             },
             "memberName": "encodePacked"
            },
            "arguments": [
             {
              "type": "StringLiteral",
              "value": "GammaOrder witness)",
              "parts": [
               "GammaOrder witness)"
              ],
              "isUnicode": [
               false
              ]
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "GammaModifyInfoLib"
              },
              "memberName": "GAMMA_MODIFY_INFO_TYPE"
             },
             {
              "type": "Identifier",
              "name": "GAMMA_ORDER_TYPE"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "OrderInfoLib"
              },
              "memberName": "ORDER_INFO_TYPE"
             },
             {
              "type": "Identifier",
              "name": "TOKEN_PERMISSIONS_TYPE"
             }
            ],
            "names": [],
            "identifiers": []
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "ElementaryTypeName",
         "name": "string",
         "stateMutability": null
        },
        "arguments": [
         {
          "type": "FunctionCall",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "abi"
           },
           "memberName": "encodePacked"
          },
          "arguments": [
           {
            "type": "StringLiteral",
            "value": "GammaOrder witness)",
            "parts": [
             "GammaOrder witness)"
            ],
            "isUnicode": [
             false
            ]
           },
           {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "GammaModifyInfoLib"
            },
            "memberName": "GAMMA_MODIFY_INFO_TYPE"
           },
           {
            "type": "Identifier",
            "name": "GAMMA_ORDER_TYPE"
           },
           {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "OrderInfoLib"
            },
            "memberName": "ORDER_INFO_TYPE"
           },
           {
            "type": "Identifier",
            "name": "TOKEN_PERMISSIONS_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "FunctionDefinition",
       "name": "hash",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "keccak256"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encode"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "GAMMA_ORDER_TYPE_HASH"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "info"
                },
                "memberName": "hash"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "pairId"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "positionId"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "entryTokenAddress"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "quantity"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "quantitySqrt"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "marginAmount"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "baseSqrtPrice"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "slippageTolerance"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "leverage"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "GammaModifyInfoLib"
                },
                "memberName": "hash"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "modifyInfo"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "resolve",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaOrder"
         },
         "name": "gammaOrder",
         "identifier": {
          "type": "Identifier",
          "name": "gammaOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "amount",
            "identifier": {
             "type": "Identifier",
             "name": "amount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "Conditional",
           "condition": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "marginAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "gammaOrder"
              },
              "memberName": "marginAmount"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "falseExpression": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ResolvedOrder"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "info"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "gammaOrder"
             },
             "memberName": "entryTokenAddress"
            },
            {
             "type": "Identifier",
             "name": "amount"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "hash"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "gammaOrder"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "sig"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/markets/gamma/ArrayLib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ContractDefinition",
     "name": "ArrayLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "addItem",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "items",
         "identifier": {
          "type": "Identifier",
          "name": "items"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "item",
         "identifier": {
          "type": "Identifier",
          "name": "item"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "items"
            },
            "memberName": "push"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "item"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "removeItem",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "items",
         "identifier": {
          "type": "Identifier",
          "name": "items"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "item",
         "identifier": {
          "type": "Identifier",
          "name": "item"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "index",
            "identifier": {
             "type": "Identifier",
             "name": "index"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "getItemIndex"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "items"
            },
            {
             "type": "Identifier",
             "name": "item"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "removeItemByIndex"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "items"
            },
            {
             "type": "Identifier",
             "name": "index"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "removeItemByIndex",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "items",
         "identifier": {
          "type": "Identifier",
          "name": "items"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "index",
         "identifier": {
          "type": "Identifier",
          "name": "index"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "items"
            },
            "index": {
             "type": "Identifier",
             "name": "index"
            }
           },
           "right": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "items"
            },
            "index": {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "items"
              },
              "memberName": "length"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "1",
              "subdenomination": null
             }
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "items"
            },
            "memberName": "pop"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getItemIndex",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "items",
         "identifier": {
          "type": "Identifier",
          "name": "items"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "item",
         "identifier": {
          "type": "Identifier",
          "name": "item"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "index",
            "identifier": {
             "type": "Identifier",
             "name": "index"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "type"
            },
            "arguments": [
             {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             }
            ],
            "names": [],
            "identifiers": []
           },
           "memberName": "max"
          }
         },
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "items"
            },
            "memberName": "length"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "items"
               },
               "index": {
                "type": "Identifier",
                "name": "i"
               }
              },
              "right": {
               "type": "Identifier",
               "name": "item"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "index"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "i"
                 }
                }
               },
               {
                "type": "BreakStatement"
               }
              ]
             },
             "falseBody": null
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "index"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/VaultLib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./DataType.sol",
      "parts": [
       "./DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../types/GlobalData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../types/GlobalData.sol",
      "parts": [
       "../types/GlobalData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GlobalDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GlobalDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "VaultLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "EventDefinition",
       "name": "VaultCreated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "owner",
         "identifier": {
          "type": "Identifier",
          "name": "owner"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": "getVault",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "vault",
         "identifier": {
          "type": "Identifier",
          "name": "vault"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "vault"
           },
           "right": {
            "type": "IndexAccess",
            "base": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "vaults"
            },
            "index": {
             "type": "Identifier",
             "name": "vaultId"
            }
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "vault"
            },
            "memberName": "owner"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "IPredyPool"
               },
               "memberName": "CallerIsNotVaultOwner"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "createOrGetVault",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "quoteToken",
            "identifier": {
             "type": "Identifier",
             "name": "quoteToken"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "IndexAccess",
            "base": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "pairs"
            },
            "index": {
             "type": "Identifier",
             "name": "pairId"
            }
           },
           "memberName": "quoteToken"
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "vaultId"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "finalVaultId",
               "identifier": {
                "type": "Identifier",
                "name": "finalVaultId"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "vaultCount"
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "UserDefinedTypeName",
                "namePath": "DataType.Vault"
               },
               "name": "vault",
               "identifier": {
                "type": "Identifier",
                "name": "vault"
               },
               "storageLocation": "storage",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "globalData"
               },
               "memberName": "vaults"
              },
              "index": {
               "type": "Identifier",
               "name": "finalVaultId"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "id"
              },
              "right": {
               "type": "Identifier",
               "name": "finalVaultId"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "owner"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "recipient"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "vault"
                },
                "memberName": "openPosition"
               },
               "memberName": "pairId"
              },
              "right": {
               "type": "Identifier",
               "name": "pairId"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "quoteToken"
              },
              "right": {
               "type": "Identifier",
               "name": "quoteToken"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "UnaryOperation",
              "operator": "++",
              "subExpression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "globalData"
               },
               "memberName": "vaultCount"
              },
              "isPrefix": false
             }
            },
            {
             "type": "EmitStatement",
             "eventCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "VaultCreated"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "vault"
                },
                "memberName": "id"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "vault"
                },
                "memberName": "owner"
               },
               {
                "type": "Identifier",
                "name": "quoteToken"
               },
               {
                "type": "Identifier",
                "name": "pairId"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "vault"
              },
              "memberName": "id"
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "UserDefinedTypeName",
                "namePath": "DataType.Vault"
               },
               "name": "vault",
               "identifier": {
                "type": "Identifier",
                "name": "vault"
               },
               "storageLocation": "memory",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "globalData"
               },
               "memberName": "vaults"
              },
              "index": {
               "type": "Identifier",
               "name": "vaultId"
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "owner"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "RevertStatement",
                "revertCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "IPredyPool"
                  },
                  "memberName": "CallerIsNotVaultOwner"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "vault"
               },
               "memberName": "quoteToken"
              },
              "right": {
               "type": "Identifier",
               "name": "quoteToken"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "RevertStatement",
                "revertCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "IPredyPool"
                  },
                  "memberName": "VaultAlreadyHasAnotherMarginId"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "vault"
                },
                "memberName": "openPosition"
               },
               "memberName": "pairId"
              },
              "right": {
               "type": "Identifier",
               "name": "pairId"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "RevertStatement",
                "revertCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "IPredyPool"
                  },
                  "memberName": "VaultAlreadyHasAnotherPair"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "vault"
              },
              "memberName": "id"
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/UniHelper.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
      "parts": [
       "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/libraries/TickMath.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/libraries/TickMath.sol",
      "parts": [
       "@uniswap/v3-core/contracts/libraries/TickMath.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-periphery/contracts/libraries/PositionKey.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-periphery/contracts/libraries/PositionKey.sol",
      "parts": [
       "@uniswap/v3-periphery/contracts/libraries/PositionKey.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../vendors/IUniswapV3PoolOracle.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../vendors/IUniswapV3PoolOracle.sol",
      "parts": [
       "../vendors/IUniswapV3PoolOracle.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Constants.sol",
      "parts": [
       "./Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "UniHelper",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_ORACLE_PERIOD",
         "identifier": {
          "type": "Identifier",
          "name": "_ORACLE_PERIOD"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "30",
          "subdenomination": "minutes"
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "30",
        "subdenomination": "minutes"
       }
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapPoolAddress",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapPoolAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             },
             null,
             null,
             null,
             null,
             null,
             null
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "IUniswapV3Pool"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "uniswapPoolAddress"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "slot0"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtTWAP",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapPoolAddress",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapPoolAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtTwapX96",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtTwapX96"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "sqrtTwapX96"
             },
             null
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "callUniswapObserve"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "IUniswapV3Pool"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "uniswapPoolAddress"
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "Identifier",
              "name": "_ORACLE_PERIOD"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "convertSqrtPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtPriceX96",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPriceX96"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteZero",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteZero"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isQuoteZero"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint160",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": "/",
                "left": {
                 "type": "TupleExpression",
                 "components": [
                  {
                   "type": "BinaryOperation",
                   "operator": "<<",
                   "left": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "Constants"
                    },
                    "memberName": "Q96"
                   },
                   "right": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "Constants"
                    },
                    "memberName": "RESOLUTION"
                   }
                  }
                 ],
                 "isArray": false
                },
                "right": {
                 "type": "Identifier",
                 "name": "sqrtPriceX96"
                }
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "Identifier",
              "name": "sqrtPriceX96"
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "callUniswapObserve",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IUniswapV3Pool"
         },
         "name": "uniswapPool",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "ago",
         "identifier": {
          "type": "Identifier",
          "name": "ago"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "uint32",
              "stateMutability": null
             },
             "length": null
            },
            "name": "secondsAgos",
            "identifier": {
             "type": "Identifier",
             "name": "secondsAgos"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "NewExpression",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "uint32",
              "stateMutability": null
             },
             "length": null
            }
           },
           "arguments": [
            {
             "type": "NumberLiteral",
             "number": "2",
             "subdenomination": null
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "secondsAgos"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "uint32",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "ago"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "secondsAgos"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "1",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "success",
            "identifier": {
             "type": "Identifier",
             "name": "success"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "data",
            "identifier": {
             "type": "Identifier",
             "name": "data"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes",
             "stateMutability": null
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "staticcall"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodeWithSelector"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "IUniswapV3PoolOracle"
                },
                "memberName": "observe"
               },
               "memberName": "selector"
              },
              {
               "type": "Identifier",
               "name": "secondsAgos"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "Identifier",
            "name": "success"
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "keccak256"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "data"
                }
               ],
               "names": [],
               "identifiers": []
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "keccak256"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "abi"
                  },
                  "memberName": "encodeWithSignature"
                 },
                 "arguments": [
                  {
                   "type": "StringLiteral",
                   "value": "Error(string)",
                   "parts": [
                    "Error(string)"
                   ],
                   "isUnicode": [
                    false
                   ]
                  },
                  {
                   "type": "StringLiteral",
                   "value": "OLD",
                   "parts": [
                    "OLD"
                   ],
                   "isUnicode": [
                    false
                   ]
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "revertBytes"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "data"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              null,
              null,
              {
               "type": "VariableDeclaration",
               "name": "index",
               "identifier": {
                "type": "Identifier",
                "name": "index"
               },
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint16",
                "stateMutability": null
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              },
              {
               "type": "VariableDeclaration",
               "name": "cardinality",
               "identifier": {
                "type": "Identifier",
                "name": "cardinality"
               },
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint16",
                "stateMutability": null
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              },
              null,
              null,
              null
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "uniswapPool"
               },
               "memberName": "slot0"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "name": "oldestAvailableAge",
               "identifier": {
                "type": "Identifier",
                "name": "oldestAvailableAge"
               },
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint32",
                "stateMutability": null
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              },
              null,
              null,
              {
               "type": "VariableDeclaration",
               "name": "initialized",
               "identifier": {
                "type": "Identifier",
                "name": "initialized"
               },
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "bool",
                "stateMutability": null
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "uniswapPool"
               },
               "memberName": "observations"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": "%",
                "left": {
                 "type": "TupleExpression",
                 "components": [
                  {
                   "type": "BinaryOperation",
                   "operator": "+",
                   "left": {
                    "type": "Identifier",
                    "name": "index"
                   },
                   "right": {
                    "type": "NumberLiteral",
                    "number": "1",
                    "subdenomination": null
                   }
                  }
                 ],
                 "isArray": false
                },
                "right": {
                 "type": "Identifier",
                 "name": "cardinality"
                }
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "UnaryOperation",
              "operator": "!",
              "subExpression": {
               "type": "Identifier",
               "name": "initialized"
              },
              "isPrefix": true
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "TupleExpression",
                  "components": [
                   {
                    "type": "Identifier",
                    "name": "oldestAvailableAge"
                   },
                   null,
                   null,
                   null
                  ],
                  "isArray": false
                 },
                 "right": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "uniswapPool"
                   },
                   "memberName": "observations"
                  },
                  "arguments": [
                   {
                    "type": "NumberLiteral",
                    "number": "0",
                    "subdenomination": null
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "ago"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "block"
                },
                "memberName": "timestamp"
               },
               "right": {
                "type": "Identifier",
                "name": "oldestAvailableAge"
               }
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "secondsAgos"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint32",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "ago"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "Identifier",
                 "name": "success"
                },
                {
                 "type": "Identifier",
                 "name": "data"
                }
               ],
               "isArray": false
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "address"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "uniswapPool"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "memberName": "staticcall"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "abi"
                  },
                  "memberName": "encodeWithSelector"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "IUniswapV3PoolOracle"
                    },
                    "memberName": "observe"
                   },
                   "memberName": "selector"
                  },
                  {
                   "type": "Identifier",
                   "name": "secondsAgos"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "UnaryOperation",
              "operator": "!",
              "subExpression": {
               "type": "Identifier",
               "name": "success"
              },
              "isPrefix": true
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "revertBytes"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "data"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "int56",
              "stateMutability": null
             },
             "length": null
            },
            "name": "tickCumulatives",
            "identifier": {
             "type": "Identifier",
             "name": "tickCumulatives"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "data"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "ArrayTypeName",
               "baseTypeName": {
                "type": "ElementaryTypeName",
                "name": "int56",
                "stateMutability": null
               },
               "length": null
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int24",
             "stateMutability": null
            },
            "name": "tick",
            "identifier": {
             "type": "Identifier",
             "name": "tick"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "int24",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "/",
             "left": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "Identifier",
                  "name": "tickCumulatives"
                 },
                 "index": {
                  "type": "NumberLiteral",
                  "number": "1",
                  "subdenomination": null
                 }
                },
                "right": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "Identifier",
                  "name": "tickCumulatives"
                 },
                 "index": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                }
               }
              ],
              "isArray": false
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "int56",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "int256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "ago"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint160",
             "stateMutability": null
            },
            "name": "sqrtPriceX96",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPriceX96"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "TickMath"
            },
            "memberName": "getSqrtRatioAtTick"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tick"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "Identifier",
             "name": "sqrtPriceX96"
            },
            {
             "type": "Identifier",
             "name": "ago"
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "revertBytes",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "errMsg",
         "identifier": {
          "type": "Identifier",
          "name": "errMsg"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "errMsg"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "InlineAssemblyStatement",
             "language": null,
             "flags": [],
             "body": {
              "type": "AssemblyBlock",
              "operations": [
               {
                "type": "AssemblyCall",
                "functionName": "revert",
                "arguments": [
                 {
                  "type": "AssemblyCall",
                  "functionName": "add",
                  "arguments": [
                   {
                    "type": "DecimalNumber",
                    "value": "32"
                   },
                   {
                    "type": "AssemblyCall",
                    "functionName": "errMsg",
                    "arguments": []
                   }
                  ]
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "mload",
                  "arguments": [
                   {
                    "type": "AssemblyCall",
                    "functionName": "errMsg",
                    "arguments": []
                   }
                  ]
                 }
                ]
               }
              ]
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "revert"
           },
           "arguments": [
            {
             "type": "StringLiteral",
             "value": "e/empty-error",
             "parts": [
              "e/empty-error"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getFeeGrowthInsideLast",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapPoolAddress",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapPoolAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickLower",
         "identifier": {
          "type": "Identifier",
          "name": "tickLower"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickUpper",
         "identifier": {
          "type": "Identifier",
          "name": "tickUpper"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "feeGrowthInside0LastX128",
         "identifier": {
          "type": "Identifier",
          "name": "feeGrowthInside0LastX128"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "feeGrowthInside1LastX128",
         "identifier": {
          "type": "Identifier",
          "name": "feeGrowthInside1LastX128"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes32",
             "stateMutability": null
            },
            "name": "positionKey",
            "identifier": {
             "type": "Identifier",
             "name": "positionKey"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PositionKey"
            },
            "memberName": "compute"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "tickLower"
            },
            {
             "type": "Identifier",
             "name": "tickUpper"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             null,
             {
              "type": "Identifier",
              "name": "feeGrowthInside0LastX128"
             },
             {
              "type": "Identifier",
              "name": "feeGrowthInside1LastX128"
             },
             null,
             null
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "IUniswapV3Pool"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "uniswapPoolAddress"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "positions"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "positionKey"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getFeeGrowthInside",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapPoolAddress",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapPoolAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickLower",
         "identifier": {
          "type": "Identifier",
          "name": "tickLower"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickUpper",
         "identifier": {
          "type": "Identifier",
          "name": "tickUpper"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "feeGrowthInside0X128",
         "identifier": {
          "type": "Identifier",
          "name": "feeGrowthInside0X128"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "feeGrowthInside1X128",
         "identifier": {
          "type": "Identifier",
          "name": "feeGrowthInside1X128"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           null,
           {
            "type": "VariableDeclaration",
            "name": "tickCurrent",
            "identifier": {
             "type": "Identifier",
             "name": "tickCurrent"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int24",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           null,
           null,
           null,
           null,
           null
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "uniswapPoolAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "slot0"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "feeGrowthGlobal0X128",
            "identifier": {
             "type": "Identifier",
             "name": "feeGrowthGlobal0X128"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "uniswapPoolAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "feeGrowthGlobal0X128"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "feeGrowthGlobal1X128",
            "identifier": {
             "type": "Identifier",
             "name": "feeGrowthGlobal1X128"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "uniswapPoolAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "feeGrowthGlobal1X128"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "feeGrowthBelow0X128",
            "identifier": {
             "type": "Identifier",
             "name": "feeGrowthBelow0X128"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "feeGrowthBelow1X128",
            "identifier": {
             "type": "Identifier",
             "name": "feeGrowthBelow1X128"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "UncheckedStatement",
          "block": {
           "type": "Block",
           "statements": [
            {
             "type": "Block",
             "statements": [
              {
               "type": "VariableDeclarationStatement",
               "variables": [
                null,
                null,
                {
                 "type": "VariableDeclaration",
                 "name": "lowerFeeGrowthOutside0X128",
                 "identifier": {
                  "type": "Identifier",
                  "name": "lowerFeeGrowthOutside0X128"
                 },
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                },
                {
                 "type": "VariableDeclaration",
                 "name": "lowerFeeGrowthOutside1X128",
                 "identifier": {
                  "type": "Identifier",
                  "name": "lowerFeeGrowthOutside1X128"
                 },
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                },
                null,
                null,
                null,
                null
               ],
               "initialValue": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "IUniswapV3Pool"
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "uniswapPoolAddress"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "memberName": "ticks"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "tickLower"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              {
               "type": "IfStatement",
               "condition": {
                "type": "BinaryOperation",
                "operator": ">=",
                "left": {
                 "type": "Identifier",
                 "name": "tickCurrent"
                },
                "right": {
                 "type": "Identifier",
                 "name": "tickLower"
                }
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "feeGrowthBelow0X128"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "lowerFeeGrowthOutside0X128"
                   }
                  }
                 },
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "feeGrowthBelow1X128"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "lowerFeeGrowthOutside1X128"
                   }
                  }
                 }
                ]
               },
               "falseBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "feeGrowthBelow0X128"
                   },
                   "right": {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "Identifier",
                     "name": "feeGrowthGlobal0X128"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "lowerFeeGrowthOutside0X128"
                    }
                   }
                  }
                 },
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "feeGrowthBelow1X128"
                   },
                   "right": {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "Identifier",
                     "name": "feeGrowthGlobal1X128"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "lowerFeeGrowthOutside1X128"
                    }
                   }
                  }
                 }
                ]
               }
              }
             ]
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "feeGrowthAbove0X128",
               "identifier": {
                "type": "Identifier",
                "name": "feeGrowthAbove0X128"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": null
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "feeGrowthAbove1X128",
               "identifier": {
                "type": "Identifier",
                "name": "feeGrowthAbove1X128"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": null
            },
            {
             "type": "Block",
             "statements": [
              {
               "type": "VariableDeclarationStatement",
               "variables": [
                null,
                null,
                {
                 "type": "VariableDeclaration",
                 "name": "upperFeeGrowthOutside0X128",
                 "identifier": {
                  "type": "Identifier",
                  "name": "upperFeeGrowthOutside0X128"
                 },
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                },
                {
                 "type": "VariableDeclaration",
                 "name": "upperFeeGrowthOutside1X128",
                 "identifier": {
                  "type": "Identifier",
                  "name": "upperFeeGrowthOutside1X128"
                 },
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                },
                null,
                null,
                null,
                null
               ],
               "initialValue": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "IUniswapV3Pool"
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "uniswapPoolAddress"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "memberName": "ticks"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "tickUpper"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              {
               "type": "IfStatement",
               "condition": {
                "type": "BinaryOperation",
                "operator": "<",
                "left": {
                 "type": "Identifier",
                 "name": "tickCurrent"
                },
                "right": {
                 "type": "Identifier",
                 "name": "tickUpper"
                }
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "feeGrowthAbove0X128"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "upperFeeGrowthOutside0X128"
                   }
                  }
                 },
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "feeGrowthAbove1X128"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "upperFeeGrowthOutside1X128"
                   }
                  }
                 }
                ]
               },
               "falseBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "feeGrowthAbove0X128"
                   },
                   "right": {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "Identifier",
                     "name": "feeGrowthGlobal0X128"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "upperFeeGrowthOutside0X128"
                    }
                   }
                  }
                 },
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "feeGrowthAbove1X128"
                   },
                   "right": {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "Identifier",
                     "name": "feeGrowthGlobal1X128"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "upperFeeGrowthOutside1X128"
                    }
                   }
                  }
                 }
                ]
               }
              }
             ]
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "feeGrowthInside0X128"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "Identifier",
                 "name": "feeGrowthGlobal0X128"
                },
                "right": {
                 "type": "Identifier",
                 "name": "feeGrowthBelow0X128"
                }
               },
               "right": {
                "type": "Identifier",
                "name": "feeGrowthAbove0X128"
               }
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "feeGrowthInside1X128"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "Identifier",
                 "name": "feeGrowthGlobal1X128"
                },
                "right": {
                 "type": "Identifier",
                 "name": "feeGrowthBelow1X128"
                }
               },
               "right": {
                "type": "Identifier",
                "name": "feeGrowthAbove1X128"
               }
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/Trade.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/token/ERC20/IERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/token/ERC20/IERC20.sol",
      "parts": [
       "@openzeppelin/contracts/token/ERC20/IERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeCast",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeCast"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IHooks.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IHooks.sol",
      "parts": [
       "../interfaces/IHooks.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IHooks",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IHooks"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/ISettlement.sol",
      "parts": [
       "../interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Constants.sol",
      "parts": [
       "./Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./DataType.sol",
      "parts": [
       "./DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Perp.sol",
      "parts": [
       "./Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./PerpFee.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./PerpFee.sol",
      "parts": [
       "./PerpFee.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PerpFee",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PerpFee"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../types/GlobalData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../types/GlobalData.sol",
      "parts": [
       "../types/GlobalData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GlobalDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GlobalDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../types/LockData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../types/LockData.sol",
      "parts": [
       "../types/LockData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "LockDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "LockDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./PositionCalculator.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./PositionCalculator.sol",
      "parts": [
       "./PositionCalculator.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PositionCalculator",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PositionCalculator"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./math/Math.sol",
      "parts": [
       "./math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Math",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Math"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./UniHelper.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./UniHelper.sol",
      "parts": [
       "./UniHelper.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "UniHelper",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "UniHelper"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "Trade",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GlobalDataLibrary.GlobalData"
       },
       "libraryName": "GlobalDataLibrary",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "SafeCast",
       "functions": [],
       "operators": []
      },
      {
       "type": "StructDefinition",
       "name": "SwapStableResult",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amountPerp",
         "identifier": {
          "type": "Identifier",
          "name": "amountPerp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amountSqrtPerp",
         "identifier": {
          "type": "Identifier",
          "name": "amountSqrtPerp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "averagePrice",
         "identifier": {
          "type": "Identifier",
          "name": "averagePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "EventDefinition",
       "name": "Swapped",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "owner",
         "identifier": {
          "type": "Identifier",
          "name": "owner"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "settledQuoteAmount",
         "identifier": {
          "type": "Identifier",
          "name": "settledQuoteAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "settledBaseAmount",
         "identifier": {
          "type": "Identifier",
          "name": "settledBaseAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": "trade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pairStatus",
            "identifier": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeParams"
            },
            "memberName": "pairId"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Perp.UserStatus"
            },
            "name": "openPosition",
            "identifier": {
             "type": "Identifier",
             "name": "openPosition"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "IndexAccess",
            "base": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "vaults"
            },
            "index": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "vaultId"
            }
           },
           "memberName": "openPosition"
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.FeeAmount"
            },
            "name": "realizedFee",
            "identifier": {
             "type": "Identifier",
             "name": "realizedFee"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "settleUserBalanceAndFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "rebalanceFeeGrowthCache"
            },
            {
             "type": "Identifier",
             "name": "openPosition"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "underlyingAmountForSqrt",
            "identifier": {
             "type": "Identifier",
             "name": "underlyingAmountForSqrt"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "stableAmountForSqrt",
            "identifier": {
             "type": "Identifier",
             "name": "stableAmountForSqrt"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Perp"
            },
            "memberName": "computeRequiredAmounts"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "sqrtAssetStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "isQuoteZero"
            },
            {
             "type": "Identifier",
             "name": "openPosition"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "tradeAmountSqrt"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "sqrtPrice"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "getSqrtPrice"
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "pairStatus"
               },
               "memberName": "sqrtAssetStatus"
              },
              "memberName": "uniswapPool"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "pairStatus"
              },
              "memberName": "isQuoteZero"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "SwapStableResult"
            },
            "name": "swapResult",
            "identifier": {
             "type": "Identifier",
             "name": "swapResult"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "swap"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "pairId"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "SwapStableResult"
             },
             "arguments": [
              {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "tradeParams"
                },
                "memberName": "tradeAmount"
               },
               "isPrefix": true
              },
              {
               "type": "Identifier",
               "name": "underlyingAmountForSqrt"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "realizedFee"
               },
               "memberName": "feeAmountBase"
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "settlementData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeResult"
             },
             "memberName": "sqrtPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "vaultId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "averagePrice"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "swapResult"
            },
            "memberName": "averagePrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "payoff"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Perp"
             },
             "memberName": "updatePosition"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "pairStatus"
             },
             {
              "type": "Identifier",
              "name": "openPosition"
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Perp"
               },
               "memberName": "UpdatePerpParams"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "tradeParams"
                },
                "memberName": "tradeAmount"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "swapResult"
                },
                "memberName": "amountPerp"
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Perp"
               },
               "memberName": "UpdateSqrtPerpParams"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "tradeParams"
                },
                "memberName": "tradeAmountSqrt"
               },
               {
                "type": "BinaryOperation",
                "operator": "+",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "swapResult"
                 },
                 "memberName": "amountSqrtPerp"
                },
                "right": {
                 "type": "Identifier",
                 "name": "stableAmountForSqrt"
                }
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "fee"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "realizedFee"
             },
             "memberName": "feeAmountQuote"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "swapResult"
             },
             "memberName": "fee"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "vaultId"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeParams"
            },
            "memberName": "vaultId"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "swap",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SwapStableResult"
         },
         "name": "swapParams",
         "identifier": {
          "type": "Identifier",
          "name": "swapParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SwapStableResult"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "totalBaseAmount",
            "identifier": {
             "type": "Identifier",
             "name": "totalBaseAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "+",
           "left": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "swapParams"
             },
             "memberName": "amountPerp"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "swapParams"
             },
             "memberName": "amountSqrtPerp"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "swapParams"
            },
            "memberName": "fee"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "totalBaseAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "name": "amountQuote",
               "identifier": {
                "type": "Identifier",
                "name": "amountQuote"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "calculateStableAmount"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "sqrtPrice"
                 },
                 {
                  "type": "NumberLiteral",
                  "number": "1e18",
                  "subdenomination": null
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "toInt256"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "divToStable"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "swapParams"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "int256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "NumberLiteral",
                  "number": "1e18",
                  "subdenomination": null
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "amountQuote"
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "initializeLock"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "callSettlementCallback"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "settlementData"
            },
            {
             "type": "Identifier",
             "name": "totalBaseAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "settledQuoteAmount",
            "identifier": {
             "type": "Identifier",
             "name": "settledQuoteAmount"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "settledBaseAmount",
            "identifier": {
             "type": "Identifier",
             "name": "settledBaseAmount"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "finalizeLock"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "Identifier",
            "name": "settledBaseAmount"
           },
           "right": {
            "type": "UnaryOperation",
            "operator": "-",
            "subExpression": {
             "type": "Identifier",
             "name": "totalBaseAmount"
            },
            "isPrefix": true
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "IPredyPool"
               },
               "memberName": "BaseTokenNotSettled"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "settledQuoteAmount"
            },
            "right": {
             "type": "Identifier",
             "name": "totalBaseAmount"
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "IPredyPool"
               },
               "memberName": "QuoteTokenNotSettled"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "Swapped"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "vaultId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "Identifier",
             "name": "settledQuoteAmount"
            },
            {
             "type": "Identifier",
             "name": "settledBaseAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "divToStable"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "swapParams"
            },
            {
             "type": "Identifier",
             "name": "totalBaseAmount"
            },
            {
             "type": "Identifier",
             "name": "settledQuoteAmount"
            },
            {
             "type": "Identifier",
             "name": "settledQuoteAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapPoolAddress",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapPoolAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteZero",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteZero"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtPriceX96",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPriceX96"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "UniHelper"
            },
            "memberName": "convertSqrtPrice"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "UniHelper"
              },
              "memberName": "getSqrtPrice"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "uniswapPoolAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "isQuoteZero"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateStableAmount",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "currentSqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "currentSqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "baseAmount",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "quoteAmount",
            "identifier": {
             "type": "Identifier",
             "name": "quoteAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": ">>",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "Identifier",
               "name": "currentSqrtPrice"
              },
              "right": {
               "type": "Identifier",
               "name": "baseAmount"
              }
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Constants"
            },
            "memberName": "RESOLUTION"
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": ">>",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "Identifier",
               "name": "quoteAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "currentSqrtPrice"
              }
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Constants"
            },
            "memberName": "RESOLUTION"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "divToStable",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SwapStableResult"
         },
         "name": "swapParams",
         "identifier": {
          "type": "Identifier",
          "name": "swapParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amountBase",
         "identifier": {
          "type": "Identifier",
          "name": "amountBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amountQuote",
         "identifier": {
          "type": "Identifier",
          "name": "amountQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "totalAmountStable",
         "identifier": {
          "type": "Identifier",
          "name": "totalAmountStable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SwapStableResult"
         },
         "name": "swapResult",
         "identifier": {
          "type": "Identifier",
          "name": "swapResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "swapResult"
            },
            "memberName": "amountPerp"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "BinaryOperation",
             "operator": "*",
             "left": {
              "type": "Identifier",
              "name": "amountQuote"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "swapParams"
              },
              "memberName": "amountPerp"
             }
            },
            "right": {
             "type": "Identifier",
             "name": "amountBase"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "swapResult"
            },
            "memberName": "amountSqrtPerp"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "BinaryOperation",
             "operator": "*",
             "left": {
              "type": "Identifier",
              "name": "amountQuote"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "swapParams"
              },
              "memberName": "amountSqrtPerp"
             }
            },
            "right": {
             "type": "Identifier",
             "name": "amountBase"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "swapResult"
            },
            "memberName": "fee"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "-",
            "left": {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "Identifier",
              "name": "totalAmountStable"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "swapResult"
              },
              "memberName": "amountPerp"
             }
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "swapResult"
             },
             "memberName": "amountSqrtPerp"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "swapResult"
            },
            "memberName": "averagePrice"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "BinaryOperation",
             "operator": "*",
             "left": {
              "type": "Identifier",
              "name": "amountQuote"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Constants"
                },
                "memberName": "Q96"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Math"
                },
                "memberName": "abs"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "amountBase"
                }
               ],
               "names": [],
               "identifiers": []
              },
              "memberName": "toInt256"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "settleUserBalanceAndFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_pairStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.RebalanceFeeGrowthCache"
          },
          "valueName": null
         },
         "name": "rebalanceFeeGrowthCache",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceFeeGrowthCache"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.UserStatus"
         },
         "name": "_userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_userStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.FeeAmount"
         },
         "name": "realizedFee",
         "identifier": {
          "type": "Identifier",
          "name": "realizedFee"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "realizedFee"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpFee"
             },
             "memberName": "settleUserFee"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             {
              "type": "Identifier",
              "name": "rebalanceFeeGrowthCache"
             },
             {
              "type": "Identifier",
              "name": "_userStatus"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Perp"
            },
            "memberName": "settleUserBalance"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_pairStatus"
            },
            {
             "type": "Identifier",
             "name": "_userStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/SlippageLib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Constants.sol",
      "parts": [
       "./Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./math/Bps.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./math/Bps.sol",
      "parts": [
       "./math/Bps.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Bps",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Bps"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./math/Math.sol",
      "parts": [
       "./math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Math",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Math"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "SlippageLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "Bps",
       "functions": [],
       "operators": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "MAX_ACCEPTABLE_SQRT_PRICE_RANGE",
         "identifier": {
          "type": "Identifier",
          "name": "MAX_ACCEPTABLE_SQRT_PRICE_RANGE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "100747209",
          "subdenomination": null
         },
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "100747209",
        "subdenomination": null
       }
      },
      {
       "type": "CustomErrorDefinition",
       "name": "InvalidAveragePrice",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "SlippageTooLarge",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "OutOfAcceptablePriceRange",
       "parameters": []
      },
      {
       "type": "FunctionDefinition",
       "name": "checkPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtBasePrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtBasePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slippageTolerance",
         "identifier": {
          "type": "Identifier",
          "name": "slippageTolerance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "maxAcceptableSqrtPriceRange",
         "identifier": {
          "type": "Identifier",
          "name": "maxAcceptableSqrtPriceRange"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "basePrice",
            "identifier": {
             "type": "Identifier",
             "name": "basePrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Math"
            },
            "memberName": "calSqrtPriceToPrice"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "sqrtBasePrice"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "averagePrice"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "InvalidAveragePrice"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "averagePrice"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "basePrice"
                },
                "memberName": "lower"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "slippageTolerance"
                }
               ],
               "names": [],
               "identifiers": []
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "tradeResult"
                 },
                 "memberName": "averagePrice"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "RevertStatement",
                "revertCall": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "SlippageTooLarge"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeResult"
             },
             "memberName": "averagePrice"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "basePrice"
                 },
                 "memberName": "upper"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "slippageTolerance"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "tradeResult"
                   },
                   "memberName": "averagePrice"
                  },
                  "isPrefix": true
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "RevertStatement",
                 "revertCall": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "SlippageTooLarge"
                  },
                  "arguments": [],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "maxAcceptableSqrtPriceRange"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "BinaryOperation",
              "operator": "||",
              "left": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "tradeResult"
                },
                "memberName": "sqrtPrice"
               },
               "right": {
                "type": "BinaryOperation",
                "operator": "/",
                "left": {
                 "type": "BinaryOperation",
                 "operator": "*",
                 "left": {
                  "type": "Identifier",
                  "name": "sqrtBasePrice"
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "1e8",
                  "subdenomination": null
                 }
                },
                "right": {
                 "type": "Identifier",
                 "name": "maxAcceptableSqrtPriceRange"
                }
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "BinaryOperation",
                "operator": "/",
                "left": {
                 "type": "BinaryOperation",
                 "operator": "*",
                 "left": {
                  "type": "Identifier",
                  "name": "sqrtBasePrice"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "maxAcceptableSqrtPriceRange"
                 }
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "1e8",
                 "subdenomination": null
                }
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "tradeResult"
                },
                "memberName": "sqrtPrice"
               }
              }
             }
            ],
            "isArray": false
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "OutOfAcceptablePriceRange"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/ScaledAsset.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/FixedPointMathLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/FixedPointMathLib.sol",
      "parts": [
       "@solmate/src/utils/FixedPointMathLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "FixedPointMathLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "FixedPointMathLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeCast",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeCast"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Constants.sol",
      "parts": [
       "./Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./math/Math.sol",
      "parts": [
       "./math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Math",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Math"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "ScaledAsset",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "libraryName": "Math",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "SafeCast",
       "functions": [],
       "operators": []
      },
      {
       "type": "StructDefinition",
       "name": "AssetStatus",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "totalCompoundDeposited",
         "identifier": {
          "type": "Identifier",
          "name": "totalCompoundDeposited"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "totalNormalDeposited",
         "identifier": {
          "type": "Identifier",
          "name": "totalNormalDeposited"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "totalNormalBorrowed",
         "identifier": {
          "type": "Identifier",
          "name": "totalNormalBorrowed"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "assetScaler",
         "identifier": {
          "type": "Identifier",
          "name": "assetScaler"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "assetGrowth",
         "identifier": {
          "type": "Identifier",
          "name": "assetGrowth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "debtGrowth",
         "identifier": {
          "type": "Identifier",
          "name": "debtGrowth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "UserStatus",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "positionAmount",
         "identifier": {
          "type": "Identifier",
          "name": "positionAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lastFeeGrowth",
         "identifier": {
          "type": "Identifier",
          "name": "lastFeeGrowth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "EventDefinition",
       "name": "ScaledAssetPositionUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isStable",
         "identifier": {
          "type": "Identifier",
          "name": "isStable"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "open",
         "identifier": {
          "type": "Identifier",
          "name": "open"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "close",
         "identifier": {
          "type": "Identifier",
          "name": "close"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": "createAssetStatus",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AssetStatus"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "AssetStatus"
           },
           "arguments": [
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "ONE"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "createUserStatus",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserStatus"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "UserStatus"
           },
           "arguments": [
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "addAsset",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AssetStatus"
         },
         "name": "tokenState",
         "identifier": {
          "type": "Identifier",
          "name": "tokenState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_amount",
         "identifier": {
          "type": "Identifier",
          "name": "_amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "claimAmount",
         "identifier": {
          "type": "Identifier",
          "name": "claimAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "_amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "claimAmount"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FixedPointMathLib"
             },
             "memberName": "mulDivDown"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_amount"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "ONE"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tokenState"
              },
              "memberName": "assetScaler"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tokenState"
            },
            "memberName": "totalCompoundDeposited"
           },
           "right": {
            "type": "Identifier",
            "name": "claimAmount"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "removeAsset",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AssetStatus"
         },
         "name": "tokenState",
         "identifier": {
          "type": "Identifier",
          "name": "tokenState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_supplyTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "_supplyTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_amount",
         "identifier": {
          "type": "Identifier",
          "name": "_amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalBurnAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalBurnAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalWithdrawAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalWithdrawAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "_amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "_supplyTokenAmount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "S3",
             "parts": [
              "S3"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "burnAmount",
            "identifier": {
             "type": "Identifier",
             "name": "burnAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "FixedPointMathLib"
            },
            "memberName": "mulDivDown"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_amount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "ONE"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tokenState"
             },
             "memberName": "assetScaler"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "_supplyTokenAmount"
           },
           "right": {
            "type": "Identifier",
            "name": "burnAmount"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "finalBurnAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "_supplyTokenAmount"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "finalBurnAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "burnAmount"
              }
             }
            }
           ]
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "finalWithdrawAmount"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FixedPointMathLib"
             },
             "memberName": "mulDivDown"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "finalBurnAmount"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tokenState"
              },
              "memberName": "assetScaler"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "ONE"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">=",
             "left": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "getAvailableCollateralValue"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "tokenState"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "right": {
              "type": "Identifier",
              "name": "finalWithdrawAmount"
             }
            },
            {
             "type": "StringLiteral",
             "value": "S0",
             "parts": [
              "S0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "-=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tokenState"
            },
            "memberName": "totalCompoundDeposited"
           },
           "right": {
            "type": "Identifier",
            "name": "finalBurnAmount"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "isSameSign",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "a",
         "identifier": {
          "type": "Identifier",
          "name": "a"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "b",
         "identifier": {
          "type": "Identifier",
          "name": "b"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": ">=",
               "left": {
                "type": "Identifier",
                "name": "a"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": ">=",
               "left": {
                "type": "Identifier",
                "name": "b"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              }
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "a"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "b"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              }
             }
            ],
            "isArray": false
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "updatePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.AssetStatus"
         },
         "name": "tokenStatus",
         "identifier": {
          "type": "Identifier",
          "name": "tokenStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.UserStatus"
         },
         "name": "userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "userStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_amount",
         "identifier": {
          "type": "Identifier",
          "name": "_amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_pairId",
         "identifier": {
          "type": "Identifier",
          "name": "_pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "_isStable",
         "identifier": {
          "type": "Identifier",
          "name": "_isStable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userStatus"
            },
            "memberName": "positionAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": "==",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "userStatus"
                 },
                 "memberName": "lastFeeGrowth"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "tokenStatus"
                 },
                 "memberName": "assetGrowth"
                }
               },
               {
                "type": "StringLiteral",
                "value": "S2",
                "parts": [
                 "S2"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userStatus"
             },
             "memberName": "positionAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "require"
               },
               "arguments": [
                {
                 "type": "BinaryOperation",
                 "operator": "==",
                 "left": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "userStatus"
                  },
                  "memberName": "lastFeeGrowth"
                 },
                 "right": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "tokenStatus"
                  },
                  "memberName": "debtGrowth"
                 }
                },
                {
                 "type": "StringLiteral",
                 "value": "S2",
                 "parts": [
                  "S2"
                 ],
                 "isUnicode": [
                  false
                 ]
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "openAmount",
            "identifier": {
             "type": "Identifier",
             "name": "openAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "closeAmount",
            "identifier": {
             "type": "Identifier",
             "name": "closeAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "isSameSign"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userStatus"
             },
             "memberName": "positionAmount"
            },
            {
             "type": "Identifier",
             "name": "_amount"
            }
           ],
           "names": [],
           "identifiers": []
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "openAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "_amount"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">=",
              "left": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "userStatus"
                 },
                 "memberName": "positionAmount"
                },
                "memberName": "abs"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_amount"
                },
                "memberName": "abs"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "closeAmount"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "_amount"
                 }
                }
               }
              ]
             },
             "falseBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "openAmount"
                 },
                 "right": {
                  "type": "BinaryOperation",
                  "operator": "+",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "userStatus"
                   },
                   "memberName": "positionAmount"
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "_amount"
                  }
                 }
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "closeAmount"
                 },
                 "right": {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "userStatus"
                   },
                   "memberName": "positionAmount"
                  },
                  "isPrefix": true
                 }
                }
               }
              ]
             }
            }
           ]
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "closeAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "-=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tokenStatus"
               },
               "memberName": "totalNormalBorrowed"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "closeAmount"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "closeAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "require"
               },
               "arguments": [
                {
                 "type": "BinaryOperation",
                 "operator": ">=",
                 "left": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "getAvailableCollateralValue"
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "tokenStatus"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "right": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "ElementaryTypeName",
                   "name": "uint256",
                   "stateMutability": null
                  },
                  "arguments": [
                   {
                    "type": "UnaryOperation",
                    "operator": "-",
                    "subExpression": {
                     "type": "Identifier",
                     "name": "closeAmount"
                    },
                    "isPrefix": true
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                },
                {
                 "type": "StringLiteral",
                 "value": "S0",
                 "parts": [
                  "S0"
                 ],
                 "isUnicode": [
                  false
                 ]
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "-=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "tokenStatus"
                },
                "memberName": "totalNormalDeposited"
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "Identifier",
                   "name": "closeAmount"
                  },
                  "isPrefix": true
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "openAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tokenStatus"
               },
               "memberName": "totalNormalDeposited"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "openAmount"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userStatus"
               },
               "memberName": "lastFeeGrowth"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tokenStatus"
               },
               "memberName": "assetGrowth"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "openAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "require"
               },
               "arguments": [
                {
                 "type": "BinaryOperation",
                 "operator": ">=",
                 "left": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "getAvailableCollateralValue"
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "tokenStatus"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "right": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "ElementaryTypeName",
                   "name": "uint256",
                   "stateMutability": null
                  },
                  "arguments": [
                   {
                    "type": "UnaryOperation",
                    "operator": "-",
                    "subExpression": {
                     "type": "Identifier",
                     "name": "openAmount"
                    },
                    "isPrefix": true
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                },
                {
                 "type": "StringLiteral",
                 "value": "S0",
                 "parts": [
                  "S0"
                 ],
                 "isUnicode": [
                  false
                 ]
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "+=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "tokenStatus"
                },
                "memberName": "totalNormalBorrowed"
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "Identifier",
                   "name": "openAmount"
                  },
                  "isPrefix": true
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "userStatus"
                },
                "memberName": "lastFeeGrowth"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "tokenStatus"
                },
                "memberName": "debtGrowth"
               }
              }
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userStatus"
            },
            "memberName": "positionAmount"
           },
           "right": {
            "type": "Identifier",
            "name": "_amount"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ScaledAssetPositionUpdated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_pairId"
            },
            {
             "type": "Identifier",
             "name": "_isStable"
            },
            {
             "type": "Identifier",
             "name": "openAmount"
            },
            {
             "type": "Identifier",
             "name": "closeAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "computeUserFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.AssetStatus"
         },
         "name": "_assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.UserStatus"
         },
         "name": "_userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_userStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "interestFee",
         "identifier": {
          "type": "Identifier",
          "name": "interestFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_userStatus"
            },
            "memberName": "positionAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "interestFee"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "TupleExpression",
                 "components": [
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "Identifier",
                    "name": "getAssetFee"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "_assetStatus"
                    },
                    {
                     "type": "Identifier",
                     "name": "_userStatus"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  }
                 ],
                 "isArray": false
                },
                "memberName": "toInt256"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "interestFee"
              },
              "right": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "TupleExpression",
                  "components": [
                   {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "getDebtFee"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "_assetStatus"
                     },
                     {
                      "type": "Identifier",
                      "name": "_userStatus"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  ],
                  "isArray": false
                 },
                 "memberName": "toInt256"
                },
                "arguments": [],
                "names": [],
                "identifiers": []
               },
               "isPrefix": true
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "settleUserFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.AssetStatus"
         },
         "name": "_assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.UserStatus"
         },
         "name": "_userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_userStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "interestFee",
         "identifier": {
          "type": "Identifier",
          "name": "interestFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "interestFee"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "computeUserFee"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             {
              "type": "Identifier",
              "name": "_userStatus"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_userStatus"
            },
            "memberName": "positionAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "lastFeeGrowth"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "assetGrowth"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "lastFeeGrowth"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "debtGrowth"
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getAssetFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AssetStatus"
         },
         "name": "tokenState",
         "identifier": {
          "type": "Identifier",
          "name": "tokenState"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserStatus"
         },
         "name": "accountState",
         "identifier": {
          "type": "Identifier",
          "name": "accountState"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "accountState"
              },
              "memberName": "positionAmount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "S1",
             "parts": [
              "S1"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "FixedPointMathLib"
            },
            "memberName": "mulDivDown"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tokenState"
              },
              "memberName": "assetGrowth"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "accountState"
              },
              "memberName": "lastFeeGrowth"
             }
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "accountState"
               },
               "memberName": "positionAmount"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "ONE"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getDebtFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AssetStatus"
         },
         "name": "tokenState",
         "identifier": {
          "type": "Identifier",
          "name": "tokenState"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserStatus"
         },
         "name": "accountState",
         "identifier": {
          "type": "Identifier",
          "name": "accountState"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "<=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "accountState"
              },
              "memberName": "positionAmount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "S1",
             "parts": [
              "S1"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "FixedPointMathLib"
            },
            "memberName": "mulDivUp"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tokenState"
              },
              "memberName": "debtGrowth"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "accountState"
              },
              "memberName": "lastFeeGrowth"
             }
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "accountState"
                },
                "memberName": "positionAmount"
               },
               "isPrefix": true
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "ONE"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "updateScaler",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AssetStatus"
         },
         "name": "tokenState",
         "identifier": {
          "type": "Identifier",
          "name": "tokenState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_interestRate",
         "identifier": {
          "type": "Identifier",
          "name": "_interestRate"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "_reserveFactor",
         "identifier": {
          "type": "Identifier",
          "name": "_reserveFactor"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tokenState"
             },
             "memberName": "totalCompoundDeposited"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tokenState"
             },
             "memberName": "totalNormalDeposited"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "protocolFee",
            "identifier": {
             "type": "Identifier",
             "name": "protocolFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "FixedPointMathLib"
            },
            "memberName": "mulDivDown"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "FixedPointMathLib"
              },
              "memberName": "mulDivDown"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "_interestRate"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "getTotalDebtValue"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "tokenState"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "ONE"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "_reserveFactor"
            },
            {
             "type": "NumberLiteral",
             "number": "100",
             "subdenomination": null
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "supplyInterestRate",
            "identifier": {
             "type": "Identifier",
             "name": "supplyInterestRate"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "FixedPointMathLib"
            },
            "memberName": "mulDivDown"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "FixedPointMathLib"
              },
              "memberName": "mulDivDown"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "_interestRate"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "getTotalDebtValue"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "tokenState"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "getTotalCollateralValue"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "tokenState"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "NumberLiteral",
              "number": "100",
              "subdenomination": null
             },
             "right": {
              "type": "Identifier",
              "name": "_reserveFactor"
             }
            },
            {
             "type": "NumberLiteral",
             "number": "100",
             "subdenomination": null
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tokenState"
            },
            "memberName": "debtGrowth"
           },
           "right": {
            "type": "Identifier",
            "name": "_interestRate"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tokenState"
            },
            "memberName": "assetScaler"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FixedPointMathLib"
             },
             "memberName": "mulDivDown"
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tokenState"
              },
              "memberName": "assetScaler"
             },
             {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "ONE"
              },
              "right": {
               "type": "Identifier",
               "name": "supplyInterestRate"
              }
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "ONE"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tokenState"
            },
            "memberName": "assetGrowth"
           },
           "right": {
            "type": "Identifier",
            "name": "supplyInterestRate"
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "protocolFee"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getTotalCollateralValue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AssetStatus"
         },
         "name": "tokenState",
         "identifier": {
          "type": "Identifier",
          "name": "tokenState"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FixedPointMathLib"
             },
             "memberName": "mulDivDown"
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tokenState"
              },
              "memberName": "totalCompoundDeposited"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tokenState"
              },
              "memberName": "assetScaler"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "ONE"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tokenState"
            },
            "memberName": "totalNormalDeposited"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getTotalDebtValue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AssetStatus"
         },
         "name": "tokenState",
         "identifier": {
          "type": "Identifier",
          "name": "tokenState"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "tokenState"
           },
           "memberName": "totalNormalBorrowed"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getAvailableCollateralValue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AssetStatus"
         },
         "name": "tokenState",
         "identifier": {
          "type": "Identifier",
          "name": "tokenState"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "getTotalCollateralValue"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "tokenState"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "getTotalDebtValue"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "tokenState"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getUtilizationRatio",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AssetStatus"
         },
         "name": "tokenState",
         "identifier": {
          "type": "Identifier",
          "name": "tokenState"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tokenState"
             },
             "memberName": "totalCompoundDeposited"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tokenState"
             },
             "memberName": "totalNormalDeposited"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "utilization",
            "identifier": {
             "type": "Identifier",
             "name": "utilization"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "FixedPointMathLib"
            },
            "memberName": "mulDivDown"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "getTotalDebtValue"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "tokenState"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "ONE"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "getTotalCollateralValue"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "tokenState"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "utilization"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1e18",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "1e18",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "utilization"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/Reallocation.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
      "parts": [
       "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/libraries/TickMath.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/libraries/TickMath.sol",
      "parts": [
       "@uniswap/v3-core/contracts/libraries/TickMath.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/libraries/FixedPoint96.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/libraries/FixedPoint96.sol",
      "parts": [
       "@uniswap/v3-core/contracts/libraries/FixedPoint96.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./DataType.sol",
      "parts": [
       "./DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Perp.sol",
      "parts": [
       "./Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./ScaledAsset.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./ScaledAsset.sol",
      "parts": [
       "./ScaledAsset.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "Reallocation",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "SafeCast",
       "functions": [],
       "operators": []
      },
      {
       "type": "FunctionDefinition",
       "name": "getNewRange",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_assetStatusUnderlying",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatusUnderlying"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "currentTick",
         "identifier": {
          "type": "Identifier",
          "name": "currentTick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "lower",
         "identifier": {
          "type": "Identifier",
          "name": "lower"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "upper",
         "identifier": {
          "type": "Identifier",
          "name": "upper"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int24",
             "stateMutability": null
            },
            "name": "tickSpacing",
            "identifier": {
             "type": "Identifier",
             "name": "tickSpacing"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatusUnderlying"
                },
                "memberName": "sqrtAssetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "tickSpacing"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "ScaledAsset.AssetStatus"
            },
            "name": "token0Status",
            "identifier": {
             "type": "Identifier",
             "name": "token0Status"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "ScaledAsset.AssetStatus"
            },
            "name": "token1Status",
            "identifier": {
             "type": "Identifier",
             "name": "token1Status"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "_assetStatusUnderlying"
           },
           "memberName": "isQuoteZero"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "token0Status"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatusUnderlying"
                },
                "memberName": "quotePool"
               },
               "memberName": "tokenStatus"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "token1Status"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatusUnderlying"
                },
                "memberName": "basePool"
               },
               "memberName": "tokenStatus"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "token0Status"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatusUnderlying"
                },
                "memberName": "basePool"
               },
               "memberName": "tokenStatus"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "token1Status"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatusUnderlying"
                },
                "memberName": "quotePool"
               },
               "memberName": "tokenStatus"
              }
             }
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_getNewRange"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_assetStatusUnderlying"
            },
            {
             "type": "Identifier",
             "name": "token0Status"
            },
            {
             "type": "Identifier",
             "name": "token1Status"
            },
            {
             "type": "Identifier",
             "name": "currentTick"
            },
            {
             "type": "Identifier",
             "name": "tickSpacing"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_getNewRange",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_assetStatusUnderlying",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatusUnderlying"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.AssetStatus"
         },
         "name": "_token0Status",
         "identifier": {
          "type": "Identifier",
          "name": "_token0Status"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.AssetStatus"
         },
         "name": "_token1Status",
         "identifier": {
          "type": "Identifier",
          "name": "_token1Status"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "currentTick",
         "identifier": {
          "type": "Identifier",
          "name": "currentTick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickSpacing",
         "identifier": {
          "type": "Identifier",
          "name": "tickSpacing"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "lower",
         "identifier": {
          "type": "Identifier",
          "name": "lower"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "upper",
         "identifier": {
          "type": "Identifier",
          "name": "upper"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Perp.SqrtPerpAssetStatus"
            },
            "name": "sqrtAssetStatus",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtAssetStatus"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "_assetStatusUnderlying"
           },
           "memberName": "sqrtAssetStatus"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "lower"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "-",
            "left": {
             "type": "Identifier",
             "name": "currentTick"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_assetStatusUnderlying"
              },
              "memberName": "riskParams"
             },
             "memberName": "rangeSize"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "upper"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "Identifier",
             "name": "currentTick"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_assetStatusUnderlying"
              },
              "memberName": "riskParams"
             },
             "memberName": "rangeSize"
            }
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int24",
             "stateMutability": null
            },
            "name": "previousCenterTick",
            "identifier": {
             "type": "Identifier",
             "name": "previousCenterTick"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sqrtAssetStatus"
               },
               "memberName": "tickLower"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sqrtAssetStatus"
               },
               "memberName": "tickUpper"
              }
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "NumberLiteral",
            "number": "2",
            "subdenomination": null
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "availableAmount",
            "identifier": {
             "type": "Identifier",
             "name": "availableAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "sqrtAssetStatus"
            },
            "memberName": "totalAmount"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "sqrtAssetStatus"
            },
            "memberName": "borrowedAmount"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "availableAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "<",
              "left": {
               "type": "Identifier",
               "name": "currentTick"
              },
              "right": {
               "type": "Identifier",
               "name": "previousCenterTick"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 {
                  "type": "VariableDeclaration",
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "int24",
                   "stateMutability": null
                  },
                  "name": "minLowerTick",
                  "identifier": {
                   "type": "Identifier",
                   "name": "minLowerTick"
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "calculateMinLowerTick"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "sqrtAssetStatus"
                   },
                   "memberName": "tickLower"
                  },
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "ScaledAsset"
                    },
                    "memberName": "getAvailableCollateralValue"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "_token1Status"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "Identifier",
                   "name": "availableAmount"
                  },
                  {
                   "type": "Identifier",
                   "name": "tickSpacing"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": "&&",
                 "left": {
                  "type": "BinaryOperation",
                  "operator": "<",
                  "left": {
                   "type": "Identifier",
                   "name": "lower"
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "minLowerTick"
                  }
                 },
                 "right": {
                  "type": "BinaryOperation",
                  "operator": "<",
                  "left": {
                   "type": "Identifier",
                   "name": "minLowerTick"
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "currentTick"
                  }
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "BinaryOperation",
                    "operator": "=",
                    "left": {
                     "type": "Identifier",
                     "name": "lower"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "minLowerTick"
                    }
                   }
                  },
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "BinaryOperation",
                    "operator": "=",
                    "left": {
                     "type": "Identifier",
                     "name": "upper"
                    },
                    "right": {
                     "type": "BinaryOperation",
                     "operator": "+",
                     "left": {
                      "type": "Identifier",
                      "name": "lower"
                     },
                     "right": {
                      "type": "BinaryOperation",
                      "operator": "*",
                      "left": {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "MemberAccess",
                        "expression": {
                         "type": "Identifier",
                         "name": "_assetStatusUnderlying"
                        },
                        "memberName": "riskParams"
                       },
                       "memberName": "rangeSize"
                      },
                      "right": {
                       "type": "NumberLiteral",
                       "number": "2",
                       "subdenomination": null
                      }
                     }
                    }
                   }
                  }
                 ]
                },
                "falseBody": null
               }
              ]
             },
             "falseBody": {
              "type": "Block",
              "statements": [
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 {
                  "type": "VariableDeclaration",
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "int24",
                   "stateMutability": null
                  },
                  "name": "maxUpperTick",
                  "identifier": {
                   "type": "Identifier",
                   "name": "maxUpperTick"
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "calculateMaxUpperTick"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "sqrtAssetStatus"
                   },
                   "memberName": "tickUpper"
                  },
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "ScaledAsset"
                    },
                    "memberName": "getAvailableCollateralValue"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "_token0Status"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "Identifier",
                   "name": "availableAmount"
                  },
                  {
                   "type": "Identifier",
                   "name": "tickSpacing"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": "&&",
                 "left": {
                  "type": "BinaryOperation",
                  "operator": ">",
                  "left": {
                   "type": "Identifier",
                   "name": "upper"
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "maxUpperTick"
                  }
                 },
                 "right": {
                  "type": "BinaryOperation",
                  "operator": ">=",
                  "left": {
                   "type": "Identifier",
                   "name": "maxUpperTick"
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "currentTick"
                  }
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "BinaryOperation",
                    "operator": "=",
                    "left": {
                     "type": "Identifier",
                     "name": "upper"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "maxUpperTick"
                    }
                   }
                  },
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "BinaryOperation",
                    "operator": "=",
                    "left": {
                     "type": "Identifier",
                     "name": "lower"
                    },
                    "right": {
                     "type": "BinaryOperation",
                     "operator": "-",
                     "left": {
                      "type": "Identifier",
                      "name": "upper"
                     },
                     "right": {
                      "type": "BinaryOperation",
                      "operator": "*",
                      "left": {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "MemberAccess",
                        "expression": {
                         "type": "Identifier",
                         "name": "_assetStatusUnderlying"
                        },
                        "memberName": "riskParams"
                       },
                       "memberName": "rangeSize"
                      },
                      "right": {
                       "type": "NumberLiteral",
                       "number": "2",
                       "subdenomination": null
                      }
                     }
                    }
                   }
                  }
                 ]
                },
                "falseBody": null
               }
              ]
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "lower"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateUsableTick"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "lower"
             },
             {
              "type": "Identifier",
              "name": "tickSpacing"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "upper"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateUsableTick"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "upper"
             },
             {
              "type": "Identifier",
              "name": "tickSpacing"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "isInRange",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.SqrtPerpAssetStatus"
         },
         "name": "sqrtAssetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtAssetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           null,
           {
            "type": "VariableDeclaration",
            "name": "currentTick",
            "identifier": {
             "type": "Identifier",
             "name": "currentTick"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int24",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           null,
           null,
           null,
           null,
           null
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sqrtAssetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "slot0"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_isInRange"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "sqrtAssetStatus"
            },
            {
             "type": "Identifier",
             "name": "currentTick"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_isInRange",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.SqrtPerpAssetStatus"
         },
         "name": "sqrtAssetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtAssetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "currentTick",
         "identifier": {
          "type": "Identifier",
          "name": "currentTick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sqrtAssetStatus"
               },
               "memberName": "tickLower"
              },
              "right": {
               "type": "Identifier",
               "name": "currentTick"
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "<",
              "left": {
               "type": "Identifier",
               "name": "currentTick"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sqrtAssetStatus"
               },
               "memberName": "tickUpper"
              }
             }
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateUsableTick",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "_tick",
         "identifier": {
          "type": "Identifier",
          "name": "_tick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickSpacing",
         "identifier": {
          "type": "Identifier",
          "name": "tickSpacing"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "result",
         "identifier": {
          "type": "Identifier",
          "name": "result"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "tickSpacing"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "result"
           },
           "right": {
            "type": "Identifier",
            "name": "_tick"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "result"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "TickMath"
            },
            "memberName": "MIN_TICK"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "result"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "TickMath"
               },
               "memberName": "MIN_TICK"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "result"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "TickMath"
             },
             "memberName": "MAX_TICK"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "Identifier",
                "name": "result"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "TickMath"
                },
                "memberName": "MAX_TICK"
               }
              }
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "result"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "Identifier",
                "name": "result"
               },
               "right": {
                "type": "Identifier",
                "name": "tickSpacing"
               }
              }
             ],
             "isArray": false
            },
            "right": {
             "type": "Identifier",
             "name": "tickSpacing"
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateMinLowerTick",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "currentLowerTick",
         "identifier": {
          "type": "Identifier",
          "name": "currentLowerTick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "available",
         "identifier": {
          "type": "Identifier",
          "name": "available"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickSpacing",
         "identifier": {
          "type": "Identifier",
          "name": "tickSpacing"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "minLowerTick",
         "identifier": {
          "type": "Identifier",
          "name": "minLowerTick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint160",
             "stateMutability": null
            },
            "name": "sqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculateAmount1ForLiquidity"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "TickMath"
              },
              "memberName": "getSqrtRatioAtTick"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "currentLowerTick"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "available"
            },
            {
             "type": "Identifier",
             "name": "liquidityAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "minLowerTick"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "TickMath"
             },
             "memberName": "getTickAtSqrtRatio"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "Identifier",
            "name": "minLowerTick"
           },
           "right": {
            "type": "Identifier",
            "name": "tickSpacing"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "minLowerTick"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "-",
            "left": {
             "type": "Identifier",
             "name": "currentLowerTick"
            },
            "right": {
             "type": "Identifier",
             "name": "tickSpacing"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "minLowerTick"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "Identifier",
                "name": "currentLowerTick"
               },
               "right": {
                "type": "Identifier",
                "name": "tickSpacing"
               }
              }
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateMaxUpperTick",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "currentUpperTick",
         "identifier": {
          "type": "Identifier",
          "name": "currentUpperTick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "available",
         "identifier": {
          "type": "Identifier",
          "name": "available"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickSpacing",
         "identifier": {
          "type": "Identifier",
          "name": "tickSpacing"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "maxUpperTick",
         "identifier": {
          "type": "Identifier",
          "name": "maxUpperTick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint160",
             "stateMutability": null
            },
            "name": "sqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculateAmount0ForLiquidity"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "TickMath"
              },
              "memberName": "getSqrtRatioAtTick"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "currentUpperTick"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "available"
            },
            {
             "type": "Identifier",
             "name": "liquidityAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "maxUpperTick"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "TickMath"
             },
             "memberName": "getTickAtSqrtRatio"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "-=",
           "left": {
            "type": "Identifier",
            "name": "maxUpperTick"
           },
           "right": {
            "type": "Identifier",
            "name": "tickSpacing"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "maxUpperTick"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "Identifier",
             "name": "currentUpperTick"
            },
            "right": {
             "type": "Identifier",
             "name": "tickSpacing"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "maxUpperTick"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "+",
               "left": {
                "type": "Identifier",
                "name": "currentUpperTick"
               },
               "right": {
                "type": "Identifier",
                "name": "tickSpacing"
               }
              }
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateAmount1ForLiquidity",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtRatioA",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtRatioA"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "available",
         "identifier": {
          "type": "Identifier",
          "name": "available"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint160",
             "stateMutability": null
            },
            "name": "sqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "Identifier",
                 "name": "available"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "FixedPoint96"
                 },
                 "memberName": "Q96"
                }
               },
               "right": {
                "type": "Identifier",
                "name": "liquidityAmount"
               }
              }
             ],
             "isArray": false
            },
            "memberName": "toUint160"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "Identifier",
            "name": "sqrtRatioA"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "TickMath"
             },
             "memberName": "MIN_SQRT_RATIO"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "TickMath"
               },
               "memberName": "MIN_SQRT_RATIO"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "1",
               "subdenomination": null
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "Identifier",
            "name": "sqrtRatioA"
           },
           "right": {
            "type": "Identifier",
            "name": "sqrtPrice"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateAmount0ForLiquidity",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtRatioB",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtRatioB"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "available",
         "identifier": {
          "type": "Identifier",
          "name": "available"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "denominator1",
            "identifier": {
             "type": "Identifier",
             "name": "denominator1"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "available"
            },
            "right": {
             "type": "Identifier",
             "name": "sqrtRatioB"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "FixedPoint96"
            },
            "memberName": "Q96"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "Identifier",
            "name": "liquidityAmount"
           },
           "right": {
            "type": "Identifier",
            "name": "denominator1"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "-",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "TickMath"
               },
               "memberName": "MAX_SQRT_RATIO"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "1",
               "subdenomination": null
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint160",
             "stateMutability": null
            },
            "name": "sqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "uint160",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "/",
             "left": {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "Identifier",
               "name": "liquidityAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "sqrtRatioB"
              }
             },
             "right": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "Identifier",
                 "name": "liquidityAmount"
                },
                "right": {
                 "type": "Identifier",
                 "name": "denominator1"
                }
               }
              ],
              "isArray": false
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "Identifier",
            "name": "sqrtPrice"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "TickMath"
            },
            "memberName": "MIN_SQRT_RATIO"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "TickMath"
               },
               "memberName": "MIN_SQRT_RATIO"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "1",
               "subdenomination": null
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "sqrtPrice"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/PremiumCurveModel.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "./Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Constants.sol",
      "parts": [
       "./Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "PremiumCurveModel",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "calculatePremiumCurve",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "utilization",
         "identifier": {
          "type": "Identifier",
          "name": "utilization"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "Identifier",
            "name": "utilization"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Constants"
            },
            "memberName": "SQUART_KINK_UR"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "b",
            "identifier": {
             "type": "Identifier",
             "name": "b"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "Identifier",
              "name": "utilization"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "SQUART_KINK_UR"
             }
            }
           ],
           "isArray": false
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "NumberLiteral",
                 "number": "1600",
                 "subdenomination": null
                },
                "right": {
                 "type": "Identifier",
                 "name": "b"
                }
               },
               "right": {
                "type": "Identifier",
                "name": "b"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "ONE"
              }
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Constants"
            },
            "memberName": "ONE"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/PositionCalculator.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
      "parts": [
       "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/libraries/FullMath.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/libraries/FullMath.sol",
      "parts": [
       "@uniswap/v3-core/contracts/libraries/FullMath.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./UniHelper.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./UniHelper.sol",
      "parts": [
       "./UniHelper.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Perp.sol",
      "parts": [
       "./Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./DataType.sol",
      "parts": [
       "./DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Constants.sol",
      "parts": [
       "./Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./math/Math.sol",
      "parts": [
       "./math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../PriceFeed.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../PriceFeed.sol",
      "parts": [
       "../PriceFeed.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "PositionCalculator",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ScaledAsset.AssetStatus"
       },
       "libraryName": "ScaledAsset",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "SafeCast",
       "functions": [],
       "operators": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "NotSafe",
       "parameters": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "RISK_RATIO_ONE",
         "identifier": {
          "type": "Identifier",
          "name": "RISK_RATIO_ONE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "1e8",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "1e8",
        "subdenomination": null
       }
      },
      {
       "type": "StructDefinition",
       "name": "PositionParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amountQuote",
         "identifier": {
          "type": "Identifier",
          "name": "amountQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amountSqrt",
         "identifier": {
          "type": "Identifier",
          "name": "amountSqrt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amountBase",
         "identifier": {
          "type": "Identifier",
          "name": "amountBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "isLiquidatable",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "pairStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "_vault",
         "identifier": {
          "type": "Identifier",
          "name": "_vault"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.FeeAmount"
         },
         "name": "feeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "feeAmount"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "_isLiquidatable",
         "identifier": {
          "type": "Identifier",
          "name": "_isLiquidatable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "minMargin",
         "identifier": {
          "type": "Identifier",
          "name": "minMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "vaultValue",
         "identifier": {
          "type": "Identifier",
          "name": "vaultValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtOraclePrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtOraclePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "hasPosition",
            "identifier": {
             "type": "Identifier",
             "name": "hasPosition"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "minMargin"
             },
             {
              "type": "Identifier",
              "name": "vaultValue"
             },
             {
              "type": "Identifier",
              "name": "hasPosition"
             },
             {
              "type": "Identifier",
              "name": "sqrtOraclePrice"
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateMinMargin"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "pairStatus"
             },
             {
              "type": "Identifier",
              "name": "_vault"
             },
             {
              "type": "Identifier",
              "name": "feeAmount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "isSafe",
            "identifier": {
             "type": "Identifier",
             "name": "isSafe"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": ">=",
            "left": {
             "type": "Identifier",
             "name": "vaultValue"
            },
            "right": {
             "type": "Identifier",
             "name": "minMargin"
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": ">=",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_vault"
             },
             "memberName": "margin"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_isLiquidatable"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "&&",
            "left": {
             "type": "UnaryOperation",
             "operator": "!",
             "subExpression": {
              "type": "Identifier",
              "name": "isSafe"
             },
             "isPrefix": true
            },
            "right": {
             "type": "Identifier",
             "name": "hasPosition"
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "checkSafe",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "pairStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "_vault",
         "identifier": {
          "type": "Identifier",
          "name": "_vault"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.FeeAmount"
         },
         "name": "feeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "feeAmount"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "minMargin",
         "identifier": {
          "type": "Identifier",
          "name": "minMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "isSafe",
            "identifier": {
             "type": "Identifier",
             "name": "isSafe"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "minMargin"
             },
             {
              "type": "Identifier",
              "name": "isSafe"
             },
             null
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "getIsSafe"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "pairStatus"
             },
             {
              "type": "Identifier",
              "name": "_vault"
             },
             {
              "type": "Identifier",
              "name": "feeAmount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "Identifier",
            "name": "isSafe"
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "NotSafe"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getIsSafe",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "pairStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "_vault",
         "identifier": {
          "type": "Identifier",
          "name": "_vault"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.FeeAmount"
         },
         "name": "feeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "feeAmount"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "minMargin",
         "identifier": {
          "type": "Identifier",
          "name": "minMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isSafe",
         "identifier": {
          "type": "Identifier",
          "name": "isSafe"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "hasPosition",
         "identifier": {
          "type": "Identifier",
          "name": "hasPosition"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "vaultValue",
            "identifier": {
             "type": "Identifier",
             "name": "vaultValue"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "minMargin"
             },
             {
              "type": "Identifier",
              "name": "vaultValue"
             },
             {
              "type": "Identifier",
              "name": "hasPosition"
             },
             null
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateMinMargin"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "pairStatus"
             },
             {
              "type": "Identifier",
              "name": "_vault"
             },
             {
              "type": "Identifier",
              "name": "feeAmount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "isSafe"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "&&",
            "left": {
             "type": "BinaryOperation",
             "operator": ">=",
             "left": {
              "type": "Identifier",
              "name": "vaultValue"
             },
             "right": {
              "type": "Identifier",
              "name": "minMargin"
             }
            },
            "right": {
             "type": "BinaryOperation",
             "operator": ">=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_vault"
              },
              "memberName": "margin"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateMinMargin",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "pairStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "vault",
         "identifier": {
          "type": "Identifier",
          "name": "vault"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.FeeAmount"
         },
         "name": "feeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "feeAmount"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "minMargin",
         "identifier": {
          "type": "Identifier",
          "name": "minMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "vaultValue",
         "identifier": {
          "type": "Identifier",
          "name": "vaultValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "hasPosition",
         "identifier": {
          "type": "Identifier",
          "name": "hasPosition"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtOraclePrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtOraclePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "minValue",
            "identifier": {
             "type": "Identifier",
             "name": "minValue"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "debtValue",
            "identifier": {
             "type": "Identifier",
             "name": "debtValue"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "sqrtOraclePrice"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "getSqrtIndexPrice"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "pairStatus"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "minValue"
             },
             {
              "type": "Identifier",
              "name": "vaultValue"
             },
             {
              "type": "Identifier",
              "name": "debtValue"
             },
             {
              "type": "Identifier",
              "name": "hasPosition"
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateMinValue"
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "vault"
              },
              "memberName": "margin"
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "getPositionWithFeeAmount"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "vault"
                },
                "memberName": "openPosition"
               },
               {
                "type": "Identifier",
                "name": "feeAmount"
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "Identifier",
              "name": "sqrtOraclePrice"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "pairStatus"
               },
               "memberName": "riskParams"
              },
              "memberName": "riskRatio"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "minMinValue",
            "identifier": {
             "type": "Identifier",
             "name": "minMinValue"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "calculateRequiredCollateralWithDebt"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "pairStatus"
                    },
                    "memberName": "riskParams"
                   },
                   "memberName": "debtRiskRatio"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "right": {
                 "type": "Identifier",
                 "name": "debtValue"
                }
               }
              ],
              "isArray": false
             },
             "memberName": "toInt256"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1e6",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "minMargin"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "Identifier",
              "name": "vaultValue"
             },
             "right": {
              "type": "Identifier",
              "name": "minValue"
             }
            },
            "right": {
             "type": "Identifier",
             "name": "minMinValue"
            }
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "Identifier",
            "name": "hasPosition"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "minMargin"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "MIN_MARGIN_AMOUNT"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "minMargin"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "MIN_MARGIN_AMOUNT"
              }
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateRequiredCollateralWithDebt",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint128",
          "stateMutability": null
         },
         "name": "debtRiskRatio",
         "identifier": {
          "type": "Identifier",
          "name": "debtRiskRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "debtRiskRatio"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "BASE_MIN_COLLATERAL_WITH_DEBT"
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "Identifier",
              "name": "debtRiskRatio"
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateMinValue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "marginAmount",
         "identifier": {
          "type": "Identifier",
          "name": "marginAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PositionParams"
         },
         "name": "positionParams",
         "identifier": {
          "type": "Identifier",
          "name": "positionParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "riskRatio",
         "identifier": {
          "type": "Identifier",
          "name": "riskRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "minValue",
         "identifier": {
          "type": "Identifier",
          "name": "minValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "vaultValue",
         "identifier": {
          "type": "Identifier",
          "name": "vaultValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "debtValue",
         "identifier": {
          "type": "Identifier",
          "name": "debtValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "hasPosition",
         "identifier": {
          "type": "Identifier",
          "name": "hasPosition"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "Identifier",
            "name": "minValue"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateMinValue"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             },
             {
              "type": "Identifier",
              "name": "positionParams"
             },
             {
              "type": "Identifier",
              "name": "riskRatio"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "Identifier",
            "name": "vaultValue"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateValue"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             },
             {
              "type": "Identifier",
              "name": "positionParams"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "Identifier",
            "name": "debtValue"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateSquartDebtValue"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             },
             {
              "type": "Identifier",
              "name": "positionParams"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "hasPosition"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "||",
            "left": {
             "type": "Identifier",
             "name": "hasPosition"
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "getHasPositionFlag"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "positionParams"
              }
             ],
             "names": [],
             "identifiers": []
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "Identifier",
            "name": "minValue"
           },
           "right": {
            "type": "Identifier",
            "name": "marginAmount"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "Identifier",
            "name": "vaultValue"
           },
           "right": {
            "type": "Identifier",
            "name": "marginAmount"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getHasPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "_vault",
         "identifier": {
          "type": "Identifier",
          "name": "_vault"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "hasPosition",
         "identifier": {
          "type": "Identifier",
          "name": "hasPosition"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Perp.UserStatus"
            },
            "name": "userStatus",
            "identifier": {
             "type": "Identifier",
             "name": "userStatus"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "_vault"
           },
           "memberName": "openPosition"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "hasPosition"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "||",
            "left": {
             "type": "Identifier",
             "name": "hasPosition"
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "getHasPositionFlag"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "getPosition"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "userStatus"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtIndexPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "pairStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtPriceX96",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPriceX96"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "memberName": "priceFeed"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "PriceFeed"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "pairStatus"
                  },
                  "memberName": "priceFeed"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "getSqrtPrice"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "UniHelper"
               },
               "memberName": "convertSqrtPrice"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "UniHelper"
                 },
                 "memberName": "getSqrtTWAP"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "pairStatus"
                   },
                   "memberName": "sqrtAssetStatus"
                  },
                  "memberName": "uniswapPool"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "pairStatus"
                },
                "memberName": "isQuoteZero"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getPositionWithFeeAmount",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.UserStatus"
         },
         "name": "perpUserStatus",
         "identifier": {
          "type": "Identifier",
          "name": "perpUserStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.FeeAmount"
         },
         "name": "feeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "feeAmount"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PositionParams"
         },
         "name": "positionParams",
         "identifier": {
          "type": "Identifier",
          "name": "positionParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PositionParams"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "perpUserStatus"
                },
                "memberName": "perp"
               },
               "memberName": "entryValue"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "perpUserStatus"
                },
                "memberName": "sqrtPerp"
               },
               "memberName": "entryValue"
              }
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "feeAmount"
              },
              "memberName": "feeAmountQuote"
             }
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "perpUserStatus"
              },
              "memberName": "sqrtPerp"
             },
             "memberName": "amount"
            },
            {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "perpUserStatus"
               },
               "memberName": "perp"
              },
              "memberName": "amount"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "feeAmount"
              },
              "memberName": "feeAmountBase"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.UserStatus"
         },
         "name": "_perpUserStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_perpUserStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PositionParams"
         },
         "name": "positionParams",
         "identifier": {
          "type": "Identifier",
          "name": "positionParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PositionParams"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_perpUserStatus"
               },
               "memberName": "perp"
              },
              "memberName": "entryValue"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_perpUserStatus"
               },
               "memberName": "sqrtPerp"
              },
              "memberName": "entryValue"
             }
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_perpUserStatus"
              },
              "memberName": "sqrtPerp"
             },
             "memberName": "amount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_perpUserStatus"
              },
              "memberName": "perp"
             },
             "memberName": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getHasPositionFlag",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PositionParams"
         },
         "name": "_positionParams",
         "identifier": {
          "type": "Identifier",
          "name": "_positionParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "!=",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_positionParams"
             },
             "memberName": "amountSqrt"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "!=",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_positionParams"
             },
             "memberName": "amountBase"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateMinValue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "_sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PositionParams"
         },
         "name": "_positionParams",
         "identifier": {
          "type": "Identifier",
          "name": "_positionParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_riskRatio",
         "identifier": {
          "type": "Identifier",
          "name": "_riskRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "minValue",
         "identifier": {
          "type": "Identifier",
          "name": "minValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "minValue"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "type"
             },
             "arguments": [
              {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "max"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "upperPrice",
            "identifier": {
             "type": "Identifier",
             "name": "upperPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "_sqrtPrice"
            },
            "right": {
             "type": "Identifier",
             "name": "_riskRatio"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "RISK_RATIO_ONE"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "lowerPrice",
            "identifier": {
             "type": "Identifier",
             "name": "lowerPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "_sqrtPrice"
            },
            "right": {
             "type": "Identifier",
             "name": "RISK_RATIO_ONE"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "_riskRatio"
           }
          }
         },
         {
          "type": "Block",
          "statements": [
           {
            "type": "VariableDeclarationStatement",
            "variables": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "name": "v",
              "identifier": {
               "type": "Identifier",
               "name": "v"
              },
              "storageLocation": null,
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "initialValue": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "calculateValue"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "upperPrice"
              },
              {
               "type": "Identifier",
               "name": "_positionParams"
              }
             ],
             "names": [],
             "identifiers": []
            }
           },
           {
            "type": "IfStatement",
            "condition": {
             "type": "BinaryOperation",
             "operator": "<",
             "left": {
              "type": "Identifier",
              "name": "v"
             },
             "right": {
              "type": "Identifier",
              "name": "minValue"
             }
            },
            "trueBody": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "BinaryOperation",
                "operator": "=",
                "left": {
                 "type": "Identifier",
                 "name": "minValue"
                },
                "right": {
                 "type": "Identifier",
                 "name": "v"
                }
               }
              }
             ]
            },
            "falseBody": null
           }
          ]
         },
         {
          "type": "Block",
          "statements": [
           {
            "type": "VariableDeclarationStatement",
            "variables": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "name": "v",
              "identifier": {
               "type": "Identifier",
               "name": "v"
              },
              "storageLocation": null,
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "initialValue": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "calculateValue"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "lowerPrice"
              },
              {
               "type": "Identifier",
               "name": "_positionParams"
              }
             ],
             "names": [],
             "identifiers": []
            }
           },
           {
            "type": "IfStatement",
            "condition": {
             "type": "BinaryOperation",
             "operator": "<",
             "left": {
              "type": "Identifier",
              "name": "v"
             },
             "right": {
              "type": "Identifier",
              "name": "minValue"
             }
            },
            "trueBody": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "BinaryOperation",
                "operator": "=",
                "left": {
                 "type": "Identifier",
                 "name": "minValue"
                },
                "right": {
                 "type": "Identifier",
                 "name": "v"
                }
               }
              }
             ]
            },
            "falseBody": null
           }
          ]
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_positionParams"
             },
             "memberName": "amountSqrt"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_positionParams"
             },
             "memberName": "amountBase"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "minSqrtPrice",
               "identifier": {
                "type": "Identifier",
                "name": "minSqrtPrice"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "BinaryOperation",
                 "operator": "*",
                 "left": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "ElementaryTypeName",
                   "name": "uint256",
                   "stateMutability": null
                  },
                  "arguments": [
                   {
                    "type": "UnaryOperation",
                    "operator": "-",
                    "subExpression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "_positionParams"
                     },
                     "memberName": "amountSqrt"
                    },
                    "isPrefix": true
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "right": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "Constants"
                  },
                  "memberName": "Q96"
                 }
                }
               ],
               "isArray": false
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_positionParams"
                 },
                 "memberName": "amountBase"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "lowerPrice"
               },
               "right": {
                "type": "Identifier",
                "name": "minSqrtPrice"
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "minSqrtPrice"
               },
               "right": {
                "type": "Identifier",
                "name": "upperPrice"
               }
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 {
                  "type": "VariableDeclaration",
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "int256",
                   "stateMutability": null
                  },
                  "name": "v",
                  "identifier": {
                   "type": "Identifier",
                   "name": "v"
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "calculateValue"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "minSqrtPrice"
                  },
                  {
                   "type": "Identifier",
                   "name": "_positionParams"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": "<",
                 "left": {
                  "type": "Identifier",
                  "name": "v"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "minValue"
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "BinaryOperation",
                    "operator": "=",
                    "left": {
                     "type": "Identifier",
                     "name": "minValue"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "v"
                    }
                   }
                  }
                 ]
                },
                "falseBody": null
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateValue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "_sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PositionParams"
         },
         "name": "_positionParams",
         "identifier": {
          "type": "Identifier",
          "name": "_positionParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "price",
            "identifier": {
             "type": "Identifier",
             "name": "price"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Math"
            },
            "memberName": "calSqrtPriceToPrice"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_sqrtPrice"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+",
           "left": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Math"
              },
              "memberName": "fullMulDivInt256"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_positionParams"
               },
               "memberName": "amountBase"
              },
              {
               "type": "Identifier",
               "name": "price"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Math"
              },
              "memberName": "fullMulDivInt256"
             },
             "arguments": [
              {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "NumberLiteral",
                "number": "2",
                "subdenomination": null
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_positionParams"
                },
                "memberName": "amountSqrt"
               }
              },
              {
               "type": "Identifier",
               "name": "_sqrtPrice"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             ],
             "names": [],
             "identifiers": []
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_positionParams"
            },
            "memberName": "amountQuote"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateSquartDebtValue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "_sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PositionParams"
         },
         "name": "positionParams",
         "identifier": {
          "type": "Identifier",
          "name": "positionParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "squartPosition",
            "identifier": {
             "type": "Identifier",
             "name": "squartPosition"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "positionParams"
           },
           "memberName": "amountSqrt"
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "squartPosition"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "BinaryOperation",
             "operator": ">>",
             "left": {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "NumberLiteral",
               "number": "2",
               "subdenomination": null
              },
              "right": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "BinaryOperation",
                 "operator": "*",
                 "left": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "ElementaryTypeName",
                   "name": "uint256",
                   "stateMutability": null
                  },
                  "arguments": [
                   {
                    "type": "UnaryOperation",
                    "operator": "-",
                    "subExpression": {
                     "type": "Identifier",
                     "name": "squartPosition"
                    },
                    "isPrefix": true
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "_sqrtPrice"
                 }
                }
               ],
               "isArray": false
              }
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "RESOLUTION"
             }
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/PerpFee.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./PairLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./PairLib.sol",
      "parts": [
       "./PairLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Perp.sol",
      "parts": [
       "./Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./DataType.sol",
      "parts": [
       "./DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Constants.sol",
      "parts": [
       "./Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./ScaledAsset.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./ScaledAsset.sol",
      "parts": [
       "./ScaledAsset.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ScaledAsset",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ScaledAsset"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./math/Math.sol",
      "parts": [
       "./math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Math",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Math"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PerpFee",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ScaledAsset.AssetStatus"
       },
       "libraryName": "ScaledAsset",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "SafeCast",
       "functions": [],
       "operators": []
      },
      {
       "type": "FunctionDefinition",
       "name": "computeUserFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "assetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.RebalanceFeeGrowthCache"
          },
          "valueName": null
         },
         "name": "rebalanceFeeGrowthCache",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceFeeGrowthCache"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.UserStatus"
         },
         "name": "userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "userStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.FeeAmount"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "FeeAmountUnderlying",
            "identifier": {
             "type": "Identifier",
             "name": "FeeAmountUnderlying"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "assetStatus"
              },
              "memberName": "basePool"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "computeUserFee"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userStatus"
             },
             "memberName": "basePosition"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "FeeAmountStable",
            "identifier": {
             "type": "Identifier",
             "name": "FeeAmountStable"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "assetStatus"
              },
              "memberName": "quotePool"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "computeUserFee"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userStatus"
             },
             "memberName": "stablePosition"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "Block",
          "statements": [
           {
            "type": "VariableDeclarationStatement",
            "variables": [
             {
              "type": "VariableDeclaration",
              "name": "rebalanceInterestBase",
              "identifier": {
               "type": "Identifier",
               "name": "rebalanceInterestBase"
              },
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "storageLocation": null,
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             },
             {
              "type": "VariableDeclaration",
              "name": "rebalanceInterestQuote",
              "identifier": {
               "type": "Identifier",
               "name": "rebalanceInterestQuote"
              },
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "storageLocation": null,
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "initialValue": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "computeRebalanceInterest"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "assetStatus"
               },
               "memberName": "id"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "assetStatus"
               },
               "memberName": "sqrtAssetStatus"
              },
              {
               "type": "Identifier",
               "name": "rebalanceFeeGrowthCache"
              },
              {
               "type": "Identifier",
               "name": "userStatus"
              }
             ],
             "names": [],
             "identifiers": []
            }
           },
           {
            "type": "ExpressionStatement",
            "expression": {
             "type": "BinaryOperation",
             "operator": "+=",
             "left": {
              "type": "Identifier",
              "name": "FeeAmountUnderlying"
             },
             "right": {
              "type": "Identifier",
              "name": "rebalanceInterestBase"
             }
            }
           },
           {
            "type": "ExpressionStatement",
            "expression": {
             "type": "BinaryOperation",
             "operator": "+=",
             "left": {
              "type": "Identifier",
              "name": "FeeAmountStable"
             },
             "right": {
              "type": "Identifier",
              "name": "rebalanceInterestQuote"
             }
            }
           }
          ]
         },
         {
          "type": "Block",
          "statements": [
           {
            "type": "VariableDeclarationStatement",
            "variables": [
             {
              "type": "VariableDeclaration",
              "name": "feeUnderlying",
              "identifier": {
               "type": "Identifier",
               "name": "feeUnderlying"
              },
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "storageLocation": null,
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             },
             {
              "type": "VariableDeclaration",
              "name": "feeStable",
              "identifier": {
               "type": "Identifier",
               "name": "feeStable"
              },
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "storageLocation": null,
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "initialValue": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "computePremium"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "assetStatus"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "userStatus"
               },
               "memberName": "sqrtPerp"
              }
             ],
             "names": [],
             "identifiers": []
            }
           },
           {
            "type": "ExpressionStatement",
            "expression": {
             "type": "BinaryOperation",
             "operator": "+=",
             "left": {
              "type": "Identifier",
              "name": "FeeAmountUnderlying"
             },
             "right": {
              "type": "Identifier",
              "name": "feeUnderlying"
             }
            }
           },
           {
            "type": "ExpressionStatement",
            "expression": {
             "type": "BinaryOperation",
             "operator": "+=",
             "left": {
              "type": "Identifier",
              "name": "FeeAmountStable"
             },
             "right": {
              "type": "Identifier",
              "name": "feeStable"
             }
            }
           }
          ]
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "DataType"
            },
            "memberName": "FeeAmount"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "FeeAmountUnderlying"
            },
            {
             "type": "Identifier",
             "name": "FeeAmountStable"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "settleUserFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "assetStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.RebalanceFeeGrowthCache"
          },
          "valueName": null
         },
         "name": "rebalanceFeeGrowthCache",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceFeeGrowthCache"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.UserStatus"
         },
         "name": "userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "userStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.FeeAmount"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "totalFeeUnderlying",
            "identifier": {
             "type": "Identifier",
             "name": "totalFeeUnderlying"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "assetStatus"
              },
              "memberName": "basePool"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "settleUserFee"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userStatus"
             },
             "memberName": "basePosition"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "totalFeeStable",
            "identifier": {
             "type": "Identifier",
             "name": "totalFeeStable"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "assetStatus"
              },
              "memberName": "quotePool"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "settleUserFee"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userStatus"
             },
             "memberName": "stablePosition"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "rebalanceInterestBase",
            "identifier": {
             "type": "Identifier",
             "name": "rebalanceInterestBase"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "rebalanceInterestQuote",
            "identifier": {
             "type": "Identifier",
             "name": "rebalanceInterestQuote"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "settleRebalanceInterest"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "assetStatus"
             },
             "memberName": "id"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "assetStatus"
             },
             "memberName": "sqrtAssetStatus"
            },
            {
             "type": "Identifier",
             "name": "rebalanceFeeGrowthCache"
            },
            {
             "type": "Identifier",
             "name": "userStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "feeUnderlying",
            "identifier": {
             "type": "Identifier",
             "name": "feeUnderlying"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "feeStable",
            "identifier": {
             "type": "Identifier",
             "name": "feeStable"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "settlePremium"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "assetStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userStatus"
             },
             "memberName": "sqrtPerp"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "Identifier",
            "name": "totalFeeStable"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "Identifier",
             "name": "feeStable"
            },
            "right": {
             "type": "Identifier",
             "name": "rebalanceInterestQuote"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "Identifier",
            "name": "totalFeeUnderlying"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "Identifier",
             "name": "feeUnderlying"
            },
            "right": {
             "type": "Identifier",
             "name": "rebalanceInterestBase"
            }
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "DataType"
            },
            "memberName": "FeeAmount"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "totalFeeUnderlying"
            },
            {
             "type": "Identifier",
             "name": "totalFeeStable"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "computePremium",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "baseAssetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "baseAssetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.SqrtPositionStatus"
         },
         "name": "sqrtPerp",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPerp"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "feeUnderlying",
         "identifier": {
          "type": "Identifier",
          "name": "feeUnderlying"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "feeStable",
         "identifier": {
          "type": "Identifier",
          "name": "feeStable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "growthDiff0",
            "identifier": {
             "type": "Identifier",
             "name": "growthDiff0"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "growthDiff1",
            "identifier": {
             "type": "Identifier",
             "name": "growthDiff1"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "sqrtPerp"
            },
            "memberName": "amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "growthDiff0"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "baseAssetStatus"
                 },
                 "memberName": "sqrtAssetStatus"
                },
                "memberName": "fee0Growth"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "sqrtPerp"
                },
                "memberName": "entryTradeFee0"
               }
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "growthDiff1"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "baseAssetStatus"
                 },
                 "memberName": "sqrtAssetStatus"
                },
                "memberName": "fee1Growth"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "sqrtPerp"
                },
                "memberName": "entryTradeFee1"
               }
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "sqrtPerp"
             },
             "memberName": "amount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "Identifier",
                "name": "growthDiff0"
               },
               "right": {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "baseAssetStatus"
                  },
                  "memberName": "sqrtAssetStatus"
                 },
                 "memberName": "borrowPremium0Growth"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "sqrtPerp"
                 },
                 "memberName": "entryTradeFee0"
                }
               }
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "Identifier",
                "name": "growthDiff1"
               },
               "right": {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "baseAssetStatus"
                  },
                  "memberName": "sqrtAssetStatus"
                 },
                 "memberName": "borrowPremium1Growth"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "sqrtPerp"
                 },
                 "memberName": "entryTradeFee1"
                }
               }
              }
             }
            ]
           },
           "falseBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "Identifier",
                 "name": "feeUnderlying"
                },
                {
                 "type": "Identifier",
                 "name": "feeStable"
                }
               ],
               "isArray": false
              }
             }
            ]
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "fee0",
            "identifier": {
             "type": "Identifier",
             "name": "fee0"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Math"
            },
            "memberName": "fullMulDivDownInt256"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "sqrtPerp"
             },
             "memberName": "amount"
            },
            {
             "type": "Identifier",
             "name": "growthDiff0"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "Q128"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "fee1",
            "identifier": {
             "type": "Identifier",
             "name": "fee1"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Math"
            },
            "memberName": "fullMulDivDownInt256"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "sqrtPerp"
             },
             "memberName": "amount"
            },
            {
             "type": "Identifier",
             "name": "growthDiff1"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "Q128"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "baseAssetStatus"
           },
           "memberName": "isQuoteZero"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "feeStable"
              },
              "right": {
               "type": "Identifier",
               "name": "fee0"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "feeUnderlying"
              },
              "right": {
               "type": "Identifier",
               "name": "fee1"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "feeUnderlying"
              },
              "right": {
               "type": "Identifier",
               "name": "fee0"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "feeStable"
              },
              "right": {
               "type": "Identifier",
               "name": "fee1"
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "settlePremium",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "baseAssetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "baseAssetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.SqrtPositionStatus"
         },
         "name": "sqrtPerp",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPerp"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "feeUnderlying",
         "identifier": {
          "type": "Identifier",
          "name": "feeUnderlying"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "feeStable",
         "identifier": {
          "type": "Identifier",
          "name": "feeStable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "feeUnderlying"
             },
             {
              "type": "Identifier",
              "name": "feeStable"
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "computePremium"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "baseAssetStatus"
             },
             {
              "type": "Identifier",
              "name": "sqrtPerp"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "sqrtPerp"
            },
            "memberName": "amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sqrtPerp"
               },
               "memberName": "entryTradeFee0"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "baseAssetStatus"
                },
                "memberName": "sqrtAssetStatus"
               },
               "memberName": "fee0Growth"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sqrtPerp"
               },
               "memberName": "entryTradeFee1"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "baseAssetStatus"
                },
                "memberName": "sqrtAssetStatus"
               },
               "memberName": "fee1Growth"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "sqrtPerp"
             },
             "memberName": "amount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "sqrtPerp"
                },
                "memberName": "entryTradeFee0"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "baseAssetStatus"
                 },
                 "memberName": "sqrtAssetStatus"
                },
                "memberName": "borrowPremium0Growth"
               }
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "sqrtPerp"
                },
                "memberName": "entryTradeFee1"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "baseAssetStatus"
                 },
                 "memberName": "sqrtAssetStatus"
                },
                "memberName": "borrowPremium1Growth"
               }
              }
             }
            ]
           },
           "falseBody": null
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "computeRebalanceInterest",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.SqrtPerpAssetStatus"
         },
         "name": "assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "assetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.RebalanceFeeGrowthCache"
          },
          "valueName": null
         },
         "name": "rebalanceFeeGrowthCache",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceFeeGrowthCache"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.UserStatus"
         },
         "name": "userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "userStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "rebalanceInterestBase",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceInterestBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "rebalanceInterestQuote",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceInterestQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "!=",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "userStatus"
              },
              "memberName": "sqrtPerp"
             },
             "memberName": "amount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userStatus"
             },
             "memberName": "lastNumRebalance"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "assetStatus"
             },
             "memberName": "numRebalance"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "rebalanceId",
               "identifier": {
                "type": "Identifier",
                "name": "rebalanceId"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PairLib"
               },
               "memberName": "getRebalanceCacheId"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "pairId"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "userStatus"
                },
                "memberName": "lastNumRebalance"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "rebalanceAmount",
               "identifier": {
                "type": "Identifier",
                "name": "rebalanceAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Math"
               },
               "memberName": "abs"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "userStatus"
                 },
                 "memberName": "sqrtPerp"
                },
                "memberName": "amount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "rebalanceInterestBase"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Math"
                },
                "memberName": "mulDivDownInt256"
               },
               "arguments": [
                {
                 "type": "BinaryOperation",
                 "operator": "-",
                 "left": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "assetStatus"
                  },
                  "memberName": "rebalanceInterestGrowthBase"
                 },
                 "right": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "IndexAccess",
                   "base": {
                    "type": "Identifier",
                    "name": "rebalanceFeeGrowthCache"
                   },
                   "index": {
                    "type": "Identifier",
                    "name": "rebalanceId"
                   }
                  },
                  "memberName": "underlyingGrowth"
                 }
                },
                {
                 "type": "Identifier",
                 "name": "rebalanceAmount"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "Constants"
                 },
                 "memberName": "ONE"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "rebalanceInterestQuote"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Math"
                },
                "memberName": "mulDivDownInt256"
               },
               "arguments": [
                {
                 "type": "BinaryOperation",
                 "operator": "-",
                 "left": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "assetStatus"
                  },
                  "memberName": "rebalanceInterestGrowthQuote"
                 },
                 "right": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "IndexAccess",
                   "base": {
                    "type": "Identifier",
                    "name": "rebalanceFeeGrowthCache"
                   },
                   "index": {
                    "type": "Identifier",
                    "name": "rebalanceId"
                   }
                  },
                  "memberName": "stableGrowth"
                 }
                },
                {
                 "type": "Identifier",
                 "name": "rebalanceAmount"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "Constants"
                 },
                 "memberName": "ONE"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "settleRebalanceInterest",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.SqrtPerpAssetStatus"
         },
         "name": "assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "assetStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.RebalanceFeeGrowthCache"
          },
          "valueName": null
         },
         "name": "rebalanceFeeGrowthCache",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceFeeGrowthCache"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.UserStatus"
         },
         "name": "userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "userStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "rebalanceInterestBase",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceInterestBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "rebalanceInterestQuote",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceInterestQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "!=",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "userStatus"
              },
              "memberName": "sqrtPerp"
             },
             "memberName": "amount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "userStatus"
             },
             "memberName": "lastNumRebalance"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "assetStatus"
             },
             "memberName": "numRebalance"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "Identifier",
                 "name": "rebalanceInterestBase"
                },
                {
                 "type": "Identifier",
                 "name": "rebalanceInterestQuote"
                }
               ],
               "isArray": false
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "computeRebalanceInterest"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "pairId"
                },
                {
                 "type": "Identifier",
                 "name": "assetStatus"
                },
                {
                 "type": "Identifier",
                 "name": "rebalanceFeeGrowthCache"
                },
                {
                 "type": "Identifier",
                 "name": "userStatus"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "rebalanceAmount",
               "identifier": {
                "type": "Identifier",
                "name": "rebalanceAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Math"
               },
               "memberName": "abs"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "userStatus"
                 },
                 "memberName": "sqrtPerp"
                },
                "memberName": "amount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "-=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "assetStatus"
               },
               "memberName": "lastRebalanceTotalSquartAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "rebalanceAmount"
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "userStatus"
            },
            "memberName": "lastNumRebalance"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "assetStatus"
            },
            "memberName": "numRebalance"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/Perp.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
      "parts": [
       "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-periphery/contracts/libraries/PositionKey.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-periphery/contracts/libraries/PositionKey.sol",
      "parts": [
       "@uniswap/v3-periphery/contracts/libraries/PositionKey.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/libraries/FixedPoint96.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/libraries/FixedPoint96.sol",
      "parts": [
       "@uniswap/v3-core/contracts/libraries/FixedPoint96.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/libraries/TickMath.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/libraries/TickMath.sol",
      "parts": [
       "@uniswap/v3-core/contracts/libraries/TickMath.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeCastLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeCastLib.sol",
      "parts": [
       "@solmate/src/utils/SafeCastLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./ScaledAsset.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./ScaledAsset.sol",
      "parts": [
       "./ScaledAsset.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./InterestRateModel.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./InterestRateModel.sol",
      "parts": [
       "./InterestRateModel.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./PremiumCurveModel.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./PremiumCurveModel.sol",
      "parts": [
       "./PremiumCurveModel.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Constants.sol",
      "parts": [
       "./Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./DataType.sol",
      "parts": [
       "./DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./UniHelper.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./UniHelper.sol",
      "parts": [
       "./UniHelper.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./math/LPMath.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./math/LPMath.sol",
      "parts": [
       "./math/LPMath.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./math/Math.sol",
      "parts": [
       "./math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./Reallocation.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Reallocation.sol",
      "parts": [
       "./Reallocation.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "Perp",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ScaledAsset.AssetStatus"
       },
       "libraryName": "ScaledAsset",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "SafeCastLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "libraryName": "Math",
       "functions": [],
       "operators": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "SqrtAssetCanNotCoverBorrow",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "NoCFMMLiquidityError",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "OutOfRangeError",
       "parameters": []
      },
      {
       "type": "StructDefinition",
       "name": "AssetPoolStatus",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "token",
         "identifier": {
          "type": "Identifier",
          "name": "token"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "supplyTokenAddress",
         "identifier": {
          "type": "Identifier",
          "name": "supplyTokenAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.AssetStatus"
         },
         "name": "tokenStatus",
         "identifier": {
          "type": "Identifier",
          "name": "tokenStatus"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "irmParams",
         "identifier": {
          "type": "Identifier",
          "name": "irmParams"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "accumulatedProtocolRevenue",
         "identifier": {
          "type": "Identifier",
          "name": "accumulatedProtocolRevenue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "accumulatedCreatorRevenue",
         "identifier": {
          "type": "Identifier",
          "name": "accumulatedCreatorRevenue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "AssetRiskParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint128",
          "stateMutability": null
         },
         "name": "riskRatio",
         "identifier": {
          "type": "Identifier",
          "name": "riskRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint128",
          "stateMutability": null
         },
         "name": "debtRiskRatio",
         "identifier": {
          "type": "Identifier",
          "name": "debtRiskRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "rangeSize",
         "identifier": {
          "type": "Identifier",
          "name": "rangeSize"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "rebalanceThreshold",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceThreshold"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "minSlippage",
         "identifier": {
          "type": "Identifier",
          "name": "minSlippage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "maxSlippage",
         "identifier": {
          "type": "Identifier",
          "name": "maxSlippage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "PositionStatus",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "entryValue",
         "identifier": {
          "type": "Identifier",
          "name": "entryValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "SqrtPositionStatus",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "entryValue",
         "identifier": {
          "type": "Identifier",
          "name": "entryValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteRebalanceEntryValue",
         "identifier": {
          "type": "Identifier",
          "name": "quoteRebalanceEntryValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseRebalanceEntryValue",
         "identifier": {
          "type": "Identifier",
          "name": "baseRebalanceEntryValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "entryTradeFee0",
         "identifier": {
          "type": "Identifier",
          "name": "entryTradeFee0"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "entryTradeFee1",
         "identifier": {
          "type": "Identifier",
          "name": "entryTradeFee1"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "UpdatePerpParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "stableAmount",
         "identifier": {
          "type": "Identifier",
          "name": "stableAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "UpdateSqrtPerpParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeSqrtAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeSqrtAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "stableAmount",
         "identifier": {
          "type": "Identifier",
          "name": "stableAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "SqrtPerpAssetStatus",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapPool",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickLower",
         "identifier": {
          "type": "Identifier",
          "name": "tickLower"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickUpper",
         "identifier": {
          "type": "Identifier",
          "name": "tickUpper"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "numRebalance",
         "identifier": {
          "type": "Identifier",
          "name": "numRebalance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "totalAmount",
         "identifier": {
          "type": "Identifier",
          "name": "totalAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "borrowedAmount",
         "identifier": {
          "type": "Identifier",
          "name": "borrowedAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lastRebalanceTotalSquartAmount",
         "identifier": {
          "type": "Identifier",
          "name": "lastRebalanceTotalSquartAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lastFee0Growth",
         "identifier": {
          "type": "Identifier",
          "name": "lastFee0Growth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lastFee1Growth",
         "identifier": {
          "type": "Identifier",
          "name": "lastFee1Growth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "borrowPremium0Growth",
         "identifier": {
          "type": "Identifier",
          "name": "borrowPremium0Growth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "borrowPremium1Growth",
         "identifier": {
          "type": "Identifier",
          "name": "borrowPremium1Growth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "fee0Growth",
         "identifier": {
          "type": "Identifier",
          "name": "fee0Growth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "fee1Growth",
         "identifier": {
          "type": "Identifier",
          "name": "fee1Growth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.UserStatus"
         },
         "name": "rebalancePositionBase",
         "identifier": {
          "type": "Identifier",
          "name": "rebalancePositionBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.UserStatus"
         },
         "name": "rebalancePositionQuote",
         "identifier": {
          "type": "Identifier",
          "name": "rebalancePositionQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "rebalanceInterestGrowthBase",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceInterestGrowthBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "rebalanceInterestGrowthQuote",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceInterestGrowthQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "UserStatus",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "rebalanceLastTickLower",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceLastTickLower"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "rebalanceLastTickUpper",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceLastTickUpper"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "lastNumRebalance",
         "identifier": {
          "type": "Identifier",
          "name": "lastNumRebalance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PositionStatus"
         },
         "name": "perp",
         "identifier": {
          "type": "Identifier",
          "name": "perp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPositionStatus"
         },
         "name": "sqrtPerp",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPerp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.UserStatus"
         },
         "name": "basePosition",
         "identifier": {
          "type": "Identifier",
          "name": "basePosition"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.UserStatus"
         },
         "name": "stablePosition",
         "identifier": {
          "type": "Identifier",
          "name": "stablePosition"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "EventDefinition",
       "name": "PremiumGrowthUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "totalAmount",
         "identifier": {
          "type": "Identifier",
          "name": "totalAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "borrowAmount",
         "identifier": {
          "type": "Identifier",
          "name": "borrowAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "fee0Growth",
         "identifier": {
          "type": "Identifier",
          "name": "fee0Growth"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "fee1Growth",
         "identifier": {
          "type": "Identifier",
          "name": "fee1Growth"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "spread",
         "identifier": {
          "type": "Identifier",
          "name": "spread"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "SqrtPositionUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "open",
         "identifier": {
          "type": "Identifier",
          "name": "open"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "close",
         "identifier": {
          "type": "Identifier",
          "name": "close"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": "createAssetStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapPool",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickLower",
         "identifier": {
          "type": "Identifier",
          "name": "tickLower"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickUpper",
         "identifier": {
          "type": "Identifier",
          "name": "tickUpper"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "SqrtPerpAssetStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "uniswapPool"
            },
            {
             "type": "Identifier",
             "name": "tickLower"
            },
            {
             "type": "Identifier",
             "name": "tickUpper"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "ScaledAsset"
              },
              "memberName": "createUserStatus"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "ScaledAsset"
              },
              "memberName": "createUserStatus"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "createPerpUserStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "_pairId",
         "identifier": {
          "type": "Identifier",
          "name": "_pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserStatus"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "UserStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_pairId"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "PositionStatus"
             },
             "arguments": [
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "SqrtPositionStatus"
             },
             "arguments": [
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "ScaledAsset"
              },
              "memberName": "createUserStatus"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "ScaledAsset"
              },
              "memberName": "createUserStatus"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "updateRebalanceInterestGrowth",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_pairStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_sqrtAssetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_sqrtAssetStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_sqrtAssetStatus"
            },
            "memberName": "lastRebalanceTotalSquartAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               },
               "memberName": "rebalanceInterestGrowthBase"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "_pairStatus"
                    },
                    "memberName": "basePool"
                   },
                   "memberName": "tokenStatus"
                  },
                  "memberName": "settleUserFee"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "_sqrtAssetStatus"
                   },
                   "memberName": "rebalancePositionBase"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "1e18",
                 "subdenomination": null
                }
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "int256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "_sqrtAssetStatus"
                  },
                  "memberName": "lastRebalanceTotalSquartAmount"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               },
               "memberName": "rebalanceInterestGrowthQuote"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "_pairStatus"
                    },
                    "memberName": "quotePool"
                   },
                   "memberName": "tokenStatus"
                  },
                  "memberName": "settleUserFee"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "_sqrtAssetStatus"
                   },
                   "memberName": "rebalancePositionQuote"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "1e18",
                 "subdenomination": null
                }
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "int256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "_sqrtAssetStatus"
                  },
                  "memberName": "lastRebalanceTotalSquartAmount"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "reallocate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_assetStatusUnderlying",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatusUnderlying"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_sqrtAssetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_sqrtAssetStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "deltaPositionBase",
         "identifier": {
          "type": "Identifier",
          "name": "deltaPositionBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "deltaPositionQuote",
         "identifier": {
          "type": "Identifier",
          "name": "deltaPositionQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "currentSqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "currentSqrtPrice"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint160",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "currentTick",
            "identifier": {
             "type": "Identifier",
             "name": "currentTick"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int24",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           null,
           null,
           null,
           null,
           null
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "slot0"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_sqrtAssetStatus"
              },
              "memberName": "tickLower"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatusUnderlying"
               },
               "memberName": "riskParams"
              },
              "memberName": "rebalanceThreshold"
             }
            },
            "right": {
             "type": "Identifier",
             "name": "currentTick"
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "currentTick"
            },
            "right": {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_sqrtAssetStatus"
              },
              "memberName": "tickUpper"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatusUnderlying"
               },
               "memberName": "riskParams"
              },
              "memberName": "rebalanceThreshold"
             }
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "saveLastFeeGrowth"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BooleanLiteral",
                "value": false
               },
               {
                "type": "BooleanLiteral",
                "value": false
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint128",
             "stateMutability": null
            },
            "name": "totalLiquidityAmount",
            "identifier": {
             "type": "Identifier",
             "name": "totalLiquidityAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "getAvailableLiquidityAmount"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "uniswapPool"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickUpper"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "totalLiquidityAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_sqrtAssetStatus"
                 },
                 "memberName": "tickLower"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_sqrtAssetStatus"
                 },
                 "memberName": "tickUpper"
                }
               ],
               "isArray": false
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Reallocation"
                },
                "memberName": "getNewRange"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "_assetStatusUnderlying"
                },
                {
                 "type": "Identifier",
                 "name": "currentTick"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "saveLastFeeGrowth"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BooleanLiteral",
                "value": false
               },
               {
                "type": "BooleanLiteral",
                "value": true
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int24",
             "stateMutability": null
            },
            "name": "tick",
            "identifier": {
             "type": "Identifier",
             "name": "tick"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "isOutOfRange",
            "identifier": {
             "type": "Identifier",
             "name": "isOutOfRange"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "currentTick"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_sqrtAssetStatus"
            },
            "memberName": "tickLower"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "isOutOfRange"
              },
              "right": {
               "type": "BooleanLiteral",
               "value": true
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "tick"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               },
               "memberName": "tickLower"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "currentTick"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickUpper"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "Identifier",
                "name": "isOutOfRange"
               },
               "right": {
                "type": "BooleanLiteral",
                "value": false
               }
              }
             }
            ]
           },
           "falseBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "Identifier",
                "name": "isOutOfRange"
               },
               "right": {
                "type": "BooleanLiteral",
                "value": true
               }
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "Identifier",
                "name": "tick"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_sqrtAssetStatus"
                },
                "memberName": "tickUpper"
               }
              }
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "rebalanceForInRange"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_assetStatusUnderlying"
            },
            {
             "type": "Identifier",
             "name": "_sqrtAssetStatus"
            },
            {
             "type": "Identifier",
             "name": "currentTick"
            },
            {
             "type": "Identifier",
             "name": "totalLiquidityAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "saveLastFeeGrowth"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_sqrtAssetStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isOutOfRange"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "Identifier",
                 "name": "deltaPositionBase"
                },
                {
                 "type": "Identifier",
                 "name": "deltaPositionQuote"
                }
               ],
               "isArray": false
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "swapForOutOfRange"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "_assetStatusUnderlying"
                },
                {
                 "type": "Identifier",
                 "name": "currentSqrtPrice"
                },
                {
                 "type": "Identifier",
                 "name": "tick"
                },
                {
                 "type": "Identifier",
                 "name": "totalLiquidityAmount"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "BooleanLiteral",
             "value": true
            },
            {
             "type": "BooleanLiteral",
             "value": true
            },
            {
             "type": "Identifier",
             "name": "deltaPositionBase"
            },
            {
             "type": "Identifier",
             "name": "deltaPositionQuote"
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "rebalanceForInRange",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_assetStatusUnderlying",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatusUnderlying"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_sqrtAssetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_sqrtAssetStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "_currentTick",
         "identifier": {
          "type": "Identifier",
          "name": "_currentTick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint128",
          "stateMutability": null
         },
         "name": "_totalLiquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "_totalLiquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "receivedAmount0",
            "identifier": {
             "type": "Identifier",
             "name": "receivedAmount0"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "receivedAmount1",
            "identifier": {
             "type": "Identifier",
             "name": "receivedAmount1"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "burn"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickUpper"
            },
            {
             "type": "Identifier",
             "name": "_totalLiquidityAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "collect"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickUpper"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "type"
              },
              "arguments": [
               {
                "type": "ElementaryTypeName",
                "name": "uint128",
                "stateMutability": null
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "max"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "type"
              },
              "arguments": [
               {
                "type": "ElementaryTypeName",
                "name": "uint128",
                "stateMutability": null
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "max"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_sqrtAssetStatus"
              },
              "memberName": "tickLower"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_sqrtAssetStatus"
              },
              "memberName": "tickUpper"
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Reallocation"
             },
             "memberName": "getNewRange"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_assetStatusUnderlying"
             },
             {
              "type": "Identifier",
              "name": "_currentTick"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "requiredAmount0",
            "identifier": {
             "type": "Identifier",
             "name": "requiredAmount0"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "requiredAmount1",
            "identifier": {
             "type": "Identifier",
             "name": "requiredAmount1"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "mint"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickUpper"
            },
            {
             "type": "Identifier",
             "name": "_totalLiquidityAmount"
            },
            {
             "type": "StringLiteral",
             "value": "",
             "parts": [
              ""
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "updateRebalancePosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_assetStatusUnderlying"
            },
            {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "receivedAmount0"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "requiredAmount0"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "receivedAmount1"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "requiredAmount1"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "swapForOutOfRange",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "pairStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "_currentSqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "_currentSqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "_tick",
         "identifier": {
          "type": "Identifier",
          "name": "_tick"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint128",
          "stateMutability": null
         },
         "name": "_totalLiquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "_totalLiquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "deltaPositionBase",
         "identifier": {
          "type": "Identifier",
          "name": "deltaPositionBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "deltaPositionQuote",
         "identifier": {
          "type": "Identifier",
          "name": "deltaPositionQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint160",
             "stateMutability": null
            },
            "name": "tickSqrtPrice",
            "identifier": {
             "type": "Identifier",
             "name": "tickSqrtPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "TickMath"
            },
            "memberName": "getSqrtRatioAtTick"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_tick"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "deltaPosition0",
            "identifier": {
             "type": "Identifier",
             "name": "deltaPosition0"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "LPMath"
            },
            "memberName": "calculateAmount0ForLiquidity"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_currentSqrtPrice"
            },
            {
             "type": "Identifier",
             "name": "tickSqrtPrice"
            },
            {
             "type": "Identifier",
             "name": "_totalLiquidityAmount"
            },
            {
             "type": "BooleanLiteral",
             "value": true
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "deltaPosition1",
            "identifier": {
             "type": "Identifier",
             "name": "deltaPosition1"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "LPMath"
            },
            "memberName": "calculateAmount1ForLiquidity"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_currentSqrtPrice"
            },
            {
             "type": "Identifier",
             "name": "tickSqrtPrice"
            },
            {
             "type": "Identifier",
             "name": "_totalLiquidityAmount"
            },
            {
             "type": "BooleanLiteral",
             "value": true
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "pairStatus"
           },
           "memberName": "isQuoteZero"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "deltaPositionQuote"
              },
              "right": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "Identifier",
                "name": "deltaPosition0"
               },
               "isPrefix": true
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "deltaPositionBase"
              },
              "right": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "Identifier",
                "name": "deltaPosition1"
               },
               "isPrefix": true
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "deltaPositionBase"
              },
              "right": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "Identifier",
                "name": "deltaPosition0"
               },
               "isPrefix": true
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "deltaPositionQuote"
              },
              "right": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "Identifier",
                "name": "deltaPosition1"
               },
               "isPrefix": true
              }
             }
            }
           ]
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "updateRebalancePosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            },
            {
             "type": "Identifier",
             "name": "deltaPosition0"
            },
            {
             "type": "Identifier",
             "name": "deltaPosition1"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getAvailableLiquidityAmount",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_controllerAddress",
         "identifier": {
          "type": "Identifier",
          "name": "_controllerAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_uniswapPool",
         "identifier": {
          "type": "Identifier",
          "name": "_uniswapPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "_tickLower",
         "identifier": {
          "type": "Identifier",
          "name": "_tickLower"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "_tickUpper",
         "identifier": {
          "type": "Identifier",
          "name": "_tickUpper"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint128",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes32",
             "stateMutability": null
            },
            "name": "positionKey",
            "identifier": {
             "type": "Identifier",
             "name": "positionKey"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PositionKey"
            },
            "memberName": "compute"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_controllerAddress"
            },
            {
             "type": "Identifier",
             "name": "_tickLower"
            },
            {
             "type": "Identifier",
             "name": "_tickUpper"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "liquidity",
            "identifier": {
             "type": "Identifier",
             "name": "liquidity"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint128",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           null,
           null,
           null,
           null
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "_uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "positions"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionKey"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "liquidity"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "settleUserBalance",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_pairStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserStatus"
         },
         "name": "_userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_userStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "deltaPositionUnderlying",
            "identifier": {
             "type": "Identifier",
             "name": "deltaPositionUnderlying"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "deltaPositionStable",
            "identifier": {
             "type": "Identifier",
             "name": "deltaPositionStable"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "updateRebalanceEntry"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "sqrtAssetStatus"
            },
            {
             "type": "Identifier",
             "name": "_userStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "isQuoteZero"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "deltaPositionUnderlying"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "deltaPositionStable"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "sqrtPerp"
            },
            "memberName": "baseRebalanceEntryValue"
           },
           "right": {
            "type": "Identifier",
            "name": "deltaPositionUnderlying"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "sqrtPerp"
            },
            "memberName": "quoteRebalanceEntryValue"
           },
           "right": {
            "type": "Identifier",
            "name": "deltaPositionStable"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pairStatus"
              },
              "memberName": "basePool"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "updatePosition"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pairStatus"
              },
              "memberName": "sqrtAssetStatus"
             },
             "memberName": "rebalancePositionBase"
            },
            {
             "type": "UnaryOperation",
             "operator": "-",
             "subExpression": {
              "type": "Identifier",
              "name": "deltaPositionUnderlying"
             },
             "isPrefix": true
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "BooleanLiteral",
             "value": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pairStatus"
              },
              "memberName": "quotePool"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "updatePosition"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pairStatus"
              },
              "memberName": "sqrtAssetStatus"
             },
             "memberName": "rebalancePositionQuote"
            },
            {
             "type": "UnaryOperation",
             "operator": "-",
             "subExpression": {
              "type": "Identifier",
              "name": "deltaPositionStable"
             },
             "isPrefix": true
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "BooleanLiteral",
             "value": true
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pairStatus"
              },
              "memberName": "basePool"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "updatePosition"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "basePosition"
            },
            {
             "type": "Identifier",
             "name": "deltaPositionUnderlying"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "BooleanLiteral",
             "value": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pairStatus"
              },
              "memberName": "quotePool"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "updatePosition"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "stablePosition"
            },
            {
             "type": "Identifier",
             "name": "deltaPositionStable"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "BooleanLiteral",
             "value": true
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateFeeAndPremiumGrowth",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_pairId",
         "identifier": {
          "type": "Identifier",
          "name": "_pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "totalAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "feeGrowthInside0X128",
            "identifier": {
             "type": "Identifier",
             "name": "feeGrowthInside0X128"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "feeGrowthInside1X128",
            "identifier": {
             "type": "Identifier",
             "name": "feeGrowthInside1X128"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "UniHelper"
            },
            "memberName": "getFeeGrowthInside"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "uniswapPool"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickUpper"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "f0",
            "identifier": {
             "type": "Identifier",
             "name": "f0"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "f1",
            "identifier": {
             "type": "Identifier",
             "name": "f1"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "UncheckedStatement",
          "block": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "f0"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "Identifier",
                "name": "feeGrowthInside0X128"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatus"
                },
                "memberName": "lastFee0Growth"
               }
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "f1"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "Identifier",
                "name": "feeGrowthInside1X128"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatus"
                },
                "memberName": "lastFee1Growth"
               }
              }
             }
            }
           ]
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "f0"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "f1"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "utilization",
            "identifier": {
             "type": "Identifier",
             "name": "utilization"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "getUtilizationRatio"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_assetStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "spreadParam",
            "identifier": {
             "type": "Identifier",
             "name": "spreadParam"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PremiumCurveModel"
            },
            "memberName": "calculatePremiumCurve"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "utilization"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "fee0Growth"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FullMath"
             },
             "memberName": "mulDiv"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "f0"
             },
             {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "totalAmount"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_assetStatus"
                 },
                 "memberName": "borrowedAmount"
                },
                "right": {
                 "type": "Identifier",
                 "name": "spreadParam"
                }
               },
               "right": {
                "type": "NumberLiteral",
                "number": "1000",
                "subdenomination": null
               }
              }
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_assetStatus"
              },
              "memberName": "totalAmount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "fee1Growth"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FullMath"
             },
             "memberName": "mulDiv"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "f1"
             },
             {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "totalAmount"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_assetStatus"
                 },
                 "memberName": "borrowedAmount"
                },
                "right": {
                 "type": "Identifier",
                 "name": "spreadParam"
                }
               },
               "right": {
                "type": "NumberLiteral",
                "number": "1000",
                "subdenomination": null
               }
              }
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_assetStatus"
              },
              "memberName": "totalAmount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "borrowPremium0Growth"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FullMath"
             },
             "memberName": "mulDiv"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "f0"
             },
             {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "NumberLiteral",
               "number": "1000",
               "subdenomination": null
              },
              "right": {
               "type": "Identifier",
               "name": "spreadParam"
              }
             },
             {
              "type": "NumberLiteral",
              "number": "1000",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "borrowPremium1Growth"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FullMath"
             },
             "memberName": "mulDiv"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "f1"
             },
             {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "NumberLiteral",
               "number": "1000",
               "subdenomination": null
              },
              "right": {
               "type": "Identifier",
               "name": "spreadParam"
              }
             },
             {
              "type": "NumberLiteral",
              "number": "1000",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "lastFee0Growth"
           },
           "right": {
            "type": "Identifier",
            "name": "feeGrowthInside0X128"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "lastFee1Growth"
           },
           "right": {
            "type": "Identifier",
            "name": "feeGrowthInside1X128"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PremiumGrowthUpdated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "totalAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "borrowedAmount"
            },
            {
             "type": "Identifier",
             "name": "f0"
            },
            {
             "type": "Identifier",
             "name": "f1"
            },
            {
             "type": "Identifier",
             "name": "spreadParam"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "saveLastFeeGrowth",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "feeGrowthInside0X128",
            "identifier": {
             "type": "Identifier",
             "name": "feeGrowthInside0X128"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "feeGrowthInside1X128",
            "identifier": {
             "type": "Identifier",
             "name": "feeGrowthInside1X128"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "UniHelper"
            },
            "memberName": "getFeeGrowthInside"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "uniswapPool"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickUpper"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "lastFee0Growth"
           },
           "right": {
            "type": "Identifier",
            "name": "feeGrowthInside0X128"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "lastFee1Growth"
           },
           "right": {
            "type": "Identifier",
            "name": "feeGrowthInside1X128"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "computeRequiredAmounts",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_sqrtAssetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_sqrtAssetStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "_isQuoteZero",
         "identifier": {
          "type": "Identifier",
          "name": "_isQuoteZero"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserStatus"
         },
         "name": "_userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_userStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_tradeSqrtAmount",
         "identifier": {
          "type": "Identifier",
          "name": "_tradeSqrtAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "requiredAmountUnderlying",
         "identifier": {
          "type": "Identifier",
          "name": "requiredAmountUnderlying"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "requiredAmountStable",
         "identifier": {
          "type": "Identifier",
          "name": "requiredAmountStable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "_tradeSqrtAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Reallocation"
             },
             "memberName": "isInRange"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "OutOfRangeError"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "requiredAmount0",
            "identifier": {
             "type": "Identifier",
             "name": "requiredAmount0"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "requiredAmount1",
            "identifier": {
             "type": "Identifier",
             "name": "requiredAmount1"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "_tradeSqrtAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "Identifier",
                 "name": "requiredAmount0"
                },
                {
                 "type": "Identifier",
                 "name": "requiredAmount1"
                }
               ],
               "isArray": false
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "increase"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "_sqrtAssetStatus"
                },
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "_tradeSqrtAmount"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               },
               "memberName": "totalAmount"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_sqrtAssetStatus"
               },
               "memberName": "borrowedAmount"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "saveLastFeeGrowth"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "_sqrtAssetStatus"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "_tradeSqrtAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "Identifier",
                  "name": "requiredAmount0"
                 },
                 {
                  "type": "Identifier",
                  "name": "requiredAmount1"
                 }
                ],
                "isArray": false
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "decrease"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "_sqrtAssetStatus"
                 },
                 {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "ElementaryTypeName",
                   "name": "uint256",
                   "stateMutability": null
                  },
                  "arguments": [
                   {
                    "type": "UnaryOperation",
                    "operator": "-",
                    "subExpression": {
                     "type": "Identifier",
                     "name": "_tradeSqrtAmount"
                    },
                    "isPrefix": true
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "_isQuoteZero"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "requiredAmountStable"
              },
              "right": {
               "type": "Identifier",
               "name": "requiredAmount0"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "requiredAmountUnderlying"
              },
              "right": {
               "type": "Identifier",
               "name": "requiredAmount1"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "requiredAmountStable"
              },
              "right": {
               "type": "Identifier",
               "name": "requiredAmount1"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "requiredAmountUnderlying"
              },
              "right": {
               "type": "Identifier",
               "name": "requiredAmount0"
              }
             }
            }
           ]
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "offsetUnderlying",
            "identifier": {
             "type": "Identifier",
             "name": "offsetUnderlying"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "offsetStable",
            "identifier": {
             "type": "Identifier",
             "name": "offsetStable"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculateSqrtPerpOffset"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_userStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_sqrtAssetStatus"
             },
             "memberName": "tickUpper"
            },
            {
             "type": "Identifier",
             "name": "_tradeSqrtAmount"
            },
            {
             "type": "Identifier",
             "name": "_isQuoteZero"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "-=",
           "left": {
            "type": "Identifier",
            "name": "requiredAmountUnderlying"
           },
           "right": {
            "type": "Identifier",
            "name": "offsetUnderlying"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "-=",
           "left": {
            "type": "Identifier",
            "name": "requiredAmountStable"
           },
           "right": {
            "type": "Identifier",
            "name": "offsetStable"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updatePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_pairStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserStatus"
         },
         "name": "_userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_userStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UpdatePerpParams"
         },
         "name": "_updatePerpParams",
         "identifier": {
          "type": "Identifier",
          "name": "_updatePerpParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UpdateSqrtPerpParams"
         },
         "name": "_updateSqrtPerpParams",
         "identifier": {
          "type": "Identifier",
          "name": "_updateSqrtPerpParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.Payoff"
         },
         "name": "payoff",
         "identifier": {
          "type": "Identifier",
          "name": "payoff"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "payoff"
              },
              "memberName": "perpEntryUpdate"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "payoff"
              },
              "memberName": "perpPayoff"
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateEntry"
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "perp"
              },
              "memberName": "amount"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "perp"
              },
              "memberName": "entryValue"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_updatePerpParams"
              },
              "memberName": "tradeAmount"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_updatePerpParams"
              },
              "memberName": "stableAmount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "payoff"
              },
              "memberName": "sqrtRebalanceEntryUpdateUnderlying"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "payoff"
              },
              "memberName": "sqrtRebalanceEntryUpdateStable"
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateSqrtPerpOffset"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_userStatus"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_pairStatus"
               },
               "memberName": "sqrtAssetStatus"
              },
              "memberName": "tickLower"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_pairStatus"
               },
               "memberName": "sqrtAssetStatus"
              },
              "memberName": "tickUpper"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_updateSqrtPerpParams"
              },
              "memberName": "tradeSqrtAmount"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pairStatus"
              },
              "memberName": "isQuoteZero"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "payoff"
              },
              "memberName": "sqrtEntryUpdate"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "payoff"
              },
              "memberName": "sqrtPayoff"
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateEntry"
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "sqrtPerp"
              },
              "memberName": "amount"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "sqrtPerp"
              },
              "memberName": "entryValue"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_updateSqrtPerpParams"
              },
              "memberName": "tradeSqrtAmount"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_updateSqrtPerpParams"
              },
              "memberName": "stableAmount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "perp"
            },
            "memberName": "amount"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_updatePerpParams"
            },
            "memberName": "tradeAmount"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "perp"
            },
            "memberName": "entryValue"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "payoff"
            },
            "memberName": "perpEntryUpdate"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "sqrtPerp"
            },
            "memberName": "entryValue"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "payoff"
            },
            "memberName": "sqrtEntryUpdate"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "sqrtPerp"
            },
            "memberName": "quoteRebalanceEntryValue"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "payoff"
            },
            "memberName": "sqrtRebalanceEntryUpdateStable"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "sqrtPerp"
            },
            "memberName": "baseRebalanceEntryValue"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "payoff"
            },
            "memberName": "sqrtRebalanceEntryUpdateUnderlying"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "updateSqrtPosition"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "sqrtAssetStatus"
            },
            {
             "type": "Identifier",
             "name": "_userStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_updateSqrtPerpParams"
             },
             "memberName": "tradeSqrtAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pairStatus"
              },
              "memberName": "basePool"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "updatePosition"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "basePosition"
            },
            {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_updatePerpParams"
              },
              "memberName": "tradeAmount"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "payoff"
              },
              "memberName": "sqrtRebalanceEntryUpdateUnderlying"
             }
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "BooleanLiteral",
             "value": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pairStatus"
              },
              "memberName": "quotePool"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "updatePosition"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "stablePosition"
            },
            {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "payoff"
               },
               "memberName": "perpEntryUpdate"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "payoff"
               },
               "memberName": "sqrtEntryUpdate"
              }
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "payoff"
              },
              "memberName": "sqrtRebalanceEntryUpdateStable"
             }
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "BooleanLiteral",
             "value": true
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateSqrtPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_pairId",
         "identifier": {
          "type": "Identifier",
          "name": "_pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserStatus"
         },
         "name": "_userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_userStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_amount",
         "identifier": {
          "type": "Identifier",
          "name": "_amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "openAmount",
            "identifier": {
             "type": "Identifier",
             "name": "openAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "closeAmount",
            "identifier": {
             "type": "Identifier",
             "name": "closeAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">=",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_userStatus"
              },
              "memberName": "sqrtPerp"
             },
             "memberName": "amount"
            },
            "right": {
             "type": "Identifier",
             "name": "_amount"
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "openAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "_amount"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">=",
              "left": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "_userStatus"
                  },
                  "memberName": "sqrtPerp"
                 },
                 "memberName": "amount"
                },
                "memberName": "abs"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_amount"
                },
                "memberName": "abs"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "closeAmount"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "_amount"
                 }
                }
               }
              ]
             },
             "falseBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "openAmount"
                 },
                 "right": {
                  "type": "BinaryOperation",
                  "operator": "+",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "_userStatus"
                    },
                    "memberName": "sqrtPerp"
                   },
                   "memberName": "amount"
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "_amount"
                  }
                 }
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "closeAmount"
                 },
                 "right": {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "_userStatus"
                    },
                    "memberName": "sqrtPerp"
                   },
                   "memberName": "amount"
                  },
                  "isPrefix": true
                 }
                }
               }
              ]
             }
            }
           ]
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "totalAmount"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "borrowedAmount"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "saveLastFeeGrowth"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "_assetStatus"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "closeAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "-=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "borrowedAmount"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "closeAmount"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "closeAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "getAvailableSqrtAmount"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "_assetStatus"
                 },
                 {
                  "type": "BooleanLiteral",
                  "value": true
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "Identifier",
                   "name": "closeAmount"
                  },
                  "isPrefix": true
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "RevertStatement",
                 "revertCall": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "SqrtAssetCanNotCoverBorrow"
                  },
                  "arguments": [],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "-=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatus"
                },
                "memberName": "totalAmount"
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "Identifier",
                   "name": "closeAmount"
                  },
                  "isPrefix": true
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "openAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "totalAmount"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "openAmount"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_userStatus"
                },
                "memberName": "sqrtPerp"
               },
               "memberName": "entryTradeFee0"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "fee0Growth"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_userStatus"
                },
                "memberName": "sqrtPerp"
               },
               "memberName": "entryTradeFee1"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "fee1Growth"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "openAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "getAvailableSqrtAmount"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "_assetStatus"
                 },
                 {
                  "type": "BooleanLiteral",
                  "value": false
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "Identifier",
                   "name": "openAmount"
                  },
                  "isPrefix": true
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "RevertStatement",
                 "revertCall": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "SqrtAssetCanNotCoverBorrow"
                  },
                  "arguments": [],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "+=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatus"
                },
                "memberName": "borrowedAmount"
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "Identifier",
                   "name": "openAmount"
                  },
                  "isPrefix": true
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_userStatus"
                 },
                 "memberName": "sqrtPerp"
                },
                "memberName": "entryTradeFee0"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatus"
                },
                "memberName": "borrowPremium0Growth"
               }
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_userStatus"
                 },
                 "memberName": "sqrtPerp"
                },
                "memberName": "entryTradeFee1"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_assetStatus"
                },
                "memberName": "borrowPremium1Growth"
               }
              }
             }
            ]
           },
           "falseBody": null
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "sqrtPerp"
            },
            "memberName": "amount"
           },
           "right": {
            "type": "Identifier",
            "name": "_amount"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "SqrtPositionUpdated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_pairId"
            },
            {
             "type": "Identifier",
             "name": "openAmount"
            },
            {
             "type": "Identifier",
             "name": "closeAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getAvailableSqrtAmount",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "_isWithdraw",
         "identifier": {
          "type": "Identifier",
          "name": "_isWithdraw"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "buffer",
            "identifier": {
             "type": "Identifier",
             "name": "buffer"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Math"
            },
            "memberName": "max"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "/",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_assetStatus"
              },
              "memberName": "totalAmount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "50",
              "subdenomination": null
             }
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "MIN_LIQUIDITY"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "available",
            "identifier": {
             "type": "Identifier",
             "name": "available"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "totalAmount"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "borrowedAmount"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "Identifier",
            "name": "_isWithdraw"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "borrowedAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "Identifier",
              "name": "available"
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">=",
           "left": {
            "type": "Identifier",
            "name": "available"
           },
           "right": {
            "type": "Identifier",
            "name": "buffer"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "-",
              "left": {
               "type": "Identifier",
               "name": "available"
              },
              "right": {
               "type": "Identifier",
               "name": "buffer"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getUtilizationRatio",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "totalAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "utilization",
            "identifier": {
             "type": "Identifier",
             "name": "utilization"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "borrowedAmount"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "ONE"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "totalAmount"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "utilization"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1e18",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "1e18",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "utilization"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "updateRebalanceEntry",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserStatus"
         },
         "name": "_userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_userStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "_isQuoteZero",
         "identifier": {
          "type": "Identifier",
          "name": "_isQuoteZero"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "rebalancePositionUpdateUnderlying",
         "identifier": {
          "type": "Identifier",
          "name": "rebalancePositionUpdateUnderlying"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "rebalancePositionUpdateStable",
         "identifier": {
          "type": "Identifier",
          "name": "rebalancePositionUpdateStable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "sqrtPerp"
            },
            "memberName": "amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "rebalanceLastTickLower"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "tickLower"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "rebalanceLastTickUpper"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "tickUpper"
              }
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "lastRebalanceTotalSquartAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "rebalanceLastTickLower"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "tickLower"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "rebalanceLastTickUpper"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "tickUpper"
              }
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_assetStatus"
                 },
                 "memberName": "rebalancePositionBase"
                },
                "memberName": "positionAmount"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_assetStatus"
                 },
                 "memberName": "rebalancePositionQuote"
                },
                "memberName": "positionAmount"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "deltaPosition0",
            "identifier": {
             "type": "Identifier",
             "name": "deltaPosition0"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "LPMath"
            },
            "memberName": "calculateAmount0ForLiquidityWithTicks"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickUpper"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "rebalanceLastTickUpper"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_userStatus"
                },
                "memberName": "sqrtPerp"
               },
               "memberName": "amount"
              },
              "memberName": "abs"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "BinaryOperation",
             "operator": "<",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "sqrtPerp"
              },
              "memberName": "amount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "deltaPosition1",
            "identifier": {
             "type": "Identifier",
             "name": "deltaPosition1"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "LPMath"
            },
            "memberName": "calculateAmount1ForLiquidityWithTicks"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "rebalanceLastTickLower"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_userStatus"
                },
                "memberName": "sqrtPerp"
               },
               "memberName": "amount"
              },
              "memberName": "abs"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "BinaryOperation",
             "operator": "<",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_userStatus"
               },
               "memberName": "sqrtPerp"
              },
              "memberName": "amount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_userStatus"
            },
            "memberName": "rebalanceLastTickLower"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "tickLower"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_userStatus"
            },
            "memberName": "rebalanceLastTickUpper"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_assetStatus"
            },
            "memberName": "tickUpper"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_userStatus"
             },
             "memberName": "sqrtPerp"
            },
            "memberName": "amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "deltaPosition0"
              },
              "right": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "Identifier",
                "name": "deltaPosition0"
               },
               "isPrefix": true
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "deltaPosition1"
              },
              "right": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "Identifier",
                "name": "deltaPosition1"
               },
               "isPrefix": true
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "_isQuoteZero"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "rebalancePositionUpdateUnderlying"
              },
              "right": {
               "type": "Identifier",
               "name": "deltaPosition1"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "rebalancePositionUpdateStable"
              },
              "right": {
               "type": "Identifier",
               "name": "deltaPosition0"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "rebalancePositionUpdateUnderlying"
              },
              "right": {
               "type": "Identifier",
               "name": "deltaPosition0"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "rebalancePositionUpdateStable"
              },
              "right": {
               "type": "Identifier",
               "name": "deltaPosition1"
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateEntry",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_positionAmount",
         "identifier": {
          "type": "Identifier",
          "name": "_positionAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_entryValue",
         "identifier": {
          "type": "Identifier",
          "name": "_entryValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "_tradeAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_valueUpdate",
         "identifier": {
          "type": "Identifier",
          "name": "_valueUpdate"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "deltaEntry",
         "identifier": {
          "type": "Identifier",
          "name": "deltaEntry"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "payoff",
         "identifier": {
          "type": "Identifier",
          "name": "payoff"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "_tradeAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">=",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "_positionAmount"
            },
            "right": {
             "type": "Identifier",
             "name": "_tradeAmount"
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "deltaEntry"
              },
              "right": {
               "type": "Identifier",
               "name": "_valueUpdate"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">=",
              "left": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_positionAmount"
                },
                "memberName": "abs"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_tradeAmount"
                },
                "memberName": "abs"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 {
                  "type": "VariableDeclaration",
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "int256",
                   "stateMutability": null
                  },
                  "name": "closeStableAmount",
                  "identifier": {
                   "type": "Identifier",
                   "name": "closeStableAmount"
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "BinaryOperation",
                 "operator": "/",
                 "left": {
                  "type": "BinaryOperation",
                  "operator": "*",
                  "left": {
                   "type": "Identifier",
                   "name": "_entryValue"
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "_tradeAmount"
                  }
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "_positionAmount"
                 }
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "deltaEntry"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "closeStableAmount"
                 }
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "payoff"
                 },
                 "right": {
                  "type": "BinaryOperation",
                  "operator": "-",
                  "left": {
                   "type": "Identifier",
                   "name": "_valueUpdate"
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "closeStableAmount"
                  }
                 }
                }
               }
              ]
             },
             "falseBody": {
              "type": "Block",
              "statements": [
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 {
                  "type": "VariableDeclaration",
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "int256",
                   "stateMutability": null
                  },
                  "name": "closeStableAmount",
                  "identifier": {
                   "type": "Identifier",
                   "name": "closeStableAmount"
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "UnaryOperation",
                 "operator": "-",
                 "subExpression": {
                  "type": "Identifier",
                  "name": "_entryValue"
                 },
                 "isPrefix": true
                }
               },
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 {
                  "type": "VariableDeclaration",
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "int256",
                   "stateMutability": null
                  },
                  "name": "openStableAmount",
                  "identifier": {
                   "type": "Identifier",
                   "name": "openStableAmount"
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "BinaryOperation",
                 "operator": "/",
                 "left": {
                  "type": "BinaryOperation",
                  "operator": "*",
                  "left": {
                   "type": "Identifier",
                   "name": "_valueUpdate"
                  },
                  "right": {
                   "type": "TupleExpression",
                   "components": [
                    {
                     "type": "BinaryOperation",
                     "operator": "+",
                     "left": {
                      "type": "Identifier",
                      "name": "_positionAmount"
                     },
                     "right": {
                      "type": "Identifier",
                      "name": "_tradeAmount"
                     }
                    }
                   ],
                   "isArray": false
                  }
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "_tradeAmount"
                 }
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "deltaEntry"
                 },
                 "right": {
                  "type": "BinaryOperation",
                  "operator": "+",
                  "left": {
                   "type": "Identifier",
                   "name": "closeStableAmount"
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "openStableAmount"
                  }
                 }
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "payoff"
                 },
                 "right": {
                  "type": "BinaryOperation",
                  "operator": "-",
                  "left": {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "Identifier",
                    "name": "_valueUpdate"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "closeStableAmount"
                   }
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "openStableAmount"
                  }
                 }
                }
               }
              ]
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "increase",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "_liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "requiredAmount0",
         "identifier": {
          "type": "Identifier",
          "name": "requiredAmount0"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "requiredAmount1",
         "identifier": {
          "type": "Identifier",
          "name": "requiredAmount1"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "amount0",
            "identifier": {
             "type": "Identifier",
             "name": "amount0"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "amount1",
            "identifier": {
             "type": "Identifier",
             "name": "amount1"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "mint"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickUpper"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_liquidityAmount"
              },
              "memberName": "safeCastTo128"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "StringLiteral",
             "value": "",
             "parts": [
              ""
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "requiredAmount0"
           },
           "right": {
            "type": "UnaryOperation",
            "operator": "-",
            "subExpression": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "SafeCast"
              },
              "memberName": "toInt256"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "amount0"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "isPrefix": true
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "requiredAmount1"
           },
           "right": {
            "type": "UnaryOperation",
            "operator": "-",
            "subExpression": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "SafeCast"
              },
              "memberName": "toInt256"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "amount1"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "isPrefix": true
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "decrease",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "_assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_assetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "_liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "receivedAmount0",
         "identifier": {
          "type": "Identifier",
          "name": "receivedAmount0"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "receivedAmount1",
         "identifier": {
          "type": "Identifier",
          "name": "receivedAmount1"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "BinaryOperation",
            "operator": "-",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "totalAmount"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "borrowedAmount"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "_liquidityAmount"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "NoCFMMLiquidityError"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "amount0",
            "identifier": {
             "type": "Identifier",
             "name": "amount0"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "amount1",
            "identifier": {
             "type": "Identifier",
             "name": "amount1"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "burn"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickUpper"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_liquidityAmount"
              },
              "memberName": "safeCastTo128"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IUniswapV3Pool"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "collect"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickLower"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_assetStatus"
             },
             "memberName": "tickUpper"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "type"
              },
              "arguments": [
               {
                "type": "ElementaryTypeName",
                "name": "uint128",
                "stateMutability": null
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "max"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "type"
              },
              "arguments": [
               {
                "type": "ElementaryTypeName",
                "name": "uint128",
                "stateMutability": null
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "max"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "receivedAmount0"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "SafeCast"
             },
             "memberName": "toInt256"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "amount0"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "receivedAmount1"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "SafeCast"
             },
             "memberName": "toInt256"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "amount1"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateSqrtPerpOffset",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "UserStatus"
         },
         "name": "_userStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_userStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "_tickLower",
         "identifier": {
          "type": "Identifier",
          "name": "_tickLower"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "_tickUpper",
         "identifier": {
          "type": "Identifier",
          "name": "_tickUpper"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_tradeSqrtAmount",
         "identifier": {
          "type": "Identifier",
          "name": "_tradeSqrtAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "_isQuoteZero",
         "identifier": {
          "type": "Identifier",
          "name": "_isQuoteZero"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "offsetUnderlying",
         "identifier": {
          "type": "Identifier",
          "name": "offsetUnderlying"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "offsetStable",
         "identifier": {
          "type": "Identifier",
          "name": "offsetStable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "openAmount",
            "identifier": {
             "type": "Identifier",
             "name": "openAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "closeAmount",
            "identifier": {
             "type": "Identifier",
             "name": "closeAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">=",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_userStatus"
              },
              "memberName": "sqrtPerp"
             },
             "memberName": "amount"
            },
            "right": {
             "type": "Identifier",
             "name": "_tradeSqrtAmount"
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "openAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "_tradeSqrtAmount"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">=",
              "left": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "_userStatus"
                  },
                  "memberName": "sqrtPerp"
                 },
                 "memberName": "amount"
                },
                "memberName": "abs"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_tradeSqrtAmount"
                },
                "memberName": "abs"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "closeAmount"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "_tradeSqrtAmount"
                 }
                }
               }
              ]
             },
             "falseBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "openAmount"
                 },
                 "right": {
                  "type": "BinaryOperation",
                  "operator": "+",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "_userStatus"
                    },
                    "memberName": "sqrtPerp"
                   },
                   "memberName": "amount"
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "_tradeSqrtAmount"
                  }
                 }
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "closeAmount"
                 },
                 "right": {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "_userStatus"
                    },
                    "memberName": "sqrtPerp"
                   },
                   "memberName": "amount"
                  },
                  "isPrefix": true
                 }
                }
               }
              ]
             }
            }
           ]
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "Identifier",
            "name": "openAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "offsetUnderlying"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "LPMath"
                },
                "memberName": "calculateAmount0OffsetWithTick"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "_tickUpper"
                },
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "openAmount"
                  },
                  "memberName": "abs"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                },
                {
                 "type": "BinaryOperation",
                 "operator": "<",
                 "left": {
                  "type": "Identifier",
                  "name": "openAmount"
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "offsetStable"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "LPMath"
                },
                "memberName": "calculateAmount1OffsetWithTick"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "_tickLower"
                },
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "openAmount"
                  },
                  "memberName": "abs"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                },
                {
                 "type": "BinaryOperation",
                 "operator": "<",
                 "left": {
                  "type": "Identifier",
                  "name": "openAmount"
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "<",
              "left": {
               "type": "Identifier",
               "name": "openAmount"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "offsetUnderlying"
                 },
                 "right": {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "Identifier",
                   "name": "offsetUnderlying"
                  },
                  "isPrefix": true
                 }
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "offsetStable"
                 },
                 "right": {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "Identifier",
                   "name": "offsetStable"
                  },
                  "isPrefix": true
                 }
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "Identifier",
              "name": "_isQuoteZero"
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "TupleExpression",
                  "components": [
                   {
                    "type": "Identifier",
                    "name": "offsetUnderlying"
                   },
                   {
                    "type": "Identifier",
                    "name": "offsetStable"
                   }
                  ],
                  "isArray": false
                 },
                 "right": {
                  "type": "TupleExpression",
                  "components": [
                   {
                    "type": "Identifier",
                    "name": "offsetStable"
                   },
                   {
                    "type": "Identifier",
                    "name": "offsetUnderlying"
                   }
                  ],
                  "isArray": false
                 }
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "Identifier",
            "name": "closeAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "Identifier",
               "name": "offsetStable"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "Identifier",
                 "name": "closeAmount"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "_userStatus"
                  },
                  "memberName": "sqrtPerp"
                 },
                 "memberName": "quoteRebalanceEntryValue"
                }
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_userStatus"
                 },
                 "memberName": "sqrtPerp"
                },
                "memberName": "amount"
               }
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "Identifier",
               "name": "offsetUnderlying"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "Identifier",
                 "name": "closeAmount"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "_userStatus"
                  },
                  "memberName": "sqrtPerp"
                 },
                 "memberName": "baseRebalanceEntryValue"
                }
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_userStatus"
                 },
                 "memberName": "sqrtPerp"
                },
                "memberName": "amount"
               }
              }
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "updateRebalancePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_pairStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_updateAmount0",
         "identifier": {
          "type": "Identifier",
          "name": "_updateAmount0"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_updateAmount1",
         "identifier": {
          "type": "Identifier",
          "name": "_updateAmount1"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "SqrtPerpAssetStatus"
            },
            "name": "sqrtAsset",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtAsset"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "_pairStatus"
           },
           "memberName": "sqrtAssetStatus"
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "_pairStatus"
           },
           "memberName": "isQuoteZero"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_pairStatus"
                 },
                 "memberName": "quotePool"
                },
                "memberName": "tokenStatus"
               },
               "memberName": "updatePosition"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "sqrtAsset"
                },
                "memberName": "rebalancePositionQuote"
               },
               {
                "type": "Identifier",
                "name": "_updateAmount0"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_pairStatus"
                },
                "memberName": "id"
               },
               {
                "type": "BooleanLiteral",
                "value": true
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_pairStatus"
                 },
                 "memberName": "basePool"
                },
                "memberName": "tokenStatus"
               },
               "memberName": "updatePosition"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "sqrtAsset"
                },
                "memberName": "rebalancePositionBase"
               },
               {
                "type": "Identifier",
                "name": "_updateAmount1"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_pairStatus"
                },
                "memberName": "id"
               },
               {
                "type": "BooleanLiteral",
                "value": false
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_pairStatus"
                 },
                 "memberName": "basePool"
                },
                "memberName": "tokenStatus"
               },
               "memberName": "updatePosition"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "sqrtAsset"
                },
                "memberName": "rebalancePositionBase"
               },
               {
                "type": "Identifier",
                "name": "_updateAmount0"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_pairStatus"
                },
                "memberName": "id"
               },
               {
                "type": "BooleanLiteral",
                "value": false
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_pairStatus"
                 },
                 "memberName": "quotePool"
                },
                "memberName": "tokenStatus"
               },
               "memberName": "updatePosition"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "sqrtAsset"
                },
                "memberName": "rebalancePositionQuote"
               },
               {
                "type": "Identifier",
                "name": "_updateAmount1"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_pairStatus"
                },
                "memberName": "id"
               },
               {
                "type": "BooleanLiteral",
                "value": true
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "finalizeReallocation",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SqrtPerpAssetStatus"
         },
         "name": "sqrtPerpStatus",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPerpStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "sqrtPerpStatus"
            },
            "memberName": "lastRebalanceTotalSquartAmount"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "sqrtPerpStatus"
             },
             "memberName": "totalAmount"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "sqrtPerpStatus"
             },
             "memberName": "borrowedAmount"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "UnaryOperation",
           "operator": "++",
           "subExpression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "sqrtPerpStatus"
            },
            "memberName": "numRebalance"
           },
           "isPrefix": false
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/PairLib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ContractDefinition",
     "name": "PairLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "getRebalanceCacheId",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "rebalanceId",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "pairId"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "type"
              },
              "arguments": [
               {
                "type": "ElementaryTypeName",
                "name": "uint64",
                "stateMutability": null
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "max"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "rebalanceId"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/InterestRateModel.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ContractDefinition",
     "name": "InterestRateModel",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StructDefinition",
       "name": "IRMParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "baseRate",
         "identifier": {
          "type": "Identifier",
          "name": "baseRate"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "kinkRate",
         "identifier": {
          "type": "Identifier",
          "name": "kinkRate"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slope1",
         "identifier": {
          "type": "Identifier",
          "name": "slope1"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slope2",
         "identifier": {
          "type": "Identifier",
          "name": "slope2"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_ONE",
         "identifier": {
          "type": "Identifier",
          "name": "_ONE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "1e18",
          "subdenomination": null
         },
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "1e18",
        "subdenomination": null
       }
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateInterestRate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IRMParams"
         },
         "name": "irmParams",
         "identifier": {
          "type": "Identifier",
          "name": "irmParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "utilizationRatio",
         "identifier": {
          "type": "Identifier",
          "name": "utilizationRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "ir",
            "identifier": {
             "type": "Identifier",
             "name": "ir"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "irmParams"
           },
           "memberName": "baseRate"
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "Identifier",
            "name": "utilizationRatio"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "irmParams"
            },
            "memberName": "kinkRate"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "Identifier",
               "name": "ir"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "BinaryOperation",
                  "operator": "*",
                  "left": {
                   "type": "Identifier",
                   "name": "utilizationRatio"
                  },
                  "right": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "irmParams"
                   },
                   "memberName": "slope1"
                  }
                 }
                ],
                "isArray": false
               },
               "right": {
                "type": "Identifier",
                "name": "_ONE"
               }
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "Identifier",
               "name": "ir"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "BinaryOperation",
                  "operator": "*",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "irmParams"
                   },
                   "memberName": "kinkRate"
                  },
                  "right": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "irmParams"
                   },
                   "memberName": "slope1"
                  }
                 }
                ],
                "isArray": false
               },
               "right": {
                "type": "Identifier",
                "name": "_ONE"
               }
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "Identifier",
               "name": "ir"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "BinaryOperation",
                  "operator": "*",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "irmParams"
                   },
                   "memberName": "slope2"
                  },
                  "right": {
                   "type": "TupleExpression",
                   "components": [
                    {
                     "type": "BinaryOperation",
                     "operator": "-",
                     "left": {
                      "type": "Identifier",
                      "name": "utilizationRatio"
                     },
                     "right": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "irmParams"
                      },
                      "memberName": "kinkRate"
                     }
                    }
                   ],
                   "isArray": false
                  }
                 }
                ],
                "isArray": false
               },
               "right": {
                "type": "Identifier",
                "name": "_ONE"
               }
              }
             }
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "ir"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/DataType.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "./Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Perp.sol",
      "parts": [
       "./Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "DataType",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StructDefinition",
       "name": "PairStatus",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "id",
         "identifier": {
          "type": "Identifier",
          "name": "id"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "poolOwner",
         "identifier": {
          "type": "Identifier",
          "name": "poolOwner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetPoolStatus"
         },
         "name": "quotePool",
         "identifier": {
          "type": "Identifier",
          "name": "quotePool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetPoolStatus"
         },
         "name": "basePool",
         "identifier": {
          "type": "Identifier",
          "name": "basePool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetRiskParams"
         },
         "name": "riskParams",
         "identifier": {
          "type": "Identifier",
          "name": "riskParams"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.SqrtPerpAssetStatus"
         },
         "name": "sqrtAssetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtAssetStatus"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "priceFeed",
         "identifier": {
          "type": "Identifier",
          "name": "priceFeed"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteZero",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteZero"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "allowlistEnabled",
         "identifier": {
          "type": "Identifier",
          "name": "allowlistEnabled"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "feeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "feeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lastUpdateTimestamp",
         "identifier": {
          "type": "Identifier",
          "name": "lastUpdateTimestamp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "Vault",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "id",
         "identifier": {
          "type": "Identifier",
          "name": "id"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "owner",
         "identifier": {
          "type": "Identifier",
          "name": "owner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "recipient",
         "identifier": {
          "type": "Identifier",
          "name": "recipient"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "margin",
         "identifier": {
          "type": "Identifier",
          "name": "margin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.UserStatus"
         },
         "name": "openPosition",
         "identifier": {
          "type": "Identifier",
          "name": "openPosition"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "RebalanceFeeGrowthCache",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "stableGrowth",
         "identifier": {
          "type": "Identifier",
          "name": "stableGrowth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "underlyingGrowth",
         "identifier": {
          "type": "Identifier",
          "name": "underlyingGrowth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "FeeAmount",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "feeAmountBase",
         "identifier": {
          "type": "Identifier",
          "name": "feeAmountBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "feeAmountQuote",
         "identifier": {
          "type": "Identifier",
          "name": "feeAmountQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/Constants.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ContractDefinition",
     "name": "Constants",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "ONE",
         "identifier": {
          "type": "Identifier",
          "name": "ONE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "1e18",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "1e18",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "MAX_VAULTS",
         "identifier": {
          "type": "Identifier",
          "name": "MAX_VAULTS"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "18446744073709551616",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "18446744073709551616",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "MAX_PAIRS",
         "identifier": {
          "type": "Identifier",
          "name": "MAX_PAIRS"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "18446744073709551616",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "18446744073709551616",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "MIN_MARGIN_AMOUNT",
         "identifier": {
          "type": "Identifier",
          "name": "MIN_MARGIN_AMOUNT"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "1e6",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "1e6",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "MIN_LIQUIDITY",
         "identifier": {
          "type": "Identifier",
          "name": "MIN_LIQUIDITY"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "100",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "100",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "MIN_SQRT_PRICE",
         "identifier": {
          "type": "Identifier",
          "name": "MIN_SQRT_PRICE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "79228162514264337593",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "79228162514264337593",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "MAX_SQRT_PRICE",
         "identifier": {
          "type": "Identifier",
          "name": "MAX_SQRT_PRICE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "79228162514264337593543950336000000000",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "79228162514264337593543950336000000000",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "RESOLUTION",
         "identifier": {
          "type": "Identifier",
          "name": "RESOLUTION"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "96",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "96",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "Q96",
         "identifier": {
          "type": "Identifier",
          "name": "Q96"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "0x1000000000000000000000000",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "0x1000000000000000000000000",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "Q128",
         "identifier": {
          "type": "Identifier",
          "name": "Q128"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "0x100000000000000000000000000000000",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "0x100000000000000000000000000000000",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "BASE_MIN_COLLATERAL_WITH_DEBT",
         "identifier": {
          "type": "Identifier",
          "name": "BASE_MIN_COLLATERAL_WITH_DEBT"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "1000",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "1000",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "BASE_LIQ_SLIPPAGE_SQRT_TOLERANCE",
         "identifier": {
          "type": "Identifier",
          "name": "BASE_LIQ_SLIPPAGE_SQRT_TOLERANCE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "12422",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "12422",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "MAX_LIQ_SLIPPAGE_SQRT_TOLERANCE",
         "identifier": {
          "type": "Identifier",
          "name": "MAX_LIQ_SLIPPAGE_SQRT_TOLERANCE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "24710",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "24710",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "SLIPPAGE_SQRT_TOLERANCE",
         "identifier": {
          "type": "Identifier",
          "name": "SLIPPAGE_SQRT_TOLERANCE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "12422",
          "subdenomination": null
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "12422",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "SQUART_KINK_UR",
         "identifier": {
          "type": "Identifier",
          "name": "SQUART_KINK_UR"
         },
         "expression": {
          "type": "BinaryOperation",
          "operator": "*",
          "left": {
           "type": "NumberLiteral",
           "number": "10",
           "subdenomination": null
          },
          "right": {
           "type": "NumberLiteral",
           "number": "1e16",
           "subdenomination": null
          }
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "BinaryOperation",
        "operator": "*",
        "left": {
         "type": "NumberLiteral",
         "number": "10",
         "subdenomination": null
        },
        "right": {
         "type": "NumberLiteral",
         "number": "1e16",
         "subdenomination": null
        }
       }
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/ApplyInterestLib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "./Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./Perp.sol",
      "parts": [
       "./Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./ScaledAsset.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./ScaledAsset.sol",
      "parts": [
       "./ScaledAsset.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./DataType.sol",
      "parts": [
       "./DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "ApplyInterestLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ScaledAsset.AssetStatus"
       },
       "libraryName": "ScaledAsset",
       "functions": [],
       "operators": []
      },
      {
       "type": "EventDefinition",
       "name": "InterestGrowthUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.AssetStatus"
         },
         "name": "quoteStatus",
         "identifier": {
          "type": "Identifier",
          "name": "quoteStatus"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ScaledAsset.AssetStatus"
         },
         "name": "baseStatus",
         "identifier": {
          "type": "Identifier",
          "name": "baseStatus"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "interestRateQuote",
         "identifier": {
          "type": "Identifier",
          "name": "interestRateQuote"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "interestRateBase",
         "identifier": {
          "type": "Identifier",
          "name": "interestRateBase"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "protocolFeeQuote",
         "identifier": {
          "type": "Identifier",
          "name": "protocolFeeQuote"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "protocolFeeBase",
         "identifier": {
          "type": "Identifier",
          "name": "protocolFeeBase"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": "applyInterestForToken",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.PairStatus"
          },
          "valueName": null
         },
         "name": "pairs",
         "identifier": {
          "type": "Identifier",
          "name": "pairs"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pairStatus",
            "identifier": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "pairs"
           },
           "index": {
            "type": "Identifier",
            "name": "pairId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Perp"
            },
            "memberName": "updateFeeAndPremiumGrowth"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "sqrtAssetStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "memberName": "lastUpdateTimestamp"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "interestRateQuote",
            "identifier": {
             "type": "Identifier",
             "name": "interestRateQuote"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "protocolFeeQuote",
            "identifier": {
             "type": "Identifier",
             "name": "protocolFeeQuote"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "applyInterestForPoolStatus"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "quotePool"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "lastUpdateTimestamp"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "feeRatio"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "interestRateBase",
            "identifier": {
             "type": "Identifier",
             "name": "interestRateBase"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "protocolFeeBase",
            "identifier": {
             "type": "Identifier",
             "name": "protocolFeeBase"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "applyInterestForPoolStatus"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "basePool"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "lastUpdateTimestamp"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "feeRatio"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "memberName": "lastUpdateTimestamp"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "interestRateQuote"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "interestRateBase"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "emitInterestGrowthEvent"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "pairStatus"
               },
               {
                "type": "Identifier",
                "name": "interestRateQuote"
               },
               {
                "type": "Identifier",
                "name": "interestRateBase"
               },
               {
                "type": "Identifier",
                "name": "protocolFeeQuote"
               },
               {
                "type": "Identifier",
                "name": "protocolFeeBase"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "applyInterestForPoolStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetPoolStatus"
         },
         "name": "poolStatus",
         "identifier": {
          "type": "Identifier",
          "name": "poolStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lastUpdateTimestamp",
         "identifier": {
          "type": "Identifier",
          "name": "lastUpdateTimestamp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "interestRate",
         "identifier": {
          "type": "Identifier",
          "name": "interestRate"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "totalProtocolFee",
         "identifier": {
          "type": "Identifier",
          "name": "totalProtocolFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           },
           "right": {
            "type": "Identifier",
            "name": "lastUpdateTimestamp"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "utilizationRatio",
            "identifier": {
             "type": "Identifier",
             "name": "utilizationRatio"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "poolStatus"
             },
             "memberName": "tokenStatus"
            },
            "memberName": "getUtilizationRatio"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "utilizationRatio"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "interestRate"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "BinaryOperation",
             "operator": "*",
             "left": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "InterestRateModel"
               },
               "memberName": "calculateInterestRate"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "poolStatus"
                },
                "memberName": "irmParams"
               },
               {
                "type": "Identifier",
                "name": "utilizationRatio"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "right": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "block"
                 },
                 "memberName": "timestamp"
                },
                "right": {
                 "type": "Identifier",
                 "name": "lastUpdateTimestamp"
                }
               }
              ],
              "isArray": false
             }
            },
            "right": {
             "type": "NumberLiteral",
             "number": "365",
             "subdenomination": "days"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "totalProtocolFee"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "poolStatus"
              },
              "memberName": "tokenStatus"
             },
             "memberName": "updateScaler"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "interestRate"
             },
             {
              "type": "Identifier",
              "name": "fee"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "poolStatus"
            },
            "memberName": "accumulatedProtocolRevenue"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "Identifier",
             "name": "totalProtocolFee"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "2",
             "subdenomination": null
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "poolStatus"
            },
            "memberName": "accumulatedCreatorRevenue"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "Identifier",
             "name": "totalProtocolFee"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "2",
             "subdenomination": null
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "emitInterestGrowthEvent",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "assetStatus",
         "identifier": {
          "type": "Identifier",
          "name": "assetStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "interestRateQuote",
         "identifier": {
          "type": "Identifier",
          "name": "interestRateQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "interestRateBase",
         "identifier": {
          "type": "Identifier",
          "name": "interestRateBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "totalProtocolFeeQuote",
         "identifier": {
          "type": "Identifier",
          "name": "totalProtocolFeeQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "totalProtocolFeeBase",
         "identifier": {
          "type": "Identifier",
          "name": "totalProtocolFeeBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "InterestGrowthUpdated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "assetStatus"
             },
             "memberName": "id"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "assetStatus"
              },
              "memberName": "quotePool"
             },
             "memberName": "tokenStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "assetStatus"
              },
              "memberName": "basePool"
             },
             "memberName": "tokenStatus"
            },
            {
             "type": "Identifier",
             "name": "interestRateQuote"
            },
            {
             "type": "Identifier",
             "name": "interestRateBase"
            },
            {
             "type": "Identifier",
             "name": "totalProtocolFeeQuote"
            },
            {
             "type": "Identifier",
             "name": "totalProtocolFeeBase"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/orders/ResolvedOrder.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "./OrderInfoLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./OrderInfoLib.sol",
      "parts": [
       "./OrderInfoLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "OrderInfo",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "OrderInfo"
       },
       null
      ]
     ]
    },
    {
     "type": "StructDefinition",
     "name": "ResolvedOrder",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "OrderInfo"
       },
       "name": "info",
       "identifier": {
        "type": "Identifier",
        "name": "info"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "token",
       "identifier": {
        "type": "Identifier",
        "name": "token"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "amount",
       "identifier": {
        "type": "Identifier",
        "name": "amount"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes32",
        "stateMutability": null
       },
       "name": "hash",
       "identifier": {
        "type": "Identifier",
        "name": "hash"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes",
        "stateMutability": null
       },
       "name": "sig",
       "identifier": {
        "type": "Identifier",
        "name": "sig"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "ResolvedOrderLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "CustomErrorDefinition",
       "name": "InvalidMarket",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "DeadlinePassed",
       "parameters": []
      },
      {
       "type": "FunctionDefinition",
       "name": "validate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": "resolvedOrder",
         "identifier": {
          "type": "Identifier",
          "name": "resolvedOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "this"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "resolvedOrder"
               },
               "memberName": "info"
              },
              "memberName": "market"
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "InvalidMarket"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "resolvedOrder"
             },
             "memberName": "info"
            },
            "memberName": "deadline"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "DeadlinePassed"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/orders/Permit2Lib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/permit2/src/interfaces/ISignatureTransfer.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/permit2/src/interfaces/ISignatureTransfer.sol",
      "parts": [
       "@uniswap/permit2/src/interfaces/ISignatureTransfer.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISignatureTransfer",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISignatureTransfer"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./ResolvedOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./ResolvedOrder.sol",
      "parts": [
       "./ResolvedOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ResolvedOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ResolvedOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "Permit2Lib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "toPermit",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ISignatureTransfer.PermitTransferFrom"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ISignatureTransfer"
            },
            "memberName": "PermitTransferFrom"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "ISignatureTransfer"
              },
              "memberName": "TokenPermissions"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "token"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "amount"
              }
             ],
             "names": [
              "token",
              "amount"
             ],
             "identifiers": [
              {
               "type": "Identifier",
               "name": "token"
              },
              {
               "type": "Identifier",
               "name": "amount"
              }
             ]
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "info"
             },
             "memberName": "nonce"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "info"
             },
             "memberName": "deadline"
            }
           ],
           "names": [
            "permitted",
            "nonce",
            "deadline"
           ],
           "identifiers": [
            {
             "type": "Identifier",
             "name": "permitted"
            },
            {
             "type": "Identifier",
             "name": "nonce"
            },
            {
             "type": "Identifier",
             "name": "deadline"
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "transferDetails",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ResolvedOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "to",
         "identifier": {
          "type": "Identifier",
          "name": "to"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ISignatureTransfer.SignatureTransferDetails"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ISignatureTransfer"
            },
            "memberName": "SignatureTransferDetails"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "to"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "amount"
            }
           ],
           "names": [
            "to",
            "requestedAmount"
           ],
           "identifiers": [
            {
             "type": "Identifier",
             "name": "to"
            },
            {
             "type": "Identifier",
             "name": "requestedAmount"
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/orders/OrderInfoLib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "StructDefinition",
     "name": "OrderInfo",
     "members": [
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "market",
       "identifier": {
        "type": "Identifier",
        "name": "market"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "address",
        "stateMutability": null
       },
       "name": "trader",
       "identifier": {
        "type": "Identifier",
        "name": "trader"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "nonce",
       "identifier": {
        "type": "Identifier",
        "name": "nonce"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      },
      {
       "type": "VariableDeclaration",
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "name": "deadline",
       "identifier": {
        "type": "Identifier",
        "name": "deadline"
       },
       "storageLocation": null,
       "isStateVar": false,
       "isIndexed": false,
       "expression": null
      }
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "OrderInfoLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "ORDER_INFO_TYPE",
         "identifier": {
          "type": "Identifier",
          "name": "ORDER_INFO_TYPE"
         },
         "expression": {
          "type": "StringLiteral",
          "value": "OrderInfo(address market,address trader,uint256 nonce,uint256 deadline)",
          "parts": [
           "OrderInfo(address market,address trader,uint256 nonce,uint256 deadline)"
          ],
          "isUnicode": [
           false
          ]
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "StringLiteral",
        "value": "OrderInfo(address market,address trader,uint256 nonce,uint256 deadline)",
        "parts": [
         "OrderInfo(address market,address trader,uint256 nonce,uint256 deadline)"
        ],
        "isUnicode": [
         false
        ]
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "ORDER_INFO_TYPE_HASH",
         "identifier": {
          "type": "Identifier",
          "name": "ORDER_INFO_TYPE_HASH"
         },
         "expression": {
          "type": "FunctionCall",
          "expression": {
           "type": "Identifier",
           "name": "keccak256"
          },
          "arguments": [
           {
            "type": "Identifier",
            "name": "ORDER_INFO_TYPE"
           }
          ],
          "names": [],
          "identifiers": []
         },
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "FunctionCall",
        "expression": {
         "type": "Identifier",
         "name": "keccak256"
        },
        "arguments": [
         {
          "type": "Identifier",
          "name": "ORDER_INFO_TYPE"
         }
        ],
        "names": [],
        "identifiers": []
       }
      },
      {
       "type": "FunctionDefinition",
       "name": "hash",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "OrderInfo"
         },
         "name": "info",
         "identifier": {
          "type": "Identifier",
          "name": "info"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "keccak256"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encode"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "ORDER_INFO_TYPE_HASH"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "market"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "trader"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "nonce"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "info"
               },
               "memberName": "deadline"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/orders/DecayLib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ContractDefinition",
     "name": "DecayLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "CustomErrorDefinition",
       "name": "EndTimeBeforeStartTime",
       "parameters": []
      },
      {
       "type": "FunctionDefinition",
       "name": "decay",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "startPrice",
         "identifier": {
          "type": "Identifier",
          "name": "startPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "endPrice",
         "identifier": {
          "type": "Identifier",
          "name": "endPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decayStartTime",
         "identifier": {
          "type": "Identifier",
          "name": "decayStartTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decayEndTime",
         "identifier": {
          "type": "Identifier",
          "name": "decayEndTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decayedPrice",
         "identifier": {
          "type": "Identifier",
          "name": "decayedPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "decayedPrice"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "decay2"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "startPrice"
             },
             {
              "type": "Identifier",
              "name": "endPrice"
             },
             {
              "type": "Identifier",
              "name": "decayStartTime"
             },
             {
              "type": "Identifier",
              "name": "decayEndTime"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "block"
              },
              "memberName": "timestamp"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "decay2",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "startPrice",
         "identifier": {
          "type": "Identifier",
          "name": "startPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "endPrice",
         "identifier": {
          "type": "Identifier",
          "name": "endPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decayStartTime",
         "identifier": {
          "type": "Identifier",
          "name": "decayStartTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decayEndTime",
         "identifier": {
          "type": "Identifier",
          "name": "decayEndTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "value",
         "identifier": {
          "type": "Identifier",
          "name": "value"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decayedPrice",
         "identifier": {
          "type": "Identifier",
          "name": "decayedPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "decayEndTime"
           },
           "right": {
            "type": "Identifier",
            "name": "decayStartTime"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "EndTimeBeforeStartTime"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<=",
            "left": {
             "type": "Identifier",
             "name": "decayEndTime"
            },
            "right": {
             "type": "Identifier",
             "name": "value"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "Identifier",
                "name": "decayedPrice"
               },
               "right": {
                "type": "Identifier",
                "name": "endPrice"
               }
              }
             }
            ]
           },
           "falseBody": {
            "type": "IfStatement",
            "condition": {
             "type": "BinaryOperation",
             "operator": ">=",
             "left": {
              "type": "Identifier",
              "name": "decayStartTime"
             },
             "right": {
              "type": "Identifier",
              "name": "value"
             }
            },
            "trueBody": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "BinaryOperation",
                "operator": "=",
                "left": {
                 "type": "Identifier",
                 "name": "decayedPrice"
                },
                "right": {
                 "type": "Identifier",
                 "name": "startPrice"
                }
               }
              }
             ]
            },
            "falseBody": {
             "type": "Block",
             "statements": [
              {
               "type": "VariableDeclarationStatement",
               "variables": [
                {
                 "type": "VariableDeclaration",
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "name": "elapsed",
                 "identifier": {
                  "type": "Identifier",
                  "name": "elapsed"
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                }
               ],
               "initialValue": {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "Identifier",
                 "name": "value"
                },
                "right": {
                 "type": "Identifier",
                 "name": "decayStartTime"
                }
               }
              },
              {
               "type": "VariableDeclarationStatement",
               "variables": [
                {
                 "type": "VariableDeclaration",
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "name": "duration",
                 "identifier": {
                  "type": "Identifier",
                  "name": "duration"
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                }
               ],
               "initialValue": {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "Identifier",
                 "name": "decayEndTime"
                },
                "right": {
                 "type": "Identifier",
                 "name": "decayStartTime"
                }
               }
              },
              {
               "type": "IfStatement",
               "condition": {
                "type": "BinaryOperation",
                "operator": "<",
                "left": {
                 "type": "Identifier",
                 "name": "endPrice"
                },
                "right": {
                 "type": "Identifier",
                 "name": "startPrice"
                }
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "decayedPrice"
                   },
                   "right": {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "Identifier",
                     "name": "startPrice"
                    },
                    "right": {
                     "type": "BinaryOperation",
                     "operator": "/",
                     "left": {
                      "type": "BinaryOperation",
                      "operator": "*",
                      "left": {
                       "type": "TupleExpression",
                       "components": [
                        {
                         "type": "BinaryOperation",
                         "operator": "-",
                         "left": {
                          "type": "Identifier",
                          "name": "startPrice"
                         },
                         "right": {
                          "type": "Identifier",
                          "name": "endPrice"
                         }
                        }
                       ],
                       "isArray": false
                      },
                      "right": {
                       "type": "Identifier",
                       "name": "elapsed"
                      }
                     },
                     "right": {
                      "type": "Identifier",
                      "name": "duration"
                     }
                    }
                   }
                  }
                 }
                ]
               },
               "falseBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "decayedPrice"
                   },
                   "right": {
                    "type": "BinaryOperation",
                    "operator": "+",
                    "left": {
                     "type": "Identifier",
                     "name": "startPrice"
                    },
                    "right": {
                     "type": "BinaryOperation",
                     "operator": "/",
                     "left": {
                      "type": "BinaryOperation",
                      "operator": "*",
                      "left": {
                       "type": "TupleExpression",
                       "components": [
                        {
                         "type": "BinaryOperation",
                         "operator": "-",
                         "left": {
                          "type": "Identifier",
                          "name": "endPrice"
                         },
                         "right": {
                          "type": "Identifier",
                          "name": "startPrice"
                         }
                        }
                       ],
                       "isArray": false
                      },
                      "right": {
                       "type": "Identifier",
                       "name": "elapsed"
                      }
                     },
                     "right": {
                      "type": "Identifier",
                      "name": "duration"
                     }
                    }
                   }
                  }
                 }
                ]
               }
              }
             ]
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/math/Math.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/libraries/FullMath.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/libraries/FullMath.sol",
      "parts": [
       "@uniswap/v3-core/contracts/libraries/FullMath.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/FixedPointMathLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/FixedPointMathLib.sol",
      "parts": [
       "@solmate/src/utils/FixedPointMathLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "FixedPointMathLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "FixedPointMathLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeCast",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeCast"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Constants.sol",
      "parts": [
       "../Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "Math",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "SafeCast",
       "functions": [],
       "operators": []
      },
      {
       "type": "FunctionDefinition",
       "name": "abs",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "x",
         "identifier": {
          "type": "Identifier",
          "name": "x"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "uint256",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "Conditional",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">=",
              "left": {
               "type": "Identifier",
               "name": "x"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueExpression": {
              "type": "Identifier",
              "name": "x"
             },
             "falseExpression": {
              "type": "UnaryOperation",
              "operator": "-",
              "subExpression": {
               "type": "Identifier",
               "name": "x"
              },
              "isPrefix": true
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "max",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "a",
         "identifier": {
          "type": "Identifier",
          "name": "a"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "b",
         "identifier": {
          "type": "Identifier",
          "name": "b"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Conditional",
           "condition": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "a"
            },
            "right": {
             "type": "Identifier",
             "name": "b"
            }
           },
           "trueExpression": {
            "type": "Identifier",
            "name": "a"
           },
           "falseExpression": {
            "type": "Identifier",
            "name": "b"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "min",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "a",
         "identifier": {
          "type": "Identifier",
          "name": "a"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "b",
         "identifier": {
          "type": "Identifier",
          "name": "b"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Conditional",
           "condition": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "a"
            },
            "right": {
             "type": "Identifier",
             "name": "b"
            }
           },
           "trueExpression": {
            "type": "Identifier",
            "name": "b"
           },
           "falseExpression": {
            "type": "Identifier",
            "name": "a"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "fullMulDivInt256",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "x",
         "identifier": {
          "type": "Identifier",
          "name": "x"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "y",
         "identifier": {
          "type": "Identifier",
          "name": "y"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "z",
         "identifier": {
          "type": "Identifier",
          "name": "z"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "x"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "x"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "FullMath"
                  },
                  "memberName": "mulDiv"
                 },
                 "arguments": [
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "ElementaryTypeName",
                    "name": "uint256",
                    "stateMutability": null
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "x"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "Identifier",
                   "name": "y"
                  },
                  {
                   "type": "Identifier",
                   "name": "z"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "memberName": "toInt256"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             }
            ]
           },
           "falseBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "FullMath"
                   },
                   "memberName": "mulDiv"
                  },
                  "arguments": [
                   {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "ElementaryTypeName",
                     "name": "uint256",
                     "stateMutability": null
                    },
                    "arguments": [
                     {
                      "type": "UnaryOperation",
                      "operator": "-",
                      "subExpression": {
                       "type": "Identifier",
                       "name": "x"
                      },
                      "isPrefix": true
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   {
                    "type": "Identifier",
                    "name": "y"
                   },
                   {
                    "type": "Identifier",
                    "name": "z"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "memberName": "toInt256"
                },
                "arguments": [],
                "names": [],
                "identifiers": []
               },
               "isPrefix": true
              }
             }
            ]
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "fullMulDivDownInt256",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "x",
         "identifier": {
          "type": "Identifier",
          "name": "x"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "y",
         "identifier": {
          "type": "Identifier",
          "name": "y"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "z",
         "identifier": {
          "type": "Identifier",
          "name": "z"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "x"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "x"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "FullMath"
                  },
                  "memberName": "mulDiv"
                 },
                 "arguments": [
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "ElementaryTypeName",
                    "name": "uint256",
                    "stateMutability": null
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "x"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "Identifier",
                   "name": "y"
                  },
                  {
                   "type": "Identifier",
                   "name": "z"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "memberName": "toInt256"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             }
            ]
           },
           "falseBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "FullMath"
                   },
                   "memberName": "mulDivRoundingUp"
                  },
                  "arguments": [
                   {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "ElementaryTypeName",
                     "name": "uint256",
                     "stateMutability": null
                    },
                    "arguments": [
                     {
                      "type": "UnaryOperation",
                      "operator": "-",
                      "subExpression": {
                       "type": "Identifier",
                       "name": "x"
                      },
                      "isPrefix": true
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   {
                    "type": "Identifier",
                    "name": "y"
                   },
                   {
                    "type": "Identifier",
                    "name": "z"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "memberName": "toInt256"
                },
                "arguments": [],
                "names": [],
                "identifiers": []
               },
               "isPrefix": true
              }
             }
            ]
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "mulDivDownInt256",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "x",
         "identifier": {
          "type": "Identifier",
          "name": "x"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "y",
         "identifier": {
          "type": "Identifier",
          "name": "y"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "z",
         "identifier": {
          "type": "Identifier",
          "name": "z"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "x"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": ">",
            "left": {
             "type": "Identifier",
             "name": "x"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "FixedPointMathLib"
                  },
                  "memberName": "mulDivDown"
                 },
                 "arguments": [
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "ElementaryTypeName",
                    "name": "uint256",
                    "stateMutability": null
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "x"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "Identifier",
                   "name": "y"
                  },
                  {
                   "type": "Identifier",
                   "name": "z"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "memberName": "toInt256"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             }
            ]
           },
           "falseBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "FixedPointMathLib"
                   },
                   "memberName": "mulDivUp"
                  },
                  "arguments": [
                   {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "ElementaryTypeName",
                     "name": "uint256",
                     "stateMutability": null
                    },
                    "arguments": [
                     {
                      "type": "UnaryOperation",
                      "operator": "-",
                      "subExpression": {
                       "type": "Identifier",
                       "name": "x"
                      },
                      "isPrefix": true
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   {
                    "type": "Identifier",
                    "name": "y"
                   },
                   {
                    "type": "Identifier",
                    "name": "z"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "memberName": "toInt256"
                },
                "arguments": [],
                "names": [],
                "identifiers": []
               },
               "isPrefix": true
              }
             }
            ]
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "addDelta",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "a",
         "identifier": {
          "type": "Identifier",
          "name": "a"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "b",
         "identifier": {
          "type": "Identifier",
          "name": "b"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">=",
           "left": {
            "type": "Identifier",
            "name": "b"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "Identifier",
               "name": "a"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "b"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "-",
              "left": {
               "type": "Identifier",
               "name": "a"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "UnaryOperation",
                 "operator": "-",
                 "subExpression": {
                  "type": "Identifier",
                  "name": "b"
                 },
                 "isPrefix": true
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calSqrtPriceToPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "price"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FullMath"
             },
             "memberName": "mulDiv"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             },
             {
              "type": "Identifier",
              "name": "sqrtPrice"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "Q96"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/math/LPMath.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/libraries/FullMath.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/libraries/FullMath.sol",
      "parts": [
       "@uniswap/v3-core/contracts/libraries/FullMath.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/libraries/TickMath.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/libraries/TickMath.sol",
      "parts": [
       "@uniswap/v3-core/contracts/libraries/TickMath.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/libraries/FixedPoint96.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/libraries/FixedPoint96.sol",
      "parts": [
       "@uniswap/v3-core/contracts/libraries/FixedPoint96.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/SafeCast.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/SafeCast.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/SafeCast.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "LPMath",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "calculateAmount0ForLiquidityWithTicks",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickA",
         "identifier": {
          "type": "Identifier",
          "name": "tickA"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickB",
         "identifier": {
          "type": "Identifier",
          "name": "tickB"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isRoundUp",
         "identifier": {
          "type": "Identifier",
          "name": "isRoundUp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculateAmount0ForLiquidity"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "TickMath"
              },
              "memberName": "getSqrtRatioAtTick"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "tickA"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "TickMath"
              },
              "memberName": "getSqrtRatioAtTick"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "tickB"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "liquidityAmount"
            },
            {
             "type": "Identifier",
             "name": "isRoundUp"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateAmount1ForLiquidityWithTicks",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickA",
         "identifier": {
          "type": "Identifier",
          "name": "tickA"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickB",
         "identifier": {
          "type": "Identifier",
          "name": "tickB"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isRoundUp",
         "identifier": {
          "type": "Identifier",
          "name": "isRoundUp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculateAmount1ForLiquidity"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "TickMath"
              },
              "memberName": "getSqrtRatioAtTick"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "tickA"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "TickMath"
              },
              "memberName": "getSqrtRatioAtTick"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "tickB"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "liquidityAmount"
            },
            {
             "type": "Identifier",
             "name": "isRoundUp"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateAmount0ForLiquidity",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtRatioA",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtRatioA"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtRatioB",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtRatioB"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isRoundUp",
         "identifier": {
          "type": "Identifier",
          "name": "isRoundUp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "liquidityAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "sqrtRatioA"
            },
            "right": {
             "type": "Identifier",
             "name": "sqrtRatioB"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "swaped",
            "identifier": {
             "type": "Identifier",
             "name": "swaped"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "sqrtRatioA"
           },
           "right": {
            "type": "Identifier",
            "name": "sqrtRatioB"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "sqrtRatioA"
           },
           "right": {
            "type": "Identifier",
            "name": "sqrtRatioB"
           }
          },
          "trueBody": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "BinaryOperation",
            "operator": "=",
            "left": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "sqrtRatioA"
              },
              {
               "type": "Identifier",
               "name": "sqrtRatioB"
              }
             ],
             "isArray": false
            },
            "right": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "sqrtRatioB"
              },
              {
               "type": "Identifier",
               "name": "sqrtRatioA"
              }
             ],
             "isArray": false
            }
           }
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "r",
            "identifier": {
             "type": "Identifier",
             "name": "r"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "_isRoundUp",
            "identifier": {
             "type": "Identifier",
             "name": "_isRoundUp"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "Conditional",
           "condition": {
            "type": "Identifier",
            "name": "swaped"
           },
           "trueExpression": {
            "type": "UnaryOperation",
            "operator": "!",
            "subExpression": {
             "type": "Identifier",
             "name": "isRoundUp"
            },
            "isPrefix": true
           },
           "falseExpression": {
            "type": "Identifier",
            "name": "isRoundUp"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "numerator",
            "identifier": {
             "type": "Identifier",
             "name": "numerator"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "Identifier",
           "name": "liquidityAmount"
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "_isRoundUp"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "r0",
               "identifier": {
                "type": "Identifier",
                "name": "r0"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDivRoundingUp"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "numerator"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatioA"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "r1",
               "identifier": {
                "type": "Identifier",
                "name": "r1"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDiv"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "numerator"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatioB"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "r"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "SafeCast"
                 },
                 "memberName": "toInt256"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "r0"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "SafeCast"
                 },
                 "memberName": "toInt256"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "r1"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "r0",
               "identifier": {
                "type": "Identifier",
                "name": "r0"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDiv"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "numerator"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatioA"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "r1",
               "identifier": {
                "type": "Identifier",
                "name": "r1"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDivRoundingUp"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "numerator"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatioB"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "r"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "SafeCast"
                 },
                 "memberName": "toInt256"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "r0"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "SafeCast"
                 },
                 "memberName": "toInt256"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "r1"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            }
           ]
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "swaped"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "UnaryOperation",
              "operator": "-",
              "subExpression": {
               "type": "Identifier",
               "name": "r"
              },
              "isPrefix": true
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "Identifier",
              "name": "r"
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateAmount1ForLiquidity",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtRatioA",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtRatioA"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtRatioB",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtRatioB"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isRoundUp",
         "identifier": {
          "type": "Identifier",
          "name": "isRoundUp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "liquidityAmount"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "sqrtRatioA"
            },
            "right": {
             "type": "Identifier",
             "name": "sqrtRatioB"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "swaped",
            "identifier": {
             "type": "Identifier",
             "name": "swaped"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "sqrtRatioA"
           },
           "right": {
            "type": "Identifier",
            "name": "sqrtRatioB"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "sqrtRatioA"
           },
           "right": {
            "type": "Identifier",
            "name": "sqrtRatioB"
           }
          },
          "trueBody": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "BinaryOperation",
            "operator": "=",
            "left": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "sqrtRatioA"
              },
              {
               "type": "Identifier",
               "name": "sqrtRatioB"
              }
             ],
             "isArray": false
            },
            "right": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "sqrtRatioB"
              },
              {
               "type": "Identifier",
               "name": "sqrtRatioA"
              }
             ],
             "isArray": false
            }
           }
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "r",
            "identifier": {
             "type": "Identifier",
             "name": "r"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "_isRoundUp",
            "identifier": {
             "type": "Identifier",
             "name": "_isRoundUp"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "Conditional",
           "condition": {
            "type": "Identifier",
            "name": "swaped"
           },
           "trueExpression": {
            "type": "UnaryOperation",
            "operator": "!",
            "subExpression": {
             "type": "Identifier",
             "name": "isRoundUp"
            },
            "isPrefix": true
           },
           "falseExpression": {
            "type": "Identifier",
            "name": "isRoundUp"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "_isRoundUp"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "r0",
               "identifier": {
                "type": "Identifier",
                "name": "r0"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDivRoundingUp"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "liquidityAmount"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatioA"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "r1",
               "identifier": {
                "type": "Identifier",
                "name": "r1"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDiv"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "liquidityAmount"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatioB"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "r"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "SafeCast"
                 },
                 "memberName": "toInt256"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "r0"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "SafeCast"
                 },
                 "memberName": "toInt256"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "r1"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "r0",
               "identifier": {
                "type": "Identifier",
                "name": "r0"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDiv"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "liquidityAmount"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatioA"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "r1",
               "identifier": {
                "type": "Identifier",
                "name": "r1"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDivRoundingUp"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "liquidityAmount"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatioB"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "r"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "SafeCast"
                 },
                 "memberName": "toInt256"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "r0"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "SafeCast"
                 },
                 "memberName": "toInt256"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "r1"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            }
           ]
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "swaped"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "UnaryOperation",
              "operator": "-",
              "subExpression": {
               "type": "Identifier",
               "name": "r"
              },
              "isPrefix": true
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "Identifier",
              "name": "r"
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateAmount0OffsetWithTick",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "upper",
         "identifier": {
          "type": "Identifier",
          "name": "upper"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isRoundUp",
         "identifier": {
          "type": "Identifier",
          "name": "isRoundUp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SafeCast"
            },
            "memberName": "toInt256"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "calculateAmount0Offset"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "TickMath"
                },
                "memberName": "getSqrtRatioAtTick"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "upper"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "Identifier",
               "name": "liquidityAmount"
              },
              {
               "type": "Identifier",
               "name": "isRoundUp"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateAmount0Offset",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtRatio",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isRoundUp",
         "identifier": {
          "type": "Identifier",
          "name": "isRoundUp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isRoundUp"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDivRoundingUp"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "liquidityAmount"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatio"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDiv"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "liquidityAmount"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatio"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateAmount1OffsetWithTick",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "lower",
         "identifier": {
          "type": "Identifier",
          "name": "lower"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isRoundUp",
         "identifier": {
          "type": "Identifier",
          "name": "isRoundUp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SafeCast"
            },
            "memberName": "toInt256"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "calculateAmount1Offset"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "TickMath"
                },
                "memberName": "getSqrtRatioAtTick"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "lower"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "Identifier",
               "name": "liquidityAmount"
              },
              {
               "type": "Identifier",
               "name": "isRoundUp"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateAmount1Offset",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": "sqrtRatio",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidityAmount",
         "identifier": {
          "type": "Identifier",
          "name": "liquidityAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isRoundUp",
         "identifier": {
          "type": "Identifier",
          "name": "isRoundUp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isRoundUp"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDivRoundingUp"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "liquidityAmount"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatio"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "FullMath"
               },
               "memberName": "mulDiv"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "liquidityAmount"
               },
               {
                "type": "Identifier",
                "name": "sqrtRatio"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "FixedPoint96"
                },
                "memberName": "Q96"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/math/Bps.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ContractDefinition",
     "name": "Bps",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint32",
          "stateMutability": null
         },
         "name": "ONE",
         "identifier": {
          "type": "Identifier",
          "name": "ONE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "1e6",
          "subdenomination": null
         },
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "1e6",
        "subdenomination": null
       }
      },
      {
       "type": "FunctionDefinition",
       "name": "upper",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "bps",
         "identifier": {
          "type": "Identifier",
          "name": "bps"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "price"
            },
            "right": {
             "type": "Identifier",
             "name": "bps"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "ONE"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "lower",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "bps",
         "identifier": {
          "type": "Identifier",
          "name": "bps"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "price"
            },
            "right": {
             "type": "Identifier",
             "name": "ONE"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "bps"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/logic/TradeLogic.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IHooks.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IHooks.sol",
      "parts": [
       "../../interfaces/IHooks.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IHooks",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IHooks"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/ISettlement.sol",
      "parts": [
       "../../interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../ApplyInterestLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../ApplyInterestLib.sol",
      "parts": [
       "../ApplyInterestLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ApplyInterestLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ApplyInterestLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../DataType.sol",
      "parts": [
       "../DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Perp.sol",
      "parts": [
       "../Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Trade.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Trade.sol",
      "parts": [
       "../Trade.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Trade",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Trade"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../types/GlobalData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../types/GlobalData.sol",
      "parts": [
       "../../types/GlobalData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GlobalDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GlobalDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../PositionCalculator.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../PositionCalculator.sol",
      "parts": [
       "../PositionCalculator.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PositionCalculator",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PositionCalculator"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../ScaledAsset.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../ScaledAsset.sol",
      "parts": [
       "../ScaledAsset.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ScaledAsset",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ScaledAsset"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "TradeLogic",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GlobalDataLibrary.GlobalData"
       },
       "libraryName": "GlobalDataLibrary",
       "functions": [],
       "operators": []
      },
      {
       "type": "EventDefinition",
       "name": "MarginUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "updatedMarginAmount",
         "identifier": {
          "type": "Identifier",
          "name": "updatedMarginAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "PositionUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeSqrtAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeSqrtAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.Payoff"
         },
         "name": "payoff",
         "identifier": {
          "type": "Identifier",
          "name": "payoff"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": "trade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pairStatus",
            "identifier": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeParams"
            },
            "memberName": "pairId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ApplyInterestLib"
            },
            "memberName": "applyInterestForToken"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "pairs"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Perp"
            },
            "memberName": "updateRebalanceInterestGrowth"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "sqrtAssetStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "tradeResult"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Trade"
             },
             "memberName": "trade"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "globalData"
             },
             {
              "type": "Identifier",
              "name": "tradeParams"
             },
             {
              "type": "Identifier",
              "name": "settlementData"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "vaults"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeParams"
              },
              "memberName": "vaultId"
             }
            },
            "memberName": "margin"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeResult"
              },
              "memberName": "fee"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tradeResult"
               },
               "memberName": "payoff"
              },
              "memberName": "perpPayoff"
             }
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeResult"
              },
              "memberName": "payoff"
             },
             "memberName": "sqrtPayoff"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeResult"
              },
              "memberName": "minMargin"
             },
             null,
             null,
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeResult"
              },
              "memberName": "sqrtTwap"
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PositionCalculator"
             },
             "memberName": "calculateMinMargin"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "pairStatus"
             },
             {
              "type": "IndexAccess",
              "base": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "globalData"
               },
               "memberName": "vaults"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tradeParams"
               },
               "memberName": "vaultId"
              }
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "DataType"
               },
               "memberName": "FeeAmount"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "callTradeAfterCallback"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "tradeParams"
            },
            {
             "type": "Identifier",
             "name": "tradeResult"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "minMargin"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PositionCalculator"
             },
             "memberName": "checkSafe"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "pairStatus"
             },
             {
              "type": "IndexAccess",
              "base": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "globalData"
               },
               "memberName": "vaults"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tradeParams"
               },
               "memberName": "vaultId"
              }
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "DataType"
               },
               "memberName": "FeeAmount"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PositionUpdated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "vaultId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "tradeAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "tradeAmountSqrt"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeResult"
             },
             "memberName": "payoff"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeResult"
             },
             "memberName": "fee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "callTradeAfterCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "initializeLock"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IHooks"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "predyTradeAfterCallback"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tradeParams"
            },
            {
             "type": "Identifier",
             "name": "tradeResult"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "marginAmountUpdate",
            "identifier": {
             "type": "Identifier",
             "name": "marginAmountUpdate"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "settledBaseAmount",
            "identifier": {
             "type": "Identifier",
             "name": "settledBaseAmount"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "finalizeLock"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "Identifier",
            "name": "settledBaseAmount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "IPredyPool"
               },
               "memberName": "BaseTokenNotSettled"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "vaults"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeParams"
              },
              "memberName": "vaultId"
             }
            },
            "memberName": "margin"
           },
           "right": {
            "type": "Identifier",
            "name": "marginAmountUpdate"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "MarginUpdated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "vaultId"
            },
            {
             "type": "Identifier",
             "name": "marginAmountUpdate"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/logic/SupplyLogic.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/ISupplyToken.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/ISupplyToken.sol",
      "parts": [
       "../../interfaces/ISupplyToken.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISupplyToken",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISupplyToken"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../DataType.sol",
      "parts": [
       "../DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Perp.sol",
      "parts": [
       "../Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../ScaledAsset.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../ScaledAsset.sol",
      "parts": [
       "../ScaledAsset.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ScaledAsset",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ScaledAsset"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../ApplyInterestLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../ApplyInterestLib.sol",
      "parts": [
       "../ApplyInterestLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ApplyInterestLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ApplyInterestLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../types/GlobalData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../types/GlobalData.sol",
      "parts": [
       "../../types/GlobalData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GlobalDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GlobalDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "SupplyLogic",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ScaledAsset.AssetStatus"
       },
       "libraryName": "ScaledAsset",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GlobalDataLibrary.GlobalData"
       },
       "libraryName": "GlobalDataLibrary",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "EventDefinition",
       "name": "TokenSupplied",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "account",
         "identifier": {
          "type": "Identifier",
          "name": "account"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isStable",
         "identifier": {
          "type": "Identifier",
          "name": "isStable"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "suppliedAmount",
         "identifier": {
          "type": "Identifier",
          "name": "suppliedAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "TokenWithdrawn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "account",
         "identifier": {
          "type": "Identifier",
          "name": "account"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isStable",
         "identifier": {
          "type": "Identifier",
          "name": "isStable"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalWithdrawnAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalWithdrawnAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": "supply",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_pairId",
         "identifier": {
          "type": "Identifier",
          "name": "_pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_amount",
         "identifier": {
          "type": "Identifier",
          "name": "_amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "_isStable",
         "identifier": {
          "type": "Identifier",
          "name": "_isStable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "mintAmount",
         "identifier": {
          "type": "Identifier",
          "name": "mintAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "Identifier",
            "name": "_amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "IPredyPool"
               },
               "memberName": "InvalidAmount"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ApplyInterestLib"
            },
            "memberName": "applyInterestForToken"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "pairs"
            },
            {
             "type": "Identifier",
             "name": "_pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pair",
            "identifier": {
             "type": "Identifier",
             "name": "pair"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "Identifier",
            "name": "_pairId"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "_isStable"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "mintAmount"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "receiveTokenAndMintBond"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "pair"
                 },
                 "memberName": "quotePool"
                },
                {
                 "type": "Identifier",
                 "name": "_amount"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "mintAmount"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "receiveTokenAndMintBond"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "pair"
                 },
                 "memberName": "basePool"
                },
                {
                 "type": "Identifier",
                 "name": "_amount"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "TokenSupplied"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pair"
             },
             "memberName": "id"
            },
            {
             "type": "Identifier",
             "name": "_isStable"
            },
            {
             "type": "Identifier",
             "name": "_amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "receiveTokenAndMintBond",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetPoolStatus"
         },
         "name": "_pool",
         "identifier": {
          "type": "Identifier",
          "name": "_pool"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_amount",
         "identifier": {
          "type": "Identifier",
          "name": "_amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "mintAmount",
         "identifier": {
          "type": "Identifier",
          "name": "mintAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "mintAmount"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pool"
              },
              "memberName": "tokenStatus"
             },
             "memberName": "addAsset"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_amount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_pool"
               },
               "memberName": "token"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "safeTransferFrom"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "_amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ISupplyToken"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_pool"
               },
               "memberName": "supplyTokenAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "mint"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "Identifier",
             "name": "mintAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "withdraw",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_pairId",
         "identifier": {
          "type": "Identifier",
          "name": "_pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_amount",
         "identifier": {
          "type": "Identifier",
          "name": "_amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "_isStable",
         "identifier": {
          "type": "Identifier",
          "name": "_isStable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalburntAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalburntAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalWithdrawalAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalWithdrawalAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "_amount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "AZ",
             "parts": [
              "AZ"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ApplyInterestLib"
            },
            "memberName": "applyInterestForToken"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "pairs"
            },
            {
             "type": "Identifier",
             "name": "_pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pair",
            "identifier": {
             "type": "Identifier",
             "name": "pair"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "Identifier",
            "name": "_pairId"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "_isStable"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "Identifier",
                 "name": "finalburntAmount"
                },
                {
                 "type": "Identifier",
                 "name": "finalWithdrawalAmount"
                }
               ],
               "isArray": false
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "burnBondAndTransferToken"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "pair"
                 },
                 "memberName": "quotePool"
                },
                {
                 "type": "Identifier",
                 "name": "_amount"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "Identifier",
                 "name": "finalburntAmount"
                },
                {
                 "type": "Identifier",
                 "name": "finalWithdrawalAmount"
                }
               ],
               "isArray": false
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "burnBondAndTransferToken"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "pair"
                 },
                 "memberName": "basePool"
                },
                {
                 "type": "Identifier",
                 "name": "_amount"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "TokenWithdrawn"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pair"
             },
             "memberName": "id"
            },
            {
             "type": "Identifier",
             "name": "_isStable"
            },
            {
             "type": "Identifier",
             "name": "finalWithdrawalAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "burnBondAndTransferToken",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetPoolStatus"
         },
         "name": "_pool",
         "identifier": {
          "type": "Identifier",
          "name": "_pool"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_amount",
         "identifier": {
          "type": "Identifier",
          "name": "_amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalburntAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalburntAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalWithdrawalAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalWithdrawalAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "supplyTokenAddress",
            "identifier": {
             "type": "Identifier",
             "name": "supplyTokenAddress"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "_pool"
           },
           "memberName": "supplyTokenAddress"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "finalburntAmount"
             },
             {
              "type": "Identifier",
              "name": "finalWithdrawalAmount"
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_pool"
              },
              "memberName": "tokenStatus"
             },
             "memberName": "removeAsset"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "supplyTokenAddress"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "balanceOf"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "Identifier",
              "name": "_amount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ISupplyToken"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "supplyTokenAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "burn"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "Identifier",
             "name": "finalburntAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_pool"
               },
               "memberName": "token"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "safeTransfer"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "Identifier",
             "name": "finalWithdrawalAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/logic/ReallocationLogic.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/ISettlement.sol",
      "parts": [
       "../../interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../DataType.sol",
      "parts": [
       "../DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Perp.sol",
      "parts": [
       "../Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../PairLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../PairLib.sol",
      "parts": [
       "../PairLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PairLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PairLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../ApplyInterestLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../ApplyInterestLib.sol",
      "parts": [
       "../ApplyInterestLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ApplyInterestLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ApplyInterestLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../types/GlobalData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../types/GlobalData.sol",
      "parts": [
       "../../types/GlobalData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GlobalDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GlobalDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "ReallocationLogic",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GlobalDataLibrary.GlobalData"
       },
       "libraryName": "GlobalDataLibrary",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "EventDefinition",
       "name": "Rebalanced",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "relocationOccurred",
         "identifier": {
          "type": "Identifier",
          "name": "relocationOccurred"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickLower",
         "identifier": {
          "type": "Identifier",
          "name": "tickLower"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int24",
          "stateMutability": null
         },
         "name": "tickUpper",
         "identifier": {
          "type": "Identifier",
          "name": "tickUpper"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "deltaPositionBase",
         "identifier": {
          "type": "Identifier",
          "name": "deltaPositionBase"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "deltaPositionQuote",
         "identifier": {
          "type": "Identifier",
          "name": "deltaPositionQuote"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": "reallocate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isRangeChanged",
         "identifier": {
          "type": "Identifier",
          "name": "isRangeChanged"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ApplyInterestLib"
            },
            "memberName": "applyInterestForToken"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "pairs"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pairStatus",
            "identifier": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "Identifier",
            "name": "pairId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Perp"
            },
            "memberName": "updateRebalanceInterestGrowth"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "sqrtAssetStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "relocationOccurred",
            "identifier": {
             "type": "Identifier",
             "name": "relocationOccurred"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "Block",
          "statements": [
           {
            "type": "VariableDeclarationStatement",
            "variables": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "name": "deltaPositionBase",
              "identifier": {
               "type": "Identifier",
               "name": "deltaPositionBase"
              },
              "storageLocation": null,
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "initialValue": null
           },
           {
            "type": "VariableDeclarationStatement",
            "variables": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              },
              "name": "deltaPositionQuote",
              "identifier": {
               "type": "Identifier",
               "name": "deltaPositionQuote"
              },
              "storageLocation": null,
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "initialValue": null
           },
           {
            "type": "ExpressionStatement",
            "expression": {
             "type": "BinaryOperation",
             "operator": "=",
             "left": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "Identifier",
                "name": "relocationOccurred"
               },
               {
                "type": "Identifier",
                "name": "isRangeChanged"
               },
               {
                "type": "Identifier",
                "name": "deltaPositionBase"
               },
               {
                "type": "Identifier",
                "name": "deltaPositionQuote"
               }
              ],
              "isArray": false
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Perp"
               },
               "memberName": "reallocate"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "pairStatus"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "pairStatus"
                },
                "memberName": "sqrtAssetStatus"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           },
           {
            "type": "IfStatement",
            "condition": {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "deltaPositionBase"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            "trueBody": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "globalData"
                 },
                 "memberName": "initializeLock"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "pairId"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "globalData"
                 },
                 "memberName": "callSettlementCallback"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "settlementData"
                 },
                 {
                  "type": "Identifier",
                  "name": "deltaPositionBase"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              {
               "type": "VariableDeclarationStatement",
               "variables": [
                {
                 "type": "VariableDeclaration",
                 "name": "settledQuoteAmount",
                 "identifier": {
                  "type": "Identifier",
                  "name": "settledQuoteAmount"
                 },
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "int256",
                  "stateMutability": null
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                },
                {
                 "type": "VariableDeclaration",
                 "name": "settledBaseAmount",
                 "identifier": {
                  "type": "Identifier",
                  "name": "settledBaseAmount"
                 },
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "int256",
                  "stateMutability": null
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                }
               ],
               "initialValue": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "globalData"
                 },
                 "memberName": "finalizeLock"
                },
                "arguments": [],
                "names": [],
                "identifiers": []
               }
              },
              {
               "type": "VariableDeclarationStatement",
               "variables": [
                {
                 "type": "VariableDeclaration",
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "int256",
                  "stateMutability": null
                 },
                 "name": "exceedsQuote",
                 "identifier": {
                  "type": "Identifier",
                  "name": "exceedsQuote"
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                }
               ],
               "initialValue": {
                "type": "BinaryOperation",
                "operator": "+",
                "left": {
                 "type": "Identifier",
                 "name": "settledQuoteAmount"
                },
                "right": {
                 "type": "Identifier",
                 "name": "deltaPositionQuote"
                }
               }
              },
              {
               "type": "IfStatement",
               "condition": {
                "type": "BinaryOperation",
                "operator": "<",
                "left": {
                 "type": "Identifier",
                 "name": "exceedsQuote"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "RevertStatement",
                  "revertCall": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "IPredyPool"
                    },
                    "memberName": "QuoteTokenNotSettled"
                   },
                   "arguments": [],
                   "names": [],
                   "identifiers": []
                  }
                 }
                ]
               },
               "falseBody": null
              },
              {
               "type": "IfStatement",
               "condition": {
                "type": "BinaryOperation",
                "operator": "!=",
                "left": {
                 "type": "BinaryOperation",
                 "operator": "+",
                 "left": {
                  "type": "Identifier",
                  "name": "settledBaseAmount"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "deltaPositionBase"
                 }
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "RevertStatement",
                  "revertCall": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "IPredyPool"
                    },
                    "memberName": "BaseTokenNotSettled"
                   },
                   "arguments": [],
                   "names": [],
                   "identifiers": []
                  }
                 }
                ]
               },
               "falseBody": null
              },
              {
               "type": "IfStatement",
               "condition": {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "Identifier",
                 "name": "exceedsQuote"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "Identifier",
                      "name": "ERC20"
                     },
                     "arguments": [
                      {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "MemberAccess",
                        "expression": {
                         "type": "Identifier",
                         "name": "pairStatus"
                        },
                        "memberName": "quotePool"
                       },
                       "memberName": "token"
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    },
                    "memberName": "safeTransfer"
                   },
                   "arguments": [
                    {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "msg"
                     },
                     "memberName": "sender"
                    },
                    {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "ElementaryTypeName",
                      "name": "uint256",
                      "stateMutability": null
                     },
                     "arguments": [
                      {
                       "type": "Identifier",
                       "name": "exceedsQuote"
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  }
                 }
                ]
               },
               "falseBody": null
              }
             ]
            },
            "falseBody": null
           },
           {
            "type": "EmitStatement",
            "eventCall": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "Rebalanced"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "pairId"
              },
              {
               "type": "Identifier",
               "name": "relocationOccurred"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "pairStatus"
                },
                "memberName": "sqrtAssetStatus"
               },
               "memberName": "tickLower"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "pairStatus"
                },
                "memberName": "sqrtAssetStatus"
               },
               "memberName": "tickUpper"
              },
              {
               "type": "Identifier",
               "name": "deltaPositionBase"
              },
              {
               "type": "Identifier",
               "name": "deltaPositionQuote"
              }
             ],
             "names": [],
             "identifiers": []
            }
           }
          ]
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "relocationOccurred"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "rebalanceFeeGrowthCache"
               },
               "index": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "PairLib"
                 },
                 "memberName": "getRebalanceCacheId"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "pairId"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "pairStatus"
                   },
                   "memberName": "sqrtAssetStatus"
                  },
                  "memberName": "numRebalance"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "DataType"
                },
                "memberName": "RebalanceFeeGrowthCache"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "pairStatus"
                  },
                  "memberName": "sqrtAssetStatus"
                 },
                 "memberName": "rebalanceInterestGrowthQuote"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "pairStatus"
                  },
                  "memberName": "sqrtAssetStatus"
                 },
                 "memberName": "rebalanceInterestGrowthBase"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Perp"
               },
               "memberName": "finalizeReallocation"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "pairStatus"
                },
                "memberName": "sqrtAssetStatus"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/logic/ReaderLogic.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Constants.sol",
      "parts": [
       "../Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../DataType.sol",
      "parts": [
       "../DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Perp.sol",
      "parts": [
       "../Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../PerpFee.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../PerpFee.sol",
      "parts": [
       "../PerpFee.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PerpFee",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PerpFee"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../ApplyInterestLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../ApplyInterestLib.sol",
      "parts": [
       "../ApplyInterestLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ApplyInterestLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ApplyInterestLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../types/GlobalData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../types/GlobalData.sol",
      "parts": [
       "../../types/GlobalData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GlobalDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GlobalDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../PositionCalculator.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../PositionCalculator.sol",
      "parts": [
       "../PositionCalculator.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PositionCalculator",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PositionCalculator"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "ReaderLogic",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GlobalDataLibrary.GlobalData"
       },
       "libraryName": "GlobalDataLibrary",
       "functions": [],
       "operators": []
      },
      {
       "type": "FunctionDefinition",
       "name": "getPairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ApplyInterestLib"
            },
            "memberName": "applyInterestForToken"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "pairs"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pairStatus",
            "identifier": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "Identifier",
            "name": "pairId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "revertPairStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getVaultStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.Vault"
            },
            "name": "vault",
            "identifier": {
             "type": "Identifier",
             "name": "vault"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "vaults"
           },
           "index": {
            "type": "Identifier",
            "name": "vaultId"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pairStatus",
            "identifier": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "vault"
             },
             "memberName": "openPosition"
            },
            "memberName": "pairId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ApplyInterestLib"
            },
            "memberName": "applyInterestForToken"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "pairs"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "vault"
              },
              "memberName": "openPosition"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Perp"
            },
            "memberName": "updateRebalanceInterestGrowth"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "sqrtAssetStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.FeeAmount"
            },
            "name": "feeAmount",
            "identifier": {
             "type": "Identifier",
             "name": "feeAmount"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpFee"
            },
            "memberName": "computeUserFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "rebalanceFeeGrowthCache"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "vault"
             },
             "memberName": "openPosition"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "minMargin",
            "identifier": {
             "type": "Identifier",
             "name": "minMargin"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "vaultValue",
            "identifier": {
             "type": "Identifier",
             "name": "vaultValue"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           null,
           {
            "type": "VariableDeclaration",
            "name": "oraclePice",
            "identifier": {
             "type": "Identifier",
             "name": "oraclePice"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PositionCalculator"
            },
            "memberName": "calculateMinMargin"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            },
            {
             "type": "Identifier",
             "name": "vault"
            },
            {
             "type": "Identifier",
             "name": "feeAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "revertVaultStatus"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "IPredyPool"
              },
              "memberName": "VaultStatus"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "vaultId"
              },
              {
               "type": "Identifier",
               "name": "vaultValue"
              },
              {
               "type": "Identifier",
               "name": "minMargin"
              },
              {
               "type": "Identifier",
               "name": "oraclePice"
              },
              {
               "type": "Identifier",
               "name": "feeAmount"
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "getPosition"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "vault"
                },
                {
                 "type": "Identifier",
                 "name": "feeAmount"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "vault",
         "identifier": {
          "type": "Identifier",
          "name": "vault"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.FeeAmount"
         },
         "name": "feeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "feeAmount"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.Position"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PositionCalculator.PositionParams"
            },
            "name": "positionParams",
            "identifier": {
             "type": "Identifier",
             "name": "positionParams"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PositionCalculator"
            },
            "memberName": "getPositionWithFeeAmount"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "vault"
             },
             "memberName": "openPosition"
            },
            {
             "type": "Identifier",
             "name": "feeAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "IPredyPool"
            },
            "memberName": "Position"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "vault"
             },
             "memberName": "margin"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "positionParams"
             },
             "memberName": "amountQuote"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "positionParams"
             },
             "memberName": "amountSqrt"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "positionParams"
             },
             "memberName": "amountBase"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "revertPairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "pairStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes",
             "stateMutability": null
            },
            "name": "data",
            "identifier": {
             "type": "Identifier",
             "name": "data"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "encode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyCall",
             "functionName": "revert",
             "arguments": [
              {
               "type": "AssemblyCall",
               "functionName": "add",
               "arguments": [
                {
                 "type": "DecimalNumber",
                 "value": "32"
                },
                {
                 "type": "AssemblyCall",
                 "functionName": "data",
                 "arguments": []
                }
               ]
              },
              {
               "type": "AssemblyCall",
               "functionName": "mload",
               "arguments": [
                {
                 "type": "AssemblyCall",
                 "functionName": "data",
                 "arguments": []
                }
               ]
              }
             ]
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "revertVaultStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.VaultStatus"
         },
         "name": "vaultStatus",
         "identifier": {
          "type": "Identifier",
          "name": "vaultStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes",
             "stateMutability": null
            },
            "name": "data",
            "identifier": {
             "type": "Identifier",
             "name": "data"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "encode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vaultStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyCall",
             "functionName": "revert",
             "arguments": [
              {
               "type": "AssemblyCall",
               "functionName": "add",
               "arguments": [
                {
                 "type": "DecimalNumber",
                 "value": "32"
                },
                {
                 "type": "AssemblyCall",
                 "functionName": "data",
                 "arguments": []
                }
               ]
              },
              {
               "type": "AssemblyCall",
               "functionName": "mload",
               "arguments": [
                {
                 "type": "AssemblyCall",
                 "functionName": "data",
                 "arguments": []
                }
               ]
              }
             ]
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/logic/LiquidationLogic.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IPredyPool.sol",
      "parts": [
       "../../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/IHooks.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/IHooks.sol",
      "parts": [
       "../../interfaces/IHooks.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IHooks",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IHooks"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../interfaces/ISettlement.sol",
      "parts": [
       "../../interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../ApplyInterestLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../ApplyInterestLib.sol",
      "parts": [
       "../ApplyInterestLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ApplyInterestLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ApplyInterestLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Constants.sol",
      "parts": [
       "../Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Perp.sol",
      "parts": [
       "../Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../PerpFee.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../PerpFee.sol",
      "parts": [
       "../PerpFee.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PerpFee",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PerpFee"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Trade.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Trade.sol",
      "parts": [
       "../Trade.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Trade",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Trade"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../math/Math.sol",
      "parts": [
       "../math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Math",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Math"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../DataType.sol",
      "parts": [
       "../DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../types/GlobalData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../types/GlobalData.sol",
      "parts": [
       "../../types/GlobalData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GlobalDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GlobalDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../PositionCalculator.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../PositionCalculator.sol",
      "parts": [
       "../PositionCalculator.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PositionCalculator",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PositionCalculator"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../ScaledAsset.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../ScaledAsset.sol",
      "parts": [
       "../ScaledAsset.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ScaledAsset",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ScaledAsset"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../SlippageLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../SlippageLib.sol",
      "parts": [
       "../SlippageLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SlippageLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SlippageLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "LiquidationLogic",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "int256",
        "stateMutability": null
       },
       "libraryName": "Math",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GlobalDataLibrary.GlobalData"
       },
       "libraryName": "GlobalDataLibrary",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_MAX_ACCEPTABLE_SQRT_PRICE_RANGE",
         "identifier": {
          "type": "Identifier",
          "name": "_MAX_ACCEPTABLE_SQRT_PRICE_RANGE"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "101488915",
          "subdenomination": null
         },
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "101488915",
        "subdenomination": null
       }
      },
      {
       "type": "EventDefinition",
       "name": "PositionLiquidated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeSqrtAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeSqrtAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.Payoff"
         },
         "name": "payoff",
         "identifier": {
          "type": "Identifier",
          "name": "payoff"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "marginAmount",
         "identifier": {
          "type": "Identifier",
          "name": "marginAmount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": "liquidate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "closeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "closeRatio"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "Identifier",
               "name": "closeRatio"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "1e18",
               "subdenomination": null
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "ICR",
             "parts": [
              "ICR"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.Vault"
            },
            "name": "vault",
            "identifier": {
             "type": "Identifier",
             "name": "vault"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "vaults"
           },
           "index": {
            "type": "Identifier",
            "name": "vaultId"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pairStatus",
            "identifier": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "vault"
             },
             "memberName": "openPosition"
            },
            "memberName": "pairId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ApplyInterestLib"
            },
            "memberName": "applyInterestForToken"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "pairs"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "vault"
              },
              "memberName": "openPosition"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Perp"
            },
            "memberName": "updateRebalanceInterestGrowth"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "pairStatus"
             },
             "memberName": "sqrtAssetStatus"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "sqrtOraclePrice",
            "identifier": {
             "type": "Identifier",
             "name": "sqrtOraclePrice"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "slippageTolerance",
            "identifier": {
             "type": "Identifier",
             "name": "slippageTolerance"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkVaultIsDanger"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            },
            {
             "type": "Identifier",
             "name": "vault"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "rebalanceFeeGrowthCache"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IPredyPool.TradeParams"
            },
            "name": "tradeParams",
            "identifier": {
             "type": "Identifier",
             "name": "tradeParams"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "IPredyPool"
            },
            "memberName": "TradeParams"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "vault"
              },
              "memberName": "openPosition"
             },
             "memberName": "pairId"
            },
            {
             "type": "Identifier",
             "name": "vaultId"
            },
            {
             "type": "BinaryOperation",
             "operator": "/",
             "left": {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "vault"
                  },
                  "memberName": "openPosition"
                 },
                 "memberName": "perp"
                },
                "memberName": "amount"
               },
               "isPrefix": true
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "closeRatio"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "right": {
              "type": "NumberLiteral",
              "number": "1e18",
              "subdenomination": null
             }
            },
            {
             "type": "BinaryOperation",
             "operator": "/",
             "left": {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "vault"
                  },
                  "memberName": "openPosition"
                 },
                 "memberName": "sqrtPerp"
                },
                "memberName": "amount"
               },
               "isPrefix": true
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "closeRatio"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "right": {
              "type": "NumberLiteral",
              "number": "1e18",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "",
             "parts": [
              ""
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "tradeResult"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Trade"
             },
             "memberName": "trade"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "globalData"
             },
             {
              "type": "Identifier",
              "name": "tradeParams"
             },
             {
              "type": "Identifier",
              "name": "settlementData"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "vault"
            },
            "memberName": "margin"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "+",
            "left": {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeResult"
              },
              "memberName": "fee"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tradeResult"
               },
               "memberName": "payoff"
              },
              "memberName": "perpPayoff"
             }
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeResult"
              },
              "memberName": "payoff"
             },
             "memberName": "sqrtPayoff"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeResult"
            },
            "memberName": "sqrtTwap"
           },
           "right": {
            "type": "Identifier",
            "name": "sqrtOraclePrice"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "hasPosition",
            "identifier": {
             "type": "Identifier",
             "name": "hasPosition"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeResult"
              },
              "memberName": "minMargin"
             },
             null,
             {
              "type": "Identifier",
              "name": "hasPosition"
             },
             null
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PositionCalculator"
             },
             "memberName": "calculateMinMargin"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "pairStatus"
             },
             {
              "type": "Identifier",
              "name": "vault"
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "DataType"
               },
               "memberName": "FeeAmount"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SlippageLib"
            },
            "memberName": "checkPrice"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "sqrtOraclePrice"
            },
            {
             "type": "Identifier",
             "name": "tradeResult"
            },
            {
             "type": "Identifier",
             "name": "slippageTolerance"
            },
            {
             "type": "Conditional",
             "condition": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tradeParams"
               },
               "memberName": "tradeAmountSqrt"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueExpression": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             },
             "falseExpression": {
              "type": "Identifier",
              "name": "_MAX_ACCEPTABLE_SQRT_PRICE_RANGE"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "sentMarginAmount",
            "identifier": {
             "type": "Identifier",
             "name": "sentMarginAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "NumberLiteral",
           "number": "0",
           "subdenomination": null
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "Identifier",
            "name": "hasPosition"
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "name": "remainingMargin",
               "identifier": {
                "type": "Identifier",
                "name": "remainingMargin"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "vault"
              },
              "memberName": "margin"
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "remainingMargin"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": "!=",
                 "left": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "vault"
                  },
                  "memberName": "recipient"
                 },
                 "right": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "address"
                  },
                  "arguments": [
                   {
                    "type": "NumberLiteral",
                    "number": "0",
                    "subdenomination": null
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "BinaryOperation",
                    "operator": "=",
                    "left": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "vault"
                     },
                     "memberName": "margin"
                    },
                    "right": {
                     "type": "NumberLiteral",
                     "number": "0",
                     "subdenomination": null
                    }
                   }
                  },
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "BinaryOperation",
                    "operator": "=",
                    "left": {
                     "type": "Identifier",
                     "name": "sentMarginAmount"
                    },
                    "right": {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "ElementaryTypeName",
                      "name": "uint256",
                      "stateMutability": null
                     },
                     "arguments": [
                      {
                       "type": "Identifier",
                       "name": "remainingMargin"
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    }
                   }
                  },
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "FunctionCall",
                      "expression": {
                       "type": "Identifier",
                       "name": "ERC20"
                      },
                      "arguments": [
                       {
                        "type": "MemberAccess",
                        "expression": {
                         "type": "MemberAccess",
                         "expression": {
                          "type": "Identifier",
                          "name": "pairStatus"
                         },
                         "memberName": "quotePool"
                        },
                        "memberName": "token"
                       }
                      ],
                      "names": [],
                      "identifiers": []
                     },
                     "memberName": "safeTransfer"
                    },
                    "arguments": [
                     {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "vault"
                      },
                      "memberName": "recipient"
                     },
                     {
                      "type": "Identifier",
                      "name": "sentMarginAmount"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  }
                 ]
                },
                "falseBody": null
               }
              ]
             },
             "falseBody": {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "remainingMargin"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "BinaryOperation",
                  "operator": "=",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "vault"
                   },
                   "memberName": "margin"
                  },
                  "right": {
                   "type": "NumberLiteral",
                   "number": "0",
                   "subdenomination": null
                  }
                 }
                },
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "ERC20"
                    },
                    "arguments": [
                     {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "Identifier",
                        "name": "pairStatus"
                       },
                       "memberName": "quotePool"
                      },
                      "memberName": "token"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   "memberName": "safeTransferFrom"
                  },
                  "arguments": [
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "msg"
                    },
                    "memberName": "sender"
                   },
                   {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "address"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "this"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "ElementaryTypeName",
                     "name": "uint256",
                     "stateMutability": null
                    },
                    "arguments": [
                     {
                      "type": "UnaryOperation",
                      "operator": "-",
                      "subExpression": {
                       "type": "Identifier",
                       "name": "remainingMargin"
                      },
                      "isPrefix": true
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PositionLiquidated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "vaultId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "tradeAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "tradeAmountSqrt"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeResult"
             },
             "memberName": "payoff"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeResult"
             },
             "memberName": "fee"
            },
            {
             "type": "Identifier",
             "name": "sentMarginAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "checkVaultIsDanger",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "pairStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": "vault",
         "identifier": {
          "type": "Identifier",
          "name": "vault"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.RebalanceFeeGrowthCache"
          },
          "valueName": null
         },
         "name": "rebalanceFeeGrowthCache",
         "identifier": {
          "type": "Identifier",
          "name": "rebalanceFeeGrowthCache"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtOraclePrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtOraclePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slippageTolerance",
         "identifier": {
          "type": "Identifier",
          "name": "slippageTolerance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "isLiquidatable",
            "identifier": {
             "type": "Identifier",
             "name": "isLiquidatable"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "minMargin",
            "identifier": {
             "type": "Identifier",
             "name": "minMargin"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "vaultValue",
            "identifier": {
             "type": "Identifier",
             "name": "vaultValue"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.FeeAmount"
            },
            "name": "FeeAmount",
            "identifier": {
             "type": "Identifier",
             "name": "FeeAmount"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpFee"
            },
            "memberName": "computeUserFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairStatus"
            },
            {
             "type": "Identifier",
             "name": "rebalanceFeeGrowthCache"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "vault"
             },
             "memberName": "openPosition"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Identifier",
              "name": "isLiquidatable"
             },
             {
              "type": "Identifier",
              "name": "minMargin"
             },
             {
              "type": "Identifier",
              "name": "vaultValue"
             },
             {
              "type": "Identifier",
              "name": "sqrtOraclePrice"
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PositionCalculator"
             },
             "memberName": "isLiquidatable"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "pairStatus"
             },
             {
              "type": "Identifier",
              "name": "vault"
             },
             {
              "type": "Identifier",
              "name": "FeeAmount"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "Identifier",
            "name": "isLiquidatable"
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "IPredyPool"
               },
               "memberName": "VaultIsNotDanger"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "vaultValue"
               },
               {
                "type": "Identifier",
                "name": "minMargin"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "slippageTolerance"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "calculateSlippageTolerance"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "minMargin"
             },
             {
              "type": "Identifier",
              "name": "vaultValue"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "pairStatus"
              },
              "memberName": "riskParams"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateSlippageTolerance",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "minMargin",
         "identifier": {
          "type": "Identifier",
          "name": "minMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "vaultValue",
         "identifier": {
          "type": "Identifier",
          "name": "vaultValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetRiskParams"
         },
         "name": "riskParams",
         "identifier": {
          "type": "Identifier",
          "name": "riskParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "<=",
            "left": {
             "type": "Identifier",
             "name": "vaultValue"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "minMargin"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "riskParams"
              },
              "memberName": "maxSlippage"
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "ratio",
            "identifier": {
             "type": "Identifier",
             "name": "ratio"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "uint256",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "/",
             "left": {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "Identifier",
               "name": "vaultValue"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "1e4",
               "subdenomination": null
              }
             },
             "right": {
              "type": "Identifier",
              "name": "minMargin"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "ratio"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1e4",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "riskParams"
              },
              "memberName": "minSlippage"
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "riskParams"
              },
              "memberName": "maxSlippage"
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "ratio"
               },
               "right": {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "BinaryOperation",
                  "operator": "-",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "riskParams"
                   },
                   "memberName": "maxSlippage"
                  },
                  "right": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "riskParams"
                   },
                   "memberName": "minSlippage"
                  }
                 }
                ],
                "isArray": false
               }
              },
              "right": {
               "type": "NumberLiteral",
               "number": "1e4",
               "subdenomination": null
              }
             }
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/libraries/logic/AddPairLogic.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol",
      "parts": [
       "@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IERC20Metadata",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IERC20Metadata"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/token/ERC20/IERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/token/ERC20/IERC20.sol",
      "parts": [
       "@openzeppelin/contracts/token/ERC20/IERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Factory.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Factory.sol",
      "parts": [
       "@uniswap/v3-core/contracts/interfaces/IUniswapV3Factory.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IUniswapV3Factory",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IUniswapV3Factory"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
      "parts": [
       "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IUniswapV3Pool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IUniswapV3Pool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Perp.sol",
      "parts": [
       "../Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../Constants.sol",
      "parts": [
       "../Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../DataType.sol",
      "parts": [
       "../DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../InterestRateModel.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../InterestRateModel.sol",
      "parts": [
       "../InterestRateModel.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "InterestRateModel",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "InterestRateModel"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../ScaledAsset.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../ScaledAsset.sol",
      "parts": [
       "../ScaledAsset.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ScaledAsset",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ScaledAsset"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../tokenization/SupplyToken.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../tokenization/SupplyToken.sol",
      "parts": [
       "../../tokenization/SupplyToken.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SupplyToken",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SupplyToken"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../../types/GlobalData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../../types/GlobalData.sol",
      "parts": [
       "../../types/GlobalData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GlobalDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GlobalDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "AddPairLogic",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StructDefinition",
       "name": "AddPairParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "poolOwner",
         "identifier": {
          "type": "Identifier",
          "name": "poolOwner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapPool",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "priceFeed",
         "identifier": {
          "type": "Identifier",
          "name": "priceFeed"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "allowlistEnabled",
         "identifier": {
          "type": "Identifier",
          "name": "allowlistEnabled"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetRiskParams"
         },
         "name": "assetRiskParams",
         "identifier": {
          "type": "Identifier",
          "name": "assetRiskParams"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "quoteIrmParams",
         "identifier": {
          "type": "Identifier",
          "name": "quoteIrmParams"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "baseIrmParams",
         "identifier": {
          "type": "Identifier",
          "name": "baseIrmParams"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "CustomErrorDefinition",
       "name": "InvalidUniswapPool",
       "parameters": []
      },
      {
       "type": "EventDefinition",
       "name": "PairAdded",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapPool",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapPool"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "AssetRiskParamsUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetRiskParams"
         },
         "name": "riskParams",
         "identifier": {
          "type": "Identifier",
          "name": "riskParams"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "IRMParamsUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "quoteIrmParams",
         "identifier": {
          "type": "Identifier",
          "name": "quoteIrmParams"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "baseIrmParams",
         "identifier": {
          "type": "Identifier",
          "name": "baseIrmParams"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "FeeRatioUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "feeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "feeRatio"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "PoolOwnerUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "poolOwner",
         "identifier": {
          "type": "Identifier",
          "name": "poolOwner"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "PriceOracleUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "priceOracle",
         "identifier": {
          "type": "Identifier",
          "name": "priceOracle"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": "initializeGlobalData",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "global",
         "identifier": {
          "type": "Identifier",
          "name": "global"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapFactory",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapFactory"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "global"
            },
            "memberName": "pairsCount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "global"
            },
            "memberName": "vaultCount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "global"
            },
            "memberName": "uniswapFactory"
           },
           "right": {
            "type": "Identifier",
            "name": "uniswapFactory"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "addPair",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "_global",
         "identifier": {
          "type": "Identifier",
          "name": "_global"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "bool",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "allowedUniswapPools",
         "identifier": {
          "type": "Identifier",
          "name": "allowedUniswapPools"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AddPairParams"
         },
         "name": "_addPairParam",
         "identifier": {
          "type": "Identifier",
          "name": "_addPairParam"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "pairId"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_global"
            },
            "memberName": "pairsCount"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "<",
             "left": {
              "type": "Identifier",
              "name": "pairId"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "MAX_PAIRS"
             }
            },
            {
             "type": "StringLiteral",
             "value": "MAXP",
             "parts": [
              "MAXP"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IUniswapV3Pool"
            },
            "name": "uniswapPool",
            "identifier": {
             "type": "Identifier",
             "name": "uniswapPool"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "IUniswapV3Pool"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_addPairParam"
             },
             "memberName": "uniswapPool"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "stableTokenAddress",
            "identifier": {
             "type": "Identifier",
             "name": "stableTokenAddress"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "_addPairParam"
           },
           "memberName": "quoteToken"
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IUniswapV3Factory"
            },
            "name": "uniswapV3Factory",
            "identifier": {
             "type": "Identifier",
             "name": "uniswapV3Factory"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "IUniswapV3Factory"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_global"
             },
             "memberName": "uniswapFactory"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "uniswapV3Factory"
             },
             "memberName": "getPool"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "uniswapPool"
               },
               "memberName": "token0"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "uniswapPool"
               },
               "memberName": "token1"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "uniswapPool"
               },
               "memberName": "fee"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_addPairParam"
            },
            "memberName": "uniswapPool"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "InvalidUniswapPool"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "||",
             "left": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "uniswapPool"
                },
                "memberName": "token0"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              "right": {
               "type": "Identifier",
               "name": "stableTokenAddress"
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "uniswapPool"
                },
                "memberName": "token1"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              },
              "right": {
               "type": "Identifier",
               "name": "stableTokenAddress"
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "C3",
             "parts": [
              "C3"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "isQuoteZero",
            "identifier": {
             "type": "Identifier",
             "name": "isQuoteZero"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "uniswapPool"
             },
             "memberName": "token0"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "Identifier",
            "name": "stableTokenAddress"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_storePairStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "stableTokenAddress"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_global"
             },
             "memberName": "pairs"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Conditional",
             "condition": {
              "type": "Identifier",
              "name": "isQuoteZero"
             },
             "trueExpression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "uniswapPool"
               },
               "memberName": "token1"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             },
             "falseExpression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "uniswapPool"
               },
               "memberName": "token0"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "Identifier",
             "name": "isQuoteZero"
            },
            {
             "type": "Identifier",
             "name": "_addPairParam"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "allowedUniswapPools"
            },
            "index": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_addPairParam"
             },
             "memberName": "uniswapPool"
            }
           },
           "right": {
            "type": "BooleanLiteral",
            "value": true
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "UnaryOperation",
           "operator": "++",
           "subExpression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_global"
            },
            "memberName": "pairsCount"
           },
           "isPrefix": false
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PairAdded"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_addPairParam"
             },
             "memberName": "quoteToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_addPairParam"
             },
             "memberName": "uniswapPool"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateFeeRatio",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_pairStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "_feeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "_feeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "validateFeeRatio"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_feeRatio"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_pairStatus"
            },
            "memberName": "feeRatio"
           },
           "right": {
            "type": "Identifier",
            "name": "_feeRatio"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "FeeRatioUpdated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "Identifier",
             "name": "_feeRatio"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updatePoolOwner",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_pairStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_poolOwner",
         "identifier": {
          "type": "Identifier",
          "name": "_poolOwner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "validatePoolOwner"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_poolOwner"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_pairStatus"
            },
            "memberName": "poolOwner"
           },
           "right": {
            "type": "Identifier",
            "name": "_poolOwner"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PoolOwnerUpdated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "Identifier",
             "name": "_poolOwner"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updatePriceOracle",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_pairStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_priceOracle",
         "identifier": {
          "type": "Identifier",
          "name": "_priceOracle"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_pairStatus"
            },
            "memberName": "priceFeed"
           },
           "right": {
            "type": "Identifier",
            "name": "_priceOracle"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PriceOracleUpdated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "Identifier",
             "name": "_priceOracle"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateAssetRiskParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_pairStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetRiskParams"
         },
         "name": "_riskParams",
         "identifier": {
          "type": "Identifier",
          "name": "_riskParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "validateRiskParams"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_riskParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_pairStatus"
            },
            "memberName": "riskParams"
           },
           "right": {
            "type": "Identifier",
            "name": "_riskParams"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "AssetRiskParamsUpdated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "Identifier",
             "name": "_riskParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateIRMParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "_pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "_pairStatus"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "_quoteIrmParams",
         "identifier": {
          "type": "Identifier",
          "name": "_quoteIrmParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "_baseIrmParams",
         "identifier": {
          "type": "Identifier",
          "name": "_baseIrmParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "validateIRMParams"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_quoteIrmParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "validateIRMParams"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_baseIrmParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "quotePool"
            },
            "memberName": "irmParams"
           },
           "right": {
            "type": "Identifier",
            "name": "_quoteIrmParams"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "basePool"
            },
            "memberName": "irmParams"
           },
           "right": {
            "type": "Identifier",
            "name": "_baseIrmParams"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "IRMParamsUpdated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_pairStatus"
             },
             "memberName": "id"
            },
            {
             "type": "Identifier",
             "name": "_quoteIrmParams"
            },
            {
             "type": "Identifier",
             "name": "_baseIrmParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_storePairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "DataType.PairStatus"
          },
          "valueName": null
         },
         "name": "_pairs",
         "identifier": {
          "type": "Identifier",
          "name": "_pairs"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_pairId",
         "identifier": {
          "type": "Identifier",
          "name": "_pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_tokenAddress",
         "identifier": {
          "type": "Identifier",
          "name": "_tokenAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "_isQuoteZero",
         "identifier": {
          "type": "Identifier",
          "name": "_isQuoteZero"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AddPairParams"
         },
         "name": "_addPairParam",
         "identifier": {
          "type": "Identifier",
          "name": "_addPairParam"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "validateRiskParams"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_addPairParam"
             },
             "memberName": "assetRiskParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "validateFeeRatio"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_addPairParam"
             },
             "memberName": "fee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "_pairs"
               },
               "index": {
                "type": "Identifier",
                "name": "_pairId"
               }
              },
              "memberName": "id"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "AAA",
             "parts": [
              "AAA"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "_pairs"
            },
            "index": {
             "type": "Identifier",
             "name": "_pairId"
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "DataType"
             },
             "memberName": "PairStatus"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_pairId"
             },
             {
              "type": "Identifier",
              "name": "quoteToken"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_addPairParam"
              },
              "memberName": "poolOwner"
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Perp"
               },
               "memberName": "AssetPoolStatus"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "quoteToken"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "deploySupplyToken"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "ScaledAsset"
                 },
                 "memberName": "createAssetStatus"
                },
                "arguments": [],
                "names": [],
                "identifiers": []
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_addPairParam"
                },
                "memberName": "quoteIrmParams"
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Perp"
               },
               "memberName": "AssetPoolStatus"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "_tokenAddress"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "deploySupplyToken"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "_tokenAddress"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "ScaledAsset"
                 },
                 "memberName": "createAssetStatus"
                },
                "arguments": [],
                "names": [],
                "identifiers": []
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_addPairParam"
                },
                "memberName": "baseIrmParams"
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_addPairParam"
              },
              "memberName": "assetRiskParams"
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Perp"
               },
               "memberName": "createAssetStatus"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_addPairParam"
                },
                "memberName": "uniswapPool"
               },
               {
                "type": "UnaryOperation",
                "operator": "-",
                "subExpression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "_addPairParam"
                  },
                  "memberName": "assetRiskParams"
                 },
                 "memberName": "rangeSize"
                },
                "isPrefix": true
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_addPairParam"
                 },
                 "memberName": "assetRiskParams"
                },
                "memberName": "rangeSize"
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_addPairParam"
              },
              "memberName": "priceFeed"
             },
             {
              "type": "Identifier",
              "name": "_isQuoteZero"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_addPairParam"
              },
              "memberName": "allowlistEnabled"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "_addPairParam"
              },
              "memberName": "fee"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "block"
              },
              "memberName": "timestamp"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "AssetRiskParamsUpdated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_addPairParam"
             },
             "memberName": "assetRiskParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "IRMParamsUpdated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_pairId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_addPairParam"
             },
             "memberName": "quoteIrmParams"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "_addPairParam"
             },
             "memberName": "baseIrmParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "deploySupplyToken",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_tokenAddress",
         "identifier": {
          "type": "Identifier",
          "name": "_tokenAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IERC20Metadata"
            },
            "name": "erc20",
            "identifier": {
             "type": "Identifier",
             "name": "erc20"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "IERC20Metadata"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_tokenAddress"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "address"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "NewExpression",
              "typeName": {
               "type": "UserDefinedTypeName",
               "namePath": "SupplyToken"
              }
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "string",
                 "stateMutability": null
                },
                "memberName": "concat"
               },
               "arguments": [
                {
                 "type": "StringLiteral",
                 "value": "Predy6-Supply-",
                 "parts": [
                  "Predy6-Supply-"
                 ],
                 "isUnicode": [
                  false
                 ]
                },
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "erc20"
                  },
                  "memberName": "name"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "string",
                 "stateMutability": null
                },
                "memberName": "concat"
               },
               "arguments": [
                {
                 "type": "StringLiteral",
                 "value": "p",
                 "parts": [
                  "p"
                 ],
                 "isUnicode": [
                  false
                 ]
                },
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "erc20"
                  },
                  "memberName": "symbol"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "erc20"
                },
                "memberName": "decimals"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "validateFeeRatio",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "_fee",
         "identifier": {
          "type": "Identifier",
          "name": "_fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "<=",
             "left": {
              "type": "Identifier",
              "name": "_fee"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "20",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "FEE",
             "parts": [
              "FEE"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "validatePoolOwner",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_poolOwner",
         "identifier": {
          "type": "Identifier",
          "name": "_poolOwner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "_poolOwner"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "ADDZ",
             "parts": [
              "ADDZ"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "validateRiskParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetRiskParams"
         },
         "name": "_assetRiskParams",
         "identifier": {
          "type": "Identifier",
          "name": "_assetRiskParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": "<",
              "left": {
               "type": "NumberLiteral",
               "number": "1e8",
               "subdenomination": null
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetRiskParams"
               },
               "memberName": "riskRatio"
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetRiskParams"
               },
               "memberName": "riskRatio"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "NumberLiteral",
                "number": "10",
                "subdenomination": null
               },
               "right": {
                "type": "NumberLiteral",
                "number": "1e8",
                "subdenomination": null
               }
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "C0",
             "parts": [
              "C0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetRiskParams"
               },
               "memberName": "rangeSize"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_assetRiskParams"
               },
               "memberName": "rebalanceThreshold"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "C0",
             "parts": [
              "C0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "validateIRMParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "_irmParams",
         "identifier": {
          "type": "Identifier",
          "name": "_irmParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": "&&",
               "left": {
                "type": "BinaryOperation",
                "operator": "<=",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_irmParams"
                 },
                 "memberName": "baseRate"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "1e18",
                 "subdenomination": null
                }
               },
               "right": {
                "type": "BinaryOperation",
                "operator": "<=",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "_irmParams"
                 },
                 "memberName": "kinkRate"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "1e18",
                 "subdenomination": null
                }
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "<=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "_irmParams"
                },
                "memberName": "slope1"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "1e18",
                "subdenomination": null
               }
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "_irmParams"
               },
               "memberName": "slope2"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "NumberLiteral",
                "number": "10",
                "subdenomination": null
               },
               "right": {
                "type": "NumberLiteral",
                "number": "1e18",
                "subdenomination": null
               }
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "C4",
             "parts": [
              "C4"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/lens/SpotMarketQuoter.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/ISpotMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/ISpotMarket.sol",
      "parts": [
       "../interfaces/ISpotMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISpotMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISpotMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../markets/spot/SpotOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../markets/spot/SpotOrder.sol",
      "parts": [
       "../markets/spot/SpotOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SpotOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SpotOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/ISettlement.sol",
      "parts": [
       "../interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IFillerMarket.sol",
      "parts": [
       "../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "SpotMarketQuoter",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ISpotMarket"
         },
         "name": "spotMarket",
         "identifier": {
          "type": "Identifier",
          "name": "spotMarket"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ISpotMarket"
         },
         "name": "_spotMarket",
         "identifier": {
          "type": "Identifier",
          "name": "_spotMarket"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "spotMarket"
           },
           "right": {
            "type": "Identifier",
            "name": "_spotMarket"
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteExecuteOrderWithTs",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SpotOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "timestamp",
         "identifier": {
          "type": "Identifier",
          "name": "timestamp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "quoteExecuteOrder"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "order"
              },
              {
               "type": "Identifier",
               "name": "settlementParams"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "block"
             },
             "memberName": "timestamp"
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteExecuteOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SpotOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "quoteTokenAmount",
         "identifier": {
          "type": "Identifier",
          "name": "quoteTokenAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "baseTokenAmount",
            "identifier": {
             "type": "Identifier",
             "name": "baseTokenAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "order"
           },
           "memberName": "baseTokenAmount"
          }
         },
         {
          "type": "TryStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "spotMarket"
            },
            "memberName": "quoteSettlement"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "settlementParams"
            },
            {
             "type": "UnaryOperation",
             "operator": "-",
             "subExpression": {
              "type": "Identifier",
              "name": "baseTokenAmount"
             },
             "isPrefix": true
            }
           ],
           "names": [],
           "identifiers": []
          },
          "returnParameters": null,
          "body": {
           "type": "Block",
           "statements": []
          },
          "catchClauses": [
           {
            "type": "CatchClause",
            "isReasonStringType": false,
            "kind": null,
            "parameters": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "name": "reason",
              "identifier": {
               "type": "Identifier",
               "name": "reason"
              },
              "storageLocation": "memory",
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "body": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "BinaryOperation",
                "operator": "=",
                "left": {
                 "type": "Identifier",
                 "name": "quoteTokenAmount"
                },
                "right": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "_parseRevertReason"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "reason"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              }
             ]
            }
           }
          ]
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_parseRevertReason",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "reason",
         "identifier": {
          "type": "Identifier",
          "name": "reason"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "reason"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "32",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "InlineAssemblyStatement",
             "language": null,
             "flags": [],
             "body": {
              "type": "AssemblyBlock",
              "operations": [
               {
                "type": "AssemblyAssignment",
                "names": [
                 {
                  "type": "Identifier",
                  "name": "reason"
                 }
                ],
                "expression": {
                 "type": "AssemblyCall",
                 "functionName": "add",
                 "arguments": [
                  {
                   "type": "AssemblyCall",
                   "functionName": "reason",
                   "arguments": []
                  },
                  {
                   "type": "HexNumber",
                   "value": "0x04"
                  }
                 ]
                }
               }
              ]
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "revert"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "abi"
                 },
                 "memberName": "decode"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "reason"
                 },
                 {
                  "type": "TupleExpression",
                  "components": [
                   {
                    "type": "ElementaryTypeName",
                    "name": "string",
                    "stateMutability": null
                   }
                  ],
                  "isArray": false
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "reason"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "private",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/lens/PredyPoolQuoter.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IFillerMarket.sol",
      "parts": [
       "../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../base/BaseHookCallback.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../base/BaseHookCallback.sol",
      "parts": [
       "../base/BaseHookCallback.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../base/SettlementCallbackLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../base/SettlementCallbackLib.sol",
      "parts": [
       "../base/SettlementCallbackLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "PredyPoolQuoter",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "BaseHookCallback"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "_predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "_predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "default",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "BaseHookCallback",
         "arguments": [
          {
           "type": "Identifier",
           "name": "_predyPool"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "predySettlementCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "data",
         "identifier": {
          "type": "Identifier",
          "name": "data"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "data"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "SettlementCallbackLib"
               },
               "memberName": "execSettlement"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "_predyPool"
               },
               {
                "type": "Identifier",
                "name": "quoteToken"
               },
               {
                "type": "Identifier",
                "name": "baseToken"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "SettlementCallbackLib"
                 },
                 "memberName": "decodeParams"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "data"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "baseAmountDelta"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_revertBaseAmountDelta"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "baseAmountDelta"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_revertBaseAmountDelta",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyLocalDefinition",
             "names": [
              {
               "type": "Identifier",
               "name": "ptr"
              }
             ],
             "expression": {
              "type": "AssemblyCall",
              "functionName": "mload",
              "arguments": [
               {
                "type": "HexNumber",
                "value": "0x40"
               }
              ]
             }
            },
            {
             "type": "AssemblyCall",
             "functionName": "mstore",
             "arguments": [
              {
               "type": "AssemblyCall",
               "functionName": "ptr",
               "arguments": []
              },
              {
               "type": "AssemblyCall",
               "functionName": "baseAmountDelta",
               "arguments": []
              }
             ]
            },
            {
             "type": "AssemblyCall",
             "functionName": "revert",
             "arguments": [
              {
               "type": "AssemblyCall",
               "functionName": "ptr",
               "arguments": []
              },
              {
               "type": "DecimalNumber",
               "value": "32"
              }
             ]
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "predyTradeAfterCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes",
             "stateMutability": null
            },
            "name": "data",
            "identifier": {
             "type": "Identifier",
             "name": "data"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "encode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tradeResult"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyCall",
             "functionName": "revert",
             "arguments": [
              {
               "type": "AssemblyCall",
               "functionName": "add",
               "arguments": [
                {
                 "type": "DecimalNumber",
                 "value": "32"
                },
                {
                 "type": "AssemblyCall",
                 "functionName": "data",
                 "arguments": []
                }
               ]
              },
              {
               "type": "AssemblyCall",
               "functionName": "mload",
               "arguments": [
                {
                 "type": "AssemblyCall",
                 "functionName": "data",
                 "arguments": []
                }
               ]
              }
             ]
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPredyPool",
         "arguments": null
        }
       ],
       "override": [
        {
         "type": "UserDefinedTypeName",
         "namePath": "BaseHookCallback"
        }
       ],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteTrade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "TryStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "trade"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tradeParams"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "_getSettlementData"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "settlementParams"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          },
          "returnParameters": null,
          "body": {
           "type": "Block",
           "statements": []
          },
          "catchClauses": [
           {
            "type": "CatchClause",
            "isReasonStringType": false,
            "kind": null,
            "parameters": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "name": "reason",
              "identifier": {
               "type": "Identifier",
               "name": "reason"
              },
              "storageLocation": "memory",
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "body": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "BinaryOperation",
                "operator": "=",
                "left": {
                 "type": "Identifier",
                 "name": "tradeResult"
                },
                "right": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "_parseRevertReasonAsTradeResult"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "reason"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              }
             ]
            }
           }
          ]
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteBaseAmountDelta",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "TryStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "trade"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tradeParams"
            },
            {
             "type": "StringLiteral",
             "value": "",
             "parts": [
              ""
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          },
          "returnParameters": null,
          "body": {
           "type": "Block",
           "statements": []
          },
          "catchClauses": [
           {
            "type": "CatchClause",
            "isReasonStringType": false,
            "kind": null,
            "parameters": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "name": "reason",
              "identifier": {
               "type": "Identifier",
               "name": "reason"
              },
              "storageLocation": "memory",
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "body": {
             "type": "Block",
             "statements": [
              {
               "type": "ReturnStatement",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "_parseRevertReasonAsBaseAmountDelta"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "reason"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             ]
            }
           }
          ]
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteLiquidation",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "closeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "TryStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "execLiquidationCall"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vaultId"
            },
            {
             "type": "Identifier",
             "name": "closeRatio"
            },
            {
             "type": "StringLiteral",
             "value": "",
             "parts": [
              ""
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          },
          "returnParameters": null,
          "body": {
           "type": "Block",
           "statements": []
          },
          "catchClauses": [
           {
            "type": "CatchClause",
            "isReasonStringType": false,
            "kind": null,
            "parameters": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "name": "reason",
              "identifier": {
               "type": "Identifier",
               "name": "reason"
              },
              "storageLocation": "memory",
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "body": {
             "type": "Block",
             "statements": [
              {
               "type": "ReturnStatement",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "_parseRevertReasonAsBaseAmountDelta"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "reason"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             ]
            }
           }
          ]
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteReallocation",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "TryStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "reallocate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "StringLiteral",
             "value": "",
             "parts": [
              ""
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          },
          "returnParameters": null,
          "body": {
           "type": "Block",
           "statements": []
          },
          "catchClauses": [
           {
            "type": "CatchClause",
            "isReasonStringType": false,
            "kind": null,
            "parameters": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "name": "reason",
              "identifier": {
               "type": "Identifier",
               "name": "reason"
              },
              "storageLocation": "memory",
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "body": {
             "type": "Block",
             "statements": [
              {
               "type": "ReturnStatement",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "_parseRevertReasonAsBaseAmountDelta"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "reason"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             ]
            }
           }
          ]
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quotePairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "pairStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "TryStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "revertPairStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          },
          "returnParameters": null,
          "body": {
           "type": "Block",
           "statements": []
          },
          "catchClauses": [
           {
            "type": "CatchClause",
            "isReasonStringType": false,
            "kind": null,
            "parameters": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "name": "reason",
              "identifier": {
               "type": "Identifier",
               "name": "reason"
              },
              "storageLocation": "memory",
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "body": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "BinaryOperation",
                "operator": "=",
                "left": {
                 "type": "Identifier",
                 "name": "pairStatus"
                },
                "right": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "_parseRevertReasonAsPairStatus"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "reason"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              }
             ]
            }
           }
          ]
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteVaultStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.VaultStatus"
         },
         "name": "vaultStatus",
         "identifier": {
          "type": "Identifier",
          "name": "vaultStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "TryStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "revertVaultStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vaultId"
            }
           ],
           "names": [],
           "identifiers": []
          },
          "returnParameters": null,
          "body": {
           "type": "Block",
           "statements": []
          },
          "catchClauses": [
           {
            "type": "CatchClause",
            "isReasonStringType": false,
            "kind": null,
            "parameters": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "name": "reason",
              "identifier": {
               "type": "Identifier",
               "name": "reason"
              },
              "storageLocation": "memory",
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "body": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "BinaryOperation",
                "operator": "=",
                "left": {
                 "type": "Identifier",
                 "name": "vaultStatus"
                },
                "right": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "_parseRevertReasonAsVaultStatus"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "reason"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              }
             ]
            }
           }
          ]
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_parseRevertReasonAsTradeResult",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "reason",
         "identifier": {
          "type": "Identifier",
          "name": "reason"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "reason"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "384",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "InlineAssemblyStatement",
             "language": null,
             "flags": [],
             "body": {
              "type": "AssemblyBlock",
              "operations": [
               {
                "type": "AssemblyCall",
                "functionName": "revert",
                "arguments": [
                 {
                  "type": "AssemblyCall",
                  "functionName": "add",
                  "arguments": [
                   {
                    "type": "DecimalNumber",
                    "value": "32"
                   },
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "mload",
                  "arguments": [
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 }
                ]
               }
              ]
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "abi"
               },
               "memberName": "decode"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "reason"
               },
               {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "IPredyPool"
                  },
                  "memberName": "TradeResult"
                 }
                ],
                "isArray": false
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "private",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "_parseRevertReasonAsBaseAmountDelta",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "reason",
         "identifier": {
          "type": "Identifier",
          "name": "reason"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "reason"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "32",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "InlineAssemblyStatement",
             "language": null,
             "flags": [],
             "body": {
              "type": "AssemblyBlock",
              "operations": [
               {
                "type": "AssemblyCall",
                "functionName": "revert",
                "arguments": [
                 {
                  "type": "AssemblyCall",
                  "functionName": "add",
                  "arguments": [
                   {
                    "type": "DecimalNumber",
                    "value": "32"
                   },
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "mload",
                  "arguments": [
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 }
                ]
               }
              ]
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "reason"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "ElementaryTypeName",
               "name": "int256",
               "stateMutability": null
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "private",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "_parseRevertReasonAsPairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "reason",
         "identifier": {
          "type": "Identifier",
          "name": "reason"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": "pairStatus",
         "identifier": {
          "type": "Identifier",
          "name": "pairStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "reason"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1952",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "InlineAssemblyStatement",
             "language": null,
             "flags": [],
             "body": {
              "type": "AssemblyBlock",
              "operations": [
               {
                "type": "AssemblyCall",
                "functionName": "revert",
                "arguments": [
                 {
                  "type": "AssemblyCall",
                  "functionName": "add",
                  "arguments": [
                   {
                    "type": "DecimalNumber",
                    "value": "32"
                   },
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "mload",
                  "arguments": [
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 }
                ]
               }
              ]
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "abi"
               },
               "memberName": "decode"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "reason"
               },
               {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "DataType"
                  },
                  "memberName": "PairStatus"
                 }
                ],
                "isArray": false
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "private",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "_parseRevertReasonAsVaultStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "reason",
         "identifier": {
          "type": "Identifier",
          "name": "reason"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.VaultStatus"
         },
         "name": "vaultStatus",
         "identifier": {
          "type": "Identifier",
          "name": "vaultStatus"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "reason"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "320",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "InlineAssemblyStatement",
             "language": null,
             "flags": [],
             "body": {
              "type": "AssemblyBlock",
              "operations": [
               {
                "type": "AssemblyCall",
                "functionName": "revert",
                "arguments": [
                 {
                  "type": "AssemblyCall",
                  "functionName": "add",
                  "arguments": [
                   {
                    "type": "DecimalNumber",
                    "value": "32"
                   },
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "mload",
                  "arguments": [
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 }
                ]
               }
              ]
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "abi"
               },
               "memberName": "decode"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "reason"
               },
               {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "IPredyPool"
                  },
                  "memberName": "VaultStatus"
                 }
                ],
                "isArray": false
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "private",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "_getSettlementData",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "filler",
         "identifier": {
          "type": "Identifier",
          "name": "filler"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "encode"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "SettlementCallbackLib"
              },
              "memberName": "SettlementParams"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "filler"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "encodedData"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "maxQuoteAmount"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "price"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "fee"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/lens/PerpMarketQuoter.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../markets/perp/PerpMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../markets/perp/PerpMarket.sol",
      "parts": [
       "../markets/perp/PerpMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PerpMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PerpMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../markets/perp/PerpOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../markets/perp/PerpOrder.sol",
      "parts": [
       "../markets/perp/PerpOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PerpOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PerpOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../markets/perp/PerpOrderV3.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../markets/perp/PerpOrderV3.sol",
      "parts": [
       "../markets/perp/PerpOrderV3.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PerpOrderV3",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PerpOrderV3"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/ISettlement.sol",
      "parts": [
       "../interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IFillerMarket.sol",
      "parts": [
       "../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PerpMarketQuoter",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpMarket"
         },
         "name": "perpMarket",
         "identifier": {
          "type": "Identifier",
          "name": "perpMarket"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpMarket"
         },
         "name": "_perpMarket",
         "identifier": {
          "type": "Identifier",
          "name": "_perpMarket"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "perpMarket"
           },
           "right": {
            "type": "Identifier",
            "name": "_perpMarket"
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteExecuteOrderV3",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpOrderV3"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "filler",
         "identifier": {
          "type": "Identifier",
          "name": "filler"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "TryStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "perpMarket"
            },
            "memberName": "quoteExecuteOrderV3"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "order"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            },
            {
             "type": "Identifier",
             "name": "filler"
            }
           ],
           "names": [],
           "identifiers": []
          },
          "returnParameters": null,
          "body": {
           "type": "Block",
           "statements": []
          },
          "catchClauses": [
           {
            "type": "CatchClause",
            "isReasonStringType": false,
            "kind": null,
            "parameters": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "name": "reason",
              "identifier": {
               "type": "Identifier",
               "name": "reason"
              },
              "storageLocation": "memory",
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "body": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "BinaryOperation",
                "operator": "=",
                "left": {
                 "type": "Identifier",
                 "name": "tradeResult"
                },
                "right": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "_parseRevertReason"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "reason"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              }
             ]
            }
           }
          ]
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_parseRevertReason",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "reason",
         "identifier": {
          "type": "Identifier",
          "name": "reason"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "reason"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "192",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "InlineAssemblyStatement",
             "language": null,
             "flags": [],
             "body": {
              "type": "AssemblyBlock",
              "operations": [
               {
                "type": "AssemblyCall",
                "functionName": "revert",
                "arguments": [
                 {
                  "type": "AssemblyCall",
                  "functionName": "add",
                  "arguments": [
                   {
                    "type": "DecimalNumber",
                    "value": "32"
                   },
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "mload",
                  "arguments": [
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 }
                ]
               }
              ]
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "abi"
               },
               "memberName": "decode"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "reason"
               },
               {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "IPredyPool"
                  },
                  "memberName": "TradeResult"
                 }
                ],
                "isArray": false
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "private",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/lens/GammaTradeMarketQuoter.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../markets/gamma/GammaTradeMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../markets/gamma/GammaTradeMarket.sol",
      "parts": [
       "../markets/gamma/GammaTradeMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GammaTradeMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GammaTradeMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../markets/gamma/GammaOrder.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../markets/gamma/GammaOrder.sol",
      "parts": [
       "../markets/gamma/GammaOrder.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "GammaOrder",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "GammaOrder"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/ISettlement.sol",
      "parts": [
       "../interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IFillerMarket.sol",
      "parts": [
       "../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "GammaTradeMarketQuoter",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarket"
         },
         "name": "gammaTradeMarket",
         "identifier": {
          "type": "Identifier",
          "name": "gammaTradeMarket"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaTradeMarket"
         },
         "name": "_gammaTradeMarket",
         "identifier": {
          "type": "Identifier",
          "name": "_gammaTradeMarket"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "gammaTradeMarket"
           },
           "right": {
            "type": "Identifier",
            "name": "_gammaTradeMarket"
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteTrade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GammaOrder"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParamsV3"
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "TryStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "gammaTradeMarket"
            },
            "memberName": "quoteTrade"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "order"
            },
            {
             "type": "Identifier",
             "name": "settlementData"
            }
           ],
           "names": [],
           "identifiers": []
          },
          "returnParameters": null,
          "body": {
           "type": "Block",
           "statements": []
          },
          "catchClauses": [
           {
            "type": "CatchClause",
            "isReasonStringType": false,
            "kind": null,
            "parameters": [
             {
              "type": "VariableDeclaration",
              "typeName": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "name": "reason",
              "identifier": {
               "type": "Identifier",
               "name": "reason"
              },
              "storageLocation": "memory",
              "isStateVar": false,
              "isIndexed": false,
              "expression": null
             }
            ],
            "body": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "BinaryOperation",
                "operator": "=",
                "left": {
                 "type": "Identifier",
                 "name": "tradeResult"
                },
                "right": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "_parseRevertReason"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "reason"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              }
             ]
            }
           }
          ]
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_parseRevertReason",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "reason",
         "identifier": {
          "type": "Identifier",
          "name": "reason"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "reason"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "192",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "InlineAssemblyStatement",
             "language": null,
             "flags": [],
             "body": {
              "type": "AssemblyBlock",
              "operations": [
               {
                "type": "AssemblyCall",
                "functionName": "revert",
                "arguments": [
                 {
                  "type": "AssemblyCall",
                  "functionName": "add",
                  "arguments": [
                   {
                    "type": "DecimalNumber",
                    "value": "32"
                   },
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 },
                 {
                  "type": "AssemblyCall",
                  "functionName": "mload",
                  "arguments": [
                   {
                    "type": "AssemblyCall",
                    "functionName": "reason",
                    "arguments": []
                   }
                  ]
                 }
                ]
               }
              ]
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "abi"
               },
               "memberName": "decode"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "reason"
               },
               {
                "type": "TupleExpression",
                "components": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "IPredyPool"
                  },
                  "memberName": "TradeResult"
                 }
                ],
                "isArray": false
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "private",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/interfaces/ISupplyToken.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": ">=0.7.0"
    },
    {
     "type": "ContractDefinition",
     "name": "ISupplyToken",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "mint",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "account",
         "identifier": {
          "type": "Identifier",
          "name": "account"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "burn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "account",
         "identifier": {
          "type": "Identifier",
          "name": "account"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "interface"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/interfaces/ISpotMarket.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": ">=0.8.0"
    },
    {
     "type": "ImportDirective",
     "path": "./IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./IFillerMarket.sol",
      "parts": [
       "./IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "ISpotMarket",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "quoteSettlement",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "interface"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/interfaces/ISettlement.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": ">=0.7.0"
    },
    {
     "type": "ContractDefinition",
     "name": "ISettlement",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "swapExactIn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "data",
         "identifier": {
          "type": "Identifier",
          "name": "data"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountIn",
         "identifier": {
          "type": "Identifier",
          "name": "amountIn"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountOutMinimum",
         "identifier": {
          "type": "Identifier",
          "name": "amountOutMinimum"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "recipient",
         "identifier": {
          "type": "Identifier",
          "name": "recipient"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountOut",
         "identifier": {
          "type": "Identifier",
          "name": "amountOut"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "swapExactOut",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "data",
         "identifier": {
          "type": "Identifier",
          "name": "data"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountOut",
         "identifier": {
          "type": "Identifier",
          "name": "amountOut"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountInMaximum",
         "identifier": {
          "type": "Identifier",
          "name": "amountInMaximum"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "recipient",
         "identifier": {
          "type": "Identifier",
          "name": "recipient"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountIn",
         "identifier": {
          "type": "Identifier",
          "name": "amountIn"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteSwapExactIn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "data",
         "identifier": {
          "type": "Identifier",
          "name": "data"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountIn",
         "identifier": {
          "type": "Identifier",
          "name": "amountIn"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountOut",
         "identifier": {
          "type": "Identifier",
          "name": "amountOut"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "quoteSwapExactOut",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "data",
         "identifier": {
          "type": "Identifier",
          "name": "data"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountOut",
         "identifier": {
          "type": "Identifier",
          "name": "amountOut"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amountIn",
         "identifier": {
          "type": "Identifier",
          "name": "amountIn"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "interface"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/interfaces/IPredyPool.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": ">=0.8.0"
    },
    {
     "type": "ImportDirective",
     "path": "./ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./ISettlement.sol",
      "parts": [
       "./ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../libraries/DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../libraries/DataType.sol",
      "parts": [
       "../libraries/DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "IPredyPool",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "CustomErrorDefinition",
       "name": "CallerIsNotOperator",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "CallerIsNotPoolCreator",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "LockedBy",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "locker",
         "identifier": {
          "type": "Identifier",
          "name": "locker"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "CustomErrorDefinition",
       "name": "BaseTokenNotSettled",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "QuoteTokenNotSettled",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "InvalidAmount",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "InvalidPairId",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "VaultIsNotDanger",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "vaultValue",
         "identifier": {
          "type": "Identifier",
          "name": "vaultValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "minMargin",
         "identifier": {
          "type": "Identifier",
          "name": "minMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "CustomErrorDefinition",
       "name": "TraderNotAllowed",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "VaultAlreadyHasAnotherPair",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "VaultAlreadyHasAnotherMarginId",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "CallerIsNotVaultOwner",
       "parameters": []
      },
      {
       "type": "StructDefinition",
       "name": "TradeParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "tradeAmountSqrt",
         "identifier": {
          "type": "Identifier",
          "name": "tradeAmountSqrt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "extraData",
         "identifier": {
          "type": "Identifier",
          "name": "extraData"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "TradeResult",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Payoff"
         },
         "name": "payoff",
         "identifier": {
          "type": "Identifier",
          "name": "payoff"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "minMargin",
         "identifier": {
          "type": "Identifier",
          "name": "minMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "averagePrice",
         "identifier": {
          "type": "Identifier",
          "name": "averagePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtTwap",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtTwap"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "Payoff",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "perpEntryUpdate",
         "identifier": {
          "type": "Identifier",
          "name": "perpEntryUpdate"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "sqrtEntryUpdate",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtEntryUpdate"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "sqrtRebalanceEntryUpdateUnderlying",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtRebalanceEntryUpdateUnderlying"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "sqrtRebalanceEntryUpdateStable",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtRebalanceEntryUpdateStable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "perpPayoff",
         "identifier": {
          "type": "Identifier",
          "name": "perpPayoff"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "sqrtPayoff",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPayoff"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "Position",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "margin",
         "identifier": {
          "type": "Identifier",
          "name": "margin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amountQuote",
         "identifier": {
          "type": "Identifier",
          "name": "amountQuote"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amountSqrt",
         "identifier": {
          "type": "Identifier",
          "name": "amountSqrt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "amountBase",
         "identifier": {
          "type": "Identifier",
          "name": "amountBase"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "VaultStatus",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "id",
         "identifier": {
          "type": "Identifier",
          "name": "id"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "vaultValue",
         "identifier": {
          "type": "Identifier",
          "name": "vaultValue"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "minMargin",
         "identifier": {
          "type": "Identifier",
          "name": "minMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "oraclePrice",
         "identifier": {
          "type": "Identifier",
          "name": "oraclePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.FeeAmount"
         },
         "name": "feeAmount",
         "identifier": {
          "type": "Identifier",
          "name": "feeAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": "position",
         "identifier": {
          "type": "Identifier",
          "name": "position"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "trade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "execLiquidationCall",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "closeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "reallocate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "relocationOccurred",
         "identifier": {
          "type": "Identifier",
          "name": "relocationOccurred"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateRecepient",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "recipient",
         "identifier": {
          "type": "Identifier",
          "name": "recipient"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "createVault",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "take",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteAsset",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteAsset"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "to",
         "identifier": {
          "type": "Identifier",
          "name": "to"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtIndexPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getVault",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getPairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "revertPairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "revertVaultStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "interface"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/interfaces/IHooks.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": ">=0.7.0"
    },
    {
     "type": "ImportDirective",
     "path": "./IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./IPredyPool.sol",
      "parts": [
       "./IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "IHooks",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "predySettlementCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "predyTradeAfterCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "interface"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/interfaces/IFillerMarket.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": ">=0.8.0"
    },
    {
     "type": "ContractDefinition",
     "name": "IFillerMarket",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "CustomErrorDefinition",
       "name": "SignerIsNotVaultOwner",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "CallerIsNotFiller",
       "parameters": []
      },
      {
       "type": "CustomErrorDefinition",
       "name": "SettlementContractIsNotWhitelisted",
       "parameters": []
      },
      {
       "type": "StructDefinition",
       "name": "SignedOrder",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "sig",
         "identifier": {
          "type": "Identifier",
          "name": "sig"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "SettlementParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "contractAddress",
         "identifier": {
          "type": "Identifier",
          "name": "contractAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "encodedData",
         "identifier": {
          "type": "Identifier",
          "name": "encodedData"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "maxQuoteAmount",
         "identifier": {
          "type": "Identifier",
          "name": "maxQuoteAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "SettlementParamsV3",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "contractAddress",
         "identifier": {
          "type": "Identifier",
          "name": "contractAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "encodedData",
         "identifier": {
          "type": "Identifier",
          "name": "encodedData"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "maxQuoteAmountPrice",
         "identifier": {
          "type": "Identifier",
          "name": "maxQuoteAmountPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "minQuoteAmountPrice",
         "identifier": {
          "type": "Identifier",
          "name": "minQuoteAmountPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "feePrice",
         "identifier": {
          "type": "Identifier",
          "name": "feePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "minFee",
         "identifier": {
          "type": "Identifier",
          "name": "minFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      }
     ],
     "kind": "interface"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/base/SettlementCallbackLib.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/ISettlement.sol",
      "parts": [
       "../interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../libraries/Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../libraries/Constants.sol",
      "parts": [
       "../libraries/Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../libraries/math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../libraries/math/Math.sol",
      "parts": [
       "../libraries/math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Math",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Math"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IFillerMarket.sol",
      "parts": [
       "../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IFillerMarket",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IFillerMarket"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "SettlementCallbackLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "uint256",
        "stateMutability": null
       },
       "libraryName": "Math",
       "functions": [],
       "operators": []
      },
      {
       "type": "StructDefinition",
       "name": "SettlementParams",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "sender",
         "identifier": {
          "type": "Identifier",
          "name": "sender"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "contractAddress",
         "identifier": {
          "type": "Identifier",
          "name": "contractAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "encodedData",
         "identifier": {
          "type": "Identifier",
          "name": "encodedData"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "maxQuoteAmount",
         "identifier": {
          "type": "Identifier",
          "name": "maxQuoteAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "decodeParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "settlementData"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "SettlementParams"
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "validate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "settlementContractAddress"
          },
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "bool",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "_whiteListedSettlements",
         "identifier": {
          "type": "Identifier",
          "name": "_whiteListedSettlements"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "!=",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "contractAddress"
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             ],
             "names": [],
             "identifiers": []
            }
           },
           "right": {
            "type": "UnaryOperation",
            "operator": "!",
            "subExpression": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "_whiteListedSettlements"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "settlementParams"
              },
              "memberName": "contractAddress"
             }
            },
            "isPrefix": true
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "IFillerMarket"
               },
               "memberName": "SettlementContractIsNotWhitelisted"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "execSettlement",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "fee"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransferFrom"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "settlementParams"
                },
                "memberName": "sender"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "predyPool"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "settlementParams"
                   },
                   "memberName": "fee"
                  },
                  "isPrefix": true
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "execSettlementInternal"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "predyPool"
            },
            {
             "type": "Identifier",
             "name": "quoteToken"
            },
            {
             "type": "Identifier",
             "name": "baseToken"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            },
            {
             "type": "Identifier",
             "name": "baseAmountDelta"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "fee"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "predyPool"
               },
               "memberName": "take"
              },
              "arguments": [
               {
                "type": "BooleanLiteral",
                "value": true
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "settlementParams"
                },
                "memberName": "sender"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "settlementParams"
                  },
                  "memberName": "fee"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "execSettlementInternal",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "baseAmountDelta"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "sell"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "predyPool"
               },
               {
                "type": "Identifier",
                "name": "quoteToken"
               },
               {
                "type": "Identifier",
                "name": "baseToken"
               },
               {
                "type": "Identifier",
                "name": "settlementParams"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "settlementParams"
                },
                "memberName": "sender"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "settlementParams"
                },
                "memberName": "price"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "baseAmountDelta"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "baseAmountDelta"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "buy"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "predyPool"
                },
                {
                 "type": "Identifier",
                 "name": "quoteToken"
                },
                {
                 "type": "Identifier",
                 "name": "baseToken"
                },
                {
                 "type": "Identifier",
                 "name": "settlementParams"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "settlementParams"
                 },
                 "memberName": "sender"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "settlementParams"
                 },
                 "memberName": "price"
                },
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "UnaryOperation",
                   "operator": "-",
                   "subExpression": {
                    "type": "Identifier",
                    "name": "baseAmountDelta"
                   },
                   "isPrefix": true
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            ]
           },
           "falseBody": null
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "sell",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "sender",
         "identifier": {
          "type": "Identifier",
          "name": "sender"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sellAmount",
         "identifier": {
          "type": "Identifier",
          "name": "sellAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "contractAddress"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "sellAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "predyPool"
               },
               "memberName": "take"
              },
              "arguments": [
               {
                "type": "BooleanLiteral",
                "value": false
               },
               {
                "type": "Identifier",
                "name": "sender"
               },
               {
                "type": "Identifier",
                "name": "sellAmount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransferFrom"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "sender"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "predyPool"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "quoteAmount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "predyPool"
            },
            "memberName": "take"
           },
           "arguments": [
            {
             "type": "BooleanLiteral",
             "value": false
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "sellAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "baseToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "approve"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "sellAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "quoteAmountFromUni",
            "identifier": {
             "type": "Identifier",
             "name": "quoteAmountFromUni"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ISettlement"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "swapExactIn"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quoteToken"
            },
            {
             "type": "Identifier",
             "name": "baseToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "encodedData"
            },
            {
             "type": "Identifier",
             "name": "sellAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "maxQuoteAmount"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "price"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "predyPool"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "quoteAmountFromUni"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "sellAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "quoteAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "quoteAmountFromUni"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "Identifier",
                    "name": "ERC20"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "quoteToken"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  "memberName": "safeTransferFrom"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "sender"
                  },
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "Identifier",
                    "name": "address"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "this"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "Identifier",
                    "name": "quoteAmount"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "quoteAmountFromUni"
                   }
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": ">",
               "left": {
                "type": "Identifier",
                "name": "quoteAmountFromUni"
               },
               "right": {
                "type": "Identifier",
                "name": "quoteAmount"
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "ERC20"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "quoteToken"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   "memberName": "safeTransfer"
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "sender"
                   },
                   {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "Identifier",
                     "name": "quoteAmountFromUni"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "quoteAmount"
                    }
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "predyPool"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "quoteAmount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "buy",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "sender",
         "identifier": {
          "type": "Identifier",
          "name": "sender"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "buyAmount",
         "identifier": {
          "type": "Identifier",
          "name": "buyAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "memberName": "contractAddress"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "buyAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "predyPool"
               },
               "memberName": "take"
              },
              "arguments": [
               {
                "type": "BooleanLiteral",
                "value": true
               },
               {
                "type": "Identifier",
                "name": "sender"
               },
               {
                "type": "Identifier",
                "name": "quoteAmount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "baseToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransferFrom"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "sender"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "predyPool"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "buyAmount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "predyPool"
            },
            "memberName": "take"
           },
           "arguments": [
            {
             "type": "BooleanLiteral",
             "value": true
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "maxQuoteAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ERC20"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "quoteToken"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "approve"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "maxQuoteAmount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "quoteAmountToUni",
            "identifier": {
             "type": "Identifier",
             "name": "quoteAmountToUni"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "ISettlement"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "swapExactOut"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quoteToken"
            },
            {
             "type": "Identifier",
             "name": "baseToken"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "encodedData"
            },
            {
             "type": "Identifier",
             "name": "buyAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParams"
             },
             "memberName": "maxQuoteAmount"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "predyPool"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "price"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "predyPool"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "settlementParams"
                 },
                 "memberName": "maxQuoteAmount"
                },
                "right": {
                 "type": "Identifier",
                 "name": "quoteAmountToUni"
                }
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "quoteAmount",
               "identifier": {
                "type": "Identifier",
                "name": "quoteAmount"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "/",
              "left": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "Identifier",
                "name": "buyAmount"
               },
               "right": {
                "type": "Identifier",
                "name": "price"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Constants"
               },
               "memberName": "Q96"
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "quoteAmount"
              },
              "right": {
               "type": "Identifier",
               "name": "quoteAmountToUni"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "Identifier",
                    "name": "ERC20"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "quoteToken"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  "memberName": "safeTransfer"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "sender"
                  },
                  {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "Identifier",
                    "name": "quoteAmount"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "quoteAmountToUni"
                   }
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": ">",
               "left": {
                "type": "Identifier",
                "name": "quoteAmountToUni"
               },
               "right": {
                "type": "Identifier",
                "name": "quoteAmount"
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "ERC20"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "quoteToken"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   "memberName": "safeTransferFrom"
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "sender"
                   },
                   {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "address"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "this"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "Identifier",
                     "name": "quoteAmountToUni"
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "quoteAmount"
                    }
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              },
              "falseBody": null
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "quoteToken"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "predyPool"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "settlementParams"
                 },
                 "memberName": "maxQuoteAmount"
                },
                "right": {
                 "type": "Identifier",
                 "name": "quoteAmount"
                }
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/base/BaseMarketUpgradable.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "./BaseHookCallbackUpgradable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./BaseHookCallbackUpgradable.sol",
      "parts": [
       "./BaseHookCallbackUpgradable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "BaseHookCallbackUpgradable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "BaseHookCallbackUpgradable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../lens/PredyPoolQuoter.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../lens/PredyPoolQuoter.sol",
      "parts": [
       "../lens/PredyPoolQuoter.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PredyPoolQuoter",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PredyPoolQuoter"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../libraries/DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../libraries/DataType.sol",
      "parts": [
       "../libraries/DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IFillerMarket.sol",
      "parts": [
       "../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./SettlementCallbackLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./SettlementCallbackLib.sol",
      "parts": [
       "./SettlementCallbackLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "BaseMarketUpgradable",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "IFillerMarket"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "BaseHookCallbackUpgradable"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "StructDefinition",
       "name": "SettlementParamsV3Internal",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "filler",
         "identifier": {
          "type": "Identifier",
          "name": "filler"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "contractAddress",
         "identifier": {
          "type": "Identifier",
          "name": "contractAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "encodedData",
         "identifier": {
          "type": "Identifier",
          "name": "encodedData"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "maxQuoteAmountPrice",
         "identifier": {
          "type": "Identifier",
          "name": "maxQuoteAmountPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "minQuoteAmountPrice",
         "identifier": {
          "type": "Identifier",
          "name": "minQuoteAmountPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "feePrice",
         "identifier": {
          "type": "Identifier",
          "name": "feePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "minFee",
         "identifier": {
          "type": "Identifier",
          "name": "minFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "whitelistFiller",
         "identifier": {
          "type": "Identifier",
          "name": "whitelistFiller"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PredyPoolQuoter"
         },
         "name": "_quoter",
         "identifier": {
          "type": "Identifier",
          "name": "_quoter"
         },
         "expression": null,
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "pairId"
          },
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "valueName": {
           "type": "Identifier",
           "name": "quoteTokenAddress"
          }
         },
         "name": "_quoteTokenMap",
         "identifier": {
          "type": "Identifier",
          "name": "_quoteTokenMap"
         },
         "expression": null,
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "settlementContractAddress"
          },
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "bool",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "_whiteListedSettlements",
         "identifier": {
          "type": "Identifier",
          "name": "_whiteListedSettlements"
         },
         "expression": null,
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyFiller",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           },
           "right": {
            "type": "Identifier",
            "name": "whitelistFiller"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "CallerIsNotFiller"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "__BaseMarket_init",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_whitelistFiller",
         "identifier": {
          "type": "Identifier",
          "name": "_whitelistFiller"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoterAddress",
         "identifier": {
          "type": "Identifier",
          "name": "quoterAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__BaseHookCallback_init"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "predyPool"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "whitelistFiller"
           },
           "right": {
            "type": "Identifier",
            "name": "_whitelistFiller"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_quoter"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "PredyPoolQuoter"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "quoterAddress"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyInitializing",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "predySettlementCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "SettlementCallbackLib.SettlementParams"
            },
            "name": "settlementParams",
            "identifier": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "decodeParamsV3"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "settlementData"
            },
            {
             "type": "Identifier",
             "name": "baseAmountDelta"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SettlementCallbackLib"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_whiteListedSettlements"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SettlementCallbackLib"
            },
            "memberName": "execSettlement"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_predyPool"
            },
            {
             "type": "Identifier",
             "name": "quoteToken"
            },
            {
             "type": "Identifier",
             "name": "baseToken"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            },
            {
             "type": "Identifier",
             "name": "baseAmountDelta"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPredyPool",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "decodeParamsV3",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "SettlementCallbackLib.SettlementParams"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "SettlementParamsV3Internal"
            },
            "name": "settlementParamsV3",
            "identifier": {
             "type": "Identifier",
             "name": "settlementParamsV3"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "decode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "settlementData"
            },
            {
             "type": "TupleExpression",
             "components": [
              {
               "type": "Identifier",
               "name": "SettlementParamsV3Internal"
              }
             ],
             "isArray": false
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "tradeAmountAbs",
            "identifier": {
             "type": "Identifier",
             "name": "tradeAmountAbs"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Math"
            },
            "memberName": "abs"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "baseAmountDelta"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "fee",
            "identifier": {
             "type": "Identifier",
             "name": "fee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParamsV3"
             },
             "memberName": "feePrice"
            },
            "right": {
             "type": "Identifier",
             "name": "tradeAmountAbs"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Constants"
            },
            "memberName": "Q96"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "fee"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "settlementParamsV3"
            },
            "memberName": "minFee"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "fee"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParamsV3"
               },
               "memberName": "minFee"
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "maxQuoteAmount",
            "identifier": {
             "type": "Identifier",
             "name": "maxQuoteAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParamsV3"
             },
             "memberName": "maxQuoteAmountPrice"
            },
            "right": {
             "type": "Identifier",
             "name": "tradeAmountAbs"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Constants"
            },
            "memberName": "Q96"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "minQuoteAmount",
            "identifier": {
             "type": "Identifier",
             "name": "minQuoteAmount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParamsV3"
             },
             "memberName": "minQuoteAmountPrice"
            },
            "right": {
             "type": "Identifier",
             "name": "tradeAmountAbs"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "Constants"
            },
            "memberName": "Q96"
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SettlementCallbackLib"
            },
            "memberName": "SettlementParams"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParamsV3"
             },
             "memberName": "filler"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParamsV3"
             },
             "memberName": "contractAddress"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParamsV3"
             },
             "memberName": "encodedData"
            },
            {
             "type": "Conditional",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "baseAmountDelta"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueExpression": {
              "type": "Identifier",
              "name": "minQuoteAmount"
             },
             "falseExpression": {
              "type": "Identifier",
              "name": "maxQuoteAmount"
             }
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "settlementParamsV3"
             },
             "memberName": "price"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "int256",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "fee"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "reallocate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "relocationOccurred",
         "identifier": {
          "type": "Identifier",
          "name": "relocationOccurred"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "reallocate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "_getSettlementDataFromV3"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "settlementParams"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "execLiquidationCall",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "closeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "execLiquidationCall"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vaultId"
            },
            {
             "type": "Identifier",
             "name": "closeRatio"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "_getSettlementDataFromV3"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "settlementParams"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": true,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_getSettlementDataFromV3",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParamsV3"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "filler",
         "identifier": {
          "type": "Identifier",
          "name": "filler"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "encode"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "SettlementParamsV3Internal"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "filler"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "encodedData"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "maxQuoteAmountPrice"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "minQuoteAmountPrice"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "price"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "feePrice"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "minFee"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "updateWhitelistFiller",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "newWhitelistFiller",
         "identifier": {
          "type": "Identifier",
          "name": "newWhitelistFiller"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "whitelistFiller"
           },
           "right": {
            "type": "Identifier",
            "name": "newWhitelistFiller"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyFiller",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateQuoter",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "newQuoter",
         "identifier": {
          "type": "Identifier",
          "name": "newQuoter"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_quoter"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "PredyPoolQuoter"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "newQuoter"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyFiller",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateWhitelistSettlement",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "settlementContractAddress",
         "identifier": {
          "type": "Identifier",
          "name": "settlementContractAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isEnabled",
         "identifier": {
          "type": "Identifier",
          "name": "isEnabled"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "_whiteListedSettlements"
            },
            "index": {
             "type": "Identifier",
             "name": "settlementContractAddress"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "isEnabled"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyFiller",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateQuoteTokenMap",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "_quoteTokenMap"
            },
            "index": {
             "type": "Identifier",
             "name": "pairId"
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "_quoteTokenMap"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "_getQuoteTokenAddress"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "pairId"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_validateQuoteTokenAddress",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "entryTokenAddress",
         "identifier": {
          "type": "Identifier",
          "name": "entryTokenAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "_quoteTokenMap"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "Identifier",
               "name": "entryTokenAddress"
              },
              "right": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "_quoteTokenMap"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              }
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_getQuoteTokenAddress",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pairStatus",
            "identifier": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getPairStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "memberName": "quotePool"
           },
           "memberName": "token"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_revertTradeResult",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes",
             "stateMutability": null
            },
            "name": "data",
            "identifier": {
             "type": "Identifier",
             "name": "data"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "encode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tradeResult"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyCall",
             "functionName": "revert",
             "arguments": [
              {
               "type": "AssemblyCall",
               "functionName": "add",
               "arguments": [
                {
                 "type": "DecimalNumber",
                 "value": "32"
                },
                {
                 "type": "AssemblyCall",
                 "functionName": "data",
                 "arguments": []
                }
               ]
              },
              {
               "type": "AssemblyCall",
               "functionName": "mload",
               "arguments": [
                {
                 "type": "AssemblyCall",
                 "functionName": "data",
                 "arguments": []
                }
               ]
              }
             ]
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "abstract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/base/BaseMarket.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/auth/Owned.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/auth/Owned.sol",
      "parts": [
       "@solmate/src/auth/Owned.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Owned",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Owned"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./BaseHookCallback.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./BaseHookCallback.sol",
      "parts": [
       "./BaseHookCallback.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../lens/PredyPoolQuoter.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../lens/PredyPoolQuoter.sol",
      "parts": [
       "../lens/PredyPoolQuoter.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PredyPoolQuoter",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PredyPoolQuoter"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IFillerMarket.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IFillerMarket.sol",
      "parts": [
       "../interfaces/IFillerMarket.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "./SettlementCallbackLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./SettlementCallbackLib.sol",
      "parts": [
       "./SettlementCallbackLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "BaseMarket",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "IFillerMarket"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "BaseHookCallback"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "Owned"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "whitelistFiller",
         "identifier": {
          "type": "Identifier",
          "name": "whitelistFiller"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PredyPoolQuoter"
         },
         "name": "_quoter",
         "identifier": {
          "type": "Identifier",
          "name": "_quoter"
         },
         "expression": null,
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "pairId"
          },
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "valueName": {
           "type": "Identifier",
           "name": "quoteTokenAddress"
          }
         },
         "name": "_quoteTokenMap",
         "identifier": {
          "type": "Identifier",
          "name": "_quoteTokenMap"
         },
         "expression": null,
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "settlementContractAddress"
          },
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "bool",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "_whiteListedSettlements",
         "identifier": {
          "type": "Identifier",
          "name": "_whiteListedSettlements"
         },
         "expression": null,
         "visibility": "internal",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_whitelistFiller",
         "identifier": {
          "type": "Identifier",
          "name": "_whitelistFiller"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoterAddress",
         "identifier": {
          "type": "Identifier",
          "name": "quoterAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "whitelistFiller"
           },
           "right": {
            "type": "Identifier",
            "name": "_whitelistFiller"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_quoter"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "PredyPoolQuoter"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "quoterAddress"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "BaseHookCallback",
         "arguments": [
          {
           "type": "Identifier",
           "name": "predyPool"
          }
         ]
        },
        {
         "type": "ModifierInvocation",
         "name": "Owned",
         "arguments": [
          {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "msg"
           },
           "memberName": "sender"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "predySettlementCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "quoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "baseToken",
         "identifier": {
          "type": "Identifier",
          "name": "baseToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "baseAmountDelta",
         "identifier": {
          "type": "Identifier",
          "name": "baseAmountDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "SettlementCallbackLib.SettlementParams"
            },
            "name": "settlementParams",
            "identifier": {
             "type": "Identifier",
             "name": "settlementParams"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SettlementCallbackLib"
            },
            "memberName": "decodeParams"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "settlementData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SettlementCallbackLib"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_whiteListedSettlements"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SettlementCallbackLib"
            },
            "memberName": "execSettlement"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_predyPool"
            },
            {
             "type": "Identifier",
             "name": "quoteToken"
            },
            {
             "type": "Identifier",
             "name": "baseToken"
            },
            {
             "type": "Identifier",
             "name": "settlementParams"
            },
            {
             "type": "Identifier",
             "name": "baseAmountDelta"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPredyPool",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "reallocate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "relocationOccurred",
         "identifier": {
          "type": "Identifier",
          "name": "relocationOccurred"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "reallocate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "_getSettlementData"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "settlementParams"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "execLiquidationCall",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "closeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "execLiquidationCall"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vaultId"
            },
            {
             "type": "Identifier",
             "name": "closeRatio"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "_getSettlementData"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "settlementParams"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_getSettlementData",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_getSettlementData"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "settlementParams"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_getSettlementData",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFillerMarket.SettlementParams"
         },
         "name": "settlementParams",
         "identifier": {
          "type": "Identifier",
          "name": "settlementParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "filler",
         "identifier": {
          "type": "Identifier",
          "name": "filler"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "encode"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "SettlementCallbackLib"
              },
              "memberName": "SettlementParams"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "filler"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "contractAddress"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "encodedData"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "maxQuoteAmount"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "price"
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "settlementParams"
               },
               "memberName": "fee"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "updateWhitelistFiller",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "newWhitelistFiller",
         "identifier": {
          "type": "Identifier",
          "name": "newWhitelistFiller"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "whitelistFiller"
           },
           "right": {
            "type": "Identifier",
            "name": "newWhitelistFiller"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateWhitelistSettlement",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "settlementContractAddress",
         "identifier": {
          "type": "Identifier",
          "name": "settlementContractAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isEnabled",
         "identifier": {
          "type": "Identifier",
          "name": "isEnabled"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "_whiteListedSettlements"
            },
            "index": {
             "type": "Identifier",
             "name": "settlementContractAddress"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "isEnabled"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateQuoteTokenMap",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "_quoteTokenMap"
            },
            "index": {
             "type": "Identifier",
             "name": "pairId"
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "_quoteTokenMap"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "_getQuoteTokenAddress"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "pairId"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_validateQuoteTokenAddress",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "entryTokenAddress",
         "identifier": {
          "type": "Identifier",
          "name": "entryTokenAddress"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "_quoteTokenMap"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "Identifier",
               "name": "entryTokenAddress"
              },
              "right": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "_quoteTokenMap"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              }
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_getQuoteTokenAddress",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.PairStatus"
            },
            "name": "pairStatus",
            "identifier": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "_predyPool"
            },
            "memberName": "getPairStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "MemberAccess",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "pairStatus"
            },
            "memberName": "quotePool"
           },
           "memberName": "token"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_revertTradeResult",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes",
             "stateMutability": null
            },
            "name": "data",
            "identifier": {
             "type": "Identifier",
             "name": "data"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "abi"
            },
            "memberName": "encode"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tradeResult"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "InlineAssemblyStatement",
          "language": null,
          "flags": [],
          "body": {
           "type": "AssemblyBlock",
           "operations": [
            {
             "type": "AssemblyCall",
             "functionName": "revert",
             "arguments": [
              {
               "type": "AssemblyCall",
               "functionName": "add",
               "arguments": [
                {
                 "type": "DecimalNumber",
                 "value": "32"
                },
                {
                 "type": "AssemblyCall",
                 "functionName": "data",
                 "arguments": []
                }
               ]
              },
              {
               "type": "AssemblyCall",
               "functionName": "mload",
               "arguments": [
                {
                 "type": "AssemblyCall",
                 "functionName": "data",
                 "arguments": []
                }
               ]
              }
             ]
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      }
     ],
     "kind": "abstract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/base/BaseHookCallbackUpgradable.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin-upgradeable/contracts/proxy/utils/Initializable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin-upgradeable/contracts/proxy/utils/Initializable.sol",
      "parts": [
       "@openzeppelin-upgradeable/contracts/proxy/utils/Initializable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Initializable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Initializable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IHooks.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IHooks.sol",
      "parts": [
       "../interfaces/IHooks.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "BaseHookCallbackUpgradable",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "Initializable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "IHooks"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "_predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "_predyPool"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "CustomErrorDefinition",
       "name": "CallerIsNotPredyPool",
       "parameters": []
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyPredyPool",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_predyPool"
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "CallerIsNotPredyPool"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "FunctionDefinition",
       "name": "__BaseHookCallback_init",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_predyPool"
           },
           "right": {
            "type": "Identifier",
            "name": "predyPool"
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyInitializing",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "predyTradeAfterCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": true,
       "stateMutability": null
      }
     ],
     "kind": "abstract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/base/BaseHookCallback.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IPredyPool.sol",
      "parts": [
       "../interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "../interfaces/IHooks.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "../interfaces/IHooks.sol",
      "parts": [
       "../interfaces/IHooks.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ContractDefinition",
     "name": "BaseHookCallback",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "IHooks"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "_predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "_predyPool"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "CustomErrorDefinition",
       "name": "CallerIsNotPredyPool",
       "parameters": []
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool"
         },
         "name": "predyPool",
         "identifier": {
          "type": "Identifier",
          "name": "predyPool"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_predyPool"
           },
           "right": {
            "type": "Identifier",
            "name": "predyPool"
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyPredyPool",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_predyPool"
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "CallerIsNotPredyPool"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "FunctionDefinition",
       "name": "predyTradeAfterCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPredyPool.TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": true,
       "stateMutability": null
      }
     ],
     "kind": "abstract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/PriceFeed.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/FixedPointMathLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/FixedPointMathLib.sol",
      "parts": [
       "@solmate/src/utils/FixedPointMathLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "FixedPointMathLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "FixedPointMathLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./vendors/AggregatorV3Interface.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./vendors/AggregatorV3Interface.sol",
      "parts": [
       "./vendors/AggregatorV3Interface.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "AggregatorV3Interface",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "AggregatorV3Interface"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./vendors/IPyth.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./vendors/IPyth.sol",
      "parts": [
       "./vendors/IPyth.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPyth",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPyth"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/Constants.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/Constants.sol",
      "parts": [
       "./libraries/Constants.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Constants",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Constants"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PriceFeedFactory",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_pyth",
         "identifier": {
          "type": "Identifier",
          "name": "_pyth"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "EventDefinition",
       "name": "PriceFeedCreated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quotePrice",
         "identifier": {
          "type": "Identifier",
          "name": "quotePrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "priceId",
         "identifier": {
          "type": "Identifier",
          "name": "priceId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decimalsDiff",
         "identifier": {
          "type": "Identifier",
          "name": "decimalsDiff"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "priceFeed",
         "identifier": {
          "type": "Identifier",
          "name": "priceFeed"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "pyth",
         "identifier": {
          "type": "Identifier",
          "name": "pyth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_pyth"
           },
           "right": {
            "type": "Identifier",
            "name": "pyth"
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "createPriceFeed",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quotePrice",
         "identifier": {
          "type": "Identifier",
          "name": "quotePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "priceId",
         "identifier": {
          "type": "Identifier",
          "name": "priceId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decimalsDiff",
         "identifier": {
          "type": "Identifier",
          "name": "decimalsDiff"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PriceFeed"
            },
            "name": "priceFeed",
            "identifier": {
             "type": "Identifier",
             "name": "priceFeed"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "NewExpression",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PriceFeed"
            }
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quotePrice"
            },
            {
             "type": "Identifier",
             "name": "_pyth"
            },
            {
             "type": "Identifier",
             "name": "priceId"
            },
            {
             "type": "Identifier",
             "name": "decimalsDiff"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "PriceFeedCreated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "quotePrice"
            },
            {
             "type": "Identifier",
             "name": "priceId"
            },
            {
             "type": "Identifier",
             "name": "decimalsDiff"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "priceFeed"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "address"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "priceFeed"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    },
    {
     "type": "ContractDefinition",
     "name": "PriceFeed",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_quotePriceFeed",
         "identifier": {
          "type": "Identifier",
          "name": "_quotePriceFeed"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_pyth",
         "identifier": {
          "type": "Identifier",
          "name": "_pyth"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_decimalsDiff",
         "identifier": {
          "type": "Identifier",
          "name": "_decimalsDiff"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "_priceId",
         "identifier": {
          "type": "Identifier",
          "name": "_priceId"
         },
         "expression": null,
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": true,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "VALID_TIME_PERIOD",
         "identifier": {
          "type": "Identifier",
          "name": "VALID_TIME_PERIOD"
         },
         "expression": {
          "type": "BinaryOperation",
          "operator": "*",
          "left": {
           "type": "NumberLiteral",
           "number": "5",
           "subdenomination": null
          },
          "right": {
           "type": "NumberLiteral",
           "number": "60",
           "subdenomination": null
          }
         },
         "visibility": "private",
         "isStateVar": true,
         "isDeclaredConst": true,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "BinaryOperation",
        "operator": "*",
        "left": {
         "type": "NumberLiteral",
         "number": "5",
         "subdenomination": null
        },
        "right": {
         "type": "NumberLiteral",
         "number": "60",
         "subdenomination": null
        }
       }
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "quotePrice",
         "identifier": {
          "type": "Identifier",
          "name": "quotePrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "pyth",
         "identifier": {
          "type": "Identifier",
          "name": "pyth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "priceId",
         "identifier": {
          "type": "Identifier",
          "name": "priceId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "decimalsDiff",
         "identifier": {
          "type": "Identifier",
          "name": "decimalsDiff"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_quotePriceFeed"
           },
           "right": {
            "type": "Identifier",
            "name": "quotePrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_pyth"
           },
           "right": {
            "type": "Identifier",
            "name": "pyth"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_priceId"
           },
           "right": {
            "type": "Identifier",
            "name": "priceId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "_decimalsDiff"
           },
           "right": {
            "type": "Identifier",
            "name": "decimalsDiff"
           }
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtPrice",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "sqrtPrice",
         "identifier": {
          "type": "Identifier",
          "name": "sqrtPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           null,
           {
            "type": "VariableDeclaration",
            "name": "quoteAnswer",
            "identifier": {
             "type": "Identifier",
             "name": "quoteAnswer"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           null,
           null,
           null
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "AggregatorV3Interface"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "_quotePriceFeed"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "latestRoundData"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IPyth.Price"
            },
            "name": "basePrice",
            "identifier": {
             "type": "Identifier",
             "name": "basePrice"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "IPyth"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "_pyth"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "getPriceNoOlderThan"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_priceId"
            },
            {
             "type": "Identifier",
             "name": "VALID_TIME_PERIOD"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "basePrice"
              },
              "memberName": "expo"
             },
             "right": {
              "type": "UnaryOperation",
              "operator": "-",
              "subExpression": {
               "type": "NumberLiteral",
               "number": "8",
               "subdenomination": null
              },
              "isPrefix": true
             }
            },
            {
             "type": "StringLiteral",
             "value": "INVALID_EXP",
             "parts": [
              "INVALID_EXP"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "quoteAnswer"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "basePrice"
               },
               "memberName": "price"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "price",
            "identifier": {
             "type": "Identifier",
             "name": "price"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "basePrice"
                 },
                 "memberName": "price"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "Constants"
             },
             "memberName": "Q96"
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "quoteAnswer"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "price"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "BinaryOperation",
             "operator": "*",
             "left": {
              "type": "Identifier",
              "name": "price"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "Constants"
              },
              "memberName": "Q96"
             }
            },
            "right": {
             "type": "Identifier",
             "name": "_decimalsDiff"
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "sqrtPrice"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "FixedPointMathLib"
             },
             "memberName": "sqrt"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "price"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "/home/jameschong/Projects/audits-kd/code4renas/projects/2024-05-predy/src/PredyPool.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "^0.8.17"
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol",
      "parts": [
       "@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IUniswapV3Pool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IUniswapV3Pool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@uniswap/v3-core/contracts/interfaces/callback/IUniswapV3MintCallback.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@uniswap/v3-core/contracts/interfaces/callback/IUniswapV3MintCallback.sol",
      "parts": [
       "@uniswap/v3-core/contracts/interfaces/callback/IUniswapV3MintCallback.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IUniswapV3MintCallback",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IUniswapV3MintCallback"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin-upgradeable/contracts/proxy/utils/Initializable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin-upgradeable/contracts/proxy/utils/Initializable.sol",
      "parts": [
       "@openzeppelin-upgradeable/contracts/proxy/utils/Initializable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Initializable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Initializable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/utils/SafeTransferLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/utils/SafeTransferLib.sol",
      "parts": [
       "@solmate/src/utils/SafeTransferLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SafeTransferLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SafeTransferLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol",
      "parts": [
       "@openzeppelin-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ReentrancyGuardUpgradeable",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ReentrancyGuardUpgradeable"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "@solmate/src/tokens/ERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@solmate/src/tokens/ERC20.sol",
      "parts": [
       "@solmate/src/tokens/ERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ERC20",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ERC20"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./interfaces/IPredyPool.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./interfaces/IPredyPool.sol",
      "parts": [
       "./interfaces/IPredyPool.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IPredyPool",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IPredyPool"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./interfaces/IHooks.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./interfaces/IHooks.sol",
      "parts": [
       "./interfaces/IHooks.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "IHooks",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "IHooks"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./interfaces/ISettlement.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./interfaces/ISettlement.sol",
      "parts": [
       "./interfaces/ISettlement.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ISettlement",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ISettlement"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/Perp.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/Perp.sol",
      "parts": [
       "./libraries/Perp.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "Perp",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "Perp"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/VaultLib.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/VaultLib.sol",
      "parts": [
       "./libraries/VaultLib.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "VaultLib",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "VaultLib"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/PositionCalculator.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/PositionCalculator.sol",
      "parts": [
       "./libraries/PositionCalculator.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "PositionCalculator",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "PositionCalculator"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/DataType.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/DataType.sol",
      "parts": [
       "./libraries/DataType.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "DataType",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "DataType"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/InterestRateModel.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/InterestRateModel.sol",
      "parts": [
       "./libraries/InterestRateModel.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "InterestRateModel",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "InterestRateModel"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/UniHelper.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/UniHelper.sol",
      "parts": [
       "./libraries/UniHelper.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "UniHelper",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "UniHelper"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/AddPairLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/AddPairLogic.sol",
      "parts": [
       "./libraries/logic/AddPairLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "AddPairLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "AddPairLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/LiquidationLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/LiquidationLogic.sol",
      "parts": [
       "./libraries/logic/LiquidationLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "LiquidationLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "LiquidationLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/ReallocationLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/ReallocationLogic.sol",
      "parts": [
       "./libraries/logic/ReallocationLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ReallocationLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ReallocationLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/SupplyLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/SupplyLogic.sol",
      "parts": [
       "./libraries/logic/SupplyLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "SupplyLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "SupplyLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/TradeLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/TradeLogic.sol",
      "parts": [
       "./libraries/logic/TradeLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "TradeLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "TradeLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./libraries/logic/ReaderLogic.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./libraries/logic/ReaderLogic.sol",
      "parts": [
       "./libraries/logic/ReaderLogic.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "ReaderLogic",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "ReaderLogic"
       },
       null
      ]
     ]
    },
    {
     "type": "ImportDirective",
     "path": "./types/GlobalData.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "./types/GlobalData.sol",
      "parts": [
       "./types/GlobalData.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": [
      [
       "LockDataLibrary",
       null
      ],
      [
       "GlobalDataLibrary",
       null
      ]
     ],
     "symbolAliasesIdentifiers": [
      [
       {
        "type": "Identifier",
        "name": "LockDataLibrary"
       },
       null
      ],
      [
       {
        "type": "Identifier",
        "name": "GlobalDataLibrary"
       },
       null
      ]
     ]
    },
    {
     "type": "ContractDefinition",
     "name": "PredyPool",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "IPredyPool"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "IUniswapV3MintCallback"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "Initializable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ReentrancyGuardUpgradeable"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GlobalDataLibrary.GlobalData"
       },
       "libraryName": "GlobalDataLibrary",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "LockDataLibrary.LockData"
       },
       "libraryName": "LockDataLibrary",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "GlobalDataLibrary.GlobalData"
       },
       "libraryName": "VaultLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC20"
       },
       "libraryName": "SafeTransferLib",
       "functions": [],
       "operators": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "operator",
         "identifier": {
          "type": "Identifier",
          "name": "operator"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "GlobalDataLibrary.GlobalData"
         },
         "name": "globalData",
         "identifier": {
          "type": "Identifier",
          "name": "globalData"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "bool",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "allowedUniswapPools",
         "identifier": {
          "type": "Identifier",
          "name": "allowedUniswapPools"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": {
           "type": "Identifier",
           "name": "trader"
          },
          "valueType": {
           "type": "Mapping",
           "keyType": {
            "type": "ElementaryTypeName",
            "name": "uint256",
            "stateMutability": null
           },
           "keyName": {
            "type": "Identifier",
            "name": "pairId"
           },
           "valueType": {
            "type": "ElementaryTypeName",
            "name": "bool",
            "stateMutability": null
           },
           "valueName": null
          },
          "valueName": null
         },
         "name": "allowedTraders",
         "identifier": {
          "type": "Identifier",
          "name": "allowedTraders"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "EventDefinition",
       "name": "OperatorUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "operator",
         "identifier": {
          "type": "Identifier",
          "name": "operator"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "RecepientUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "recipient",
         "identifier": {
          "type": "Identifier",
          "name": "recipient"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "ProtocolRevenueWithdrawn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isStable",
         "identifier": {
          "type": "Identifier",
          "name": "isStable"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "CreatorRevenueWithdrawn",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isStable",
         "identifier": {
          "type": "Identifier",
          "name": "isStable"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyOperator",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "Identifier",
            "name": "operator"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "CallerIsNotOperator"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyByLocker",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "locker",
            "identifier": {
             "type": "Identifier",
             "name": "locker"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "lockData"
           },
           "memberName": "locker"
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           },
           "right": {
            "type": "Identifier",
            "name": "locker"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "LockedBy"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "locker"
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyPoolOwner",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            "memberName": "poolOwner"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "CallerIsNotPoolCreator"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyVaultOwner",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "vaults"
             },
             "index": {
              "type": "Identifier",
              "name": "vaultId"
             }
            },
            "memberName": "owner"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "CallerIsNotVaultOwner"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "initialize",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "uniswapFactory",
         "identifier": {
          "type": "Identifier",
          "name": "uniswapFactory"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__ReentrancyGuard_init"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "initializeGlobalData"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "uniswapFactory"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "operator"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "initializer",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "uniswapV3MintCallback",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount0",
         "identifier": {
          "type": "Identifier",
          "name": "amount0"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount1",
         "identifier": {
          "type": "Identifier",
          "name": "amount1"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "allowedUniswapPools"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "msg"
              },
              "memberName": "sender"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IUniswapV3Pool"
            },
            "name": "uniswapPool",
            "identifier": {
             "type": "Identifier",
             "name": "uniswapPool"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "IUniswapV3Pool"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "amount0"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "uniswapPool"
                   },
                   "memberName": "token0"
                  },
                  "arguments": [],
                  "names": [],
                  "identifiers": []
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "Identifier",
                "name": "amount0"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "amount1"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "uniswapPool"
                   },
                   "memberName": "token1"
                  },
                  "arguments": [],
                  "names": [],
                  "identifiers": []
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "Identifier",
                "name": "amount1"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setOperator",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "newOperator",
         "identifier": {
          "type": "Identifier",
          "name": "newOperator"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "newOperator"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "operator"
           },
           "right": {
            "type": "Identifier",
            "name": "newOperator"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "OperatorUpdated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "newOperator"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOperator",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "registerPair",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "AddPairLogic.AddPairParams"
         },
         "name": "addPairParam",
         "identifier": {
          "type": "Identifier",
          "name": "addPairParam"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "addPair"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "allowedUniswapPools"
            },
            {
             "type": "Identifier",
             "name": "addPairParam"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOperator",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateAssetRiskParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetRiskParams"
         },
         "name": "riskParams",
         "identifier": {
          "type": "Identifier",
          "name": "riskParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "updateAssetRiskParams"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Identifier",
             "name": "riskParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateIRMParams",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "quoteIrmParams",
         "identifier": {
          "type": "Identifier",
          "name": "quoteIrmParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "InterestRateModel.IRMParams"
         },
         "name": "baseIrmParams",
         "identifier": {
          "type": "Identifier",
          "name": "baseIrmParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "updateIRMParams"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Identifier",
             "name": "quoteIrmParams"
            },
            {
             "type": "Identifier",
             "name": "baseIrmParams"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateFeeRatio",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint8",
          "stateMutability": null
         },
         "name": "feeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "feeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "updateFeeRatio"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Identifier",
             "name": "feeRatio"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updatePoolOwner",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "poolOwner",
         "identifier": {
          "type": "Identifier",
          "name": "poolOwner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "updatePoolOwner"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Identifier",
             "name": "poolOwner"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updatePriceOracle",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "priceFeed",
         "identifier": {
          "type": "Identifier",
          "name": "priceFeed"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "AddPairLogic"
            },
            "memberName": "updatePriceOracle"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            },
            {
             "type": "Identifier",
             "name": "priceFeed"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "withdrawProtocolRevenue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Perp.AssetPoolStatus"
            },
            "name": "pool",
            "identifier": {
             "type": "Identifier",
             "name": "pool"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_getAssetStatusPool"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "isQuoteToken"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "amount",
            "identifier": {
             "type": "Identifier",
             "name": "amount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "pool"
           },
           "memberName": "accumulatedProtocolRevenue"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "amount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "AZ",
             "parts": [
              "AZ"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "pool"
            },
            "memberName": "accumulatedProtocolRevenue"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "pool"
                  },
                  "memberName": "token"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "Identifier",
                "name": "amount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ProtocolRevenueWithdrawn"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "isQuoteToken"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOperator",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "withdrawCreatorRevenue",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Perp.AssetPoolStatus"
            },
            "name": "pool",
            "identifier": {
             "type": "Identifier",
             "name": "pool"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_getAssetStatusPool"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "isQuoteToken"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "amount",
            "identifier": {
             "type": "Identifier",
             "name": "amount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "pool"
           },
           "memberName": "accumulatedCreatorRevenue"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "amount"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "AZ",
             "parts": [
              "AZ"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "pool"
            },
            "memberName": "accumulatedCreatorRevenue"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "amount"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "ERC20"
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "pool"
                  },
                  "memberName": "token"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "safeTransfer"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "msg"
                },
                "memberName": "sender"
               },
               {
                "type": "Identifier",
                "name": "amount"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "CreatorRevenueWithdrawn"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "isQuoteToken"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "supply",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteAsset",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteAsset"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "supplyAmount",
         "identifier": {
          "type": "Identifier",
          "name": "supplyAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalSuppliedAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalSuppliedAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SupplyLogic"
            },
            "memberName": "supply"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "supplyAmount"
            },
            {
             "type": "Identifier",
             "name": "isQuoteAsset"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "withdraw",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteAsset",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteAsset"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "withdrawAmount",
         "identifier": {
          "type": "Identifier",
          "name": "withdrawAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalBurnAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalBurnAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalWithdrawAmount",
         "identifier": {
          "type": "Identifier",
          "name": "finalWithdrawAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "SupplyLogic"
            },
            "memberName": "withdraw"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "withdrawAmount"
            },
            {
             "type": "Identifier",
             "name": "isQuoteAsset"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "reallocate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "relocationOccurred",
         "identifier": {
          "type": "Identifier",
          "name": "relocationOccurred"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ReallocationLogic"
            },
            "memberName": "reallocate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            },
            {
             "type": "Identifier",
             "name": "settlementData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "trade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TradeParams"
         },
         "name": "tradeParams",
         "identifier": {
          "type": "Identifier",
          "name": "tradeParams"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tradeParams"
             },
             "memberName": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeParams"
              },
              "memberName": "pairId"
             }
            },
            "memberName": "allowlistEnabled"
           },
           "right": {
            "type": "UnaryOperation",
            "operator": "!",
            "subExpression": {
             "type": "IndexAccess",
             "base": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "allowedTraders"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "msg"
               },
               "memberName": "sender"
              }
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeParams"
              },
              "memberName": "pairId"
             }
            },
            "isPrefix": true
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "TraderNotAllowed"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "tradeParams"
            },
            "memberName": "vaultId"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "globalData"
             },
             "memberName": "createOrGetVault"
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeParams"
              },
              "memberName": "vaultId"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "tradeParams"
              },
              "memberName": "pairId"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "TradeLogic"
            },
            "memberName": "trade"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "tradeParams"
            },
            {
             "type": "Identifier",
             "name": "settlementData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateRecepient",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "recipient",
         "identifier": {
          "type": "Identifier",
          "name": "recipient"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "DataType.Vault"
            },
            "name": "vault",
            "identifier": {
             "type": "Identifier",
             "name": "vault"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "vaults"
           },
           "index": {
            "type": "Identifier",
            "name": "vaultId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "vault"
            },
            "memberName": "recipient"
           },
           "right": {
            "type": "Identifier",
            "name": "recipient"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "RecepientUpdated"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vaultId"
            },
            {
             "type": "Identifier",
             "name": "recipient"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyVaultOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "vaultId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "allowTrader",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "enabled",
         "identifier": {
          "type": "Identifier",
          "name": "enabled"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "IndexAccess",
              "base": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "globalData"
               },
               "memberName": "pairs"
              },
              "index": {
               "type": "Identifier",
               "name": "pairId"
              }
             },
             "memberName": "allowlistEnabled"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "allowedTraders"
             },
             "index": {
              "type": "Identifier",
              "name": "trader"
             }
            },
            "index": {
             "type": "Identifier",
             "name": "pairId"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "enabled"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyPoolOwner",
         "arguments": [
          {
           "type": "Identifier",
           "name": "pairId"
          }
         ]
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "execLiquidationCall",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeRatio",
         "identifier": {
          "type": "Identifier",
          "name": "closeRatio"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "settlementData",
         "identifier": {
          "type": "Identifier",
          "name": "settlementData"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TradeResult"
         },
         "name": "tradeResult",
         "identifier": {
          "type": "Identifier",
          "name": "tradeResult"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "LiquidationLogic"
            },
            "memberName": "liquidate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "vaultId"
            },
            {
             "type": "Identifier",
             "name": "closeRatio"
            },
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "settlementData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "take",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteAsset",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteAsset"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "to",
         "identifier": {
          "type": "Identifier",
          "name": "to"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "take"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "isQuoteAsset"
            },
            {
             "type": "Identifier",
             "name": "to"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyByLocker",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "createVault",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "createOrGetVault"
           },
           "arguments": [
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint160",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "UniHelper"
            },
            "memberName": "convertSqrtPrice"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "UniHelper"
              },
              "memberName": "getSqrtPrice"
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "globalData"
                  },
                  "memberName": "pairs"
                 },
                 "index": {
                  "type": "Identifier",
                  "name": "pairId"
                 }
                },
                "memberName": "sqrtAssetStatus"
               },
               "memberName": "uniswapPool"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "IndexAccess",
              "base": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "globalData"
               },
               "memberName": "pairs"
              },
              "index": {
               "type": "Identifier",
               "name": "pairId"
              }
             },
             "memberName": "isQuoteZero"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getSqrtIndexPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PositionCalculator"
            },
            "memberName": "getSqrtIndexPrice"
           },
           "arguments": [
            {
             "type": "IndexAccess",
             "base": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "globalData"
              },
              "memberName": "pairs"
             },
             "index": {
              "type": "Identifier",
              "name": "pairId"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getPairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.PairStatus"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "validate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "pairs"
           },
           "index": {
            "type": "Identifier",
            "name": "pairId"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getVault",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "DataType.Vault"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "IndexAccess",
           "base": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "globalData"
            },
            "memberName": "vaults"
           },
           "index": {
            "type": "Identifier",
            "name": "vaultId"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "revertPairStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ReaderLogic"
            },
            "memberName": "getPairStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "pairId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "revertVaultStatus",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "vaultId",
         "identifier": {
          "type": "Identifier",
          "name": "vaultId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ReaderLogic"
            },
            "memberName": "getVaultStatus"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "globalData"
            },
            {
             "type": "Identifier",
             "name": "vaultId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_getAssetStatusPool",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "pairId",
         "identifier": {
          "type": "Identifier",
          "name": "pairId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isQuoteToken",
         "identifier": {
          "type": "Identifier",
          "name": "isQuoteToken"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Perp.AssetPoolStatus"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isQuoteToken"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "pairs"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              "memberName": "quotePool"
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "globalData"
                },
                "memberName": "pairs"
               },
               "index": {
                "type": "Identifier",
                "name": "pairId"
               }
              },
              "memberName": "basePool"
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "contract"
    }
   ]
  }
 }
]