[
 {
  "path": "PerpDex.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "0.8.26"
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol",
      "parts": [
       "@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol",
      "parts": [
       "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/Strings.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/Strings.sol",
      "parts": [
       "@openzeppelin/contracts/utils/Strings.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/cryptography/ECDSA.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/cryptography/ECDSA.sol",
      "parts": [
       "@openzeppelin/contracts/utils/cryptography/ECDSA.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/math/Math.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/math/Math.sol",
      "parts": [
       "@openzeppelin/contracts/utils/math/Math.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "UsingForDeclaration",
     "isGlobal": false,
     "typeName": {
      "type": "UserDefinedTypeName",
      "namePath": "IERC20"
     },
     "libraryName": "SafeERC20",
     "functions": [],
     "operators": []
    },
    {
     "type": "CustomErrorDefinition",
     "name": "InvalidAdmin",
     "parameters": []
    },
    {
     "type": "CustomErrorDefinition",
     "name": "ZeroAddress",
     "parameters": []
    },
    {
     "type": "CustomErrorDefinition",
     "name": "InvalidPriceData",
     "parameters": []
    },
    {
     "type": "CustomErrorDefinition",
     "name": "InvalidPositionStatus",
     "parameters": []
    },
    {
     "type": "CustomErrorDefinition",
     "name": "InvalidProtocolClaimable",
     "parameters": []
    },
    {
     "type": "CustomErrorDefinition",
     "name": "NextPositionIdExists",
     "parameters": []
    },
    {
     "type": "ContractDefinition",
     "name": "ILP",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "giveProfit",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "interface"
    },
    {
     "type": "ContractDefinition",
     "name": "IFee",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "payFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "referee",
         "identifier": {
          "type": "Identifier",
          "name": "referee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getTotalFeePercent",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getMarginFeePercent",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getFeeDenominator",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "interface"
    },
    {
     "type": "ContractDefinition",
     "name": "IBisonAIRouter",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "latestRoundData",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "feedName",
         "identifier": {
          "type": "Identifier",
          "name": "feedName"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "id",
         "identifier": {
          "type": "Identifier",
          "name": "id"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "answer",
         "identifier": {
          "type": "Identifier",
          "name": "answer"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "updatedAt",
         "identifier": {
          "type": "Identifier",
          "name": "updatedAt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getRoundData",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "_feedName",
         "identifier": {
          "type": "Identifier",
          "name": "_feedName"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "_roundId",
         "identifier": {
          "type": "Identifier",
          "name": "_roundId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "id",
         "identifier": {
          "type": "Identifier",
          "name": "id"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "answer",
         "identifier": {
          "type": "Identifier",
          "name": "answer"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "updatedAt",
         "identifier": {
          "type": "Identifier",
          "name": "updatedAt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "interface"
    },
    {
     "type": "ContractDefinition",
     "name": "IBisonAISubmissionProxy",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "submitStrict",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes32",
           "stateMutability": null
          },
          "length": null
         },
         "name": "_feedHashes",
         "identifier": {
          "type": "Identifier",
          "name": "_feedHashes"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "int256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "_answers",
         "identifier": {
          "type": "Identifier",
          "name": "_answers"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "_timestamps",
         "identifier": {
          "type": "Identifier",
          "name": "_timestamps"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes",
           "stateMutability": null
          },
          "length": null
         },
         "name": "_proofs",
         "identifier": {
          "type": "Identifier",
          "name": "_proofs"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "submitSingleWithoutSupersedValidation",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "_feedHash",
         "identifier": {
          "type": "Identifier",
          "name": "_feedHash"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "_answer",
         "identifier": {
          "type": "Identifier",
          "name": "_answer"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_timestamp",
         "identifier": {
          "type": "Identifier",
          "name": "_timestamp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "_proof",
         "identifier": {
          "type": "Identifier",
          "name": "_proof"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "submitWithoutSupersedValidation",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes32",
           "stateMutability": null
          },
          "length": null
         },
         "name": "_feedHashes",
         "identifier": {
          "type": "Identifier",
          "name": "_feedHashes"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "int256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "_answers",
         "identifier": {
          "type": "Identifier",
          "name": "_answers"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "_timestamps",
         "identifier": {
          "type": "Identifier",
          "name": "_timestamps"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes",
           "stateMutability": null
          },
          "length": null
         },
         "name": "_proofs",
         "identifier": {
          "type": "Identifier",
          "name": "_proofs"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "lastSubmissionTimes",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "interface"
    },
    {
     "type": "ContractDefinition",
     "name": "IPyth",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "StructDefinition",
       "name": "PythPrice",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int64",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "conf",
         "identifier": {
          "type": "Identifier",
          "name": "conf"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int32",
          "stateMutability": null
         },
         "name": "expo",
         "identifier": {
          "type": "Identifier",
          "name": "expo"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "publishTime",
         "identifier": {
          "type": "Identifier",
          "name": "publishTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "PythPriceFeed",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "id",
         "identifier": {
          "type": "Identifier",
          "name": "id"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PythPrice"
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PythPrice"
         },
         "name": "emaPrice",
         "identifier": {
          "type": "Identifier",
          "name": "emaPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "getUpdateFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes",
           "stateMutability": null
          },
          "length": null
         },
         "name": "updateData",
         "identifier": {
          "type": "Identifier",
          "name": "updateData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getPriceNoOlderThan",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes32",
          "stateMutability": null
         },
         "name": "id",
         "identifier": {
          "type": "Identifier",
          "name": "id"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "age",
         "identifier": {
          "type": "Identifier",
          "name": "age"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PythPrice"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "updatePriceFeeds",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes",
           "stateMutability": null
          },
          "length": null
         },
         "name": "updateData",
         "identifier": {
          "type": "Identifier",
          "name": "updateData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "payable"
      },
      {
       "type": "FunctionDefinition",
       "name": "parsePriceFeedUpdates",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes",
           "stateMutability": null
          },
          "length": null
         },
         "name": "updateData",
         "identifier": {
          "type": "Identifier",
          "name": "updateData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes32",
           "stateMutability": null
          },
          "length": null
         },
         "name": "priceIds",
         "identifier": {
          "type": "Identifier",
          "name": "priceIds"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "minPublishTime",
         "identifier": {
          "type": "Identifier",
          "name": "minPublishTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "maxPublishTime",
         "identifier": {
          "type": "Identifier",
          "name": "maxPublishTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "PythPriceFeed"
          },
          "length": null
         },
         "name": "priceFeeds",
         "identifier": {
          "type": "Identifier",
          "name": "priceFeeds"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": null,
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "payable"
      }
     ],
     "kind": "interface"
    },
    {
     "type": "ContractDefinition",
     "name": "PerpDexPricesLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "submitAndGetLatestPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IBisonAISubmissionProxy"
         },
         "name": "bisonAISubmissionProxy",
         "identifier": {
          "type": "Identifier",
          "name": "bisonAISubmissionProxy"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IBisonAIRouter"
         },
         "name": "bisonAIRouter",
         "identifier": {
          "type": "Identifier",
          "name": "bisonAIRouter"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPyth"
         },
         "name": "pyth",
         "identifier": {
          "type": "Identifier",
          "name": "pyth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": "&&",
               "left": {
                "type": "BinaryOperation",
                "operator": "==",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "priceData"
                  },
                  "memberName": "feedHashes"
                 },
                 "memberName": "length"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "1",
                 "subdenomination": null
                }
               },
               "right": {
                "type": "BinaryOperation",
                "operator": "==",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "priceData"
                  },
                  "memberName": "answers"
                 },
                 "memberName": "length"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "1",
                 "subdenomination": null
                }
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "==",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "timestamps"
                },
                "memberName": "length"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "1",
                "subdenomination": null
               }
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "priceData"
                },
                "memberName": "proofs"
               },
               "memberName": "length"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "1",
               "subdenomination": null
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "Length is not 1",
             "parts": [
              "Length is not 1"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "currentPrice",
            "identifier": {
             "type": "Identifier",
             "name": "currentPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "NumberLiteral",
           "number": "0",
           "subdenomination": null
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "priceData"
            },
            "memberName": "oracleType"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "OracleType"
            },
            "memberName": "BisonAI"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "bisonAISubmissionProxy"
               },
               "memberName": "submitSingleWithoutSupersedValidation"
              },
              "arguments": [
               {
                "type": "IndexAccess",
                "base": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "feedHashes"
                },
                "index": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "answers"
                },
                "index": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "timestamps"
                },
                "index": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "proofs"
                },
                "index": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": ">=",
                "left": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "bisonAISubmissionProxy"
                  },
                  "memberName": "lastSubmissionTimes"
                 },
                 "arguments": [
                  {
                   "type": "IndexAccess",
                   "base": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "priceData"
                    },
                    "memberName": "feedHashes"
                   },
                   "index": {
                    "type": "NumberLiteral",
                    "number": "0",
                    "subdenomination": null
                   }
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "right": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "priceData"
                  },
                  "memberName": "timestamps"
                 },
                 "index": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                }
               },
               {
                "type": "StringLiteral",
                "value": "Price is not up to date (BisonAI)",
                "parts": [
                 "Price is not up to date (BisonAI)"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "string",
                "stateMutability": null
               },
               "name": "feedName",
               "identifier": {
                "type": "Identifier",
                "name": "feedName"
               },
               "storageLocation": "memory",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "getBisonAIFeedName"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              null,
              {
               "type": "VariableDeclaration",
               "name": "answer",
               "identifier": {
                "type": "Identifier",
                "name": "answer"
               },
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              },
              null
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "bisonAIRouter"
               },
               "memberName": "latestRoundData"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "feedName"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "Identifier",
                 "name": "answer"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               {
                "type": "StringLiteral",
                "value": "Price is 0 (BisonAI)",
                "parts": [
                 "Price is 0 (BisonAI)"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "currentPrice"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "answer"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "priceData"
             },
             "memberName": "oracleType"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "OracleType"
             },
             "memberName": "Pyth"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "VariableDeclarationStatement",
              "variables": [
               {
                "type": "VariableDeclaration",
                "typeName": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "name": "feeAmount",
                "identifier": {
                 "type": "Identifier",
                 "name": "feeAmount"
                },
                "storageLocation": null,
                "isStateVar": false,
                "isIndexed": false,
                "expression": null
               }
              ],
              "initialValue": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "pyth"
                },
                "memberName": "getUpdateFee"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "proofs"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "NameValueExpression",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "pyth"
                 },
                 "memberName": "updatePriceFeeds"
                },
                "arguments": {
                 "type": "NameValueList",
                 "names": [
                  "value"
                 ],
                 "identifiers": [
                  {
                   "type": "Identifier",
                   "name": "value"
                  }
                 ],
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "feeAmount"
                  }
                 ]
                }
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "proofs"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "Identifier",
                "name": "currentPrice"
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "getPythPrice"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "tokenType"
                 },
                 {
                  "type": "Identifier",
                  "name": "pyth"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            ]
           },
           "falseBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "revert"
               },
               "arguments": [
                {
                 "type": "StringLiteral",
                 "value": "Unknown oracle type",
                 "parts": [
                  "Unknown oracle type"
                 ],
                 "isUnicode": [
                  false
                 ]
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "currentPrice"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Price is 0",
             "parts": [
              "Price is 0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "currentPrice"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "submitAndGetBisonAIRoundId",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IBisonAISubmissionProxy"
         },
         "name": "bisonAISubmissionProxy",
         "identifier": {
          "type": "Identifier",
          "name": "bisonAISubmissionProxy"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IBisonAIRouter"
         },
         "name": "bisonAIRouter",
         "identifier": {
          "type": "Identifier",
          "name": "bisonAIRouter"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "priceData"
              },
              "memberName": "oracleType"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexLib"
               },
               "memberName": "OracleType"
              },
              "memberName": "BisonAI"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Wrong oracle type",
             "parts": [
              "Wrong oracle type"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": "==",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "feedHashes"
                },
                "memberName": "length"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "answers"
                },
                "memberName": "length"
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "==",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "feedHashes"
                },
                "memberName": "length"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "timestamps"
                },
                "memberName": "length"
               }
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "priceData"
                },
                "memberName": "feedHashes"
               },
               "memberName": "length"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "priceData"
                },
                "memberName": "proofs"
               },
               "memberName": "length"
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "Lengths are not equal",
             "parts": [
              "Lengths are not equal"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkPriceDataOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "priceData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "bisonAISubmissionProxy"
            },
            "memberName": "submitWithoutSupersedValidation"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "priceData"
             },
             "memberName": "feedHashes"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "priceData"
             },
             "memberName": "answers"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "priceData"
             },
             "memberName": "timestamps"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "priceData"
             },
             "memberName": "proofs"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "priceData"
             },
             "memberName": "feedHashes"
            },
            "memberName": "length"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": ">=",
                "left": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "bisonAISubmissionProxy"
                  },
                  "memberName": "lastSubmissionTimes"
                 },
                 "arguments": [
                  {
                   "type": "IndexAccess",
                   "base": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "priceData"
                    },
                    "memberName": "feedHashes"
                   },
                   "index": {
                    "type": "Identifier",
                    "name": "i"
                   }
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "right": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "priceData"
                  },
                  "memberName": "timestamps"
                 },
                 "index": {
                  "type": "Identifier",
                  "name": "i"
                 }
                }
               },
               {
                "type": "StringLiteral",
                "value": "Price is not up to date (BisonAI)",
                "parts": [
                 "Price is not up to date (BisonAI)"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "UserDefinedTypeName",
                "namePath": "PerpDexLib.TokenType"
               },
               "name": "tokenType",
               "identifier": {
                "type": "Identifier",
                "name": "tokenType"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexLib"
               },
               "memberName": "TokenType"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "i"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "string",
                "stateMutability": null
               },
               "name": "feedName",
               "identifier": {
                "type": "Identifier",
                "name": "feedName"
               },
               "storageLocation": "memory",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "getBisonAIFeedName"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "name": "roundId",
               "identifier": {
                "type": "Identifier",
                "name": "roundId"
               },
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint64",
                "stateMutability": null
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              },
              {
               "type": "VariableDeclaration",
               "name": "answer",
               "identifier": {
                "type": "Identifier",
                "name": "answer"
               },
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              },
              null
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "bisonAIRouter"
               },
               "memberName": "latestRoundData"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "feedName"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "Identifier",
                 "name": "answer"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               {
                "type": "StringLiteral",
                "value": "Price is 0 (BisonAI)",
                "parts": [
                 "Price is 0 (BisonAI)"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "EmitStatement",
             "eventCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDex"
               },
               "memberName": "SubmittedRoundId"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "tokenType"
               },
               {
                "type": "Identifier",
                "name": "roundId"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getPythPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPyth"
         },
         "name": "pyth",
         "identifier": {
          "type": "Identifier",
          "name": "pyth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes32",
             "stateMutability": null
            },
            "name": "feedHash",
            "identifier": {
             "type": "Identifier",
             "name": "feedHash"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "tokenType"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "TokenType"
            },
            "memberName": "Btc"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "feedHash"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43",
               "subdenomination": null
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "tokenType"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "TokenType"
             },
             "memberName": "Klay"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "Identifier",
                "name": "feedHash"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0x452d40e01473f95aa9930911b4392197b3551b37ac92a049e87487b654b4ebbe",
                "subdenomination": null
               }
              }
             }
            ]
           },
           "falseBody": {
            "type": "IfStatement",
            "condition": {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "Identifier",
              "name": "tokenType"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexLib"
               },
               "memberName": "TokenType"
              },
              "memberName": "Wemix"
             }
            },
            "trueBody": {
             "type": "Block",
             "statements": [
              {
               "type": "ExpressionStatement",
               "expression": {
                "type": "BinaryOperation",
                "operator": "=",
                "left": {
                 "type": "Identifier",
                 "name": "feedHash"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0xf63f008474fad630207a1cfa49207d59bca2593ea64fc0a6da9bf3337485791c",
                 "subdenomination": null
                }
               }
              }
             ]
            },
            "falseBody": {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "Identifier",
               "name": "tokenType"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexLib"
                },
                "memberName": "TokenType"
               },
               "memberName": "Eth"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "feedHash"
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace",
                  "subdenomination": null
                 }
                }
               }
              ]
             },
             "falseBody": {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": "==",
               "left": {
                "type": "Identifier",
                "name": "tokenType"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "PerpDexLib"
                 },
                 "memberName": "TokenType"
                },
                "memberName": "Doge"
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "BinaryOperation",
                  "operator": "=",
                  "left": {
                   "type": "Identifier",
                   "name": "feedHash"
                  },
                  "right": {
                   "type": "NumberLiteral",
                   "number": "0xdcef50dd0a4cd2dcc17e45df1676dcb336a11a61c69df7a0299b0150c672d25c",
                   "subdenomination": null
                  }
                 }
                }
               ]
              },
              "falseBody": {
               "type": "IfStatement",
               "condition": {
                "type": "BinaryOperation",
                "operator": "==",
                "left": {
                 "type": "Identifier",
                 "name": "tokenType"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "PerpDexLib"
                  },
                  "memberName": "TokenType"
                 },
                 "memberName": "Pepe"
                }
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ExpressionStatement",
                  "expression": {
                   "type": "BinaryOperation",
                   "operator": "=",
                   "left": {
                    "type": "Identifier",
                    "name": "feedHash"
                   },
                   "right": {
                    "type": "NumberLiteral",
                    "number": "0xd69731a2e74ac1ce884fc3890f7ee324b6deb66147055249568869ed700882e4",
                    "subdenomination": null
                   }
                  }
                 }
                ]
               },
               "falseBody": {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": "==",
                 "left": {
                  "type": "Identifier",
                  "name": "tokenType"
                 },
                 "right": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "PerpDexLib"
                   },
                   "memberName": "TokenType"
                  },
                  "memberName": "Sol"
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "BinaryOperation",
                    "operator": "=",
                    "left": {
                     "type": "Identifier",
                     "name": "feedHash"
                    },
                    "right": {
                     "type": "NumberLiteral",
                     "number": "0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d",
                     "subdenomination": null
                    }
                   }
                  }
                 ]
                },
                "falseBody": {
                 "type": "IfStatement",
                 "condition": {
                  "type": "BinaryOperation",
                  "operator": "==",
                  "left": {
                   "type": "Identifier",
                   "name": "tokenType"
                  },
                  "right": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "PerpDexLib"
                    },
                    "memberName": "TokenType"
                   },
                   "memberName": "Xrp"
                  }
                 },
                 "trueBody": {
                  "type": "Block",
                  "statements": [
                   {
                    "type": "ExpressionStatement",
                    "expression": {
                     "type": "BinaryOperation",
                     "operator": "=",
                     "left": {
                      "type": "Identifier",
                      "name": "feedHash"
                     },
                     "right": {
                      "type": "NumberLiteral",
                      "number": "0xec5d399846a9209f3fe5881d70aae9268c94339ff9817e8d18ff19fa05eea1c8",
                      "subdenomination": null
                     }
                    }
                   }
                  ]
                 },
                 "falseBody": {
                  "type": "IfStatement",
                  "condition": {
                   "type": "BinaryOperation",
                   "operator": "==",
                   "left": {
                    "type": "Identifier",
                    "name": "tokenType"
                   },
                   "right": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "PerpDexLib"
                     },
                     "memberName": "TokenType"
                    },
                    "memberName": "Apt"
                   }
                  },
                  "trueBody": {
                   "type": "Block",
                   "statements": [
                    {
                     "type": "ExpressionStatement",
                     "expression": {
                      "type": "BinaryOperation",
                      "operator": "=",
                      "left": {
                       "type": "Identifier",
                       "name": "feedHash"
                      },
                      "right": {
                       "type": "NumberLiteral",
                       "number": "0x03ae4db29ed4ae33d323568895aa00337e658e348b37509f5372ae51f0af00d5",
                       "subdenomination": null
                      }
                     }
                    }
                   ]
                  },
                  "falseBody": {
                   "type": "IfStatement",
                   "condition": {
                    "type": "BinaryOperation",
                    "operator": "==",
                    "left": {
                     "type": "Identifier",
                     "name": "tokenType"
                    },
                    "right": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "PerpDexLib"
                      },
                      "memberName": "TokenType"
                     },
                     "memberName": "Sui"
                    }
                   },
                   "trueBody": {
                    "type": "Block",
                    "statements": [
                     {
                      "type": "ExpressionStatement",
                      "expression": {
                       "type": "BinaryOperation",
                       "operator": "=",
                       "left": {
                        "type": "Identifier",
                        "name": "feedHash"
                       },
                       "right": {
                        "type": "NumberLiteral",
                        "number": "0x23d7315113f5b1d3ba7a83604c44b94d79f4fd69af77f804fc7f920a6dc65744",
                        "subdenomination": null
                       }
                      }
                     }
                    ]
                   },
                   "falseBody": {
                    "type": "IfStatement",
                    "condition": {
                     "type": "BinaryOperation",
                     "operator": "==",
                     "left": {
                      "type": "Identifier",
                      "name": "tokenType"
                     },
                     "right": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "Identifier",
                        "name": "PerpDexLib"
                       },
                       "memberName": "TokenType"
                      },
                      "memberName": "Shib"
                     }
                    },
                    "trueBody": {
                     "type": "Block",
                     "statements": [
                      {
                       "type": "ExpressionStatement",
                       "expression": {
                        "type": "BinaryOperation",
                        "operator": "=",
                        "left": {
                         "type": "Identifier",
                         "name": "feedHash"
                        },
                        "right": {
                         "type": "NumberLiteral",
                         "number": "0xf0d57deca57b3da2fe63a493f4c25925fdfd8edf834b20f93e1f84dbd1504d4a",
                         "subdenomination": null
                        }
                       }
                      }
                     ]
                    },
                    "falseBody": {
                     "type": "IfStatement",
                     "condition": {
                      "type": "BinaryOperation",
                      "operator": "==",
                      "left": {
                       "type": "Identifier",
                       "name": "tokenType"
                      },
                      "right": {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "MemberAccess",
                        "expression": {
                         "type": "Identifier",
                         "name": "PerpDexLib"
                        },
                        "memberName": "TokenType"
                       },
                       "memberName": "Sei"
                      }
                     },
                     "trueBody": {
                      "type": "Block",
                      "statements": [
                       {
                        "type": "ExpressionStatement",
                        "expression": {
                         "type": "BinaryOperation",
                         "operator": "=",
                         "left": {
                          "type": "Identifier",
                          "name": "feedHash"
                         },
                         "right": {
                          "type": "NumberLiteral",
                          "number": "0x53614f1cb0c031d4af66c04cb9c756234adad0e1cee85303795091499a4084eb",
                          "subdenomination": null
                         }
                        }
                       }
                      ]
                     },
                     "falseBody": {
                      "type": "IfStatement",
                      "condition": {
                       "type": "BinaryOperation",
                       "operator": "==",
                       "left": {
                        "type": "Identifier",
                        "name": "tokenType"
                       },
                       "right": {
                        "type": "MemberAccess",
                        "expression": {
                         "type": "MemberAccess",
                         "expression": {
                          "type": "Identifier",
                          "name": "PerpDexLib"
                         },
                         "memberName": "TokenType"
                        },
                        "memberName": "Ada"
                       }
                      },
                      "trueBody": {
                       "type": "Block",
                       "statements": [
                        {
                         "type": "ExpressionStatement",
                         "expression": {
                          "type": "BinaryOperation",
                          "operator": "=",
                          "left": {
                           "type": "Identifier",
                           "name": "feedHash"
                          },
                          "right": {
                           "type": "NumberLiteral",
                           "number": "0x2a01deaec9e51a579277b34b122399984d0bbf57e2458a7e42fecd2829867a0d",
                           "subdenomination": null
                          }
                         }
                        }
                       ]
                      },
                      "falseBody": {
                       "type": "IfStatement",
                       "condition": {
                        "type": "BinaryOperation",
                        "operator": "==",
                        "left": {
                         "type": "Identifier",
                         "name": "tokenType"
                        },
                        "right": {
                         "type": "MemberAccess",
                         "expression": {
                          "type": "MemberAccess",
                          "expression": {
                           "type": "Identifier",
                           "name": "PerpDexLib"
                          },
                          "memberName": "TokenType"
                         },
                         "memberName": "Pol"
                        }
                       },
                       "trueBody": {
                        "type": "Block",
                        "statements": [
                         {
                          "type": "ExpressionStatement",
                          "expression": {
                           "type": "BinaryOperation",
                           "operator": "=",
                           "left": {
                            "type": "Identifier",
                            "name": "feedHash"
                           },
                           "right": {
                            "type": "NumberLiteral",
                            "number": "0xffd11c5a1cfd42f80afb2df4d9f264c15f956d68153335374ec10722edd70472",
                            "subdenomination": null
                           }
                          }
                         }
                        ]
                       },
                       "falseBody": {
                        "type": "IfStatement",
                        "condition": {
                         "type": "BinaryOperation",
                         "operator": "==",
                         "left": {
                          "type": "Identifier",
                          "name": "tokenType"
                         },
                         "right": {
                          "type": "MemberAccess",
                          "expression": {
                           "type": "MemberAccess",
                           "expression": {
                            "type": "Identifier",
                            "name": "PerpDexLib"
                           },
                           "memberName": "TokenType"
                          },
                          "memberName": "Bnb"
                         }
                        },
                        "trueBody": {
                         "type": "Block",
                         "statements": [
                          {
                           "type": "ExpressionStatement",
                           "expression": {
                            "type": "BinaryOperation",
                            "operator": "=",
                            "left": {
                             "type": "Identifier",
                             "name": "feedHash"
                            },
                            "right": {
                             "type": "NumberLiteral",
                             "number": "0x2f95862b045670cd22bee3114c39763a4a08beeb663b145d283c31d7d1101c4f",
                             "subdenomination": null
                            }
                           }
                          }
                         ]
                        },
                        "falseBody": {
                         "type": "IfStatement",
                         "condition": {
                          "type": "BinaryOperation",
                          "operator": "==",
                          "left": {
                           "type": "Identifier",
                           "name": "tokenType"
                          },
                          "right": {
                           "type": "MemberAccess",
                           "expression": {
                            "type": "MemberAccess",
                            "expression": {
                             "type": "Identifier",
                             "name": "PerpDexLib"
                            },
                            "memberName": "TokenType"
                           },
                           "memberName": "Dot"
                          }
                         },
                         "trueBody": {
                          "type": "Block",
                          "statements": [
                           {
                            "type": "ExpressionStatement",
                            "expression": {
                             "type": "BinaryOperation",
                             "operator": "=",
                             "left": {
                              "type": "Identifier",
                              "name": "feedHash"
                             },
                             "right": {
                              "type": "NumberLiteral",
                              "number": "0xca3eed9b267293f6595901c734c7525ce8ef49adafe8284606ceb307afa2ca5b",
                              "subdenomination": null
                             }
                            }
                           }
                          ]
                         },
                         "falseBody": {
                          "type": "IfStatement",
                          "condition": {
                           "type": "BinaryOperation",
                           "operator": "==",
                           "left": {
                            "type": "Identifier",
                            "name": "tokenType"
                           },
                           "right": {
                            "type": "MemberAccess",
                            "expression": {
                             "type": "MemberAccess",
                             "expression": {
                              "type": "Identifier",
                              "name": "PerpDexLib"
                             },
                             "memberName": "TokenType"
                            },
                            "memberName": "Ltc"
                           }
                          },
                          "trueBody": {
                           "type": "Block",
                           "statements": [
                            {
                             "type": "ExpressionStatement",
                             "expression": {
                              "type": "BinaryOperation",
                              "operator": "=",
                              "left": {
                               "type": "Identifier",
                               "name": "feedHash"
                              },
                              "right": {
                               "type": "NumberLiteral",
                               "number": "0x6e3f3fa8253588df9326580180233eb791e03b443a3ba7a1d892e73874e19a54",
                               "subdenomination": null
                              }
                             }
                            }
                           ]
                          },
                          "falseBody": {
                           "type": "IfStatement",
                           "condition": {
                            "type": "BinaryOperation",
                            "operator": "==",
                            "left": {
                             "type": "Identifier",
                             "name": "tokenType"
                            },
                            "right": {
                             "type": "MemberAccess",
                             "expression": {
                              "type": "MemberAccess",
                              "expression": {
                               "type": "Identifier",
                               "name": "PerpDexLib"
                              },
                              "memberName": "TokenType"
                             },
                             "memberName": "Avax"
                            }
                           },
                           "trueBody": {
                            "type": "Block",
                            "statements": [
                             {
                              "type": "ExpressionStatement",
                              "expression": {
                               "type": "BinaryOperation",
                               "operator": "=",
                               "left": {
                                "type": "Identifier",
                                "name": "feedHash"
                               },
                               "right": {
                                "type": "NumberLiteral",
                                "number": "0x93da3352f9f1d105fdfe4971cfa80e9dd777bfc5d0f683ebb6e1294b92137bb7",
                                "subdenomination": null
                               }
                              }
                             }
                            ]
                           },
                           "falseBody": {
                            "type": "IfStatement",
                            "condition": {
                             "type": "BinaryOperation",
                             "operator": "==",
                             "left": {
                              "type": "Identifier",
                              "name": "tokenType"
                             },
                             "right": {
                              "type": "MemberAccess",
                              "expression": {
                               "type": "MemberAccess",
                               "expression": {
                                "type": "Identifier",
                                "name": "PerpDexLib"
                               },
                               "memberName": "TokenType"
                              },
                              "memberName": "Trump"
                             }
                            },
                            "trueBody": {
                             "type": "Block",
                             "statements": [
                              {
                               "type": "ExpressionStatement",
                               "expression": {
                                "type": "BinaryOperation",
                                "operator": "=",
                                "left": {
                                 "type": "Identifier",
                                 "name": "feedHash"
                                },
                                "right": {
                                 "type": "NumberLiteral",
                                 "number": "0x879551021853eec7a7dc827578e8e69da7e4fa8148339aa0d3d5296405be4b1a",
                                 "subdenomination": null
                                }
                               }
                              }
                             ]
                            },
                            "falseBody": {
                             "type": "Block",
                             "statements": [
                              {
                               "type": "ExpressionStatement",
                               "expression": {
                                "type": "FunctionCall",
                                "expression": {
                                 "type": "Identifier",
                                 "name": "revert"
                                },
                                "arguments": [
                                 {
                                  "type": "StringLiteral",
                                  "value": "Unknown token type",
                                  "parts": [
                                   "Unknown token type"
                                  ],
                                  "isUnicode": [
                                   false
                                  ]
                                 }
                                ],
                                "names": [],
                                "identifiers": []
                               }
                              }
                             ]
                            }
                           }
                          }
                         }
                        }
                       }
                      }
                     }
                    }
                   }
                  }
                 }
                }
               }
              }
             }
            }
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "IPyth.PythPrice"
            },
            "name": "pythPriceData",
            "identifier": {
             "type": "Identifier",
             "name": "pythPriceData"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "pyth"
            },
            "memberName": "getPriceNoOlderThan"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "feedHash"
            },
            {
             "type": "NumberLiteral",
             "number": "10",
             "subdenomination": null
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "pythPriceData"
              },
              "memberName": "price"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Price is 0 (Pyth)",
             "parts": [
              "Price is 0 (Pyth)"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "tokenType"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "TokenType"
             },
             "memberName": "Pepe"
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "tokenType"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "TokenType"
             },
             "memberName": "Shib"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint64",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "BinaryOperation",
                  "operator": "/",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "pythPriceData"
                   },
                   "memberName": "price"
                  },
                  "right": {
                   "type": "NumberLiteral",
                   "number": "100",
                   "subdenomination": null
                  }
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "uint256",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "uint64",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "pythPriceData"
               },
               "memberName": "price"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getBisonAIFeedName",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "tokenType"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "TokenType"
            },
            "memberName": "Btc"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "StringLiteral",
              "value": "BTC-USDT",
              "parts": [
               "BTC-USDT"
              ],
              "isUnicode": [
               false
              ]
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "tokenType"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "TokenType"
             },
             "memberName": "Klay"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "StringLiteral",
               "value": "KAIA-USDT",
               "parts": [
                "KAIA-USDT"
               ],
               "isUnicode": [
                false
               ]
              }
             }
            ]
           },
           "falseBody": {
            "type": "IfStatement",
            "condition": {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "Identifier",
              "name": "tokenType"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexLib"
               },
               "memberName": "TokenType"
              },
              "memberName": "Wemix"
             }
            },
            "trueBody": {
             "type": "Block",
             "statements": [
              {
               "type": "ReturnStatement",
               "expression": {
                "type": "StringLiteral",
                "value": "WEMIX-USDT",
                "parts": [
                 "WEMIX-USDT"
                ],
                "isUnicode": [
                 false
                ]
               }
              }
             ]
            },
            "falseBody": {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "Identifier",
               "name": "tokenType"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexLib"
                },
                "memberName": "TokenType"
               },
               "memberName": "Eth"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "StringLiteral",
                 "value": "ETH-USDT",
                 "parts": [
                  "ETH-USDT"
                 ],
                 "isUnicode": [
                  false
                 ]
                }
               }
              ]
             },
             "falseBody": {
              "type": "IfStatement",
              "condition": {
               "type": "BinaryOperation",
               "operator": "==",
               "left": {
                "type": "Identifier",
                "name": "tokenType"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "PerpDexLib"
                 },
                 "memberName": "TokenType"
                },
                "memberName": "Doge"
               }
              },
              "trueBody": {
               "type": "Block",
               "statements": [
                {
                 "type": "ReturnStatement",
                 "expression": {
                  "type": "StringLiteral",
                  "value": "DOGE-USDT",
                  "parts": [
                   "DOGE-USDT"
                  ],
                  "isUnicode": [
                   false
                  ]
                 }
                }
               ]
              },
              "falseBody": {
               "type": "IfStatement",
               "condition": {
                "type": "BinaryOperation",
                "operator": "==",
                "left": {
                 "type": "Identifier",
                 "name": "tokenType"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "PerpDexLib"
                  },
                  "memberName": "TokenType"
                 },
                 "memberName": "Pepe"
                }
               },
               "trueBody": {
                "type": "Block",
                "statements": [
                 {
                  "type": "ReturnStatement",
                  "expression": {
                   "type": "StringLiteral",
                   "value": "PEPE-USDT",
                   "parts": [
                    "PEPE-USDT"
                   ],
                   "isUnicode": [
                    false
                   ]
                  }
                 }
                ]
               },
               "falseBody": {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": "==",
                 "left": {
                  "type": "Identifier",
                  "name": "tokenType"
                 },
                 "right": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "PerpDexLib"
                   },
                   "memberName": "TokenType"
                  },
                  "memberName": "Sol"
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ReturnStatement",
                   "expression": {
                    "type": "StringLiteral",
                    "value": "SOL-USDT",
                    "parts": [
                     "SOL-USDT"
                    ],
                    "isUnicode": [
                     false
                    ]
                   }
                  }
                 ]
                },
                "falseBody": {
                 "type": "IfStatement",
                 "condition": {
                  "type": "BinaryOperation",
                  "operator": "==",
                  "left": {
                   "type": "Identifier",
                   "name": "tokenType"
                  },
                  "right": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "PerpDexLib"
                    },
                    "memberName": "TokenType"
                   },
                   "memberName": "Xrp"
                  }
                 },
                 "trueBody": {
                  "type": "Block",
                  "statements": [
                   {
                    "type": "ReturnStatement",
                    "expression": {
                     "type": "StringLiteral",
                     "value": "XRP-USDT",
                     "parts": [
                      "XRP-USDT"
                     ],
                     "isUnicode": [
                      false
                     ]
                    }
                   }
                  ]
                 },
                 "falseBody": {
                  "type": "IfStatement",
                  "condition": {
                   "type": "BinaryOperation",
                   "operator": "==",
                   "left": {
                    "type": "Identifier",
                    "name": "tokenType"
                   },
                   "right": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "PerpDexLib"
                     },
                     "memberName": "TokenType"
                    },
                    "memberName": "Apt"
                   }
                  },
                  "trueBody": {
                   "type": "Block",
                   "statements": [
                    {
                     "type": "ReturnStatement",
                     "expression": {
                      "type": "StringLiteral",
                      "value": "APT-USDT",
                      "parts": [
                       "APT-USDT"
                      ],
                      "isUnicode": [
                       false
                      ]
                     }
                    }
                   ]
                  },
                  "falseBody": {
                   "type": "IfStatement",
                   "condition": {
                    "type": "BinaryOperation",
                    "operator": "==",
                    "left": {
                     "type": "Identifier",
                     "name": "tokenType"
                    },
                    "right": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "PerpDexLib"
                      },
                      "memberName": "TokenType"
                     },
                     "memberName": "Sui"
                    }
                   },
                   "trueBody": {
                    "type": "Block",
                    "statements": [
                     {
                      "type": "ReturnStatement",
                      "expression": {
                       "type": "StringLiteral",
                       "value": "SUI-USDT",
                       "parts": [
                        "SUI-USDT"
                       ],
                       "isUnicode": [
                        false
                       ]
                      }
                     }
                    ]
                   },
                   "falseBody": {
                    "type": "IfStatement",
                    "condition": {
                     "type": "BinaryOperation",
                     "operator": "==",
                     "left": {
                      "type": "Identifier",
                      "name": "tokenType"
                     },
                     "right": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "Identifier",
                        "name": "PerpDexLib"
                       },
                       "memberName": "TokenType"
                      },
                      "memberName": "Shib"
                     }
                    },
                    "trueBody": {
                     "type": "Block",
                     "statements": [
                      {
                       "type": "ReturnStatement",
                       "expression": {
                        "type": "StringLiteral",
                        "value": "SHIB-USDT",
                        "parts": [
                         "SHIB-USDT"
                        ],
                        "isUnicode": [
                         false
                        ]
                       }
                      }
                     ]
                    },
                    "falseBody": {
                     "type": "IfStatement",
                     "condition": {
                      "type": "BinaryOperation",
                      "operator": "==",
                      "left": {
                       "type": "Identifier",
                       "name": "tokenType"
                      },
                      "right": {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "MemberAccess",
                        "expression": {
                         "type": "Identifier",
                         "name": "PerpDexLib"
                        },
                        "memberName": "TokenType"
                       },
                       "memberName": "Sei"
                      }
                     },
                     "trueBody": {
                      "type": "Block",
                      "statements": [
                       {
                        "type": "ReturnStatement",
                        "expression": {
                         "type": "StringLiteral",
                         "value": "SEI-USDT",
                         "parts": [
                          "SEI-USDT"
                         ],
                         "isUnicode": [
                          false
                         ]
                        }
                       }
                      ]
                     },
                     "falseBody": {
                      "type": "IfStatement",
                      "condition": {
                       "type": "BinaryOperation",
                       "operator": "==",
                       "left": {
                        "type": "Identifier",
                        "name": "tokenType"
                       },
                       "right": {
                        "type": "MemberAccess",
                        "expression": {
                         "type": "MemberAccess",
                         "expression": {
                          "type": "Identifier",
                          "name": "PerpDexLib"
                         },
                         "memberName": "TokenType"
                        },
                        "memberName": "Ada"
                       }
                      },
                      "trueBody": {
                       "type": "Block",
                       "statements": [
                        {
                         "type": "ReturnStatement",
                         "expression": {
                          "type": "StringLiteral",
                          "value": "ADA-USDT",
                          "parts": [
                           "ADA-USDT"
                          ],
                          "isUnicode": [
                           false
                          ]
                         }
                        }
                       ]
                      },
                      "falseBody": {
                       "type": "IfStatement",
                       "condition": {
                        "type": "BinaryOperation",
                        "operator": "==",
                        "left": {
                         "type": "Identifier",
                         "name": "tokenType"
                        },
                        "right": {
                         "type": "MemberAccess",
                         "expression": {
                          "type": "MemberAccess",
                          "expression": {
                           "type": "Identifier",
                           "name": "PerpDexLib"
                          },
                          "memberName": "TokenType"
                         },
                         "memberName": "Pol"
                        }
                       },
                       "trueBody": {
                        "type": "Block",
                        "statements": [
                         {
                          "type": "ReturnStatement",
                          "expression": {
                           "type": "StringLiteral",
                           "value": "POL-USDT",
                           "parts": [
                            "POL-USDT"
                           ],
                           "isUnicode": [
                            false
                           ]
                          }
                         }
                        ]
                       },
                       "falseBody": {
                        "type": "IfStatement",
                        "condition": {
                         "type": "BinaryOperation",
                         "operator": "==",
                         "left": {
                          "type": "Identifier",
                          "name": "tokenType"
                         },
                         "right": {
                          "type": "MemberAccess",
                          "expression": {
                           "type": "MemberAccess",
                           "expression": {
                            "type": "Identifier",
                            "name": "PerpDexLib"
                           },
                           "memberName": "TokenType"
                          },
                          "memberName": "Bnb"
                         }
                        },
                        "trueBody": {
                         "type": "Block",
                         "statements": [
                          {
                           "type": "ReturnStatement",
                           "expression": {
                            "type": "StringLiteral",
                            "value": "BNB-USDT",
                            "parts": [
                             "BNB-USDT"
                            ],
                            "isUnicode": [
                             false
                            ]
                           }
                          }
                         ]
                        },
                        "falseBody": {
                         "type": "IfStatement",
                         "condition": {
                          "type": "BinaryOperation",
                          "operator": "==",
                          "left": {
                           "type": "Identifier",
                           "name": "tokenType"
                          },
                          "right": {
                           "type": "MemberAccess",
                           "expression": {
                            "type": "MemberAccess",
                            "expression": {
                             "type": "Identifier",
                             "name": "PerpDexLib"
                            },
                            "memberName": "TokenType"
                           },
                           "memberName": "Dot"
                          }
                         },
                         "trueBody": {
                          "type": "Block",
                          "statements": [
                           {
                            "type": "ReturnStatement",
                            "expression": {
                             "type": "StringLiteral",
                             "value": "DOT-USDT",
                             "parts": [
                              "DOT-USDT"
                             ],
                             "isUnicode": [
                              false
                             ]
                            }
                           }
                          ]
                         },
                         "falseBody": {
                          "type": "IfStatement",
                          "condition": {
                           "type": "BinaryOperation",
                           "operator": "==",
                           "left": {
                            "type": "Identifier",
                            "name": "tokenType"
                           },
                           "right": {
                            "type": "MemberAccess",
                            "expression": {
                             "type": "MemberAccess",
                             "expression": {
                              "type": "Identifier",
                              "name": "PerpDexLib"
                             },
                             "memberName": "TokenType"
                            },
                            "memberName": "Ltc"
                           }
                          },
                          "trueBody": {
                           "type": "Block",
                           "statements": [
                            {
                             "type": "ReturnStatement",
                             "expression": {
                              "type": "StringLiteral",
                              "value": "LTC-USDT",
                              "parts": [
                               "LTC-USDT"
                              ],
                              "isUnicode": [
                               false
                              ]
                             }
                            }
                           ]
                          },
                          "falseBody": {
                           "type": "IfStatement",
                           "condition": {
                            "type": "BinaryOperation",
                            "operator": "==",
                            "left": {
                             "type": "Identifier",
                             "name": "tokenType"
                            },
                            "right": {
                             "type": "MemberAccess",
                             "expression": {
                              "type": "MemberAccess",
                              "expression": {
                               "type": "Identifier",
                               "name": "PerpDexLib"
                              },
                              "memberName": "TokenType"
                             },
                             "memberName": "Avax"
                            }
                           },
                           "trueBody": {
                            "type": "Block",
                            "statements": [
                             {
                              "type": "ReturnStatement",
                              "expression": {
                               "type": "StringLiteral",
                               "value": "AVAX-USDT",
                               "parts": [
                                "AVAX-USDT"
                               ],
                               "isUnicode": [
                                false
                               ]
                              }
                             }
                            ]
                           },
                           "falseBody": {
                            "type": "IfStatement",
                            "condition": {
                             "type": "BinaryOperation",
                             "operator": "==",
                             "left": {
                              "type": "Identifier",
                              "name": "tokenType"
                             },
                             "right": {
                              "type": "MemberAccess",
                              "expression": {
                               "type": "MemberAccess",
                               "expression": {
                                "type": "Identifier",
                                "name": "PerpDexLib"
                               },
                               "memberName": "TokenType"
                              },
                              "memberName": "Trump"
                             }
                            },
                            "trueBody": {
                             "type": "Block",
                             "statements": [
                              {
                               "type": "ReturnStatement",
                               "expression": {
                                "type": "StringLiteral",
                                "value": "TRUMP-USDT",
                                "parts": [
                                 "TRUMP-USDT"
                                ],
                                "isUnicode": [
                                 false
                                ]
                               }
                              }
                             ]
                            },
                            "falseBody": {
                             "type": "Block",
                             "statements": [
                              {
                               "type": "ExpressionStatement",
                               "expression": {
                                "type": "FunctionCall",
                                "expression": {
                                 "type": "Identifier",
                                 "name": "revert"
                                },
                                "arguments": [
                                 {
                                  "type": "StringLiteral",
                                  "value": "Unknown token type",
                                  "parts": [
                                   "Unknown token type"
                                  ],
                                  "isUnicode": [
                                   false
                                  ]
                                 }
                                ],
                                "names": [],
                                "identifiers": []
                               }
                              }
                             ]
                            }
                           }
                          }
                         }
                        }
                       }
                      }
                     }
                    }
                   }
                  }
                 }
                }
               }
              }
             }
            }
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getPythFeedHashOrder",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes32",
           "stateMutability": null
          },
          "length": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "bytes32",
              "stateMutability": null
             },
             "length": null
            },
            "name": "feedHashes",
            "identifier": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "NewExpression",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "bytes32",
              "stateMutability": null
             },
             "length": null
            }
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "type"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "PerpDexLib"
                   },
                   "memberName": "TokenType"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "memberName": "max"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "right": {
              "type": "NumberLiteral",
              "number": "1",
              "subdenomination": null
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "1",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0x452d40e01473f95aa9930911b4392197b3551b37ac92a049e87487b654b4ebbe",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "2",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0xf63f008474fad630207a1cfa49207d59bca2593ea64fc0a6da9bf3337485791c",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "3",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "4",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0xdcef50dd0a4cd2dcc17e45df1676dcb336a11a61c69df7a0299b0150c672d25c",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "5",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0xd69731a2e74ac1ce884fc3890f7ee324b6deb66147055249568869ed700882e4",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "6",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "7",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0xec5d399846a9209f3fe5881d70aae9268c94339ff9817e8d18ff19fa05eea1c8",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "8",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0x03ae4db29ed4ae33d323568895aa00337e658e348b37509f5372ae51f0af00d5",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "9",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0x23d7315113f5b1d3ba7a83604c44b94d79f4fd69af77f804fc7f920a6dc65744",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "10",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0xf0d57deca57b3da2fe63a493f4c25925fdfd8edf834b20f93e1f84dbd1504d4a",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "11",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0x53614f1cb0c031d4af66c04cb9c756234adad0e1cee85303795091499a4084eb",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "12",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0x2a01deaec9e51a579277b34b122399984d0bbf57e2458a7e42fecd2829867a0d",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "13",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0xffd11c5a1cfd42f80afb2df4d9f264c15f956d68153335374ec10722edd70472",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "14",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0x2f95862b045670cd22bee3114c39763a4a08beeb663b145d283c31d7d1101c4f",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "15",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0xca3eed9b267293f6595901c734c7525ce8ef49adafe8284606ceb307afa2ca5b",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "16",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0x6e3f3fa8253588df9326580180233eb791e03b443a3ba7a1d892e73874e19a54",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "17",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0x93da3352f9f1d105fdfe4971cfa80e9dd777bfc5d0f683ebb6e1294b92137bb7",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feedHashes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "18",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0x879551021853eec7a7dc827578e8e69da7e4fa8148339aa0d3d5296405be4b1a",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "feedHashes"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "checkPythPriceFeedOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "IPyth.PythPriceFeed"
          },
          "length": null
         },
         "name": "priceFeeds",
         "identifier": {
          "type": "Identifier",
          "name": "priceFeeds"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "bytes32",
              "stateMutability": null
             },
             "length": null
            },
            "name": "feedHashOrder",
            "identifier": {
             "type": "Identifier",
             "name": "feedHashOrder"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "getPythFeedHashOrder"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "priceFeeds"
            },
            "memberName": "length"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": "==",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "IndexAccess",
                  "base": {
                   "type": "Identifier",
                   "name": "priceFeeds"
                  },
                  "index": {
                   "type": "Identifier",
                   "name": "i"
                  }
                 },
                 "memberName": "id"
                },
                "right": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "Identifier",
                  "name": "feedHashOrder"
                 },
                 "index": {
                  "type": "Identifier",
                  "name": "i"
                 }
                }
               },
               {
                "type": "StringLiteral",
                "value": "Feed hash is not correct",
                "parts": [
                 "Feed hash is not correct"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "checkPriceDataOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "priceData"
            },
            "memberName": "oracleType"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "OracleType"
            },
            "memberName": "BisonAI"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ForStatement",
             "initExpression": {
              "type": "VariableDeclarationStatement",
              "variables": [
               {
                "type": "VariableDeclaration",
                "typeName": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "name": "i",
                "identifier": {
                 "type": "Identifier",
                 "name": "i"
                },
                "storageLocation": null,
                "isStateVar": false,
                "isIndexed": false,
                "expression": null
               }
              ],
              "initialValue": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "conditionExpression": {
              "type": "BinaryOperation",
              "operator": "<",
              "left": {
               "type": "Identifier",
               "name": "i"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "priceData"
                },
                "memberName": "feedHashes"
               },
               "memberName": "length"
              }
             },
             "loopExpression": {
              "type": "ExpressionStatement",
              "expression": {
               "type": "UnaryOperation",
               "operator": "++",
               "subExpression": {
                "type": "Identifier",
                "name": "i"
               },
               "isPrefix": false
              }
             },
             "body": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "require"
                 },
                 "arguments": [
                  {
                   "type": "BinaryOperation",
                   "operator": "==",
                   "left": {
                    "type": "IndexAccess",
                    "base": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "priceData"
                     },
                     "memberName": "feedHashes"
                    },
                    "index": {
                     "type": "Identifier",
                     "name": "i"
                    }
                   },
                   "right": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "keccak256"
                    },
                    "arguments": [
                     {
                      "type": "FunctionCall",
                      "expression": {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "Identifier",
                        "name": "abi"
                       },
                       "memberName": "encodePacked"
                      },
                      "arguments": [
                       {
                        "type": "FunctionCall",
                        "expression": {
                         "type": "Identifier",
                         "name": "getBisonAIFeedName"
                        },
                        "arguments": [
                         {
                          "type": "FunctionCall",
                          "expression": {
                           "type": "MemberAccess",
                           "expression": {
                            "type": "Identifier",
                            "name": "PerpDexLib"
                           },
                           "memberName": "TokenType"
                          },
                          "arguments": [
                           {
                            "type": "Identifier",
                            "name": "i"
                           }
                          ],
                          "names": [],
                          "identifiers": []
                         }
                        ],
                        "names": [],
                        "identifiers": []
                       }
                      ],
                      "names": [],
                      "identifiers": []
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  },
                  {
                   "type": "StringLiteral",
                   "value": "Feed hash is not correct (BisonAI)",
                   "parts": [
                    "Feed hash is not correct (BisonAI)"
                   ],
                   "isUnicode": [
                    false
                   ]
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "priceData"
             },
             "memberName": "oracleType"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "OracleType"
             },
             "memberName": "Pyth"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "VariableDeclarationStatement",
              "variables": [
               {
                "type": "VariableDeclaration",
                "typeName": {
                 "type": "ArrayTypeName",
                 "baseTypeName": {
                  "type": "ElementaryTypeName",
                  "name": "bytes32",
                  "stateMutability": null
                 },
                 "length": null
                },
                "name": "feedHashOrder",
                "identifier": {
                 "type": "Identifier",
                 "name": "feedHashOrder"
                },
                "storageLocation": "memory",
                "isStateVar": false,
                "isIndexed": false,
                "expression": null
               }
              ],
              "initialValue": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "getPythFeedHashOrder"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             },
             {
              "type": "ForStatement",
              "initExpression": {
               "type": "VariableDeclarationStatement",
               "variables": [
                {
                 "type": "VariableDeclaration",
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "name": "i",
                 "identifier": {
                  "type": "Identifier",
                  "name": "i"
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                }
               ],
               "initialValue": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "conditionExpression": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "i"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "feedHashes"
                },
                "memberName": "length"
               }
              },
              "loopExpression": {
               "type": "ExpressionStatement",
               "expression": {
                "type": "UnaryOperation",
                "operator": "++",
                "subExpression": {
                 "type": "Identifier",
                 "name": "i"
                },
                "isPrefix": false
               }
              },
              "body": {
               "type": "Block",
               "statements": [
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "require"
                  },
                  "arguments": [
                   {
                    "type": "BinaryOperation",
                    "operator": "==",
                    "left": {
                     "type": "IndexAccess",
                     "base": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "priceData"
                      },
                      "memberName": "feedHashes"
                     },
                     "index": {
                      "type": "Identifier",
                      "name": "i"
                     }
                    },
                    "right": {
                     "type": "IndexAccess",
                     "base": {
                      "type": "Identifier",
                      "name": "feedHashOrder"
                     },
                     "index": {
                      "type": "Identifier",
                      "name": "i"
                     }
                    }
                   },
                   {
                    "type": "StringLiteral",
                    "value": "Feed hash is not correct (Pyth)",
                    "parts": [
                     "Feed hash is not correct (Pyth)"
                    ],
                    "isUnicode": [
                     false
                    ]
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               ]
              }
             }
            ]
           },
           "falseBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "revert"
               },
               "arguments": [
                {
                 "type": "StringLiteral",
                 "value": "Unknown oracle type",
                 "parts": [
                  "Unknown oracle type"
                 ],
                 "isUnicode": [
                  false
                 ]
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            ]
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getPreviousPriceAndTime",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint64",
           "stateMutability": null
          },
          "length": null
         },
         "name": "roundIds",
         "identifier": {
          "type": "Identifier",
          "name": "roundIds"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IBisonAIRouter"
         },
         "name": "bisonAIRouter",
         "identifier": {
          "type": "Identifier",
          "name": "bisonAIRouter"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPyth"
         },
         "name": "pyth",
         "identifier": {
          "type": "Identifier",
          "name": "pyth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkPriceDataOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "priceData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "priceData"
            },
            "memberName": "oracleType"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "OracleType"
            },
            "memberName": "BisonAI"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "roundIds"
                 },
                 "memberName": "length"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               {
                "type": "StringLiteral",
                "value": "RoundIds length is 0",
                "parts": [
                 "RoundIds length is 0"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ArrayTypeName",
                "baseTypeName": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "length": null
               },
               "name": "prices",
               "identifier": {
                "type": "Identifier",
                "name": "prices"
               },
               "storageLocation": "memory",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "NewExpression",
               "typeName": {
                "type": "ArrayTypeName",
                "baseTypeName": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "length": null
               }
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "roundIds"
                },
                "memberName": "length"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ArrayTypeName",
                "baseTypeName": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "length": null
               },
               "name": "times",
               "identifier": {
                "type": "Identifier",
                "name": "times"
               },
               "storageLocation": "memory",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "NewExpression",
               "typeName": {
                "type": "ArrayTypeName",
                "baseTypeName": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "length": null
               }
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "roundIds"
                },
                "memberName": "length"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ForStatement",
             "initExpression": {
              "type": "VariableDeclarationStatement",
              "variables": [
               {
                "type": "VariableDeclaration",
                "typeName": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "name": "i",
                "identifier": {
                 "type": "Identifier",
                 "name": "i"
                },
                "storageLocation": null,
                "isStateVar": false,
                "isIndexed": false,
                "expression": null
               }
              ],
              "initialValue": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "conditionExpression": {
              "type": "BinaryOperation",
              "operator": "<",
              "left": {
               "type": "Identifier",
               "name": "i"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "roundIds"
               },
               "memberName": "length"
              }
             },
             "loopExpression": {
              "type": "ExpressionStatement",
              "expression": {
               "type": "UnaryOperation",
               "operator": "++",
               "subExpression": {
                "type": "Identifier",
                "name": "i"
               },
               "isPrefix": false
              }
             },
             "body": {
              "type": "Block",
              "statements": [
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 null,
                 {
                  "type": "VariableDeclaration",
                  "name": "answer",
                  "identifier": {
                   "type": "Identifier",
                   "name": "answer"
                  },
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "int256",
                   "stateMutability": null
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 },
                 {
                  "type": "VariableDeclaration",
                  "name": "updatedAt",
                  "identifier": {
                   "type": "Identifier",
                   "name": "updatedAt"
                  },
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "uint256",
                   "stateMutability": null
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "bisonAIRouter"
                  },
                  "memberName": "getRoundData"
                 },
                 "arguments": [
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "Identifier",
                    "name": "getBisonAIFeedName"
                   },
                   "arguments": [
                    {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "PerpDexLib"
                      },
                      "memberName": "TokenType"
                     },
                     "arguments": [
                      {
                       "type": "Identifier",
                       "name": "i"
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "IndexAccess",
                   "base": {
                    "type": "Identifier",
                    "name": "roundIds"
                   },
                   "index": {
                    "type": "Identifier",
                    "name": "i"
                   }
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "require"
                 },
                 "arguments": [
                  {
                   "type": "BinaryOperation",
                   "operator": ">",
                   "left": {
                    "type": "Identifier",
                    "name": "answer"
                   },
                   "right": {
                    "type": "NumberLiteral",
                    "number": "0",
                    "subdenomination": null
                   }
                  },
                  {
                   "type": "StringLiteral",
                   "value": "Price is 0 (BisonAI)",
                   "parts": [
                    "Price is 0 (BisonAI)"
                   ],
                   "isUnicode": [
                    false
                   ]
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "IndexAccess",
                  "base": {
                   "type": "Identifier",
                   "name": "prices"
                  },
                  "index": {
                   "type": "Identifier",
                   "name": "i"
                  }
                 },
                 "right": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "ElementaryTypeName",
                   "name": "uint256",
                   "stateMutability": null
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "answer"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "IndexAccess",
                  "base": {
                   "type": "Identifier",
                   "name": "times"
                  },
                  "index": {
                   "type": "Identifier",
                   "name": "i"
                  }
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "updatedAt"
                 }
                }
               }
              ]
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "Identifier",
                "name": "prices"
               },
               {
                "type": "Identifier",
                "name": "times"
               }
              ],
              "isArray": false
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "priceData"
             },
             "memberName": "oracleType"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "OracleType"
             },
             "memberName": "Pyth"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "VariableDeclarationStatement",
              "variables": [
               {
                "type": "VariableDeclaration",
                "typeName": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "name": "feeAmount",
                "identifier": {
                 "type": "Identifier",
                 "name": "feeAmount"
                },
                "storageLocation": null,
                "isStateVar": false,
                "isIndexed": false,
                "expression": null
               }
              ],
              "initialValue": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "pyth"
                },
                "memberName": "getUpdateFee"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "proofs"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             {
              "type": "VariableDeclarationStatement",
              "variables": [
               {
                "type": "VariableDeclaration",
                "typeName": {
                 "type": "ArrayTypeName",
                 "baseTypeName": {
                  "type": "UserDefinedTypeName",
                  "namePath": "IPyth.PythPriceFeed"
                 },
                 "length": null
                },
                "name": "priceFeeds",
                "identifier": {
                 "type": "Identifier",
                 "name": "priceFeeds"
                },
                "storageLocation": "memory",
                "isStateVar": false,
                "isIndexed": false,
                "expression": null
               }
              ],
              "initialValue": {
               "type": "FunctionCall",
               "expression": {
                "type": "NameValueExpression",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "pyth"
                 },
                 "memberName": "parsePriceFeedUpdates"
                },
                "arguments": {
                 "type": "NameValueList",
                 "names": [
                  "value"
                 ],
                 "identifiers": [
                  {
                   "type": "Identifier",
                   "name": "value"
                  }
                 ],
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "feeAmount"
                  }
                 ]
                }
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "proofs"
                },
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "priceData"
                 },
                 "memberName": "feedHashes"
                },
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint64",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "IndexAccess",
                   "base": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "priceData"
                    },
                    "memberName": "timestamps"
                   },
                   "index": {
                    "type": "NumberLiteral",
                    "number": "0",
                    "subdenomination": null
                   }
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint64",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "IndexAccess",
                   "base": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "priceData"
                    },
                    "memberName": "timestamps"
                   },
                   "index": {
                    "type": "NumberLiteral",
                    "number": "0",
                    "subdenomination": null
                   }
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "checkPythPriceFeedOrder"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "priceFeeds"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             {
              "type": "VariableDeclarationStatement",
              "variables": [
               {
                "type": "VariableDeclaration",
                "typeName": {
                 "type": "ArrayTypeName",
                 "baseTypeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "length": null
                },
                "name": "prices",
                "identifier": {
                 "type": "Identifier",
                 "name": "prices"
                },
                "storageLocation": "memory",
                "isStateVar": false,
                "isIndexed": false,
                "expression": null
               }
              ],
              "initialValue": {
               "type": "FunctionCall",
               "expression": {
                "type": "NewExpression",
                "typeName": {
                 "type": "ArrayTypeName",
                 "baseTypeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "length": null
                }
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "priceData"
                  },
                  "memberName": "feedHashes"
                 },
                 "memberName": "length"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             {
              "type": "VariableDeclarationStatement",
              "variables": [
               {
                "type": "VariableDeclaration",
                "typeName": {
                 "type": "ArrayTypeName",
                 "baseTypeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "length": null
                },
                "name": "times",
                "identifier": {
                 "type": "Identifier",
                 "name": "times"
                },
                "storageLocation": "memory",
                "isStateVar": false,
                "isIndexed": false,
                "expression": null
               }
              ],
              "initialValue": {
               "type": "FunctionCall",
               "expression": {
                "type": "NewExpression",
                "typeName": {
                 "type": "ArrayTypeName",
                 "baseTypeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "length": null
                }
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "priceData"
                  },
                  "memberName": "feedHashes"
                 },
                 "memberName": "length"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             {
              "type": "ForStatement",
              "initExpression": {
               "type": "VariableDeclarationStatement",
               "variables": [
                {
                 "type": "VariableDeclaration",
                 "typeName": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "name": "i",
                 "identifier": {
                  "type": "Identifier",
                  "name": "i"
                 },
                 "storageLocation": null,
                 "isStateVar": false,
                 "isIndexed": false,
                 "expression": null
                }
               ],
               "initialValue": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "conditionExpression": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "Identifier",
                "name": "i"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "priceFeeds"
                },
                "memberName": "length"
               }
              },
              "loopExpression": {
               "type": "ExpressionStatement",
               "expression": {
                "type": "UnaryOperation",
                "operator": "++",
                "subExpression": {
                 "type": "Identifier",
                 "name": "i"
                },
                "isPrefix": false
               }
              },
              "body": {
               "type": "Block",
               "statements": [
                {
                 "type": "VariableDeclarationStatement",
                 "variables": [
                  {
                   "type": "VariableDeclaration",
                   "typeName": {
                    "type": "ElementaryTypeName",
                    "name": "int64",
                    "stateMutability": null
                   },
                   "name": "price",
                   "identifier": {
                    "type": "Identifier",
                    "name": "price"
                   },
                   "storageLocation": null,
                   "isStateVar": false,
                   "isIndexed": false,
                   "expression": null
                  }
                 ],
                 "initialValue": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "IndexAccess",
                    "base": {
                     "type": "Identifier",
                     "name": "priceFeeds"
                    },
                    "index": {
                     "type": "Identifier",
                     "name": "i"
                    }
                   },
                   "memberName": "price"
                  },
                  "memberName": "price"
                 }
                },
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "require"
                  },
                  "arguments": [
                   {
                    "type": "BinaryOperation",
                    "operator": ">",
                    "left": {
                     "type": "Identifier",
                     "name": "price"
                    },
                    "right": {
                     "type": "NumberLiteral",
                     "number": "0",
                     "subdenomination": null
                    }
                   },
                   {
                    "type": "StringLiteral",
                    "value": "Price is 0 (Pyth)",
                    "parts": [
                     "Price is 0 (Pyth)"
                    ],
                    "isUnicode": [
                     false
                    ]
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                },
                {
                 "type": "IfStatement",
                 "condition": {
                  "type": "BinaryOperation",
                  "operator": "||",
                  "left": {
                   "type": "BinaryOperation",
                   "operator": "==",
                   "left": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "IndexAccess",
                     "base": {
                      "type": "Identifier",
                      "name": "priceFeeds"
                     },
                     "index": {
                      "type": "Identifier",
                      "name": "i"
                     }
                    },
                    "memberName": "id"
                   },
                   "right": {
                    "type": "NumberLiteral",
                    "number": "0xd69731a2e74ac1ce884fc3890f7ee324b6deb66147055249568869ed700882e4",
                    "subdenomination": null
                   }
                  },
                  "right": {
                   "type": "BinaryOperation",
                   "operator": "==",
                   "left": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "IndexAccess",
                     "base": {
                      "type": "Identifier",
                      "name": "priceFeeds"
                     },
                     "index": {
                      "type": "Identifier",
                      "name": "i"
                     }
                    },
                    "memberName": "id"
                   },
                   "right": {
                    "type": "NumberLiteral",
                    "number": "0xf0d57deca57b3da2fe63a493f4c25925fdfd8edf834b20f93e1f84dbd1504d4a",
                    "subdenomination": null
                   }
                  }
                 },
                 "trueBody": {
                  "type": "Block",
                  "statements": [
                   {
                    "type": "ExpressionStatement",
                    "expression": {
                     "type": "BinaryOperation",
                     "operator": "=",
                     "left": {
                      "type": "Identifier",
                      "name": "price"
                     },
                     "right": {
                      "type": "BinaryOperation",
                      "operator": "/",
                      "left": {
                       "type": "Identifier",
                       "name": "price"
                      },
                      "right": {
                       "type": "NumberLiteral",
                       "number": "100",
                       "subdenomination": null
                      }
                     }
                    }
                   }
                  ]
                 },
                 "falseBody": null
                },
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "require"
                  },
                  "arguments": [
                   {
                    "type": "BinaryOperation",
                    "operator": "==",
                    "left": {
                     "type": "Identifier",
                     "name": "price"
                    },
                    "right": {
                     "type": "IndexAccess",
                     "base": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "priceData"
                      },
                      "memberName": "answers"
                     },
                     "index": {
                      "type": "Identifier",
                      "name": "i"
                     }
                    }
                   },
                   {
                    "type": "StringLiteral",
                    "value": "Price is not correct (Pyth)",
                    "parts": [
                     "Price is not correct (Pyth)"
                    ],
                    "isUnicode": [
                     false
                    ]
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                },
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "BinaryOperation",
                  "operator": "=",
                  "left": {
                   "type": "IndexAccess",
                   "base": {
                    "type": "Identifier",
                    "name": "prices"
                   },
                   "index": {
                    "type": "Identifier",
                    "name": "i"
                   }
                  },
                  "right": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "ElementaryTypeName",
                    "name": "uint256",
                    "stateMutability": null
                   },
                   "arguments": [
                    {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "ElementaryTypeName",
                      "name": "uint64",
                      "stateMutability": null
                     },
                     "arguments": [
                      {
                       "type": "Identifier",
                       "name": "price"
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  }
                 }
                },
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "Identifier",
                   "name": "require"
                  },
                  "arguments": [
                   {
                    "type": "BinaryOperation",
                    "operator": "==",
                    "left": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "IndexAccess",
                       "base": {
                        "type": "Identifier",
                        "name": "priceFeeds"
                       },
                       "index": {
                        "type": "Identifier",
                        "name": "i"
                       }
                      },
                      "memberName": "price"
                     },
                     "memberName": "publishTime"
                    },
                    "right": {
                     "type": "IndexAccess",
                     "base": {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "priceData"
                      },
                      "memberName": "timestamps"
                     },
                     "index": {
                      "type": "Identifier",
                      "name": "i"
                     }
                    }
                   },
                   {
                    "type": "StringLiteral",
                    "value": "Time is not correct (Pyth)",
                    "parts": [
                     "Time is not correct (Pyth)"
                    ],
                    "isUnicode": [
                     false
                    ]
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                },
                {
                 "type": "ExpressionStatement",
                 "expression": {
                  "type": "BinaryOperation",
                  "operator": "=",
                  "left": {
                   "type": "IndexAccess",
                   "base": {
                    "type": "Identifier",
                    "name": "times"
                   },
                   "index": {
                    "type": "Identifier",
                    "name": "i"
                   }
                  },
                  "right": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "IndexAccess",
                     "base": {
                      "type": "Identifier",
                      "name": "priceFeeds"
                     },
                     "index": {
                      "type": "Identifier",
                      "name": "i"
                     }
                    },
                    "memberName": "price"
                   },
                   "memberName": "publishTime"
                  }
                 }
                }
               ]
              }
             },
             {
              "type": "ReturnStatement",
              "expression": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "Identifier",
                 "name": "prices"
                },
                {
                 "type": "Identifier",
                 "name": "times"
                }
               ],
               "isArray": false
              }
             }
            ]
           },
           "falseBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "revert"
               },
               "arguments": [
                {
                 "type": "StringLiteral",
                 "value": "Unknown oracle type",
                 "parts": [
                  "Unknown oracle type"
                 ],
                 "isUnicode": [
                  false
                 ]
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            ]
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "safeTransferFromAndCheckBalance",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "from",
         "identifier": {
          "type": "Identifier",
          "name": "from"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "to",
         "identifier": {
          "type": "Identifier",
          "name": "to"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IERC20"
         },
         "name": "usdt",
         "identifier": {
          "type": "Identifier",
          "name": "usdt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "balanceBefore",
            "identifier": {
             "type": "Identifier",
             "name": "balanceBefore"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "balanceOf"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "to"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "safeTransferFrom"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "from"
            },
            {
             "type": "Identifier",
             "name": "to"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "balanceAfter",
            "identifier": {
             "type": "Identifier",
             "name": "balanceAfter"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "balanceOf"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "to"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "BinaryOperation",
              "operator": "-",
              "left": {
               "type": "Identifier",
               "name": "balanceAfter"
              },
              "right": {
               "type": "Identifier",
               "name": "balanceBefore"
              }
             },
             "right": {
              "type": "Identifier",
              "name": "amount"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Transfer failed",
             "parts": [
              "Transfer failed"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "safeTransferAndCheckBalance",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "to",
         "identifier": {
          "type": "Identifier",
          "name": "to"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IERC20"
         },
         "name": "usdt",
         "identifier": {
          "type": "Identifier",
          "name": "usdt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "balanceBefore",
            "identifier": {
             "type": "Identifier",
             "name": "balanceBefore"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "balanceOf"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "to"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "safeTransfer"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "to"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "balanceAfter",
            "identifier": {
             "type": "Identifier",
             "name": "balanceAfter"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "balanceOf"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "to"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "BinaryOperation",
              "operator": "-",
              "left": {
               "type": "Identifier",
               "name": "balanceAfter"
              },
              "right": {
               "type": "Identifier",
               "name": "balanceBefore"
              }
             },
             "right": {
              "type": "Identifier",
              "name": "amount"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Transfer failed",
             "parts": [
              "Transfer failed"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    },
    {
     "type": "ContractDefinition",
     "name": "PerpDexAuthLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes32",
        "stateMutability": null
       },
       "libraryName": "ECDSA",
       "functions": [],
       "operators": []
      },
      {
       "type": "EnumDefinition",
       "name": "AdminType",
       "members": [
        {
         "type": "EnumValue",
         "name": "Liquidation"
        },
        {
         "type": "EnumValue",
         "name": "LimitOrder"
        },
        {
         "type": "EnumValue",
         "name": "SingleOpen"
        },
        {
         "type": "EnumValue",
         "name": "Close"
        },
        {
         "type": "EnumValue",
         "name": "Tpsl"
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "checkUser",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "message",
         "identifier": {
          "type": "Identifier",
          "name": "message"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "length",
         "identifier": {
          "type": "Identifier",
          "name": "length"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "signedData",
         "identifier": {
          "type": "Identifier",
          "name": "signedData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "user",
         "identifier": {
          "type": "Identifier",
          "name": "user"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes32",
             "stateMutability": null
            },
            "name": "ethHashedMessage",
            "identifier": {
             "type": "Identifier",
             "name": "ethHashedMessage"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "keccak256"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodePacked"
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "\\x19Ethereum Signed Message:\\n",
               "parts": [
                "\\x19Ethereum Signed Message:\\n"
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "length"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "Identifier",
               "name": "message"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "recoveredAddress",
            "identifier": {
             "type": "Identifier",
             "name": "recoveredAddress"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ethHashedMessage"
            },
            "memberName": "recover"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "signedData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "Identifier",
            "name": "recoveredAddress"
           },
           "right": {
            "type": "Identifier",
            "name": "user"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "bytes32",
                "stateMutability": null
               },
               "name": "klayHashedMessage",
               "identifier": {
                "type": "Identifier",
                "name": "klayHashedMessage"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "keccak256"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "abi"
                 },
                 "memberName": "encodePacked"
                },
                "arguments": [
                 {
                  "type": "StringLiteral",
                  "value": "\\x19Klaytn Signed Message:\\n",
                  "parts": [
                   "\\x19Klaytn Signed Message:\\n"
                  ],
                  "isUnicode": [
                   false
                  ]
                 },
                 {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "Strings"
                   },
                   "memberName": "toString"
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "length"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 {
                  "type": "Identifier",
                  "name": "message"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "recoveredAddress"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "klayHashedMessage"
                },
                "memberName": "recover"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "signedData"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": "==",
                "left": {
                 "type": "Identifier",
                 "name": "recoveredAddress"
                },
                "right": {
                 "type": "Identifier",
                 "name": "user"
                }
               },
               {
                "type": "StringLiteral",
                "value": "Invalid signed data",
                "parts": [
                 "Invalid signed data"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "recoveredAddress"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "ECDSA: invalid signature",
             "parts": [
              "ECDSA: invalid signature"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getOpenLimitOrderMsg",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OpenLimitOrderData"
         },
         "name": "o",
         "identifier": {
          "type": "Identifier",
          "name": "o"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "nonce",
         "identifier": {
          "type": "Identifier",
          "name": "nonce"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "contractAddr",
         "identifier": {
          "type": "Identifier",
          "name": "contractAddr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "string",
             "stateMutability": null
            },
            "name": "message",
            "identifier": {
             "type": "Identifier",
             "name": "message"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "string",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodePacked"
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "Open Limit Order for Token: ",
               "parts": [
                "Open Limit Order for Token: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "o"
                   },
                   "memberName": "tokenType"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Margin: ",
               "parts": [
                ", Margin: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "o"
                 },
                 "memberName": "marginAmount"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Leverage: ",
               "parts": [
                ", Leverage: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "o"
                 },
                 "memberName": "leverage"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Long: ",
               "parts": [
                ", Long: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Conditional",
                 "condition": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "o"
                  },
                  "memberName": "long"
                 },
                 "trueExpression": {
                  "type": "NumberLiteral",
                  "number": "1",
                  "subdenomination": null
                 },
                 "falseExpression": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Wanted Price: ",
               "parts": [
                ", Wanted Price: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "o"
                 },
                 "memberName": "wantedPrice"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", TP: ",
               "parts": [
                ", TP: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "o"
                 },
                 "memberName": "tpPrice"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", SL: ",
               "parts": [
                ", SL: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "o"
                 },
                 "memberName": "slPrice"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Nonce: ",
               "parts": [
                ", Nonce: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "nonce"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Chain: ",
               "parts": [
                ", Chain: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "block"
                 },
                 "memberName": "chainid"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Contract: ",
               "parts": [
                ", Contract: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toHexString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "contractAddr"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "message"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getCloseLimitOrderMsg",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "nonce",
         "identifier": {
          "type": "Identifier",
          "name": "nonce"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "contractAddr",
         "identifier": {
          "type": "Identifier",
          "name": "contractAddr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "string",
             "stateMutability": null
            },
            "name": "message",
            "identifier": {
             "type": "Identifier",
             "name": "message"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "string",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodePacked"
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "Close Limit Order: ",
               "parts": [
                "Close Limit Order: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "positionId"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Nonce: ",
               "parts": [
                ", Nonce: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "nonce"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Chain: ",
               "parts": [
                ", Chain: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "block"
                 },
                 "memberName": "chainid"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Contract: ",
               "parts": [
                ", Contract: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toHexString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "contractAddr"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "message"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getOpenPositionMsg",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OpenPositionData"
         },
         "name": "o",
         "identifier": {
          "type": "Identifier",
          "name": "o"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "nonce",
         "identifier": {
          "type": "Identifier",
          "name": "nonce"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "contractAddr",
         "identifier": {
          "type": "Identifier",
          "name": "contractAddr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "string",
             "stateMutability": null
            },
            "name": "message",
            "identifier": {
             "type": "Identifier",
             "name": "message"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "string",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodePacked"
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "Open position for Token: ",
               "parts": [
                "Open position for Token: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "o"
                   },
                   "memberName": "tokenType"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Margin: ",
               "parts": [
                ", Margin: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "o"
                 },
                 "memberName": "marginAmount"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Leverage: ",
               "parts": [
                ", Leverage: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "o"
                 },
                 "memberName": "leverage"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Long: ",
               "parts": [
                ", Long: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Conditional",
                 "condition": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "o"
                  },
                  "memberName": "long"
                 },
                 "trueExpression": {
                  "type": "NumberLiteral",
                  "number": "1",
                  "subdenomination": null
                 },
                 "falseExpression": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", TP: ",
               "parts": [
                ", TP: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "o"
                 },
                 "memberName": "tpPrice"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", SL: ",
               "parts": [
                ", SL: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "o"
                 },
                 "memberName": "slPrice"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Price: ",
               "parts": [
                ", Price: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "o"
                 },
                 "memberName": "expectedPrice"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Nonce: ",
               "parts": [
                ", Nonce: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "nonce"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Chain: ",
               "parts": [
                ", Chain: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "block"
                 },
                 "memberName": "chainid"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Contract: ",
               "parts": [
                ", Contract: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toHexString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "contractAddr"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "message"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getClosePositionMsg",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "nonce",
         "identifier": {
          "type": "Identifier",
          "name": "nonce"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "contractAddr",
         "identifier": {
          "type": "Identifier",
          "name": "contractAddr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "string",
             "stateMutability": null
            },
            "name": "message",
            "identifier": {
             "type": "Identifier",
             "name": "message"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "string",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodePacked"
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "Close Position: ",
               "parts": [
                "Close Position: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "positionId"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Nonce: ",
               "parts": [
                ", Nonce: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "nonce"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Chain: ",
               "parts": [
                ", Chain: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "block"
                 },
                 "memberName": "chainid"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Contract: ",
               "parts": [
                ", Contract: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toHexString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "contractAddr"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "message"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getSetTpslMsg",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpPrice",
         "identifier": {
          "type": "Identifier",
          "name": "tpPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slPrice",
         "identifier": {
          "type": "Identifier",
          "name": "slPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "nonce",
         "identifier": {
          "type": "Identifier",
          "name": "nonce"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "contractAddr",
         "identifier": {
          "type": "Identifier",
          "name": "contractAddr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "string",
             "stateMutability": null
            },
            "name": "message",
            "identifier": {
             "type": "Identifier",
             "name": "message"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "string",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodePacked"
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "Set TPSL: ",
               "parts": [
                "Set TPSL: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "positionId"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", TpPrice: ",
               "parts": [
                ", TpPrice: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "tpPrice"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", SlPrice: ",
               "parts": [
                ", SlPrice: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "slPrice"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Nonce: ",
               "parts": [
                ", Nonce: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "nonce"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Chain: ",
               "parts": [
                ", Chain: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "block"
                 },
                 "memberName": "chainid"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Contract: ",
               "parts": [
                ", Contract: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toHexString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "contractAddr"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "message"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getChangeMarginMsg",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "addMargin",
         "identifier": {
          "type": "Identifier",
          "name": "addMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "marginDelta",
         "identifier": {
          "type": "Identifier",
          "name": "marginDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "nonce",
         "identifier": {
          "type": "Identifier",
          "name": "nonce"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "contractAddr",
         "identifier": {
          "type": "Identifier",
          "name": "contractAddr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "string",
             "stateMutability": null
            },
            "name": "message",
            "identifier": {
             "type": "Identifier",
             "name": "message"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "string",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodePacked"
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "Change Margin for Position: ",
               "parts": [
                "Change Margin for Position: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "positionId"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Add: ",
               "parts": [
                ", Add: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Conditional",
                 "condition": {
                  "type": "Identifier",
                  "name": "addMargin"
                 },
                 "trueExpression": {
                  "type": "NumberLiteral",
                  "number": "1",
                  "subdenomination": null
                 },
                 "falseExpression": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Margin: ",
               "parts": [
                ", Margin: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "marginDelta"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Nonce: ",
               "parts": [
                ", Nonce: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "nonce"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Chain: ",
               "parts": [
                ", Chain: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "block"
                 },
                 "memberName": "chainid"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Contract: ",
               "parts": [
                ", Contract: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toHexString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "contractAddr"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "message"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_setAdmins",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "length": null
         },
         "name": "newAdmins",
         "identifier": {
          "type": "Identifier",
          "name": "newAdmins"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "length": null
         },
         "name": "admins",
         "identifier": {
          "type": "Identifier",
          "name": "admins"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "WhileStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "admins"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "admins"
               },
               "memberName": "pop"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         },
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "newAdmins"
            },
            "memberName": "length"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "admins"
               },
               "memberName": "push"
              },
              "arguments": [
               {
                "type": "IndexAccess",
                "base": {
                 "type": "Identifier",
                 "name": "newAdmins"
                },
                "index": {
                 "type": "Identifier",
                 "name": "i"
                }
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    },
    {
     "type": "ContractDefinition",
     "name": "PerpDexLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "EnumDefinition",
       "name": "TokenType",
       "members": [
        {
         "type": "EnumValue",
         "name": "Btc"
        },
        {
         "type": "EnumValue",
         "name": "Klay"
        },
        {
         "type": "EnumValue",
         "name": "Wemix"
        },
        {
         "type": "EnumValue",
         "name": "Eth"
        },
        {
         "type": "EnumValue",
         "name": "Doge"
        },
        {
         "type": "EnumValue",
         "name": "Pepe"
        },
        {
         "type": "EnumValue",
         "name": "Sol"
        },
        {
         "type": "EnumValue",
         "name": "Xrp"
        },
        {
         "type": "EnumValue",
         "name": "Apt"
        },
        {
         "type": "EnumValue",
         "name": "Sui"
        },
        {
         "type": "EnumValue",
         "name": "Shib"
        },
        {
         "type": "EnumValue",
         "name": "Sei"
        },
        {
         "type": "EnumValue",
         "name": "Ada"
        },
        {
         "type": "EnumValue",
         "name": "Pol"
        },
        {
         "type": "EnumValue",
         "name": "Bnb"
        },
        {
         "type": "EnumValue",
         "name": "Dot"
        },
        {
         "type": "EnumValue",
         "name": "Ltc"
        },
        {
         "type": "EnumValue",
         "name": "Avax"
        },
        {
         "type": "EnumValue",
         "name": "Trump"
        }
       ]
      },
      {
       "type": "EnumDefinition",
       "name": "PositionStatus",
       "members": [
        {
         "type": "EnumValue",
         "name": "Initial"
        },
        {
         "type": "EnumValue",
         "name": "Open"
        },
        {
         "type": "EnumValue",
         "name": "Closed"
        },
        {
         "type": "EnumValue",
         "name": "Liquidated"
        },
        {
         "type": "EnumValue",
         "name": "RequestOpen"
        },
        {
         "type": "EnumValue",
         "name": "LimitOrderOpen"
        },
        {
         "type": "EnumValue",
         "name": "LimitOrderClosed"
        },
        {
         "type": "EnumValue",
         "name": "RolledBack"
        },
        {
         "type": "EnumValue",
         "name": "Merged"
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "Position",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "margin",
         "identifier": {
          "type": "Identifier",
          "name": "margin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "size",
         "identifier": {
          "type": "Identifier",
          "name": "size"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "openFee",
         "identifier": {
          "type": "Identifier",
          "name": "openFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "initialPrice",
         "identifier": {
          "type": "Identifier",
          "name": "initialPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "openPositionIndex",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIndex"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalPrice",
         "identifier": {
          "type": "Identifier",
          "name": "finalPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PositionStatus"
         },
         "name": "positionStatus",
         "identifier": {
          "type": "Identifier",
          "name": "positionStatus"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "limitOrderPrice",
         "identifier": {
          "type": "Identifier",
          "name": "limitOrderPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "limitOrderIndex",
         "identifier": {
          "type": "Identifier",
          "name": "limitOrderIndex"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "StatusTime"
         },
         "name": "statusTime",
         "identifier": {
          "type": "Identifier",
          "name": "statusTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "pnl",
         "identifier": {
          "type": "Identifier",
          "name": "pnl"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidationPrice",
         "identifier": {
          "type": "Identifier",
          "name": "liquidationPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpPrice",
         "identifier": {
          "type": "Identifier",
          "name": "tpPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slPrice",
         "identifier": {
          "type": "Identifier",
          "name": "slPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "marginUpdatedTime",
         "identifier": {
          "type": "Identifier",
          "name": "marginUpdatedTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "accFundingFeePerSize",
         "identifier": {
          "type": "Identifier",
          "name": "accFundingFeePerSize"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fundingFee",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeFee",
         "identifier": {
          "type": "Identifier",
          "name": "closeFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpslUpdatedTime",
         "identifier": {
          "type": "Identifier",
          "name": "tpslUpdatedTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "StatusTime",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "requestOpenTime",
         "identifier": {
          "type": "Identifier",
          "name": "requestOpenTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "openTime",
         "identifier": {
          "type": "Identifier",
          "name": "openTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeTime",
         "identifier": {
          "type": "Identifier",
          "name": "closeTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "limitOpenTime",
         "identifier": {
          "type": "Identifier",
          "name": "limitOpenTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "limitCloseTime",
         "identifier": {
          "type": "Identifier",
          "name": "limitCloseTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "liquidatedTime",
         "identifier": {
          "type": "Identifier",
          "name": "liquidatedTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "TraderOpenPositionId",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "longPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "longPositionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "shortPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "shortPositionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "MergePositions",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "oldPos",
         "identifier": {
          "type": "Identifier",
          "name": "oldPos"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "newPos",
         "identifier": {
          "type": "Identifier",
          "name": "newPos"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "EnumDefinition",
       "name": "OracleType",
       "members": [
        {
         "type": "EnumValue",
         "name": "BisonAI"
        },
        {
         "type": "EnumValue",
         "name": "Pyth"
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "OraclePrices",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "OracleType"
         },
         "name": "oracleType",
         "identifier": {
          "type": "Identifier",
          "name": "oracleType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes32",
           "stateMutability": null
          },
          "length": null
         },
         "name": "feedHashes",
         "identifier": {
          "type": "Identifier",
          "name": "feedHashes"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "int256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "answers",
         "identifier": {
          "type": "Identifier",
          "name": "answers"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "timestamps",
         "identifier": {
          "type": "Identifier",
          "name": "timestamps"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "bytes",
           "stateMutability": null
          },
          "length": null
         },
         "name": "proofs",
         "identifier": {
          "type": "Identifier",
          "name": "proofs"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "TokenTotalSize",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "maxLong",
         "identifier": {
          "type": "Identifier",
          "name": "maxLong"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "maxShort",
         "identifier": {
          "type": "Identifier",
          "name": "maxShort"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "currentLong",
         "identifier": {
          "type": "Identifier",
          "name": "currentLong"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "currentShort",
         "identifier": {
          "type": "Identifier",
          "name": "currentShort"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "OpenPositionData",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "marginAmount",
         "identifier": {
          "type": "Identifier",
          "name": "marginAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "leverage",
         "identifier": {
          "type": "Identifier",
          "name": "leverage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "long",
         "identifier": {
          "type": "Identifier",
          "name": "long"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpPrice",
         "identifier": {
          "type": "Identifier",
          "name": "tpPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slPrice",
         "identifier": {
          "type": "Identifier",
          "name": "slPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "expectedPrice",
         "identifier": {
          "type": "Identifier",
          "name": "expectedPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "userSignedData",
         "identifier": {
          "type": "Identifier",
          "name": "userSignedData"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "OpenLimitOrderData",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "marginAmount",
         "identifier": {
          "type": "Identifier",
          "name": "marginAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "leverage",
         "identifier": {
          "type": "Identifier",
          "name": "leverage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "long",
         "identifier": {
          "type": "Identifier",
          "name": "long"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "wantedPrice",
         "identifier": {
          "type": "Identifier",
          "name": "wantedPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpPrice",
         "identifier": {
          "type": "Identifier",
          "name": "tpPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slPrice",
         "identifier": {
          "type": "Identifier",
          "name": "slPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "userSignedData",
         "identifier": {
          "type": "Identifier",
          "name": "userSignedData"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "FundingFeeTokenState",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lastUpdatedTime",
         "identifier": {
          "type": "Identifier",
          "name": "lastUpdatedTime"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "lastAppliedRate",
         "identifier": {
          "type": "Identifier",
          "name": "lastAppliedRate"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "accFeePerSize",
         "identifier": {
          "type": "Identifier",
          "name": "accFeePerSize"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "FundingFeeGlobalState",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "bufferBalance",
         "identifier": {
          "type": "Identifier",
          "name": "bufferBalance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "protocolClaimable",
         "identifier": {
          "type": "Identifier",
          "name": "protocolClaimable"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "StructDefinition",
       "name": "ExternalContracts",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFee"
         },
         "name": "feeContract",
         "identifier": {
          "type": "Identifier",
          "name": "feeContract"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ILP"
         },
         "name": "lp",
         "identifier": {
          "type": "Identifier",
          "name": "lp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IERC20"
         },
         "name": "usdt",
         "identifier": {
          "type": "Identifier",
          "name": "usdt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "checkExecutionForLimitOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.Position"
         },
         "name": "limitOrder",
         "identifier": {
          "type": "Identifier",
          "name": "limitOrder"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "currentPrice",
         "identifier": {
          "type": "Identifier",
          "name": "currentPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "currentPrice"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Price is 0",
             "parts": [
              "Price is 0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "limitOrder"
           },
           "memberName": "isLong"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": ">=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "limitOrder"
               },
               "memberName": "limitOrderPrice"
              },
              "right": {
               "type": "Identifier",
               "name": "currentPrice"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "limitOrder"
               },
               "memberName": "limitOrderPrice"
              },
              "right": {
               "type": "Identifier",
               "name": "currentPrice"
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculatePnlAndCloseFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": "position",
         "identifier": {
          "type": "Identifier",
          "name": "position"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "currentPrice",
         "identifier": {
          "type": "Identifier",
          "name": "currentPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fundingFee",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFee"
         },
         "name": "feeContract",
         "identifier": {
          "type": "Identifier",
          "name": "feeContract"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "finalValueUsdt",
            "identifier": {
             "type": "Identifier",
             "name": "finalValueUsdt"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "size"
              },
              "right": {
               "type": "Identifier",
               "name": "currentPrice"
              }
             }
            ],
            "isArray": false
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "initialPrice"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "initialValueUsdt",
            "identifier": {
             "type": "Identifier",
             "name": "initialValueUsdt"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "position"
           },
           "memberName": "size"
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "pnl",
            "identifier": {
             "type": "Identifier",
             "name": "pnl"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "MemberAccess",
           "expression": {
            "type": "Identifier",
            "name": "position"
           },
           "memberName": "isLong"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "pnl"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "int256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "finalValueUsdt"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "int256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "initialValueUsdt"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "pnl"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "int256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "initialValueUsdt"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "int256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "finalValueUsdt"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              }
             }
            }
           ]
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "fee",
            "identifier": {
             "type": "Identifier",
             "name": "fee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "Identifier",
            "name": "pnl"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "profit",
               "identifier": {
                "type": "Identifier",
                "name": "profit"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "pnl"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "||",
              "left": {
               "type": "BinaryOperation",
               "operator": ">",
               "left": {
                "type": "Identifier",
                "name": "profit"
               },
               "right": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "margin"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "5",
                 "subdenomination": null
                }
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": ">",
               "left": {
                "type": "Identifier",
                "name": "profit"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "size"
               }
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "profit"
                 },
                 "right": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "Math"
                   },
                   "memberName": "min"
                  },
                  "arguments": [
                   {
                    "type": "BinaryOperation",
                    "operator": "*",
                    "left": {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "position"
                     },
                     "memberName": "margin"
                    },
                    "right": {
                     "type": "NumberLiteral",
                     "number": "5",
                     "subdenomination": null
                    }
                   },
                   {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "position"
                    },
                    "memberName": "size"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "BinaryOperation",
                 "operator": "=",
                 "left": {
                  "type": "Identifier",
                  "name": "pnl"
                 },
                 "right": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "ElementaryTypeName",
                   "name": "int256",
                   "stateMutability": null
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "profit"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "fee"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "TupleExpression",
                 "components": [
                  {
                   "type": "BinaryOperation",
                   "operator": "+",
                   "left": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "position"
                    },
                    "memberName": "size"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "profit"
                   }
                  }
                 ],
                 "isArray": false
                },
                "right": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "feeContract"
                  },
                  "memberName": "getTotalFeePercent"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "feeContract"
                 },
                 "memberName": "getFeeDenominator"
                },
                "arguments": [],
                "names": [],
                "identifiers": []
               }
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "<",
              "left": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "margin"
                }
               ],
               "names": [],
               "identifiers": []
              },
              "right": {
               "type": "Identifier",
               "name": "fundingFee"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "TupleExpression",
                 "components": [
                  {
                   "type": "NumberLiteral",
                   "number": "0",
                   "subdenomination": null
                  },
                  {
                   "type": "NumberLiteral",
                   "number": "0",
                   "subdenomination": null
                  }
                 ],
                 "isArray": false
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "loss",
               "identifier": {
                "type": "Identifier",
                "name": "loss"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "Math"
               },
               "memberName": "min"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "BinaryOperation",
                  "operator": "-",
                  "left": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "ElementaryTypeName",
                    "name": "int256",
                    "stateMutability": null
                   },
                   "arguments": [
                    {
                     "type": "MemberAccess",
                     "expression": {
                      "type": "Identifier",
                      "name": "position"
                     },
                     "memberName": "margin"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "fundingFee"
                  }
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "UnaryOperation",
                  "operator": "-",
                  "subExpression": {
                   "type": "Identifier",
                   "name": "pnl"
                  },
                  "isPrefix": true
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "pnl"
              },
              "right": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "int256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "loss"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "isPrefix": true
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "fee"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "/",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "TupleExpression",
                 "components": [
                  {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "position"
                    },
                    "memberName": "size"
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "loss"
                   }
                  }
                 ],
                 "isArray": false
                },
                "right": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "feeContract"
                  },
                  "memberName": "getTotalFeePercent"
                 },
                 "arguments": [],
                 "names": [],
                 "identifiers": []
                }
               },
               "right": {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "feeContract"
                 },
                 "memberName": "getFeeDenominator"
                },
                "arguments": [],
                "names": [],
                "identifiers": []
               }
              }
             }
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "TupleExpression",
           "components": [
            {
             "type": "Identifier",
             "name": "pnl"
            },
            {
             "type": "Identifier",
             "name": "fee"
            }
           ],
           "isArray": false
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "checkAndLiquidatePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": "position",
         "identifier": {
          "type": "Identifier",
          "name": "position"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "FundingFeeGlobalState"
         },
         "name": "fundingFeeGlobalState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeGlobalState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fundingFee",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "pnl",
         "identifier": {
          "type": "Identifier",
          "name": "pnl"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closeFee",
         "identifier": {
          "type": "Identifier",
          "name": "closeFee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ExternalContracts"
         },
         "name": "c",
         "identifier": {
          "type": "Identifier",
          "name": "c"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "marginAfterFundingFee",
            "identifier": {
             "type": "Identifier",
             "name": "marginAfterFundingFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "margin"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "Identifier",
            "name": "fundingFee"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "Identifier",
            "name": "marginAfterFundingFee"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "deficitFundingFee",
               "identifier": {
                "type": "Identifier",
                "name": "deficitFundingFee"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "UnaryOperation",
                "operator": "-",
                "subExpression": {
                 "type": "Identifier",
                 "name": "marginAfterFundingFee"
                },
                "isPrefix": true
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": ">=",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "fundingFeeGlobalState"
                 },
                 "memberName": "bufferBalance"
                },
                "right": {
                 "type": "Identifier",
                 "name": "deficitFundingFee"
                }
               },
               {
                "type": "StringLiteral",
                "value": "Funding Fee buffer balance is insufficient",
                "parts": [
                 "Funding Fee buffer balance is insufficient"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "-=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "fundingFeeGlobalState"
               },
               "memberName": "bufferBalance"
              },
              "right": {
               "type": "Identifier",
               "name": "deficitFundingFee"
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "pnl"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": ">",
                 "left": {
                  "type": "Identifier",
                  "name": "pnl"
                 },
                 "right": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "ElementaryTypeName",
                   "name": "int256",
                   "stateMutability": null
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "closeFee"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "giveAndRecordProfit"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "position"
                     },
                     {
                      "type": "FunctionCall",
                      "expression": {
                       "type": "ElementaryTypeName",
                       "name": "uint256",
                       "stateMutability": null
                      },
                      "arguments": [
                       {
                        "type": "BinaryOperation",
                        "operator": "-",
                        "left": {
                         "type": "Identifier",
                         "name": "pnl"
                        },
                        "right": {
                         "type": "FunctionCall",
                         "expression": {
                          "type": "ElementaryTypeName",
                          "name": "int256",
                          "stateMutability": null
                         },
                         "arguments": [
                          {
                           "type": "Identifier",
                           "name": "closeFee"
                          }
                         ],
                         "names": [],
                         "identifiers": []
                        }
                       }
                      ],
                      "names": [],
                      "identifiers": []
                     },
                     {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "c"
                      },
                      "memberName": "lp"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  },
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "payAndRecordFee"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "position"
                     },
                     {
                      "type": "Identifier",
                      "name": "closeFee"
                     },
                     {
                      "type": "BooleanLiteral",
                      "value": false
                     },
                     {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "c"
                      },
                      "memberName": "feeContract"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  }
                 ]
                },
                "falseBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "payAndRecordFee"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "position"
                     },
                     {
                      "type": "FunctionCall",
                      "expression": {
                       "type": "ElementaryTypeName",
                       "name": "uint256",
                       "stateMutability": null
                      },
                      "arguments": [
                       {
                        "type": "Identifier",
                        "name": "pnl"
                       }
                      ],
                      "names": [],
                      "identifiers": []
                     },
                     {
                      "type": "BooleanLiteral",
                      "value": false
                     },
                     {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "c"
                      },
                      "memberName": "feeContract"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  }
                 ]
                }
               }
              ]
             },
             "falseBody": {
              "type": "Block",
              "statements": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": true
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "BinaryOperation",
            "operator": "-",
            "left": {
             "type": "Identifier",
             "name": "marginAfterFundingFee"
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "int256",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "closeFee"
              }
             ],
             "names": [],
             "identifiers": []
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "pnl"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 {
                  "type": "VariableDeclaration",
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "int256",
                   "stateMutability": null
                  },
                  "name": "deficitCloseFee",
                  "identifier": {
                   "type": "Identifier",
                   "name": "deficitCloseFee"
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "BinaryOperation",
                 "operator": "-",
                 "left": {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "ElementaryTypeName",
                   "name": "int256",
                   "stateMutability": null
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "closeFee"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "marginAfterFundingFee"
                 }
                }
               },
               {
                "type": "IfStatement",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": ">",
                 "left": {
                  "type": "Identifier",
                  "name": "pnl"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "deficitCloseFee"
                 }
                },
                "trueBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "VariableDeclarationStatement",
                   "variables": [
                    {
                     "type": "VariableDeclaration",
                     "typeName": {
                      "type": "ElementaryTypeName",
                      "name": "uint256",
                      "stateMutability": null
                     },
                     "name": "profitAfterCloseFee",
                     "identifier": {
                      "type": "Identifier",
                      "name": "profitAfterCloseFee"
                     },
                     "storageLocation": null,
                     "isStateVar": false,
                     "isIndexed": false,
                     "expression": null
                    }
                   ],
                   "initialValue": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "ElementaryTypeName",
                     "name": "uint256",
                     "stateMutability": null
                    },
                    "arguments": [
                     {
                      "type": "BinaryOperation",
                      "operator": "-",
                      "left": {
                       "type": "Identifier",
                       "name": "pnl"
                      },
                      "right": {
                       "type": "Identifier",
                       "name": "deficitCloseFee"
                      }
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  },
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "giveAndRecordProfit"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "position"
                     },
                     {
                      "type": "Identifier",
                      "name": "profitAfterCloseFee"
                     },
                     {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "c"
                      },
                      "memberName": "lp"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  },
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "payAndRecordFee"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "position"
                     },
                     {
                      "type": "Identifier",
                      "name": "closeFee"
                     },
                     {
                      "type": "BooleanLiteral",
                      "value": false
                     },
                     {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "c"
                      },
                      "memberName": "feeContract"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  }
                 ]
                },
                "falseBody": {
                 "type": "Block",
                 "statements": [
                  {
                   "type": "ExpressionStatement",
                   "expression": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "Identifier",
                     "name": "payAndRecordFee"
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "position"
                     },
                     {
                      "type": "FunctionCall",
                      "expression": {
                       "type": "ElementaryTypeName",
                       "name": "uint256",
                       "stateMutability": null
                      },
                      "arguments": [
                       {
                        "type": "BinaryOperation",
                        "operator": "+",
                        "left": {
                         "type": "Identifier",
                         "name": "marginAfterFundingFee"
                        },
                        "right": {
                         "type": "Identifier",
                         "name": "pnl"
                        }
                       }
                      ],
                      "names": [],
                      "identifiers": []
                     },
                     {
                      "type": "BooleanLiteral",
                      "value": false
                     },
                     {
                      "type": "MemberAccess",
                      "expression": {
                       "type": "Identifier",
                       "name": "c"
                      },
                      "memberName": "feeContract"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  }
                 ]
                }
               }
              ]
             },
             "falseBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "payAndRecordFee"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "position"
                  },
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "ElementaryTypeName",
                    "name": "uint256",
                    "stateMutability": null
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "marginAfterFundingFee"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "BooleanLiteral",
                   "value": false
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "c"
                   },
                   "memberName": "feeContract"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": true
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "<",
            "left": {
             "type": "Identifier",
             "name": "pnl"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "<=",
            "left": {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "BinaryOperation",
              "operator": "-",
              "left": {
               "type": "Identifier",
               "name": "marginAfterFundingFee"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "closeFee"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "right": {
              "type": "Identifier",
              "name": "pnl"
             }
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "payAndRecordFee"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "position"
               },
               {
                "type": "Identifier",
                "name": "closeFee"
               },
               {
                "type": "BooleanLiteral",
                "value": false
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "c"
                },
                "memberName": "feeContract"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "takeAndRecordLoss"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "position"
               },
               {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "marginAfterFundingFee"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "right": {
                 "type": "Identifier",
                 "name": "closeFee"
                }
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "c"
                },
                "memberName": "lp"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "c"
                },
                "memberName": "usdt"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": true
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BooleanLiteral",
           "value": false
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateOpenFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "inputMarginAmount",
         "identifier": {
          "type": "Identifier",
          "name": "inputMarginAmount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "inputLeverage",
         "identifier": {
          "type": "Identifier",
          "name": "inputLeverage"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFee"
         },
         "name": "feeContract",
         "identifier": {
          "type": "Identifier",
          "name": "feeContract"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "inputSize",
            "identifier": {
             "type": "Identifier",
             "name": "inputSize"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "*",
           "left": {
            "type": "Identifier",
            "name": "inputMarginAmount"
           },
           "right": {
            "type": "Identifier",
            "name": "inputLeverage"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "fee",
            "identifier": {
             "type": "Identifier",
             "name": "fee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "inputSize"
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "feeContract"
              },
              "memberName": "getTotalFeePercent"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "feeContract"
             },
             "memberName": "getFeeDenominator"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "fee"
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getFundingFeeScalingFactor",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "NumberLiteral",
           "number": "1e20",
           "subdenomination": null
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "calculateFundingFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": "position",
         "identifier": {
          "type": "Identifier",
          "name": "position"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "FundingFeeTokenState"
         },
         "name": "fundingFeeTokenState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeTokenState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "newFundingFee",
            "identifier": {
             "type": "Identifier",
             "name": "newFundingFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "int256",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "size"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "right": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "fundingFeeTokenState"
                },
                "memberName": "accFeePerSize"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "accFundingFeePerSize"
               }
              }
             ],
             "isArray": false
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "getFundingFeeScalingFactor"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "fundingFee"
           },
           "right": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "Conditional",
              "condition": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "isLong"
              },
              "trueExpression": {
               "type": "Identifier",
               "name": "newFundingFee"
              },
              "falseExpression": {
               "type": "UnaryOperation",
               "operator": "-",
               "subExpression": {
                "type": "Identifier",
                "name": "newFundingFee"
               },
               "isPrefix": true
              }
             }
            ],
            "isArray": false
           }
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "_addInitialTokenTotalSizes",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "count",
         "identifier": {
          "type": "Identifier",
          "name": "count"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "Identifier",
            "name": "count"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "memberName": "push"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "PerpDexLib"
                 },
                 "memberName": "TokenTotalSize"
                },
                "arguments": [
                 {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 },
                 {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 },
                 {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 },
                 {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_changeMaxTokenTotalSizes",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "300_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "300_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "1",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "75_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "75_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "1",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "1",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "2",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "2",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "2",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "3",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "300_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "300_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "3",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "3",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "4",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "120_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "120_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "4",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "4",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "5",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "120_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "120_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "5",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "5",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "6",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "250_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "250_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "6",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "6",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "7",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "200_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "200_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "7",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "7",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "8",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "200_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "200_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "8",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "8",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "9",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "200_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "200_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "9",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "9",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "10",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "120_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "120_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "10",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "10",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "11",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "150_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "150_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "11",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "11",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "12",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "250_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "250_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "12",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "12",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "13",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "200_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "200_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "13",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "13",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "14",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "250_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "250_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "14",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "14",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "15",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "200_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "200_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "15",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "15",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "16",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "250_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "250_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "16",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "16",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "17",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "250_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "250_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "17",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "17",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            "index": {
             "type": "NumberLiteral",
             "number": "18",
             "subdenomination": null
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "TokenTotalSize"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "100_000_000_000",
              "subdenomination": null
             },
             {
              "type": "NumberLiteral",
              "number": "100_000_000_000",
              "subdenomination": null
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "18",
                "subdenomination": null
               }
              },
              "memberName": "currentLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               "index": {
                "type": "NumberLiteral",
                "number": "18",
                "subdenomination": null
               }
              },
              "memberName": "currentShort"
             }
            ],
            "names": [
             "maxLong",
             "maxShort",
             "currentLong",
             "currentShort"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "maxLong"
             },
             {
              "type": "Identifier",
              "name": "maxShort"
             },
             {
              "type": "Identifier",
              "name": "currentLong"
             },
             {
              "type": "Identifier",
              "name": "currentShort"
             }
            ]
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateTraderOpenPositionId",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TraderOpenPositionId"
         },
         "name": "traderOpenPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionId"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isLong"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": "==",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "traderOpenPositionId"
                 },
                 "memberName": "longPositionId"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               {
                "type": "StringLiteral",
                "value": "Long position already exists",
                "parts": [
                 "Long position already exists"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "traderOpenPositionId"
               },
               "memberName": "longPositionId"
              },
              "right": {
               "type": "Identifier",
               "name": "positionId"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": "==",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "traderOpenPositionId"
                 },
                 "memberName": "shortPositionId"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               {
                "type": "StringLiteral",
                "value": "Short position already exists",
                "parts": [
                 "Short position already exists"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "traderOpenPositionId"
               },
               "memberName": "shortPositionId"
              },
              "right": {
               "type": "Identifier",
               "name": "positionId"
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "clearTraderOpenPositionId",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TraderOpenPositionId"
         },
         "name": "traderOpenPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionId"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isLong"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "traderOpenPositionId"
               },
               "memberName": "longPositionId"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "traderOpenPositionId"
               },
               "memberName": "shortPositionId"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "findPositionToMerge",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TraderOpenPositionId"
         },
         "name": "traderOpenPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionId"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isLong"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "traderOpenPositionId"
              },
              "memberName": "longPositionId"
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "traderOpenPositionId"
              },
              "memberName": "shortPositionId"
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "cleanUpPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "openPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closingPrice",
         "identifier": {
          "type": "Identifier",
          "name": "closingPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.PositionStatus"
         },
         "name": "positionStatus",
         "identifier": {
          "type": "Identifier",
          "name": "positionStatus"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TraderOpenPositionId"
         },
         "name": "traderOpenPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionId"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "position",
            "identifier": {
             "type": "Identifier",
             "name": "position"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "closingPrice"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Price is 0",
             "parts": [
              "Price is 0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "openPositionIds"
              },
              "memberName": "length"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "No open positions",
             "parts": [
              "No open positions"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "<",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "openPositionIndex"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "openPositionIds"
              },
              "memberName": "length"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Invalid position index",
             "parts": [
              "Invalid position index"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "openPositionIndex"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "-",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "openPositionIds"
             },
             "memberName": "length"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "1",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "shiftingPositionId",
               "identifier": {
                "type": "Identifier",
                "name": "shiftingPositionId"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "openPositionIds"
              },
              "index": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "openPositionIds"
                },
                "memberName": "length"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "1",
                "subdenomination": null
               }
              }
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "UserDefinedTypeName",
                "namePath": "PerpDexLib.Position"
               },
               "name": "shiftingPosition",
               "identifier": {
                "type": "Identifier",
                "name": "shiftingPosition"
               },
               "storageLocation": "storage",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "positions"
              },
              "index": {
               "type": "Identifier",
               "name": "shiftingPositionId"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "shiftingPosition"
               },
               "memberName": "openPositionIndex"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "openPositionIndex"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "openPositionIds"
               },
               "index": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "openPositionIndex"
               }
              },
              "right": {
               "type": "Identifier",
               "name": "shiftingPositionId"
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "openPositionIds"
            },
            "memberName": "pop"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "clearTraderOpenPositionId"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "isLong"
            },
            {
             "type": "Identifier",
             "name": "traderOpenPositionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "positionStatus"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "PositionStatus"
             },
             "memberName": "Closed"
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "positionStatus"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "PositionStatus"
             },
             "memberName": "RolledBack"
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "statusTime"
               },
               "memberName": "closeTime"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "block"
               },
               "memberName": "timestamp"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "IfStatement",
           "condition": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "positionStatus"
            },
            "right": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "PositionStatus"
             },
             "memberName": "Liquidated"
            }
           },
           "trueBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "BinaryOperation",
               "operator": "=",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "statusTime"
                },
                "memberName": "liquidatedTime"
               },
               "right": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "block"
                },
                "memberName": "timestamp"
               }
              }
             }
            ]
           },
           "falseBody": {
            "type": "Block",
            "statements": [
             {
              "type": "ExpressionStatement",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "revert"
               },
               "arguments": [
                {
                 "type": "StringLiteral",
                 "value": "Wrong position status",
                 "parts": [
                  "Wrong position status"
                 ],
                 "isUnicode": [
                  false
                 ]
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "positionStatus"
           },
           "right": {
            "type": "Identifier",
            "name": "positionStatus"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "finalPrice"
           },
           "right": {
            "type": "Identifier",
            "name": "closingPrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "openPositionIndex"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "type"
             },
             "arguments": [
              {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "max"
           }
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "cleanUpLimitOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "limitOrderIds",
         "identifier": {
          "type": "Identifier",
          "name": "limitOrderIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Position"
            },
            "name": "limitOrderPositionToDelete",
            "identifier": {
             "type": "Identifier",
             "name": "limitOrderPositionToDelete"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "limitOrderIds"
              },
              "memberName": "length"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "No limit orders",
             "parts": [
              "No limit orders"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "<",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "limitOrderPositionToDelete"
              },
              "memberName": "limitOrderIndex"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "limitOrderIds"
              },
              "memberName": "length"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Invalid limit order index",
             "parts": [
              "Invalid limit order index"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "limitOrderPositionToDelete"
            },
            "memberName": "limitOrderIndex"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "-",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "limitOrderIds"
             },
             "memberName": "length"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "1",
             "subdenomination": null
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "shiftingLimitOrderId",
               "identifier": {
                "type": "Identifier",
                "name": "shiftingLimitOrderId"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "limitOrderIds"
              },
              "index": {
               "type": "BinaryOperation",
               "operator": "-",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "limitOrderIds"
                },
                "memberName": "length"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "1",
                "subdenomination": null
               }
              }
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "UserDefinedTypeName",
                "namePath": "PerpDexLib.Position"
               },
               "name": "shiftingLimitOrderPosition",
               "identifier": {
                "type": "Identifier",
                "name": "shiftingLimitOrderPosition"
               },
               "storageLocation": "storage",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "positions"
              },
              "index": {
               "type": "Identifier",
               "name": "shiftingLimitOrderId"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "shiftingLimitOrderPosition"
               },
               "memberName": "limitOrderIndex"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "limitOrderPositionToDelete"
               },
               "memberName": "limitOrderIndex"
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "limitOrderIds"
               },
               "index": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "limitOrderPositionToDelete"
                },
                "memberName": "limitOrderIndex"
               }
              },
              "right": {
               "type": "Identifier",
               "name": "shiftingLimitOrderId"
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "limitOrderIds"
            },
            "memberName": "pop"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "limitOrderPositionToDelete"
            },
            "memberName": "limitOrderIndex"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "type"
             },
             "arguments": [
              {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              }
             ],
             "names": [],
             "identifiers": []
            },
            "memberName": "max"
           }
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "checkPositionSizeAndIncrease",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "size",
         "identifier": {
          "type": "Identifier",
          "name": "size"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "TokenTotalSize"
            },
            "name": "sizeInfo",
            "identifier": {
             "type": "Identifier",
             "name": "sizeInfo"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "tokenTotalSizes"
           },
           "index": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "tokenType"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isLong"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "BinaryOperation",
               "operator": "+",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "sizeInfo"
                },
                "memberName": "currentLong"
               },
               "right": {
                "type": "Identifier",
                "name": "size"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sizeInfo"
               },
               "memberName": "maxLong"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "BooleanLiteral",
                 "value": false
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sizeInfo"
               },
               "memberName": "currentLong"
              },
              "right": {
               "type": "Identifier",
               "name": "size"
              }
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": true
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "BinaryOperation",
               "operator": "+",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "sizeInfo"
                },
                "memberName": "currentShort"
               },
               "right": {
                "type": "Identifier",
                "name": "size"
               }
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sizeInfo"
               },
               "memberName": "maxShort"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "BooleanLiteral",
                 "value": false
                }
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sizeInfo"
               },
               "memberName": "currentShort"
              },
              "right": {
               "type": "Identifier",
               "name": "size"
              }
             }
            },
            {
             "type": "ReturnStatement",
             "expression": {
              "type": "BooleanLiteral",
              "value": true
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "decreaseTotalPositionSize",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "size",
         "identifier": {
          "type": "Identifier",
          "name": "size"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "TokenTotalSize"
            },
            "name": "sizeInfo",
            "identifier": {
             "type": "Identifier",
             "name": "sizeInfo"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "tokenTotalSizes"
           },
           "index": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "tokenType"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isLong"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "-=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sizeInfo"
               },
               "memberName": "currentLong"
              },
              "right": {
               "type": "Identifier",
               "name": "size"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "-=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "sizeInfo"
               },
               "memberName": "currentShort"
              },
              "right": {
               "type": "Identifier",
               "name": "size"
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "mergePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "FundingFeeTokenState"
         },
         "name": "fundingFeeTokenState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeTokenState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "FundingFeeGlobalState"
         },
         "name": "fundingFeeGlobalState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeGlobalState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ExternalContracts"
         },
         "name": "c",
         "identifier": {
          "type": "Identifier",
          "name": "c"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.MergePositions"
         },
         "name": "mergePos",
         "identifier": {
          "type": "Identifier",
          "name": "mergePos"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "currentPrice",
         "identifier": {
          "type": "Identifier",
          "name": "currentPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Position"
            },
            "name": "oldPosition",
            "identifier": {
             "type": "Identifier",
             "name": "oldPosition"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "mergePos"
            },
            "memberName": "oldPos"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Position"
            },
            "name": "newPosition",
            "identifier": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "mergePos"
            },
            "memberName": "newPos"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "||",
             "left": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BinaryOperation",
                "operator": "&&",
                "left": {
                 "type": "BinaryOperation",
                 "operator": "==",
                 "left": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "newPosition"
                   },
                   "memberName": "statusTime"
                  },
                  "memberName": "openTime"
                 },
                 "right": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "block"
                  },
                  "memberName": "timestamp"
                 }
                },
                "right": {
                 "type": "BinaryOperation",
                 "operator": "==",
                 "left": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "newPosition"
                  },
                  "memberName": "positionStatus"
                 },
                 "right": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "PositionStatus"
                  },
                  "memberName": "Open"
                 }
                }
               }
              ],
              "isArray": false
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "newPosition"
               },
               "memberName": "positionStatus"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PositionStatus"
               },
               "memberName": "LimitOrderOpen"
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "Position to merge must be being newly open or opened by limit order",
             "parts": [
              "Position to merge must be being newly open or opened by limit order"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "oldPosition"
              },
              "memberName": "positionStatus"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PositionStatus"
              },
              "memberName": "Open"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Old position status is not Open",
             "parts": [
              "Old position status is not Open"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "currentPrice"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Price is 0",
             "parts": [
              "Price is 0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "newPosition"
              },
              "memberName": "traderAddr"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "oldPosition"
              },
              "memberName": "traderAddr"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Trader is different",
             "parts": [
              "Trader is different"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "newPosition"
              },
              "memberName": "tokenType"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "oldPosition"
              },
              "memberName": "tokenType"
             }
            },
            {
             "type": "StringLiteral",
             "value": "TokenType is different",
             "parts": [
              "TokenType is different"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "newPosition"
              },
              "memberName": "isLong"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "oldPosition"
              },
              "memberName": "isLong"
             }
            },
            {
             "type": "StringLiteral",
             "value": "IsLong is different",
             "parts": [
              "IsLong is different"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "<=",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "oldPosition"
               },
               "memberName": "statusTime"
              },
              "memberName": "openTime"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "block"
              },
              "memberName": "timestamp"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Old position status time is not correct",
             "parts": [
              "Old position status time is not correct"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "fundingFee",
            "identifier": {
             "type": "Identifier",
             "name": "fundingFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculateFundingFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "oldPosition"
            },
            {
             "type": "Identifier",
             "name": "fundingFeeTokenState"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "pnl",
            "identifier": {
             "type": "Identifier",
             "name": "pnl"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "closeFee",
            "identifier": {
             "type": "Identifier",
             "name": "closeFee"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculatePnlAndCloseFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "oldPosition"
            },
            {
             "type": "Identifier",
             "name": "currentPrice"
            },
            {
             "type": "Identifier",
             "name": "fundingFee"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "c"
             },
             "memberName": "feeContract"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "UnaryOperation",
             "operator": "!",
             "subExpression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "checkAndLiquidatePosition"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "oldPosition"
               },
               {
                "type": "Identifier",
                "name": "fundingFeeGlobalState"
               },
               {
                "type": "Identifier",
                "name": "fundingFee"
               },
               {
                "type": "Identifier",
                "name": "pnl"
               },
               {
                "type": "Identifier",
                "name": "closeFee"
               },
               {
                "type": "Identifier",
                "name": "c"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "isPrefix": true
            },
            {
             "type": "StringLiteral",
             "value": "Position will be liquidated",
             "parts": [
              "Position will be liquidated"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "oldPosition"
            },
            "memberName": "fundingFee"
           },
           "right": {
            "type": "Identifier",
            "name": "fundingFee"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "oldPosition"
            },
            "memberName": "accFundingFeePerSize"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "memberName": "accFundingFeePerSize"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "oldPosition"
            },
            "memberName": "initialPrice"
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "BinaryOperation",
             "operator": "*",
             "left": {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "oldPosition"
               },
               "memberName": "initialPrice"
              },
              "right": {
               "type": "Identifier",
               "name": "currentPrice"
              }
             },
             "right": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BinaryOperation",
                "operator": "+",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "oldPosition"
                 },
                 "memberName": "size"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "newPosition"
                 },
                 "memberName": "size"
                }
               }
              ],
              "isArray": false
             }
            },
            "right": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "+",
               "left": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "Identifier",
                 "name": "currentPrice"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "oldPosition"
                 },
                 "memberName": "size"
                }
               },
               "right": {
                "type": "BinaryOperation",
                "operator": "*",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "oldPosition"
                 },
                 "memberName": "initialPrice"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "newPosition"
                 },
                 "memberName": "size"
                }
               }
              }
             ],
             "isArray": false
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "oldPosition"
            },
            "memberName": "margin"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "memberName": "margin"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "oldPosition"
            },
            "memberName": "size"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "memberName": "size"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "statusTime"
            },
            "memberName": "openTime"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "memberName": "tpPrice"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "oldPosition"
               },
               "memberName": "tpPrice"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "newPosition"
               },
               "memberName": "tpPrice"
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "memberName": "slPrice"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "oldPosition"
               },
               "memberName": "slPrice"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "newPosition"
               },
               "memberName": "slPrice"
              }
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "oldPosition"
            },
            "memberName": "tpslUpdatedTime"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "memberName": "positionStatus"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PositionStatus"
            },
            "memberName": "Merged"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "statusTime"
            },
            "memberName": "openTime"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "memberName": "initialPrice"
           },
           "right": {
            "type": "Identifier",
            "name": "currentPrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "payAndRecordFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "oldPosition"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "openFee"
            },
            {
             "type": "BooleanLiteral",
             "value": true
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "c"
             },
             "memberName": "feeContract"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "PositionMerged"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "tokenType"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "margin"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "size"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "initialPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "isLong"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "tpPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "slPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "oldPosition"
             },
             "memberName": "fundingFee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "createLimitOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OpenLimitOrderData"
         },
         "name": "o",
         "identifier": {
          "type": "Identifier",
          "name": "o"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "limitOrderIdLength",
         "identifier": {
          "type": "Identifier",
          "name": "limitOrderIdLength"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFee"
         },
         "name": "feeContract",
         "identifier": {
          "type": "Identifier",
          "name": "feeContract"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "o"
              },
              "memberName": "wantedPrice"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Price is 0",
             "parts": [
              "Price is 0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": ">=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "o"
               },
               "memberName": "leverage"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "3",
               "subdenomination": null
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "o"
               },
               "memberName": "leverage"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "100",
               "subdenomination": null
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "Leverage must be within range",
             "parts": [
              "Leverage must be within range"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "fee",
            "identifier": {
             "type": "Identifier",
             "name": "fee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculateOpenFee"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "marginAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "leverage"
            },
            {
             "type": "Identifier",
             "name": "feeContract"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "marginAfterFee",
            "identifier": {
             "type": "Identifier",
             "name": "marginAfterFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "o"
            },
            "memberName": "marginAmount"
           },
           "right": {
            "type": "Identifier",
            "name": "fee"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.StatusTime"
            },
            "name": "statusTime",
            "identifier": {
             "type": "Identifier",
             "name": "statusTime"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "StatusTime"
           },
           "arguments": [
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "block"
             },
             "memberName": "timestamp"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           ],
           "names": [
            "requestOpenTime",
            "openTime",
            "closeTime",
            "limitOpenTime",
            "limitCloseTime",
            "liquidatedTime"
           ],
           "identifiers": [
            {
             "type": "Identifier",
             "name": "requestOpenTime"
            },
            {
             "type": "Identifier",
             "name": "openTime"
            },
            {
             "type": "Identifier",
             "name": "closeTime"
            },
            {
             "type": "Identifier",
             "name": "limitOpenTime"
            },
            {
             "type": "Identifier",
             "name": "limitCloseTime"
            },
            {
             "type": "Identifier",
             "name": "liquidatedTime"
            }
           ]
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "newPosition",
            "identifier": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "Position"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "trader"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "marginAfterFee"
            },
            {
             "type": "BinaryOperation",
             "operator": "*",
             "left": {
              "type": "Identifier",
              "name": "marginAfterFee"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "o"
              },
              "memberName": "leverage"
             }
            },
            {
             "type": "Identifier",
             "name": "fee"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "long"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "type"
              },
              "arguments": [
               {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "max"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "PositionStatus"
             },
             "memberName": "LimitOrderOpen"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "wantedPrice"
            },
            {
             "type": "Identifier",
             "name": "limitOrderIdLength"
            },
            {
             "type": "Identifier",
             "name": "statusTime"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "tpPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "slPrice"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "block"
             },
             "memberName": "timestamp"
            }
           ],
           "names": [
            "positionId",
            "traderAddr",
            "tokenType",
            "margin",
            "size",
            "openFee",
            "initialPrice",
            "isLong",
            "openPositionIndex",
            "finalPrice",
            "positionStatus",
            "limitOrderPrice",
            "limitOrderIndex",
            "statusTime",
            "pnl",
            "liquidationPrice",
            "tpPrice",
            "slPrice",
            "marginUpdatedTime",
            "accFundingFeePerSize",
            "fundingFee",
            "closeFee",
            "tpslUpdatedTime"
           ],
           "identifiers": [
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "Identifier",
             "name": "traderAddr"
            },
            {
             "type": "Identifier",
             "name": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "margin"
            },
            {
             "type": "Identifier",
             "name": "size"
            },
            {
             "type": "Identifier",
             "name": "openFee"
            },
            {
             "type": "Identifier",
             "name": "initialPrice"
            },
            {
             "type": "Identifier",
             "name": "isLong"
            },
            {
             "type": "Identifier",
             "name": "openPositionIndex"
            },
            {
             "type": "Identifier",
             "name": "finalPrice"
            },
            {
             "type": "Identifier",
             "name": "positionStatus"
            },
            {
             "type": "Identifier",
             "name": "limitOrderPrice"
            },
            {
             "type": "Identifier",
             "name": "limitOrderIndex"
            },
            {
             "type": "Identifier",
             "name": "statusTime"
            },
            {
             "type": "Identifier",
             "name": "pnl"
            },
            {
             "type": "Identifier",
             "name": "liquidationPrice"
            },
            {
             "type": "Identifier",
             "name": "tpPrice"
            },
            {
             "type": "Identifier",
             "name": "slPrice"
            },
            {
             "type": "Identifier",
             "name": "marginUpdatedTime"
            },
            {
             "type": "Identifier",
             "name": "accFundingFeePerSize"
            },
            {
             "type": "Identifier",
             "name": "fundingFee"
            },
            {
             "type": "Identifier",
             "name": "closeFee"
            },
            {
             "type": "Identifier",
             "name": "tpslUpdatedTime"
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "newPosition"
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "createNewPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "OpenPositionData"
         },
         "name": "o",
         "identifier": {
          "type": "Identifier",
          "name": "o"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "initialPrice",
         "identifier": {
          "type": "Identifier",
          "name": "initialPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "openPositionIdLength",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIdLength"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "accFundingFeePerSize",
         "identifier": {
          "type": "Identifier",
          "name": "accFundingFeePerSize"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFee"
         },
         "name": "feeContract",
         "identifier": {
          "type": "Identifier",
          "name": "feeContract"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "fee",
            "identifier": {
             "type": "Identifier",
             "name": "fee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculateOpenFee"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "marginAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "leverage"
            },
            {
             "type": "Identifier",
             "name": "feeContract"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "marginAfterFee",
            "identifier": {
             "type": "Identifier",
             "name": "marginAfterFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "o"
            },
            "memberName": "marginAmount"
           },
           "right": {
            "type": "Identifier",
            "name": "fee"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "size",
            "identifier": {
             "type": "Identifier",
             "name": "size"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "*",
           "left": {
            "type": "Identifier",
            "name": "marginAfterFee"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "o"
            },
            "memberName": "leverage"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": ">=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "o"
               },
               "memberName": "leverage"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "3",
               "subdenomination": null
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "o"
               },
               "memberName": "leverage"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "100",
               "subdenomination": null
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "Leverage must be within range",
             "parts": [
              "Leverage must be within range"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "checkPositionSizeAndIncrease"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "tokenTotalSizes"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "o"
              },
              "memberName": "tokenType"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "o"
              },
              "memberName": "long"
             },
             {
              "type": "Identifier",
              "name": "size"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "revert"
              },
              "arguments": [
               {
                "type": "StringLiteral",
                "value": "Maximum position size reached",
                "parts": [
                 "Maximum position size reached"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.StatusTime"
            },
            "name": "statusTime",
            "identifier": {
             "type": "Identifier",
             "name": "statusTime"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "StatusTime"
           },
           "arguments": [
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "block"
             },
             "memberName": "timestamp"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           ],
           "names": [
            "requestOpenTime",
            "openTime",
            "closeTime",
            "limitOpenTime",
            "limitCloseTime",
            "liquidatedTime"
           ],
           "identifiers": [
            {
             "type": "Identifier",
             "name": "requestOpenTime"
            },
            {
             "type": "Identifier",
             "name": "openTime"
            },
            {
             "type": "Identifier",
             "name": "closeTime"
            },
            {
             "type": "Identifier",
             "name": "limitOpenTime"
            },
            {
             "type": "Identifier",
             "name": "limitCloseTime"
            },
            {
             "type": "Identifier",
             "name": "liquidatedTime"
            }
           ]
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "newPosition",
            "identifier": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "Position"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "trader"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "marginAfterFee"
            },
            {
             "type": "Identifier",
             "name": "size"
            },
            {
             "type": "Identifier",
             "name": "fee"
            },
            {
             "type": "Identifier",
             "name": "initialPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "long"
            },
            {
             "type": "Identifier",
             "name": "openPositionIdLength"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "PositionStatus"
             },
             "memberName": "Open"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "type"
              },
              "arguments": [
               {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "max"
            },
            {
             "type": "Identifier",
             "name": "statusTime"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "tpPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "slPrice"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "Identifier",
             "name": "accFundingFeePerSize"
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "block"
             },
             "memberName": "timestamp"
            }
           ],
           "names": [
            "positionId",
            "traderAddr",
            "tokenType",
            "margin",
            "size",
            "openFee",
            "initialPrice",
            "isLong",
            "openPositionIndex",
            "finalPrice",
            "positionStatus",
            "limitOrderPrice",
            "limitOrderIndex",
            "statusTime",
            "pnl",
            "liquidationPrice",
            "tpPrice",
            "slPrice",
            "marginUpdatedTime",
            "accFundingFeePerSize",
            "fundingFee",
            "closeFee",
            "tpslUpdatedTime"
           ],
           "identifiers": [
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "Identifier",
             "name": "traderAddr"
            },
            {
             "type": "Identifier",
             "name": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "margin"
            },
            {
             "type": "Identifier",
             "name": "size"
            },
            {
             "type": "Identifier",
             "name": "openFee"
            },
            {
             "type": "Identifier",
             "name": "initialPrice"
            },
            {
             "type": "Identifier",
             "name": "isLong"
            },
            {
             "type": "Identifier",
             "name": "openPositionIndex"
            },
            {
             "type": "Identifier",
             "name": "finalPrice"
            },
            {
             "type": "Identifier",
             "name": "positionStatus"
            },
            {
             "type": "Identifier",
             "name": "limitOrderPrice"
            },
            {
             "type": "Identifier",
             "name": "limitOrderIndex"
            },
            {
             "type": "Identifier",
             "name": "statusTime"
            },
            {
             "type": "Identifier",
             "name": "pnl"
            },
            {
             "type": "Identifier",
             "name": "liquidationPrice"
            },
            {
             "type": "Identifier",
             "name": "tpPrice"
            },
            {
             "type": "Identifier",
             "name": "slPrice"
            },
            {
             "type": "Identifier",
             "name": "marginUpdatedTime"
            },
            {
             "type": "Identifier",
             "name": "accFundingFeePerSize"
            },
            {
             "type": "Identifier",
             "name": "fundingFee"
            },
            {
             "type": "Identifier",
             "name": "closeFee"
            },
            {
             "type": "Identifier",
             "name": "tpslUpdatedTime"
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "newPosition"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "payAndRecordFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": "position",
         "identifier": {
          "type": "Identifier",
          "name": "position"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isOpen",
         "identifier": {
          "type": "Identifier",
          "name": "isOpen"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFee"
         },
         "name": "feeContract",
         "identifier": {
          "type": "Identifier",
          "name": "feeContract"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "feeContract"
            },
            "memberName": "payFee"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "Identifier",
             "name": "fee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isOpen"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "openFee"
              },
              "right": {
               "type": "Identifier",
               "name": "fee"
              }
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "closeFee"
              },
              "right": {
               "type": "Identifier",
               "name": "fee"
              }
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "giveAndRecordProfit",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": "position",
         "identifier": {
          "type": "Identifier",
          "name": "position"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "profit",
         "identifier": {
          "type": "Identifier",
          "name": "profit"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ILP"
         },
         "name": "lp",
         "identifier": {
          "type": "Identifier",
          "name": "lp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "lp"
            },
            "memberName": "giveProfit"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "Identifier",
             "name": "profit"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "pnl"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "profit"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "takeAndRecordLoss",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": "position",
         "identifier": {
          "type": "Identifier",
          "name": "position"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "loss",
         "identifier": {
          "type": "Identifier",
          "name": "loss"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ILP"
         },
         "name": "lp",
         "identifier": {
          "type": "Identifier",
          "name": "lp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IERC20"
         },
         "name": "usdt",
         "identifier": {
          "type": "Identifier",
          "name": "usdt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "safeTransferAndCheckBalance"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "lp"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "loss"
            },
            {
             "type": "Identifier",
             "name": "usdt"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "pnl"
           },
           "right": {
            "type": "UnaryOperation",
            "operator": "-",
            "subExpression": {
             "type": "FunctionCall",
             "expression": {
              "type": "ElementaryTypeName",
              "name": "int256",
              "stateMutability": null
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "loss"
              }
             ],
             "names": [],
             "identifiers": []
            },
            "isPrefix": true
           }
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_closePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "FundingFeeTokenState"
         },
         "name": "fundingFeeTokenState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeTokenState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "FundingFeeGlobalState"
         },
         "name": "fundingFeeGlobalState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeGlobalState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "Mapping",
           "keyType": {
            "type": "ElementaryTypeName",
            "name": "uint16",
            "stateMutability": null
           },
           "keyName": null,
           "valueType": {
            "type": "UserDefinedTypeName",
            "namePath": "TraderOpenPositionId"
           },
           "valueName": null
          },
          "valueName": null
         },
         "name": "traderOpenPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "openPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "closingPrice",
         "identifier": {
          "type": "Identifier",
          "name": "closingPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ExternalContracts"
         },
         "name": "c",
         "identifier": {
          "type": "Identifier",
          "name": "c"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "closingPrice"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Price is 0",
             "parts": [
              "Price is 0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Position"
            },
            "name": "position",
            "identifier": {
             "type": "Identifier",
             "name": "position"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "positionStatus"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "PositionStatus"
            },
            "memberName": "Open"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidPositionStatus"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "updateFundingFeeState"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "fundingFeeTokenState"
            },
            {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "tokenTotalSizes"
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "fundingFee",
            "identifier": {
             "type": "Identifier",
             "name": "fundingFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculateFundingFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "position"
            },
            {
             "type": "Identifier",
             "name": "fundingFeeTokenState"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "pnl",
            "identifier": {
             "type": "Identifier",
             "name": "pnl"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "closeFee",
            "identifier": {
             "type": "Identifier",
             "name": "closeFee"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculatePnlAndCloseFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "position"
            },
            {
             "type": "Identifier",
             "name": "closingPrice"
            },
            {
             "type": "Identifier",
             "name": "fundingFee"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "c"
             },
             "memberName": "feeContract"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "isLiquidated",
            "identifier": {
             "type": "Identifier",
             "name": "isLiquidated"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkAndLiquidatePosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "position"
            },
            {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            {
             "type": "Identifier",
             "name": "fundingFee"
            },
            {
             "type": "Identifier",
             "name": "pnl"
            },
            {
             "type": "Identifier",
             "name": "closeFee"
            },
            {
             "type": "Identifier",
             "name": "c"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "fundingFee"
           },
           "right": {
            "type": "Identifier",
            "name": "fundingFee"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "isLiquidated"
          },
          "trueBody": {
           "type": "Block",
           "statements": []
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "name": "marginAfterFundingFee",
               "identifier": {
                "type": "Identifier",
                "name": "marginAfterFundingFee"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "-",
              "left": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "int256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "margin"
                }
               ],
               "names": [],
               "identifiers": []
              },
              "right": {
               "type": "Identifier",
               "name": "fundingFee"
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": ">",
              "left": {
               "type": "Identifier",
               "name": "pnl"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "payAndRecordFee"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "position"
                  },
                  {
                   "type": "Identifier",
                   "name": "closeFee"
                  },
                  {
                   "type": "BooleanLiteral",
                   "value": false
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "c"
                   },
                   "memberName": "feeContract"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "PerpDexPricesLib"
                  },
                  "memberName": "safeTransferAndCheckBalance"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "position"
                   },
                   "memberName": "traderAddr"
                  },
                  {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "ElementaryTypeName",
                     "name": "uint256",
                     "stateMutability": null
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "marginAfterFundingFee"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "closeFee"
                   }
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "c"
                   },
                   "memberName": "usdt"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "giveAndRecordProfit"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "position"
                  },
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "ElementaryTypeName",
                    "name": "uint256",
                    "stateMutability": null
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "pnl"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "c"
                   },
                   "memberName": "lp"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": {
              "type": "Block",
              "statements": [
               {
                "type": "VariableDeclarationStatement",
                "variables": [
                 {
                  "type": "VariableDeclaration",
                  "typeName": {
                   "type": "ElementaryTypeName",
                   "name": "uint256",
                   "stateMutability": null
                  },
                  "name": "loss",
                  "identifier": {
                   "type": "Identifier",
                   "name": "loss"
                  },
                  "storageLocation": null,
                  "isStateVar": false,
                  "isIndexed": false,
                  "expression": null
                 }
                ],
                "initialValue": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "UnaryOperation",
                   "operator": "-",
                   "subExpression": {
                    "type": "Identifier",
                    "name": "pnl"
                   },
                   "isPrefix": true
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "payAndRecordFee"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "position"
                  },
                  {
                   "type": "Identifier",
                   "name": "closeFee"
                  },
                  {
                   "type": "BooleanLiteral",
                   "value": false
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "c"
                   },
                   "memberName": "feeContract"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "PerpDexPricesLib"
                  },
                  "memberName": "safeTransferAndCheckBalance"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "position"
                   },
                   "memberName": "traderAddr"
                  },
                  {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "ElementaryTypeName",
                      "name": "uint256",
                      "stateMutability": null
                     },
                     "arguments": [
                      {
                       "type": "Identifier",
                       "name": "marginAfterFundingFee"
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "closeFee"
                    }
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "loss"
                   }
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "c"
                   },
                   "memberName": "usdt"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "takeAndRecordLoss"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "position"
                  },
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "ElementaryTypeName",
                    "name": "uint256",
                    "stateMutability": null
                   },
                   "arguments": [
                    {
                     "type": "UnaryOperation",
                     "operator": "-",
                     "subExpression": {
                      "type": "Identifier",
                      "name": "pnl"
                     },
                     "isPrefix": true
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "c"
                   },
                   "memberName": "lp"
                  },
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "c"
                   },
                   "memberName": "usdt"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             }
            }
           ]
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "decreaseTotalPositionSize"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "isLong"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "size"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "cleanUpPosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positions"
            },
            {
             "type": "Identifier",
             "name": "openPositionIds"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            },
            {
             "type": "Identifier",
             "name": "closingPrice"
            },
            {
             "type": "Conditional",
             "condition": {
              "type": "Identifier",
              "name": "isLiquidated"
             },
             "trueExpression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PositionStatus"
              },
              "memberName": "Liquidated"
             },
             "falseExpression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PositionStatus"
              },
              "memberName": "Closed"
             }
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "traderOpenPositionIds"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "traderAddr"
              }
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint16",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "PositionClosed"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "margin"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "size"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "initialPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "isLong"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "finalPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "fundingFee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_setTpslPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": "position",
         "identifier": {
          "type": "Identifier",
          "name": "position"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpPrice",
         "identifier": {
          "type": "Identifier",
          "name": "tpPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slPrice",
         "identifier": {
          "type": "Identifier",
          "name": "slPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "||",
             "left": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "positionStatus"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexLib"
                },
                "memberName": "PositionStatus"
               },
               "memberName": "Open"
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "positionStatus"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexLib"
                },
                "memberName": "PositionStatus"
               },
               "memberName": "LimitOrderOpen"
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "Position is not open",
             "parts": [
              "Position is not open"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "tpPrice"
           },
           "right": {
            "type": "Identifier",
            "name": "tpPrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "slPrice"
           },
           "right": {
            "type": "Identifier",
            "name": "slPrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "tpslUpdatedTime"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "TPSLSet"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "Identifier",
             "name": "tpPrice"
            },
            {
             "type": "Identifier",
             "name": "slPrice"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_changeMargin",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": "position",
         "identifier": {
          "type": "Identifier",
          "name": "position"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "FundingFeeTokenState"
         },
         "name": "fundingFeeTokenState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeTokenState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "FundingFeeGlobalState"
         },
         "name": "fundingFeeGlobalState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeGlobalState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TokenTotalSize"
         },
         "name": "tokenTotalSize",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSize"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "addMargin",
         "identifier": {
          "type": "Identifier",
          "name": "addMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "marginDelta",
         "identifier": {
          "type": "Identifier",
          "name": "marginDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "currentPrice",
         "identifier": {
          "type": "Identifier",
          "name": "currentPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ExternalContracts"
         },
         "name": "c",
         "identifier": {
          "type": "Identifier",
          "name": "c"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "positionStatus"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexLib"
               },
               "memberName": "PositionStatus"
              },
              "memberName": "Open"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Position is not open",
             "parts": [
              "Position is not open"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "updateFundingFeeState"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "fundingFeeTokenState"
            },
            {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            {
             "type": "Identifier",
             "name": "tokenTotalSize"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "fundingFee",
            "identifier": {
             "type": "Identifier",
             "name": "fundingFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculateFundingFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "position"
            },
            {
             "type": "Identifier",
             "name": "fundingFeeTokenState"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "pnl",
            "identifier": {
             "type": "Identifier",
             "name": "pnl"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "closeFee",
            "identifier": {
             "type": "Identifier",
             "name": "closeFee"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "calculatePnlAndCloseFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "position"
            },
            {
             "type": "Identifier",
             "name": "currentPrice"
            },
            {
             "type": "Identifier",
             "name": "fundingFee"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "c"
             },
             "memberName": "feeContract"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "UnaryOperation",
             "operator": "!",
             "subExpression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "checkAndLiquidatePosition"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "position"
               },
               {
                "type": "Identifier",
                "name": "fundingFeeGlobalState"
               },
               {
                "type": "Identifier",
                "name": "fundingFee"
               },
               {
                "type": "Identifier",
                "name": "pnl"
               },
               {
                "type": "Identifier",
                "name": "closeFee"
               },
               {
                "type": "Identifier",
                "name": "c"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "isPrefix": true
            },
            {
             "type": "StringLiteral",
             "value": "Position will be liquidated",
             "parts": [
              "Position will be liquidated"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "Identifier",
            "name": "addMargin"
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "margin"
                },
                "right": {
                 "type": "Identifier",
                 "name": "marginDelta"
                }
               },
               {
                "type": "StringLiteral",
                "value": "Margin to remove is greater than margin",
                "parts": [
                 "Margin to remove is greater than margin"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "Conditional",
                "condition": {
                 "type": "BinaryOperation",
                 "operator": ">",
                 "left": {
                  "type": "Identifier",
                  "name": "pnl"
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                },
                "trueExpression": {
                 "type": "BinaryOperation",
                 "operator": ">",
                 "left": {
                  "type": "BinaryOperation",
                  "operator": "-",
                  "left": {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "ElementaryTypeName",
                     "name": "int256",
                     "stateMutability": null
                    },
                    "arguments": [
                     {
                      "type": "BinaryOperation",
                      "operator": "-",
                      "left": {
                       "type": "MemberAccess",
                       "expression": {
                        "type": "Identifier",
                        "name": "position"
                       },
                       "memberName": "margin"
                      },
                      "right": {
                       "type": "Identifier",
                       "name": "marginDelta"
                      }
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   },
                   "right": {
                    "type": "Identifier",
                    "name": "fundingFee"
                   }
                  },
                  "right": {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "ElementaryTypeName",
                    "name": "int256",
                    "stateMutability": null
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "closeFee"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  }
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                },
                "falseExpression": {
                 "type": "BinaryOperation",
                 "operator": ">",
                 "left": {
                  "type": "BinaryOperation",
                  "operator": "-",
                  "left": {
                   "type": "BinaryOperation",
                   "operator": "-",
                   "left": {
                    "type": "BinaryOperation",
                    "operator": "-",
                    "left": {
                     "type": "FunctionCall",
                     "expression": {
                      "type": "ElementaryTypeName",
                      "name": "int256",
                      "stateMutability": null
                     },
                     "arguments": [
                      {
                       "type": "BinaryOperation",
                       "operator": "-",
                       "left": {
                        "type": "MemberAccess",
                        "expression": {
                         "type": "Identifier",
                         "name": "position"
                        },
                        "memberName": "margin"
                       },
                       "right": {
                        "type": "Identifier",
                        "name": "marginDelta"
                       }
                      }
                     ],
                     "names": [],
                     "identifiers": []
                    },
                    "right": {
                     "type": "Identifier",
                     "name": "fundingFee"
                    }
                   },
                   "right": {
                    "type": "FunctionCall",
                    "expression": {
                     "type": "ElementaryTypeName",
                     "name": "int256",
                     "stateMutability": null
                    },
                    "arguments": [
                     {
                      "type": "Identifier",
                      "name": "closeFee"
                     }
                    ],
                    "names": [],
                    "identifiers": []
                   }
                  },
                  "right": {
                   "type": "Identifier",
                   "name": "pnl"
                  }
                 },
                 "right": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                }
               },
               {
                "type": "StringLiteral",
                "value": "Position will be liquidated after margin is removed",
                "parts": [
                 "Position will be liquidated after margin is removed"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "fee",
            "identifier": {
             "type": "Identifier",
             "name": "fee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "marginDelta"
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "c"
               },
               "memberName": "feeContract"
              },
              "memberName": "getMarginFeePercent"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "c"
              },
              "memberName": "feeContract"
             },
             "memberName": "getFeeDenominator"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "fee"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Margin added is too small",
             "parts": [
              "Margin added is too small"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "margin"
           },
           "right": {
            "type": "Conditional",
            "condition": {
             "type": "Identifier",
             "name": "addMargin"
            },
            "trueExpression": {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "BinaryOperation",
              "operator": "+",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "margin"
              },
              "right": {
               "type": "Identifier",
               "name": "marginDelta"
              }
             },
             "right": {
              "type": "Identifier",
              "name": "fee"
             }
            },
            "falseExpression": {
             "type": "BinaryOperation",
             "operator": "-",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "margin"
             },
             "right": {
              "type": "Identifier",
              "name": "marginDelta"
             }
            }
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "marginUpdatedTime"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "factor",
            "identifier": {
             "type": "Identifier",
             "name": "factor"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "NumberLiteral",
           "number": "1e6",
           "subdenomination": null
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "leverage",
            "identifier": {
             "type": "Identifier",
             "name": "leverage"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "size"
            },
            "right": {
             "type": "Identifier",
             "name": "factor"
            }
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "margin"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              },
              "right": {
               "type": "Identifier",
               "name": "leverage"
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "Identifier",
               "name": "leverage"
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "*",
               "left": {
                "type": "NumberLiteral",
                "number": "100",
                "subdenomination": null
               },
               "right": {
                "type": "Identifier",
                "name": "factor"
               }
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "Leverage is out of boundary",
             "parts": [
              "Leverage is out of boundary"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "Identifier",
           "name": "addMargin"
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexPricesLib"
               },
               "memberName": "safeTransferFromAndCheckBalance"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "traderAddr"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "address"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "this"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "marginDelta"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "c"
                },
                "memberName": "usdt"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexPricesLib"
               },
               "memberName": "safeTransferAndCheckBalance"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "traderAddr"
               },
               {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "Identifier",
                 "name": "marginDelta"
                },
                "right": {
                 "type": "Identifier",
                 "name": "fee"
                }
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "c"
                },
                "memberName": "usdt"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "payAndRecordFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "position"
            },
            {
             "type": "Identifier",
             "name": "fee"
            },
            {
             "type": "BooleanLiteral",
             "value": true
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "c"
             },
             "memberName": "feeContract"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "PositionMarginChanged"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "addMargin"
            },
            {
             "type": "Identifier",
             "name": "marginDelta"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateFundingFeeState",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "FundingFeeTokenState"
         },
         "name": "fundingFeeState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "FundingFeeGlobalState"
         },
         "name": "fundingFeeGlobalState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeGlobalState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "TokenTotalSize"
         },
         "name": "tokenTotalSize",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSize"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "SCALING_FACTOR",
            "identifier": {
             "type": "Identifier",
             "name": "SCALING_FACTOR"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "getFundingFeeScalingFactor"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "COEFFICIENT_DECIMAL_FACTOR",
            "identifier": {
             "type": "Identifier",
             "name": "COEFFICIENT_DECIMAL_FACTOR"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "NumberLiteral",
           "number": "1e7",
           "subdenomination": null
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "COEFFICIENT",
            "identifier": {
             "type": "Identifier",
             "name": "COEFFICIENT"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "NumberLiteral",
           "number": "875",
           "subdenomination": null
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "COEFFICIENT_TIME_FACTOR",
            "identifier": {
             "type": "Identifier",
             "name": "COEFFICIENT_TIME_FACTOR"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "NumberLiteral",
           "number": "3600",
           "subdenomination": null
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "long",
            "identifier": {
             "type": "Identifier",
             "name": "long"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "int256",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tokenTotalSize"
             },
             "memberName": "currentLong"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "short",
            "identifier": {
             "type": "Identifier",
             "name": "short"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "int256",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "tokenTotalSize"
             },
             "memberName": "currentShort"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "fundingRate",
            "identifier": {
             "type": "Identifier",
             "name": "fundingRate"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "Conditional",
           "condition": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": "==",
               "left": {
                "type": "Identifier",
                "name": "long"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "==",
               "left": {
                "type": "Identifier",
                "name": "short"
               },
               "right": {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              }
             }
            ],
            "isArray": false
           },
           "trueExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           },
           "falseExpression": {
            "type": "BinaryOperation",
            "operator": "/",
            "left": {
             "type": "BinaryOperation",
             "operator": "*",
             "left": {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "BinaryOperation",
                 "operator": "/",
                 "left": {
                  "type": "Identifier",
                  "name": "SCALING_FACTOR"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "COEFFICIENT_DECIMAL_FACTOR"
                 }
                }
               ],
               "isArray": false
              },
              "right": {
               "type": "Identifier",
               "name": "COEFFICIENT"
              }
             },
             "right": {
              "type": "TupleExpression",
              "components": [
               {
                "type": "BinaryOperation",
                "operator": "-",
                "left": {
                 "type": "Identifier",
                 "name": "long"
                },
                "right": {
                 "type": "Identifier",
                 "name": "short"
                }
               }
              ],
              "isArray": false
             }
            },
            "right": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "+",
               "left": {
                "type": "Identifier",
                "name": "long"
               },
               "right": {
                "type": "Identifier",
                "name": "short"
               }
              }
             ],
             "isArray": false
            }
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "timeDelta",
            "identifier": {
             "type": "Identifier",
             "name": "timeDelta"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "Conditional",
           "condition": {
            "type": "TupleExpression",
            "components": [
             {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "fundingFeeState"
               },
               "memberName": "lastUpdatedTime"
              },
              "right": {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             }
            ],
            "isArray": false
           },
           "trueExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           },
           "falseExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "BinaryOperation",
              "operator": "-",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "block"
               },
               "memberName": "timestamp"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "fundingFeeState"
               },
               "memberName": "lastUpdatedTime"
              }
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "timeWeightedFundingRate",
            "identifier": {
             "type": "Identifier",
             "name": "timeWeightedFundingRate"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "fundingRate"
            },
            "right": {
             "type": "Identifier",
             "name": "timeDelta"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "COEFFICIENT_TIME_FACTOR"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "fundingFeeState"
            },
            "memberName": "accFeePerSize"
           },
           "right": {
            "type": "Identifier",
            "name": "timeWeightedFundingRate"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "fundingFeeState"
            },
            "memberName": "lastAppliedRate"
           },
           "right": {
            "type": "Identifier",
            "name": "fundingRate"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "fundingFeeState"
            },
            "memberName": "lastUpdatedTime"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            "memberName": "protocolClaimable"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "BinaryOperation",
              "operator": "*",
              "left": {
               "type": "Identifier",
               "name": "timeWeightedFundingRate"
              },
              "right": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "BinaryOperation",
                 "operator": "-",
                 "left": {
                  "type": "Identifier",
                  "name": "long"
                 },
                 "right": {
                  "type": "Identifier",
                  "name": "short"
                 }
                }
               ],
               "isArray": false
              }
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "FundingFeeStateUpdated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "block"
             },
             "memberName": "timestamp"
            },
            {
             "type": "Identifier",
             "name": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "fundingRate"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "fundingFeeState"
             },
             "memberName": "accFeePerSize"
            },
            {
             "type": "Identifier",
             "name": "long"
            },
            {
             "type": "Identifier",
             "name": "short"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_openPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OpenPositionData"
         },
         "name": "o",
         "identifier": {
          "type": "Identifier",
          "name": "o"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "currentPrice",
         "identifier": {
          "type": "Identifier",
          "name": "currentPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.FundingFeeGlobalState"
         },
         "name": "fundingFeeGlobalState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeGlobalState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TokenType"
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.FundingFeeTokenState"
          },
          "valueName": null
         },
         "name": "fundingFeeTokenStates",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeTokenStates"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "Mapping",
           "keyType": {
            "type": "ElementaryTypeName",
            "name": "uint16",
            "stateMutability": null
           },
           "keyName": null,
           "valueType": {
            "type": "UserDefinedTypeName",
            "namePath": "PerpDexLib.TraderOpenPositionId"
           },
           "valueName": null
          },
          "valueName": null
         },
         "name": "traderOpenPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "openPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.ExternalContracts"
         },
         "name": "c",
         "identifier": {
          "type": "Identifier",
          "name": "c"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Position"
            },
            "name": "newPosition",
            "identifier": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "oldPosForMerge",
            "identifier": {
             "type": "Identifier",
             "name": "oldPosForMerge"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "findPositionToMerge"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "isLong"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "traderOpenPositionIds"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "newPosition"
               },
               "memberName": "traderAddr"
              }
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint16",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "oldPosForMerge"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "openPositionIds"
               },
               "memberName": "push"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "positionId"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "updateTraderOpenPositionId"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "isLong"
               },
               {
                "type": "Identifier",
                "name": "positionId"
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "Identifier",
                  "name": "traderOpenPositionIds"
                 },
                 "index": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "newPosition"
                  },
                  "memberName": "traderAddr"
                 }
                },
                "index": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint16",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "newPosition"
                   },
                   "memberName": "tokenType"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "c"
                },
                "memberName": "feeContract"
               },
               "memberName": "payFee"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "o"
                },
                "memberName": "trader"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "openFee"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "EmitStatement",
             "eventCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDex"
               },
               "memberName": "PositionOpened"
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "positionId"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "traderAddr"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "tokenType"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "margin"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "size"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "initialPrice"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "isLong"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "tpPrice"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "newPosition"
                },
                "memberName": "slPrice"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "mergePosition"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "positions"
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "Identifier",
                 "name": "fundingFeeTokenStates"
                },
                "index": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "newPosition"
                 },
                 "memberName": "tokenType"
                }
               },
               {
                "type": "Identifier",
                "name": "fundingFeeGlobalState"
               },
               {
                "type": "Identifier",
                "name": "c"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "PerpDexLib"
                 },
                 "memberName": "MergePositions"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "oldPosForMerge"
                 },
                 {
                  "type": "Identifier",
                  "name": "positionId"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "currentPrice"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_openLimitOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "OpenLimitOrderData"
         },
         "name": "o",
         "identifier": {
          "type": "Identifier",
          "name": "o"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ArrayTypeName",
           "baseTypeName": {
            "type": "ElementaryTypeName",
            "name": "uint256",
            "stateMutability": null
           },
           "length": null
          },
          "valueName": null
         },
         "name": "traderPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "traderPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "limitOrderIds",
         "identifier": {
          "type": "Identifier",
          "name": "limitOrderIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ExternalContracts"
         },
         "name": "c",
         "identifier": {
          "type": "Identifier",
          "name": "c"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "positions"
             },
             "index": {
              "type": "Identifier",
              "name": "positionId"
             }
            },
            "memberName": "positionStatus"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PositionStatus"
            },
            "memberName": "Initial"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "NextPositionIdExists"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "Position"
            },
            "name": "newPosition",
            "identifier": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "createLimitOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "Identifier",
             "name": "o"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "limitOrderIds"
             },
             "memberName": "length"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "c"
             },
             "memberName": "feeContract"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "positions"
            },
            "index": {
             "type": "Identifier",
             "name": "positionId"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "newPosition"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "traderPositionIds"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "o"
              },
              "memberName": "trader"
             }
            },
            "memberName": "push"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "limitOrderIds"
            },
            "memberName": "push"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "safeTransferFromAndCheckBalance"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "trader"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "marginAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "c"
             },
             "memberName": "usdt"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "LimitOrderOpened"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "tokenType"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "margin"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "size"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "limitOrderPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "isLong"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "tpPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "newPosition"
             },
             "memberName": "slPrice"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_closeLimitOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "Position"
         },
         "name": "order",
         "identifier": {
          "type": "Identifier",
          "name": "order"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "limitOrderIds",
         "identifier": {
          "type": "Identifier",
          "name": "limitOrderIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ExternalContracts"
         },
         "name": "c",
         "identifier": {
          "type": "Identifier",
          "name": "c"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "order"
            },
            "memberName": "positionStatus"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "PositionStatus"
            },
            "memberName": "LimitOrderOpen"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidPositionStatus"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "order"
            },
            "memberName": "positionStatus"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "PositionStatus"
            },
            "memberName": "LimitOrderClosed"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "statusTime"
            },
            "memberName": "limitCloseTime"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "cleanUpLimitOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positions"
            },
            {
             "type": "Identifier",
             "name": "limitOrderIds"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "positionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "safeTransferAndCheckBalance"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "margin"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "openFee"
             }
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "c"
             },
             "memberName": "usdt"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "LimitOrderClosed"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "traderAddr"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    },
    {
     "type": "ContractDefinition",
     "name": "PerpDexBotLib",
     "baseContracts": [],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": "openPositionForLimitOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.Position"
         },
         "name": "position",
         "identifier": {
          "type": "Identifier",
          "name": "position"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "currentPrice",
         "identifier": {
          "type": "Identifier",
          "name": "currentPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "openPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TraderOpenPositionId"
         },
         "name": "traderOpenPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionId"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "accFundingFeePerSize",
         "identifier": {
          "type": "Identifier",
          "name": "accFundingFeePerSize"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFee"
         },
         "name": "feeContract",
         "identifier": {
          "type": "Identifier",
          "name": "feeContract"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "currentPrice"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Price is 0",
             "parts": [
              "Price is 0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "positionStatus"
             },
             "right": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexLib"
               },
               "memberName": "PositionStatus"
              },
              "memberName": "LimitOrderOpen"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Status is not limit order open",
             "parts": [
              "Status is not limit order open"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "initialPrice"
           },
           "right": {
            "type": "Identifier",
            "name": "currentPrice"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "openPositionIndex"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "openPositionIds"
            },
            "memberName": "length"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "positionStatus"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "PositionStatus"
            },
            "memberName": "Open"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "statusTime"
            },
            "memberName": "openTime"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "block"
            },
            "memberName": "timestamp"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "accFundingFeePerSize"
           },
           "right": {
            "type": "Identifier",
            "name": "accFundingFeePerSize"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "openPositionIds"
            },
            "memberName": "push"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "updateTraderOpenPositionId"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "isLong"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            },
            {
             "type": "Identifier",
             "name": "traderOpenPositionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "feeContract"
            },
            "memberName": "payFee"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "openFee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "PositionOpened"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "margin"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "size"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "initialPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "isLong"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tpPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "slPrice"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_executeLimitOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "orderId",
         "identifier": {
          "type": "Identifier",
          "name": "orderId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TokenType"
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.FundingFeeTokenState"
          },
          "valueName": null
         },
         "name": "fundingFeeTokenStates",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeTokenStates"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "Mapping",
           "keyType": {
            "type": "ElementaryTypeName",
            "name": "uint16",
            "stateMutability": null
           },
           "keyName": null,
           "valueType": {
            "type": "UserDefinedTypeName",
            "namePath": "PerpDexLib.TraderOpenPositionId"
           },
           "valueName": null
          },
          "valueName": null
         },
         "name": "traderOpenPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.FundingFeeGlobalState"
         },
         "name": "fundingFeeGlobalState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeGlobalState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "openPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.ExternalContracts"
         },
         "name": "c",
         "identifier": {
          "type": "Identifier",
          "name": "c"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "limitOrderIds",
         "identifier": {
          "type": "Identifier",
          "name": "limitOrderIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "order",
            "identifier": {
             "type": "Identifier",
             "name": "order"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "orderId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "updateFundingFeeState"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "tokenType"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "fundingFeeTokenStates"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "tokenType"
             }
            },
            {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "tokenTotalSizes"
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "order"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "checkPositionSizeAndIncrease"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "tokenTotalSizes"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "tokenType"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "isLong"
             },
             {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "order"
              },
              "memberName": "size"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "oldPosForMerge",
            "identifier": {
             "type": "Identifier",
             "name": "oldPosForMerge"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "findPositionToMerge"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "isLong"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "traderOpenPositionIds"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "traderAddr"
              }
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint16",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "order"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "oldPosForMerge"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "openPositionForLimitOrder"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "order"
               },
               {
                "type": "Identifier",
                "name": "price"
               },
               {
                "type": "Identifier",
                "name": "openPositionIds"
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "Identifier",
                  "name": "traderOpenPositionIds"
                 },
                 "index": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "order"
                  },
                  "memberName": "traderAddr"
                 }
                },
                "index": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint16",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "order"
                   },
                   "memberName": "tokenType"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "IndexAccess",
                 "base": {
                  "type": "Identifier",
                  "name": "fundingFeeTokenStates"
                 },
                 "index": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "order"
                  },
                  "memberName": "tokenType"
                 }
                },
                "memberName": "accFeePerSize"
               },
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "c"
                },
                "memberName": "feeContract"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexLib"
               },
               "memberName": "mergePosition"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "positions"
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "Identifier",
                 "name": "fundingFeeTokenStates"
                },
                "index": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "tokenType"
                }
               },
               {
                "type": "Identifier",
                "name": "fundingFeeGlobalState"
               },
               {
                "type": "Identifier",
                "name": "c"
               },
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "PerpDexLib"
                 },
                 "memberName": "MergePositions"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "oldPosForMerge"
                 },
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "order"
                  },
                  "memberName": "positionId"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "Identifier",
                "name": "price"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "cleanUpLimitOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positions"
            },
            {
             "type": "Identifier",
             "name": "limitOrderIds"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "positionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "LimitOrderExecuted"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "traderAddr"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "decreaseSizeAndCleanUpOnLiquidate",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "Mapping",
           "keyType": {
            "type": "ElementaryTypeName",
            "name": "uint16",
            "stateMutability": null
           },
           "keyName": null,
           "valueType": {
            "type": "UserDefinedTypeName",
            "namePath": "PerpDexLib.TraderOpenPositionId"
           },
           "valueName": null
          },
          "valueName": null
         },
         "name": "traderOpenPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "openPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "position",
            "identifier": {
             "type": "Identifier",
             "name": "position"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "decreaseTotalPositionSize"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "isLong"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "size"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "cleanUpPosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positions"
            },
            {
             "type": "Identifier",
             "name": "openPositionIds"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            },
            {
             "type": "Identifier",
             "name": "price"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "PositionStatus"
             },
             "memberName": "Liquidated"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "traderOpenPositionIds"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "traderAddr"
              }
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint16",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "PositionLiquidated"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "margin"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "size"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "initialPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "isLong"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "finalPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "fundingFee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_liquidatePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TokenType"
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.FundingFeeTokenState"
          },
          "valueName": null
         },
         "name": "fundingFeeTokenStates",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeTokenStates"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "Mapping",
           "keyType": {
            "type": "ElementaryTypeName",
            "name": "uint16",
            "stateMutability": null
           },
           "keyName": null,
           "valueType": {
            "type": "UserDefinedTypeName",
            "namePath": "PerpDexLib.TraderOpenPositionId"
           },
           "valueName": null
          },
          "valueName": null
         },
         "name": "traderOpenPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.FundingFeeGlobalState"
         },
         "name": "fundingFeeGlobalState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeGlobalState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "openPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.ExternalContracts"
         },
         "name": "c",
         "identifier": {
          "type": "Identifier",
          "name": "c"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "position",
            "identifier": {
             "type": "Identifier",
             "name": "position"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "updateFundingFeeState"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "fundingFeeTokenStates"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "tokenType"
             }
            },
            {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "tokenTotalSizes"
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "name": "fundingFee",
            "identifier": {
             "type": "Identifier",
             "name": "fundingFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "calculateFundingFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "position"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "fundingFeeTokenStates"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "tokenType"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "pnl",
            "identifier": {
             "type": "Identifier",
             "name": "pnl"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "int256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "closeFee",
            "identifier": {
             "type": "Identifier",
             "name": "closeFee"
            },
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "calculatePnlAndCloseFee"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "position"
            },
            {
             "type": "Identifier",
             "name": "price"
            },
            {
             "type": "Identifier",
             "name": "fundingFee"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "c"
             },
             "memberName": "feeContract"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "checkAndLiquidatePosition"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "position"
             },
             {
              "type": "Identifier",
              "name": "fundingFeeGlobalState"
             },
             {
              "type": "Identifier",
              "name": "fundingFee"
             },
             {
              "type": "Identifier",
              "name": "pnl"
             },
             {
              "type": "Identifier",
              "name": "closeFee"
             },
             {
              "type": "Identifier",
              "name": "c"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "fundingFee"
           },
           "right": {
            "type": "Identifier",
            "name": "fundingFee"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "decreaseSizeAndCleanUpOnLiquidate"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positions"
            },
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "Identifier",
             "name": "traderOpenPositionIds"
            },
            {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            {
             "type": "Identifier",
             "name": "openPositionIds"
            },
            {
             "type": "Identifier",
             "name": "price"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_tpslClosePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TokenType"
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.FundingFeeTokenState"
          },
          "valueName": null
         },
         "name": "fundingFeeTokenStates",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeTokenStates"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "Mapping",
           "keyType": {
            "type": "ElementaryTypeName",
            "name": "uint16",
            "stateMutability": null
           },
           "keyName": null,
           "valueType": {
            "type": "UserDefinedTypeName",
            "namePath": "PerpDexLib.TraderOpenPositionId"
           },
           "valueName": null
          },
          "valueName": null
         },
         "name": "traderOpenPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.FundingFeeGlobalState"
         },
         "name": "fundingFeeGlobalState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeGlobalState"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "openPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIds"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.ExternalContracts"
         },
         "name": "c",
         "identifier": {
          "type": "Identifier",
          "name": "c"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "price",
         "identifier": {
          "type": "Identifier",
          "name": "price"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "updatedAt",
         "identifier": {
          "type": "Identifier",
          "name": "updatedAt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "position",
            "identifier": {
             "type": "Identifier",
             "name": "position"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bool",
             "stateMutability": null
            },
            "name": "shouldClose",
            "identifier": {
             "type": "Identifier",
             "name": "shouldClose"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "Conditional",
           "condition": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "isLong"
           },
           "trueExpression": {
            "type": "BinaryOperation",
            "operator": "||",
            "left": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "&&",
               "left": {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "slPrice"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               "right": {
                "type": "BinaryOperation",
                "operator": "<=",
                "left": {
                 "type": "Identifier",
                 "name": "price"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "slPrice"
                }
               }
              }
             ],
             "isArray": false
            },
            "right": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "&&",
               "left": {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "tpPrice"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               "right": {
                "type": "BinaryOperation",
                "operator": ">=",
                "left": {
                 "type": "Identifier",
                 "name": "price"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "tpPrice"
                }
               }
              }
             ],
             "isArray": false
            }
           },
           "falseExpression": {
            "type": "BinaryOperation",
            "operator": "||",
            "left": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "&&",
               "left": {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "slPrice"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               "right": {
                "type": "BinaryOperation",
                "operator": ">=",
                "left": {
                 "type": "Identifier",
                 "name": "price"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "slPrice"
                }
               }
              }
             ],
             "isArray": false
            },
            "right": {
             "type": "TupleExpression",
             "components": [
              {
               "type": "BinaryOperation",
               "operator": "&&",
               "left": {
                "type": "BinaryOperation",
                "operator": ">",
                "left": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "tpPrice"
                },
                "right": {
                 "type": "NumberLiteral",
                 "number": "0",
                 "subdenomination": null
                }
               },
               "right": {
                "type": "BinaryOperation",
                "operator": "<=",
                "left": {
                 "type": "Identifier",
                 "name": "price"
                },
                "right": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "tpPrice"
                }
               }
              }
             ],
             "isArray": false
            }
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "BinaryOperation",
            "operator": "&&",
            "left": {
             "type": "BinaryOperation",
             "operator": "<",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "statusTime"
              },
              "memberName": "openTime"
             },
             "right": {
              "type": "Identifier",
              "name": "updatedAt"
             }
            },
            "right": {
             "type": "BinaryOperation",
             "operator": "<",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "tpslUpdatedTime"
             },
             "right": {
              "type": "Identifier",
              "name": "updatedAt"
             }
            }
           },
           "right": {
            "type": "Identifier",
            "name": "shouldClose"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexLib"
               },
               "memberName": "_closePosition"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "positions"
               },
               {
                "type": "Identifier",
                "name": "positionId"
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "Identifier",
                 "name": "fundingFeeTokenStates"
                },
                "index": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "tokenType"
                }
               },
               {
                "type": "Identifier",
                "name": "fundingFeeGlobalState"
               },
               {
                "type": "Identifier",
                "name": "traderOpenPositionIds"
               },
               {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               {
                "type": "Identifier",
                "name": "openPositionIds"
               },
               {
                "type": "Identifier",
                "name": "price"
               },
               {
                "type": "Identifier",
                "name": "c"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "library"
    },
    {
     "type": "ContractDefinition",
     "name": "PerpDex",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "Initializable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "PausableUpgradeable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "OwnableUpgradeable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "UUPSUpgradeable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ReentrancyGuardUpgradeable"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IERC20"
         },
         "name": "d_usdt",
         "identifier": {
          "type": "Identifier",
          "name": "d_usdt"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ILP"
         },
         "name": "d_lp",
         "identifier": {
          "type": "Identifier",
          "name": "d_lp"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IFee"
         },
         "name": "d_feeContract",
         "identifier": {
          "type": "Identifier",
          "name": "d_feeContract"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IBisonAIRouter"
         },
         "name": "bisonAIRouter",
         "identifier": {
          "type": "Identifier",
          "name": "bisonAIRouter"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IBisonAISubmissionProxy"
         },
         "name": "bisonAISubmissionProxy",
         "identifier": {
          "type": "Identifier",
          "name": "bisonAISubmissionProxy"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IPyth"
         },
         "name": "pyth",
         "identifier": {
          "type": "Identifier",
          "name": "pyth"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "admin",
         "identifier": {
          "type": "Identifier",
          "name": "admin"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "length": null
         },
         "name": "d_liquidationAdmins",
         "identifier": {
          "type": "Identifier",
          "name": "d_liquidationAdmins"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "length": null
         },
         "name": "d_limitOrderAdmins",
         "identifier": {
          "type": "Identifier",
          "name": "d_limitOrderAdmins"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.Position"
          },
          "valueName": null
         },
         "name": "positions",
         "identifier": {
          "type": "Identifier",
          "name": "positions"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ArrayTypeName",
           "baseTypeName": {
            "type": "ElementaryTypeName",
            "name": "uint256",
            "stateMutability": null
           },
           "length": null
          },
          "valueName": null
         },
         "name": "traderPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "traderPositionIds"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "openPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "openPositionIds"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "d_requestedOpenPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "d_requestedOpenPositionIds"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "limitOrderIds",
         "identifier": {
          "type": "Identifier",
          "name": "limitOrderIds"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "nextPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "nextPositionId"
         },
         "expression": {
          "type": "NumberLiteral",
          "number": "1",
          "subdenomination": null
         },
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": {
        "type": "NumberLiteral",
        "number": "1",
        "subdenomination": null
       }
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "traderNonce",
         "identifier": {
          "type": "Identifier",
          "name": "traderNonce"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TokenTotalSize"
          },
          "length": null
         },
         "name": "tokenTotalSizes",
         "identifier": {
          "type": "Identifier",
          "name": "tokenTotalSizes"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "length": null
         },
         "name": "d_singleOpenAdmins",
         "identifier": {
          "type": "Identifier",
          "name": "d_singleOpenAdmins"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "length": null
         },
         "name": "d_closeAdmins",
         "identifier": {
          "type": "Identifier",
          "name": "d_closeAdmins"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "d_multiOpenAdmin",
         "identifier": {
          "type": "Identifier",
          "name": "d_multiOpenAdmin"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "Mapping",
           "keyType": {
            "type": "ElementaryTypeName",
            "name": "uint16",
            "stateMutability": null
           },
           "keyName": null,
           "valueType": {
            "type": "UserDefinedTypeName",
            "namePath": "PerpDexLib.TraderOpenPositionId"
           },
           "valueName": null
          },
          "valueName": null
         },
         "name": "traderOpenPositionIds",
         "identifier": {
          "type": "Identifier",
          "name": "traderOpenPositionIds"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "length": null
         },
         "name": "d_tpslAdmins",
         "identifier": {
          "type": "Identifier",
          "name": "d_tpslAdmins"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TokenType"
          },
          "keyName": null,
          "valueType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.FundingFeeTokenState"
          },
          "valueName": null
         },
         "name": "fundingFeeTokenStates",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeTokenStates"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.FundingFeeGlobalState"
         },
         "name": "fundingFeeGlobalState",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFeeGlobalState"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexAuthLib.AdminType"
          },
          "keyName": null,
          "valueType": {
           "type": "ArrayTypeName",
           "baseTypeName": {
            "type": "ElementaryTypeName",
            "name": "address",
            "stateMutability": null
           },
           "length": null
          },
          "valueName": null
         },
         "name": "adminsByRole",
         "identifier": {
          "type": "Identifier",
          "name": "adminsByRole"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.ExternalContracts"
         },
         "name": "externalContracts",
         "identifier": {
          "type": "Identifier",
          "name": "externalContracts"
         },
         "expression": null,
         "visibility": "default",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "EventDefinition",
       "name": "SubmittedRoundId",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint64",
          "stateMutability": null
         },
         "name": "roundId",
         "identifier": {
          "type": "Identifier",
          "name": "roundId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "PositionMerged",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "newPositionId",
         "identifier": {
          "type": "Identifier",
          "name": "newPositionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "margin",
         "identifier": {
          "type": "Identifier",
          "name": "margin"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "size",
         "identifier": {
          "type": "Identifier",
          "name": "size"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "initialPrice",
         "identifier": {
          "type": "Identifier",
          "name": "initialPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpPrice",
         "identifier": {
          "type": "Identifier",
          "name": "tpPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slPrice",
         "identifier": {
          "type": "Identifier",
          "name": "slPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fundingFee",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "PositionOpened",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "margin",
         "identifier": {
          "type": "Identifier",
          "name": "margin"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "size",
         "identifier": {
          "type": "Identifier",
          "name": "size"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "initialPrice",
         "identifier": {
          "type": "Identifier",
          "name": "initialPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpPrice",
         "identifier": {
          "type": "Identifier",
          "name": "tpPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slPrice",
         "identifier": {
          "type": "Identifier",
          "name": "slPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "PositionMarginChanged",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "addMargin",
         "identifier": {
          "type": "Identifier",
          "name": "addMargin"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "marginDelta",
         "identifier": {
          "type": "Identifier",
          "name": "marginDelta"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "TPSLSet",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpPrice",
         "identifier": {
          "type": "Identifier",
          "name": "tpPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slPrice",
         "identifier": {
          "type": "Identifier",
          "name": "slPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "FundingFeeStateUpdated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "lastUpdatedTime",
         "identifier": {
          "type": "Identifier",
          "name": "lastUpdatedTime"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fundingRate",
         "identifier": {
          "type": "Identifier",
          "name": "fundingRate"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "accFeePerSize",
         "identifier": {
          "type": "Identifier",
          "name": "accFeePerSize"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "currentLong",
         "identifier": {
          "type": "Identifier",
          "name": "currentLong"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "currentShort",
         "identifier": {
          "type": "Identifier",
          "name": "currentShort"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "PositionClosed",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "margin",
         "identifier": {
          "type": "Identifier",
          "name": "margin"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "size",
         "identifier": {
          "type": "Identifier",
          "name": "size"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "initialPrice",
         "identifier": {
          "type": "Identifier",
          "name": "initialPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalPrice",
         "identifier": {
          "type": "Identifier",
          "name": "finalPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fundingFee",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "PositionLiquidated",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "margin",
         "identifier": {
          "type": "Identifier",
          "name": "margin"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "size",
         "identifier": {
          "type": "Identifier",
          "name": "size"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "initialPrice",
         "identifier": {
          "type": "Identifier",
          "name": "initialPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "finalPrice",
         "identifier": {
          "type": "Identifier",
          "name": "finalPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "int256",
          "stateMutability": null
         },
         "name": "fundingFee",
         "identifier": {
          "type": "Identifier",
          "name": "fundingFee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "LimitOrderOpened",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "margin",
         "identifier": {
          "type": "Identifier",
          "name": "margin"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "size",
         "identifier": {
          "type": "Identifier",
          "name": "size"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "limitPrice",
         "identifier": {
          "type": "Identifier",
          "name": "limitPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpPrice",
         "identifier": {
          "type": "Identifier",
          "name": "tpPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slPrice",
         "identifier": {
          "type": "Identifier",
          "name": "slPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "LimitOrderClosed",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "LimitOrderExecuted",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "PositionRolledBack",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "traderAddr",
         "identifier": {
          "type": "Identifier",
          "name": "traderAddr"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.TokenType"
         },
         "name": "tokenType",
         "identifier": {
          "type": "Identifier",
          "name": "tokenType"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "margin",
         "identifier": {
          "type": "Identifier",
          "name": "margin"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "size",
         "identifier": {
          "type": "Identifier",
          "name": "size"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "initialPrice",
         "identifier": {
          "type": "Identifier",
          "name": "initialPrice"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "isLong",
         "identifier": {
          "type": "Identifier",
          "name": "isLong"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_disableInitializers"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "isAdmin",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "length": null
         },
         "name": "adminList",
         "identifier": {
          "type": "Identifier",
          "name": "adminList"
         },
         "storageLocation": "storage",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "user",
         "identifier": {
          "type": "Identifier",
          "name": "user"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "adminList"
            },
            "memberName": "length"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "==",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "adminList"
               },
               "index": {
                "type": "Identifier",
                "name": "i"
               }
              },
              "right": {
               "type": "Identifier",
               "name": "user"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ReturnStatement",
                "expression": {
                 "type": "BooleanLiteral",
                 "value": true
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "BooleanLiteral",
           "value": false
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyLiquidationAdmin",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "isAdmin"
            },
            "arguments": [
             {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "adminsByRole"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexAuthLib"
                },
                "memberName": "AdminType"
               },
               "memberName": "Liquidation"
              }
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_msgSender"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidAdmin"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyLimitOrderAdmin",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "isAdmin"
            },
            "arguments": [
             {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "adminsByRole"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexAuthLib"
                },
                "memberName": "AdminType"
               },
               "memberName": "LimitOrder"
              }
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_msgSender"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidAdmin"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyLimitOrLiquidationAdmin",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "&&",
           "left": {
            "type": "UnaryOperation",
            "operator": "!",
            "subExpression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "isAdmin"
             },
             "arguments": [
              {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "adminsByRole"
               },
               "index": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "PerpDexAuthLib"
                 },
                 "memberName": "AdminType"
                },
                "memberName": "LimitOrder"
               }
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "_msgSender"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            "isPrefix": true
           },
           "right": {
            "type": "UnaryOperation",
            "operator": "!",
            "subExpression": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "isAdmin"
             },
             "arguments": [
              {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "adminsByRole"
               },
               "index": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "PerpDexAuthLib"
                 },
                 "memberName": "AdminType"
                },
                "memberName": "Liquidation"
               }
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "_msgSender"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            "isPrefix": true
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidAdmin"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlySingleOpenAdmin",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "isAdmin"
            },
            "arguments": [
             {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "adminsByRole"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexAuthLib"
                },
                "memberName": "AdminType"
               },
               "memberName": "SingleOpen"
              }
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_msgSender"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidAdmin"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyCloseAdmin",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "isAdmin"
            },
            "arguments": [
             {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "adminsByRole"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexAuthLib"
                },
                "memberName": "AdminType"
               },
               "memberName": "Close"
              }
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_msgSender"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidAdmin"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyTpslAdmin",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "UnaryOperation",
           "operator": "!",
           "subExpression": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "isAdmin"
            },
            "arguments": [
             {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "adminsByRole"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexAuthLib"
                },
                "memberName": "AdminType"
               },
               "memberName": "Tpsl"
              }
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "_msgSender"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           },
           "isPrefix": true
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidAdmin"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "FunctionDefinition",
       "name": "checkZeroAddress",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_address",
         "identifier": {
          "type": "Identifier",
          "name": "_address"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "Identifier",
            "name": "_address"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "address"
            },
            "arguments": [
             {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "ZeroAddress"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "_authorizeUpgrade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "newImplementation",
         "identifier": {
          "type": "Identifier",
          "name": "newImplementation"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "internal",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "initialize",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "initialOwner",
         "identifier": {
          "type": "Identifier",
          "name": "initialOwner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkZeroAddress"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "initialOwner"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__Pausable_init"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__Ownable_init"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "initialOwner"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__UUPSUpgradeable_init"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "nextPositionId"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "admin"
           },
           "right": {
            "type": "Identifier",
            "name": "initialOwner"
           }
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "initializer",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "addInitialTokenTotalSizes",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "count",
         "identifier": {
          "type": "Identifier",
          "name": "count"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "_addInitialTokenTotalSizes"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            {
             "type": "Identifier",
             "name": "count"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "changeMaxTokenTotalSizes",
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "_changeMaxTokenTotalSizes"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setAdmin",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_admin",
         "identifier": {
          "type": "Identifier",
          "name": "_admin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkZeroAddress"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_admin"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "admin"
           },
           "right": {
            "type": "Identifier",
            "name": "_admin"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setAdmins",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexAuthLib.AdminType"
         },
         "name": "adminType",
         "identifier": {
          "type": "Identifier",
          "name": "adminType"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "length": null
         },
         "name": "newAdmins",
         "identifier": {
          "type": "Identifier",
          "name": "newAdmins"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "adminType"
             }
            ],
            "names": [],
            "identifiers": []
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "arguments": [
             {
              "type": "MemberAccess",
              "expression": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "type"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "PerpDexAuthLib"
                 },
                 "memberName": "AdminType"
                }
               ],
               "names": [],
               "identifiers": []
              },
              "memberName": "max"
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "RevertStatement",
             "revertCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "InvalidAdmin"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexAuthLib"
            },
            "memberName": "_setAdmins"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "newAdmins"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "adminsByRole"
             },
             "index": {
              "type": "Identifier",
              "name": "adminType"
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setOracles",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_bisonAIRouter",
         "identifier": {
          "type": "Identifier",
          "name": "_bisonAIRouter"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_bisonAISubmission",
         "identifier": {
          "type": "Identifier",
          "name": "_bisonAISubmission"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_pyth",
         "identifier": {
          "type": "Identifier",
          "name": "_pyth"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkZeroAddress"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_bisonAIRouter"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkZeroAddress"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_bisonAISubmission"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkZeroAddress"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_pyth"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "bisonAIRouter"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "IBisonAIRouter"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_bisonAIRouter"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "bisonAISubmissionProxy"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "IBisonAISubmissionProxy"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_bisonAISubmission"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "pyth"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "IPyth"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_pyth"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setupAddr",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_usdt",
         "identifier": {
          "type": "Identifier",
          "name": "_usdt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_lp",
         "identifier": {
          "type": "Identifier",
          "name": "_lp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_fee",
         "identifier": {
          "type": "Identifier",
          "name": "_fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkZeroAddress"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_usdt"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkZeroAddress"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_lp"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkZeroAddress"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "_fee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "IERC20Metadata"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "_usdt"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "decimals"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             },
             "right": {
              "type": "NumberLiteral",
              "number": "6",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Decimal is not 6",
             "parts": [
              "Decimal is not 6"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "externalContracts"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "ExternalContracts"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "IFee"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "_fee"
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "ILP"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "_lp"
               }
              ],
              "names": [],
              "identifiers": []
             },
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "IERC20"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "_usdt"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [
             "feeContract",
             "lp",
             "usdt"
            ],
            "identifiers": [
             {
              "type": "Identifier",
              "name": "feeContract"
             },
             {
              "type": "Identifier",
              "name": "lp"
             },
             {
              "type": "Identifier",
              "name": "usdt"
             }
            ]
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "externalContracts"
               },
               "memberName": "usdt"
              },
              "memberName": "approve"
             },
             "arguments": [
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "externalContracts"
                 },
                 "memberName": "feeContract"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "type"
                },
                "arguments": [
                 {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "max"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "pause",
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_pause"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "unpause",
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_unpause"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.Position"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getOpenPositionIds",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "openPositionIds"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getLimitOrderIds",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "limitOrderIds"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getPositionIdsForTrader",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "traderPositionIds"
           },
           "index": {
            "type": "Identifier",
            "name": "trader"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "getTraderOpenPositionIds",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "UserDefinedTypeName",
           "namePath": "PerpDexLib.TraderOpenPositionId"
          },
          "length": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "UserDefinedTypeName",
              "namePath": "PerpDexLib.TraderOpenPositionId"
             },
             "length": null
            },
            "name": "traderOpenPositionIdArr",
            "identifier": {
             "type": "Identifier",
             "name": "traderOpenPositionIdArr"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "NewExpression",
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "UserDefinedTypeName",
              "namePath": "PerpDexLib.TraderOpenPositionId"
             },
             "length": null
            }
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "+",
             "left": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "type"
                 },
                 "arguments": [
                  {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "PerpDexLib"
                   },
                   "memberName": "TokenType"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                },
                "memberName": "max"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "right": {
              "type": "NumberLiteral",
              "number": "1",
              "subdenomination": null
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint16",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "traderOpenPositionIdArr"
            },
            "memberName": "length"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "traderOpenPositionIdArr"
               },
               "index": {
                "type": "Identifier",
                "name": "i"
               }
              },
              "right": {
               "type": "IndexAccess",
               "base": {
                "type": "IndexAccess",
                "base": {
                 "type": "Identifier",
                 "name": "traderOpenPositionIds"
                },
                "index": {
                 "type": "Identifier",
                 "name": "trader"
                }
               },
               "index": {
                "type": "Identifier",
                "name": "i"
               }
              }
             }
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "traderOpenPositionIdArr"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      },
      {
       "type": "FunctionDefinition",
       "name": "checkUserSignedData",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "message",
         "identifier": {
          "type": "Identifier",
          "name": "message"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "userSignedData",
         "identifier": {
          "type": "Identifier",
          "name": "userSignedData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "user",
         "identifier": {
          "type": "Identifier",
          "name": "user"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexAuthLib"
            },
            "memberName": "checkUser"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "message"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "message"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "length"
            },
            {
             "type": "Identifier",
             "name": "userSignedData"
            },
            {
             "type": "Identifier",
             "name": "user"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "UnaryOperation",
           "operator": "++",
           "subExpression": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "traderNonce"
            },
            "index": {
             "type": "Identifier",
             "name": "user"
            }
           },
           "isPrefix": false
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "openLimitOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OpenLimitOrderData"
         },
         "name": "o",
         "identifier": {
          "type": "Identifier",
          "name": "o"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkUserSignedData"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexAuthLib"
              },
              "memberName": "getOpenLimitOrderMsg"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "o"
              },
              {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "traderNonce"
               },
               "index": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "o"
                },
                "memberName": "trader"
               }
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "userSignedData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "trader"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "positionId",
            "identifier": {
             "type": "Identifier",
             "name": "positionId"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "UnaryOperation",
           "operator": "++",
           "subExpression": {
            "type": "Identifier",
            "name": "nextPositionId"
           },
           "isPrefix": false
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "_openLimitOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "o"
            },
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "Identifier",
             "name": "positions"
            },
            {
             "type": "Identifier",
             "name": "traderPositionIds"
            },
            {
             "type": "Identifier",
             "name": "limitOrderIds"
            },
            {
             "type": "Identifier",
             "name": "externalContracts"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlySingleOpenAdmin",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "whenNotPaused",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "closeLimitOrder",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "userSignedData",
         "identifier": {
          "type": "Identifier",
          "name": "userSignedData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "order",
            "identifier": {
             "type": "Identifier",
             "name": "order"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkUserSignedData"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexAuthLib"
              },
              "memberName": "getCloseLimitOrderMsg"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "positionId"
              },
              {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "traderNonce"
               },
               "index": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "order"
                },
                "memberName": "traderAddr"
               }
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "userSignedData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "order"
             },
             "memberName": "traderAddr"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "_closeLimitOrder"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "order"
            },
            {
             "type": "Identifier",
             "name": "positions"
            },
            {
             "type": "Identifier",
             "name": "limitOrderIds"
            },
            {
             "type": "Identifier",
             "name": "externalContracts"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyCloseAdmin",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "executeLimitOrders",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "ordersToExecute",
         "identifier": {
          "type": "Identifier",
          "name": "ordersToExecute"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint64",
           "stateMutability": null
          },
          "length": null
         },
         "name": "roundIds",
         "identifier": {
          "type": "Identifier",
          "name": "roundIds"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ordersToExecute"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "prices",
            "identifier": {
             "type": "Identifier",
             "name": "prices"
            },
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "length": null
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "updatedAts",
            "identifier": {
             "type": "Identifier",
             "name": "updatedAts"
            },
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "length": null
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "getPreviousPriceAndTime"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "roundIds"
            },
            {
             "type": "Identifier",
             "name": "priceData"
            },
            {
             "type": "Identifier",
             "name": "bisonAIRouter"
            },
            {
             "type": "Identifier",
             "name": "pyth"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ordersToExecute"
            },
            "memberName": "length"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "UserDefinedTypeName",
                "namePath": "PerpDexLib.Position"
               },
               "name": "order",
               "identifier": {
                "type": "Identifier",
                "name": "order"
               },
               "storageLocation": "storage",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "positions"
              },
              "index": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "ordersToExecute"
               },
               "index": {
                "type": "Identifier",
                "name": "i"
               }
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "order"
               },
               "memberName": "positionStatus"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexLib"
                },
                "memberName": "PositionStatus"
               },
               "memberName": "LimitOrderOpen"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ContinueStatement"
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "prices"
               },
               "memberName": "length"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "tokenType"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "RevertStatement",
              "revertCall": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "InvalidPriceData"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             },
             "falseBody": null
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "price",
               "identifier": {
                "type": "Identifier",
                "name": "price"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "prices"
              },
              "index": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "tokenType"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "updatedAt",
               "identifier": {
                "type": "Identifier",
                "name": "updatedAt"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "updatedAts"
              },
              "index": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "tokenType"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "order"
                 },
                 "memberName": "statusTime"
                },
                "memberName": "limitOpenTime"
               },
               "right": {
                "type": "Identifier",
                "name": "updatedAt"
               }
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexLib"
                },
                "memberName": "checkExecutionForLimitOrder"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "order"
                },
                {
                 "type": "Identifier",
                 "name": "price"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "PerpDexBotLib"
                  },
                  "memberName": "_executeLimitOrder"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "positions"
                  },
                  {
                   "type": "IndexAccess",
                   "base": {
                    "type": "Identifier",
                    "name": "ordersToExecute"
                   },
                   "index": {
                    "type": "Identifier",
                    "name": "i"
                   }
                  },
                  {
                   "type": "Identifier",
                   "name": "fundingFeeTokenStates"
                  },
                  {
                   "type": "Identifier",
                   "name": "traderOpenPositionIds"
                  },
                  {
                   "type": "Identifier",
                   "name": "fundingFeeGlobalState"
                  },
                  {
                   "type": "Identifier",
                   "name": "tokenTotalSizes"
                  },
                  {
                   "type": "Identifier",
                   "name": "openPositionIds"
                  },
                  {
                   "type": "Identifier",
                   "name": "externalContracts"
                  },
                  {
                   "type": "Identifier",
                   "name": "price"
                  },
                  {
                   "type": "Identifier",
                   "name": "limitOrderIds"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyLimitOrderAdmin",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "whenNotPaused",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "payable"
      },
      {
       "type": "FunctionDefinition",
       "name": "openPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OpenPositionData"
         },
         "name": "o",
         "identifier": {
          "type": "Identifier",
          "name": "o"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkUserSignedData"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexAuthLib"
              },
              "memberName": "getOpenPositionMsg"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "o"
              },
              {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "traderNonce"
               },
               "index": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "o"
                },
                "memberName": "trader"
               }
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "userSignedData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "trader"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "positionId",
            "identifier": {
             "type": "Identifier",
             "name": "positionId"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "UnaryOperation",
           "operator": "++",
           "subExpression": {
            "type": "Identifier",
            "name": "nextPositionId"
           },
           "isPrefix": false
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "positions"
             },
             "index": {
              "type": "Identifier",
              "name": "positionId"
             }
            },
            "memberName": "positionStatus"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "PositionStatus"
            },
            "memberName": "Initial"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "NextPositionIdExists"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "currentPrice",
            "identifier": {
             "type": "Identifier",
             "name": "currentPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "submitAndGetLatestPrice"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "priceData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "bisonAISubmissionProxy"
            },
            {
             "type": "Identifier",
             "name": "bisonAIRouter"
            },
            {
             "type": "Identifier",
             "name": "pyth"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "minPrice",
            "identifier": {
             "type": "Identifier",
             "name": "minPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "expectedPrice"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "99",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "100",
            "subdenomination": null
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "maxPrice",
            "identifier": {
             "type": "Identifier",
             "name": "maxPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "expectedPrice"
            },
            "right": {
             "type": "NumberLiteral",
             "number": "101",
             "subdenomination": null
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "100",
            "subdenomination": null
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": ">=",
              "left": {
               "type": "Identifier",
               "name": "currentPrice"
              },
              "right": {
               "type": "Identifier",
               "name": "minPrice"
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "Identifier",
               "name": "currentPrice"
              },
              "right": {
               "type": "Identifier",
               "name": "maxPrice"
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "Slippage is more than 1%",
             "parts": [
              "Slippage is more than 1%"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "updateFundingFeeState"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "tokenType"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "fundingFeeTokenStates"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "o"
              },
              "memberName": "tokenType"
             }
            },
            {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "tokenTotalSizes"
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "o"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "newPosition",
            "identifier": {
             "type": "Identifier",
             "name": "newPosition"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "createNewPosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "Identifier",
             "name": "o"
            },
            {
             "type": "Identifier",
             "name": "currentPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "openPositionIds"
             },
             "memberName": "length"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "fundingFeeTokenStates"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "o"
               },
               "memberName": "tokenType"
              }
             },
             "memberName": "accFeePerSize"
            },
            {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "externalContracts"
             },
             "memberName": "feeContract"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "positions"
            },
            "index": {
             "type": "Identifier",
             "name": "positionId"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "newPosition"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "traderPositionIds"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "o"
              },
              "memberName": "trader"
             }
            },
            "memberName": "push"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positionId"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "safeTransferFromAndCheckBalance"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "trader"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "o"
             },
             "memberName": "marginAmount"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "externalContracts"
             },
             "memberName": "usdt"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "_openPosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "o"
            },
            {
             "type": "Identifier",
             "name": "currentPrice"
            },
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "Identifier",
             "name": "positions"
            },
            {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            {
             "type": "Identifier",
             "name": "fundingFeeTokenStates"
            },
            {
             "type": "Identifier",
             "name": "traderOpenPositionIds"
            },
            {
             "type": "Identifier",
             "name": "openPositionIds"
            },
            {
             "type": "Identifier",
             "name": "externalContracts"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlySingleOpenAdmin",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "whenNotPaused",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "payable"
      },
      {
       "type": "FunctionDefinition",
       "name": "rollbackPosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "position",
            "identifier": {
             "type": "Identifier",
             "name": "position"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "position"
            },
            "memberName": "positionStatus"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "PerpDexLib"
             },
             "memberName": "PositionStatus"
            },
            "memberName": "Open"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidPositionStatus"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "updateFundingFeeState"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "fundingFeeTokenStates"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "tokenType"
             }
            },
            {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "tokenTotalSizes"
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "decreaseTotalPositionSize"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "isLong"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "size"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "cleanUpPosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positions"
            },
            {
             "type": "Identifier",
             "name": "openPositionIds"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "initialPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexLib"
              },
              "memberName": "PositionStatus"
             },
             "memberName": "RolledBack"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "traderOpenPositionIds"
              },
              "index": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "traderAddr"
              }
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint16",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "safeTransferAndCheckBalance"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "margin"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "externalContracts"
             },
             "memberName": "usdt"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDex"
            },
            "memberName": "PositionRolledBack"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "positionId"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "margin"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "size"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "initialPrice"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "isLong"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "closeFee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "tpslClosePositions",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "positionsToClose",
         "identifier": {
          "type": "Identifier",
          "name": "positionsToClose"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint64",
           "stateMutability": null
          },
          "length": null
         },
         "name": "roundIds",
         "identifier": {
          "type": "Identifier",
          "name": "roundIds"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "positionsToClose"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "prices",
            "identifier": {
             "type": "Identifier",
             "name": "prices"
            },
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "length": null
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "updatedAts",
            "identifier": {
             "type": "Identifier",
             "name": "updatedAts"
            },
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "length": null
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "getPreviousPriceAndTime"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "roundIds"
            },
            {
             "type": "Identifier",
             "name": "priceData"
            },
            {
             "type": "Identifier",
             "name": "bisonAIRouter"
            },
            {
             "type": "Identifier",
             "name": "pyth"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "positionsToClose"
            },
            "memberName": "length"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "UserDefinedTypeName",
                "namePath": "PerpDexLib.Position"
               },
               "name": "position",
               "identifier": {
                "type": "Identifier",
                "name": "position"
               },
               "storageLocation": "storage",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "positions"
              },
              "index": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "positionsToClose"
               },
               "index": {
                "type": "Identifier",
                "name": "i"
               }
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "positionStatus"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexLib"
                },
                "memberName": "PositionStatus"
               },
               "memberName": "Open"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ContinueStatement"
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "prices"
               },
               "memberName": "length"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "tokenType"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "RevertStatement",
              "revertCall": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "InvalidPriceData"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             },
             "falseBody": null
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "price",
               "identifier": {
                "type": "Identifier",
                "name": "price"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "prices"
              },
              "index": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "tokenType"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "updatedAt",
               "identifier": {
                "type": "Identifier",
                "name": "updatedAt"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "updatedAts"
              },
              "index": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "tokenType"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexBotLib"
               },
               "memberName": "_tpslClosePosition"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "positions"
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "Identifier",
                 "name": "positionsToClose"
                },
                "index": {
                 "type": "Identifier",
                 "name": "i"
                }
               },
               {
                "type": "Identifier",
                "name": "fundingFeeTokenStates"
               },
               {
                "type": "Identifier",
                "name": "traderOpenPositionIds"
               },
               {
                "type": "Identifier",
                "name": "fundingFeeGlobalState"
               },
               {
                "type": "Identifier",
                "name": "tokenTotalSizes"
               },
               {
                "type": "Identifier",
                "name": "openPositionIds"
               },
               {
                "type": "Identifier",
                "name": "externalContracts"
               },
               {
                "type": "Identifier",
                "name": "price"
               },
               {
                "type": "Identifier",
                "name": "updatedAt"
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyTpslAdmin",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "whenNotPaused",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "payable"
      },
      {
       "type": "FunctionDefinition",
       "name": "closePosition",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "userSignedData",
         "identifier": {
          "type": "Identifier",
          "name": "userSignedData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "position",
            "identifier": {
             "type": "Identifier",
             "name": "position"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkUserSignedData"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexAuthLib"
              },
              "memberName": "getClosePositionMsg"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "positionId"
              },
              {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "traderNonce"
               },
               "index": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "traderAddr"
               }
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "userSignedData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "currentPrice",
            "identifier": {
             "type": "Identifier",
             "name": "currentPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "submitAndGetLatestPrice"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "priceData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "bisonAISubmissionProxy"
            },
            {
             "type": "Identifier",
             "name": "bisonAIRouter"
            },
            {
             "type": "Identifier",
             "name": "pyth"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "_closePosition"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "positions"
            },
            {
             "type": "Identifier",
             "name": "positionId"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "fundingFeeTokenStates"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "tokenType"
             }
            },
            {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            {
             "type": "Identifier",
             "name": "traderOpenPositionIds"
            },
            {
             "type": "Identifier",
             "name": "tokenTotalSizes"
            },
            {
             "type": "Identifier",
             "name": "openPositionIds"
            },
            {
             "type": "Identifier",
             "name": "currentPrice"
            },
            {
             "type": "Identifier",
             "name": "externalContracts"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyCloseAdmin",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "whenNotPaused",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "payable"
      },
      {
       "type": "FunctionDefinition",
       "name": "liquidatePositions",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "length": null
         },
         "name": "liquidatablePositions",
         "identifier": {
          "type": "Identifier",
          "name": "liquidatablePositions"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ArrayTypeName",
          "baseTypeName": {
           "type": "ElementaryTypeName",
           "name": "uint64",
           "stateMutability": null
          },
          "length": null
         },
         "name": "roundIds",
         "identifier": {
          "type": "Identifier",
          "name": "roundIds"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "==",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "liquidatablePositions"
            },
            "memberName": "length"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "name": "prices",
            "identifier": {
             "type": "Identifier",
             "name": "prices"
            },
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "length": null
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           },
           {
            "type": "VariableDeclaration",
            "name": "updatedAts",
            "identifier": {
             "type": "Identifier",
             "name": "updatedAts"
            },
            "typeName": {
             "type": "ArrayTypeName",
             "baseTypeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "length": null
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "getPreviousPriceAndTime"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "roundIds"
            },
            {
             "type": "Identifier",
             "name": "priceData"
            },
            {
             "type": "Identifier",
             "name": "bisonAIRouter"
            },
            {
             "type": "Identifier",
             "name": "pyth"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "liquidatablePositions"
            },
            "memberName": "length"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "UserDefinedTypeName",
                "namePath": "PerpDexLib.Position"
               },
               "name": "position",
               "identifier": {
                "type": "Identifier",
                "name": "position"
               },
               "storageLocation": "storage",
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "positions"
              },
              "index": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "liquidatablePositions"
               },
               "index": {
                "type": "Identifier",
                "name": "i"
               }
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "!=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "position"
               },
               "memberName": "positionStatus"
              },
              "right": {
               "type": "MemberAccess",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "PerpDexLib"
                },
                "memberName": "PositionStatus"
               },
               "memberName": "Open"
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ContinueStatement"
               }
              ]
             },
             "falseBody": null
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "prices"
               },
               "memberName": "length"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "tokenType"
                }
               ],
               "names": [],
               "identifiers": []
              }
             },
             "trueBody": {
              "type": "RevertStatement",
              "revertCall": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "InvalidPriceData"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             },
             "falseBody": null
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "price",
               "identifier": {
                "type": "Identifier",
                "name": "price"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "prices"
              },
              "index": {
               "type": "FunctionCall",
               "expression": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "tokenType"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "uint256",
                "stateMutability": null
               },
               "name": "safeUpdatedAt",
               "identifier": {
                "type": "Identifier",
                "name": "safeUpdatedAt"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "BinaryOperation",
              "operator": "-",
              "left": {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "updatedAts"
               },
               "index": {
                "type": "FunctionCall",
                "expression": {
                 "type": "ElementaryTypeName",
                 "name": "uint256",
                 "stateMutability": null
                },
                "arguments": [
                 {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "position"
                  },
                  "memberName": "tokenType"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              },
              "right": {
               "type": "TupleExpression",
               "components": [
                {
                 "type": "Conditional",
                 "condition": {
                  "type": "BinaryOperation",
                  "operator": "==",
                  "left": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "priceData"
                   },
                   "memberName": "oracleType"
                  },
                  "right": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "PerpDexLib"
                    },
                    "memberName": "OracleType"
                   },
                   "memberName": "BisonAI"
                  }
                 },
                 "trueExpression": {
                  "type": "NumberLiteral",
                  "number": "10",
                  "subdenomination": null
                 },
                 "falseExpression": {
                  "type": "NumberLiteral",
                  "number": "0",
                  "subdenomination": null
                 }
                }
               ],
               "isArray": false
              }
             }
            },
            {
             "type": "IfStatement",
             "condition": {
              "type": "BinaryOperation",
              "operator": "&&",
              "left": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "position"
                 },
                 "memberName": "statusTime"
                },
                "memberName": "openTime"
               },
               "right": {
                "type": "Identifier",
                "name": "safeUpdatedAt"
               }
              },
              "right": {
               "type": "BinaryOperation",
               "operator": "<",
               "left": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "marginUpdatedTime"
               },
               "right": {
                "type": "Identifier",
                "name": "safeUpdatedAt"
               }
              }
             },
             "trueBody": {
              "type": "Block",
              "statements": [
               {
                "type": "ExpressionStatement",
                "expression": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "PerpDexBotLib"
                  },
                  "memberName": "_liquidatePosition"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "positions"
                  },
                  {
                   "type": "IndexAccess",
                   "base": {
                    "type": "Identifier",
                    "name": "liquidatablePositions"
                   },
                   "index": {
                    "type": "Identifier",
                    "name": "i"
                   }
                  },
                  {
                   "type": "Identifier",
                   "name": "fundingFeeTokenStates"
                  },
                  {
                   "type": "Identifier",
                   "name": "traderOpenPositionIds"
                  },
                  {
                   "type": "Identifier",
                   "name": "fundingFeeGlobalState"
                  },
                  {
                   "type": "Identifier",
                   "name": "tokenTotalSizes"
                  },
                  {
                   "type": "Identifier",
                   "name": "openPositionIds"
                  },
                  {
                   "type": "Identifier",
                   "name": "externalContracts"
                  },
                  {
                   "type": "Identifier",
                   "name": "price"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ]
             },
             "falseBody": null
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyLiquidationAdmin",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "whenNotPaused",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "payable"
      },
      {
       "type": "FunctionDefinition",
       "name": "setTpslPrice",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "id",
         "identifier": {
          "type": "Identifier",
          "name": "id"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "tpPrice",
         "identifier": {
          "type": "Identifier",
          "name": "tpPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "slPrice",
         "identifier": {
          "type": "Identifier",
          "name": "slPrice"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "userSignedData",
         "identifier": {
          "type": "Identifier",
          "name": "userSignedData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "position",
            "identifier": {
             "type": "Identifier",
             "name": "position"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "id"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkUserSignedData"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexAuthLib"
              },
              "memberName": "getSetTpslMsg"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "id"
              },
              {
               "type": "Identifier",
               "name": "tpPrice"
              },
              {
               "type": "Identifier",
               "name": "slPrice"
              },
              {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "traderNonce"
               },
               "index": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "traderAddr"
               }
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "userSignedData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "_setTpslPrice"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "position"
            },
            {
             "type": "Identifier",
             "name": "tpPrice"
            },
            {
             "type": "Identifier",
             "name": "slPrice"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyTpslAdmin",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "whenNotPaused",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "submitAndGetBisonAIRoundId",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "submitAndGetBisonAIRoundId"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "priceData"
            },
            {
             "type": "Identifier",
             "name": "bisonAISubmissionProxy"
            },
            {
             "type": "Identifier",
             "name": "bisonAIRouter"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyLimitOrLiquidationAdmin",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "changeMargin",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "positionId",
         "identifier": {
          "type": "Identifier",
          "name": "positionId"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bool",
          "stateMutability": null
         },
         "name": "addMargin",
         "identifier": {
          "type": "Identifier",
          "name": "addMargin"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "marginDelta",
         "identifier": {
          "type": "Identifier",
          "name": "marginDelta"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "PerpDexLib.OraclePrices"
         },
         "name": "priceData",
         "identifier": {
          "type": "Identifier",
          "name": "priceData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "userSignedData",
         "identifier": {
          "type": "Identifier",
          "name": "userSignedData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "PerpDexLib.Position"
            },
            "name": "position",
            "identifier": {
             "type": "Identifier",
             "name": "position"
            },
            "storageLocation": "storage",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "positions"
           },
           "index": {
            "type": "Identifier",
            "name": "positionId"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkUserSignedData"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "PerpDexAuthLib"
              },
              "memberName": "getChangeMarginMsg"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "positionId"
              },
              {
               "type": "Identifier",
               "name": "addMargin"
              },
              {
               "type": "Identifier",
               "name": "marginDelta"
              },
              {
               "type": "IndexAccess",
               "base": {
                "type": "Identifier",
                "name": "traderNonce"
               },
               "index": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "traderAddr"
               }
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "address"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "this"
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "userSignedData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "traderAddr"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "currentPrice",
            "identifier": {
             "type": "Identifier",
             "name": "currentPrice"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "submitAndGetLatestPrice"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "priceData"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "position"
             },
             "memberName": "tokenType"
            },
            {
             "type": "Identifier",
             "name": "bisonAISubmissionProxy"
            },
            {
             "type": "Identifier",
             "name": "bisonAIRouter"
            },
            {
             "type": "Identifier",
             "name": "pyth"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexLib"
            },
            "memberName": "_changeMargin"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "position"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "fundingFeeTokenStates"
             },
             "index": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "position"
              },
              "memberName": "tokenType"
             }
            },
            {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "tokenTotalSizes"
             },
             "index": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "uint256",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "position"
                },
                "memberName": "tokenType"
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "Identifier",
             "name": "addMargin"
            },
            {
             "type": "Identifier",
             "name": "marginDelta"
            },
            {
             "type": "Identifier",
             "name": "currentPrice"
            },
            {
             "type": "Identifier",
             "name": "externalContracts"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlySingleOpenAdmin",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "whenNotPaused",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "claimProtocolFundingFee",
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           },
           "right": {
            "type": "Identifier",
            "name": "admin"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidAdmin"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "<=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            "memberName": "protocolClaimable"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidProtocolClaimable"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": ">",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            "memberName": "protocolClaimable"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "MemberAccess",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "externalContracts"
              },
              "memberName": "usdt"
             },
             "memberName": "balanceOf"
            },
            "arguments": [
             {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "this"
               }
              ],
              "names": [],
              "identifiers": []
             }
            ],
            "names": [],
            "identifiers": []
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidProtocolClaimable"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "safeTransferAndCheckBalance"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "admin"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "fundingFeeGlobalState"
             },
             "memberName": "protocolClaimable"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "externalContracts"
             },
             "memberName": "usdt"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "depositFundingFeeGlobalStateBalance",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "balance",
         "identifier": {
          "type": "Identifier",
          "name": "balance"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           },
           "right": {
            "type": "Identifier",
            "name": "admin"
           }
          },
          "trueBody": {
           "type": "RevertStatement",
           "revertCall": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "InvalidAdmin"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "PerpDexPricesLib"
            },
            "memberName": "safeTransferFromAndCheckBalance"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "admin"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "balance"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "externalContracts"
             },
             "memberName": "usdt"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "fundingFeeGlobalState"
            },
            "memberName": "bufferBalance"
           },
           "right": {
            "type": "Identifier",
            "name": "balance"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "updateFundingFeeStates",
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "tokenCount",
            "identifier": {
             "type": "Identifier",
             "name": "tokenCount"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "NumberLiteral",
           "number": "19",
           "subdenomination": null
          }
         },
         {
          "type": "ForStatement",
          "initExpression": {
           "type": "VariableDeclarationStatement",
           "variables": [
            {
             "type": "VariableDeclaration",
             "typeName": {
              "type": "ElementaryTypeName",
              "name": "uint256",
              "stateMutability": null
             },
             "name": "i",
             "identifier": {
              "type": "Identifier",
              "name": "i"
             },
             "storageLocation": null,
             "isStateVar": false,
             "isIndexed": false,
             "expression": null
            }
           ],
           "initialValue": null
          },
          "conditionExpression": {
           "type": "BinaryOperation",
           "operator": "<",
           "left": {
            "type": "Identifier",
            "name": "i"
           },
           "right": {
            "type": "Identifier",
            "name": "tokenCount"
           }
          },
          "loopExpression": {
           "type": "ExpressionStatement",
           "expression": {
            "type": "UnaryOperation",
            "operator": "++",
            "subExpression": {
             "type": "Identifier",
             "name": "i"
            },
            "isPrefix": false
           }
          },
          "body": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "Identifier",
                "name": "PerpDexLib"
               },
               "memberName": "updateFundingFeeState"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "PerpDexLib"
                 },
                 "memberName": "TokenType"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "i"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "Identifier",
                 "name": "fundingFeeTokenStates"
                },
                "index": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "MemberAccess",
                  "expression": {
                   "type": "Identifier",
                   "name": "PerpDexLib"
                  },
                  "memberName": "TokenType"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "i"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               },
               {
                "type": "Identifier",
                "name": "fundingFeeGlobalState"
               },
               {
                "type": "IndexAccess",
                "base": {
                 "type": "Identifier",
                 "name": "tokenTotalSizes"
                },
                "index": {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "ElementaryTypeName",
                  "name": "uint256",
                  "stateMutability": null
                 },
                 "arguments": [
                  {
                   "type": "FunctionCall",
                   "expression": {
                    "type": "MemberAccess",
                    "expression": {
                     "type": "Identifier",
                     "name": "PerpDexLib"
                    },
                    "memberName": "TokenType"
                   },
                   "arguments": [
                    {
                     "type": "Identifier",
                     "name": "i"
                    }
                   ],
                   "names": [],
                   "identifiers": []
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        },
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "LP.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "0.8.26"
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/token/ERC20/extensions/ERC4626Upgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/token/ERC20/extensions/ERC4626Upgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/token/ERC20/extensions/ERC4626Upgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol",
      "parts": [
       "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "UsingForDeclaration",
     "isGlobal": false,
     "typeName": {
      "type": "UserDefinedTypeName",
      "namePath": "IERC20"
     },
     "libraryName": "SafeERC20",
     "functions": [],
     "operators": []
    },
    {
     "type": "ContractDefinition",
     "name": "LP",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "Initializable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ERC4626Upgradeable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "PausableUpgradeable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "OwnableUpgradeable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "UUPSUpgradeable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ReentrancyGuardUpgradeable"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IERC20"
         },
         "name": "usdt",
         "identifier": {
          "type": "Identifier",
          "name": "usdt"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "perpDex",
         "identifier": {
          "type": "Identifier",
          "name": "perpDex"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_disableInitializers"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "initialize",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "initialOwner",
         "identifier": {
          "type": "Identifier",
          "name": "initialOwner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "usdtAddr",
         "identifier": {
          "type": "Identifier",
          "name": "usdtAddr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "perpDexAddr",
         "identifier": {
          "type": "Identifier",
          "name": "perpDexAddr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "initialOwner"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "zero address",
             "parts": [
              "zero address"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "usdtAddr"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "zero address",
             "parts": [
              "zero address"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "perpDexAddr"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "zero address",
             "parts": [
              "zero address"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "usdt"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "IERC20"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "usdtAddr"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "perpDex"
           },
           "right": {
            "type": "Identifier",
            "name": "perpDexAddr"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__ERC20_init"
           },
           "arguments": [
            {
             "type": "StringLiteral",
             "value": "K-BIT LP Token",
             "parts": [
              "K-BIT LP Token"
             ],
             "isUnicode": [
              false
             ]
            },
            {
             "type": "StringLiteral",
             "value": "KLP",
             "parts": [
              "KLP"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__ERC4626_init"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "usdt"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__Pausable_init"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__Ownable_init"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "initialOwner"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__UUPSUpgradeable_init"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "initializer",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_authorizeUpgrade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "newImplementation",
         "identifier": {
          "type": "Identifier",
          "name": "newImplementation"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "internal",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "giveProfit",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "amount",
         "identifier": {
          "type": "Identifier",
          "name": "amount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "msg"
              },
              "memberName": "sender"
             },
             "right": {
              "type": "Identifier",
              "name": "perpDex"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Only perpDex contract can give profit",
             "parts": [
              "Only perpDex contract can give profit"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "safeTransfer"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "trader"
            },
            {
             "type": "Identifier",
             "name": "amount"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      }
     ],
     "kind": "contract"
    }
   ]
  }
 },
 {
  "path": "Fee.sol",
  "ast": {
   "type": "SourceUnit",
   "children": [
    {
     "type": "PragmaDirective",
     "name": "solidity",
     "value": "0.8.26"
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol",
      "parts": [
       "@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol",
      "parts": [
       "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/cryptography/ECDSA.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/cryptography/ECDSA.sol",
      "parts": [
       "@openzeppelin/contracts/utils/cryptography/ECDSA.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol",
      "parts": [
       "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "ImportDirective",
     "path": "@openzeppelin/contracts/utils/Strings.sol",
     "pathLiteral": {
      "type": "StringLiteral",
      "value": "@openzeppelin/contracts/utils/Strings.sol",
      "parts": [
       "@openzeppelin/contracts/utils/Strings.sol"
      ],
      "isUnicode": [
       false
      ]
     },
     "unitAlias": null,
     "unitAliasIdentifier": null,
     "symbolAliases": null,
     "symbolAliasesIdentifiers": null
    },
    {
     "type": "UsingForDeclaration",
     "isGlobal": false,
     "typeName": {
      "type": "UserDefinedTypeName",
      "namePath": "IERC20"
     },
     "libraryName": "SafeERC20",
     "functions": [],
     "operators": []
    },
    {
     "type": "ContractDefinition",
     "name": "Fee",
     "baseContracts": [
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "Initializable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "PausableUpgradeable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "OwnableUpgradeable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "UUPSUpgradeable"
       },
       "arguments": []
      },
      {
       "type": "InheritanceSpecifier",
       "baseName": {
        "type": "UserDefinedTypeName",
        "namePath": "ReentrancyGuardUpgradeable"
       },
       "arguments": []
      }
     ],
     "subNodes": [
      {
       "type": "FunctionDefinition",
       "name": null,
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_disableInitializers"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "default",
       "modifiers": [],
       "override": null,
       "isConstructor": true,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "initialize",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "initialOwner",
         "identifier": {
          "type": "Identifier",
          "name": "initialOwner"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "initialOwner"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "zero address",
             "parts": [
              "zero address"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__Pausable_init"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__Ownable_init"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "initialOwner"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "__UUPSUpgradeable_init"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "initializer",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "pause",
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_pause"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "unpause",
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "_unpause"
           },
           "arguments": [],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "_authorizeUpgrade",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "newImplementation",
         "identifier": {
          "type": "Identifier",
          "name": "newImplementation"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": []
       },
       "visibility": "internal",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": [],
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "UsingForDeclaration",
       "isGlobal": false,
       "typeName": {
        "type": "ElementaryTypeName",
        "name": "bytes32",
        "stateMutability": null
       },
       "libraryName": "ECDSA",
       "functions": [],
       "operators": []
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "perpDex",
         "identifier": {
          "type": "Identifier",
          "name": "perpDex"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "IERC20"
         },
         "name": "usdt",
         "identifier": {
          "type": "Identifier",
          "name": "usdt"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "referral",
         "identifier": {
          "type": "Identifier",
          "name": "referral"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "feeBalanceAsReferrer",
         "identifier": {
          "type": "Identifier",
          "name": "feeBalanceAsReferrer"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "feeBalanceAsReferee",
         "identifier": {
          "type": "Identifier",
          "name": "feeBalanceAsReferee"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "claimedFeeBalanceAsReferrer",
         "identifier": {
          "type": "Identifier",
          "name": "claimedFeeBalanceAsReferrer"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "claimedFeeBalanceAsReferee",
         "identifier": {
          "type": "Identifier",
          "name": "claimedFeeBalanceAsReferee"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "protocolFeePercent",
         "identifier": {
          "type": "Identifier",
          "name": "protocolFeePercent"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "referrerFeePercent",
         "identifier": {
          "type": "Identifier",
          "name": "referrerFeePercent"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "protocolFeeBalance",
         "identifier": {
          "type": "Identifier",
          "name": "protocolFeeBalance"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "refereeCount",
         "identifier": {
          "type": "Identifier",
          "name": "refereeCount"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "admin",
         "identifier": {
          "type": "Identifier",
          "name": "admin"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "protocolFeeCollector",
         "identifier": {
          "type": "Identifier",
          "name": "protocolFeeCollector"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "StateVariableDeclaration",
       "variables": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "Mapping",
          "keyType": {
           "type": "ElementaryTypeName",
           "name": "address",
           "stateMutability": null
          },
          "keyName": null,
          "valueType": {
           "type": "ElementaryTypeName",
           "name": "uint256",
           "stateMutability": null
          },
          "valueName": null
         },
         "name": "traderNonce",
         "identifier": {
          "type": "Identifier",
          "name": "traderNonce"
         },
         "expression": null,
         "visibility": "public",
         "isStateVar": true,
         "isDeclaredConst": false,
         "isIndexed": false,
         "isImmutable": false,
         "override": null,
         "storageLocation": null
        }
       ],
       "initialValue": null
      },
      {
       "type": "EventDefinition",
       "name": "FeePaid",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "referee",
         "identifier": {
          "type": "Identifier",
          "name": "referee"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "referrer",
         "identifier": {
          "type": "Identifier",
          "name": "referrer"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "protocolFee",
         "identifier": {
          "type": "Identifier",
          "name": "protocolFee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "referrerFee",
         "identifier": {
          "type": "Identifier",
          "name": "referrerFee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "refereeFee",
         "identifier": {
          "type": "Identifier",
          "name": "refereeFee"
         },
         "isStateVar": false,
         "isIndexed": false,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "ReferralFeeClaimed",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "trader",
         "identifier": {
          "type": "Identifier",
          "name": "trader"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "feeToClaimAsReferrer",
         "identifier": {
          "type": "Identifier",
          "name": "feeToClaimAsReferrer"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "feeToClaimAsReferee",
         "identifier": {
          "type": "Identifier",
          "name": "feeToClaimAsReferee"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "ProtocolFeeClaimed",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "owner",
         "identifier": {
          "type": "Identifier",
          "name": "owner"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "protocolFee",
         "identifier": {
          "type": "Identifier",
          "name": "protocolFee"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "ReferralRegistered",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "referrer",
         "identifier": {
          "type": "Identifier",
          "name": "referrer"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "referee",
         "identifier": {
          "type": "Identifier",
          "name": "referee"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "EventDefinition",
       "name": "FeePercentSet",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "referrer",
         "identifier": {
          "type": "Identifier",
          "name": "referrer"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "protocolFeePercent",
         "identifier": {
          "type": "Identifier",
          "name": "protocolFeePercent"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "referrerFeePercent",
         "identifier": {
          "type": "Identifier",
          "name": "referrerFeePercent"
         },
         "isStateVar": false,
         "isIndexed": true,
         "storageLocation": null,
         "expression": null
        }
       ],
       "isAnonymous": false
      },
      {
       "type": "ModifierDefinition",
       "name": "onlyAdmin",
       "parameters": [],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "msg"
              },
              "memberName": "sender"
             },
             "right": {
              "type": "Identifier",
              "name": "admin"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Only admin can call this function",
             "parts": [
              "Only admin can call this function"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "Identifier",
           "name": "_"
          }
         }
        ]
       },
       "isVirtual": false,
       "override": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setPerpDexAddr",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "perp",
         "identifier": {
          "type": "Identifier",
          "name": "perp"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "perp"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "zero address",
             "parts": [
              "zero address"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "perpDex"
           },
           "right": {
            "type": "Identifier",
            "name": "perp"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setUsdtAddr",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_usdt",
         "identifier": {
          "type": "Identifier",
          "name": "_usdt"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "FunctionCall",
              "expression": {
               "type": "MemberAccess",
               "expression": {
                "type": "FunctionCall",
                "expression": {
                 "type": "Identifier",
                 "name": "IERC20Metadata"
                },
                "arguments": [
                 {
                  "type": "Identifier",
                  "name": "_usdt"
                 }
                ],
                "names": [],
                "identifiers": []
               },
               "memberName": "decimals"
              },
              "arguments": [],
              "names": [],
              "identifiers": []
             },
             "right": {
              "type": "NumberLiteral",
              "number": "6",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "Decimal is not 6",
             "parts": [
              "Decimal is not 6"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "usdt"
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "IERC20"
            },
            "arguments": [
             {
              "type": "Identifier",
              "name": "_usdt"
             }
            ],
            "names": [],
            "identifiers": []
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setAdmin",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_addr",
         "identifier": {
          "type": "Identifier",
          "name": "_addr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "_addr"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "zero address",
             "parts": [
              "zero address"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "admin"
           },
           "right": {
            "type": "Identifier",
            "name": "_addr"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setProtocolFeeCollector",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "_addr",
         "identifier": {
          "type": "Identifier",
          "name": "_addr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "_addr"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "zero address",
             "parts": [
              "zero address"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "protocolFeeCollector"
           },
           "right": {
            "type": "Identifier",
            "name": "_addr"
           }
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyOwner",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "getTotalFeePercent",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "NumberLiteral",
           "number": "70",
           "subdenomination": null
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getMarginFeePercent",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "NumberLiteral",
           "number": "100",
           "subdenomination": null
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "getFeeDenominator",
       "parameters": [],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": null,
         "identifier": null,
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "NumberLiteral",
           "number": "100_000",
           "subdenomination": null
          }
         }
        ]
       },
       "visibility": "public",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "FunctionDefinition",
       "name": "payFee",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "referee",
         "identifier": {
          "type": "Identifier",
          "name": "referee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "fee",
         "identifier": {
          "type": "Identifier",
          "name": "fee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "msg"
              },
              "memberName": "sender"
             },
             "right": {
              "type": "Identifier",
              "name": "perpDex"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Only perpDex can call this function",
             "parts": [
              "Only perpDex can call this function"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "safeTransferFrom"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "perpDex"
            },
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "Identifier",
               "name": "this"
              }
             ],
             "names": [],
             "identifiers": []
            },
            {
             "type": "Identifier",
             "name": "fee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "referrer",
            "identifier": {
             "type": "Identifier",
             "name": "referrer"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "referral"
           },
           "index": {
            "type": "Identifier",
            "name": "referee"
           }
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "||",
           "left": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "protocolFeePercent"
             },
             "index": {
              "type": "Identifier",
              "name": "referrer"
             }
            },
            "right": {
             "type": "NumberLiteral",
             "number": "0",
             "subdenomination": null
            }
           },
           "right": {
            "type": "BinaryOperation",
            "operator": "==",
            "left": {
             "type": "Identifier",
             "name": "referrer"
            },
            "right": {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "address"
             },
             "arguments": [
              {
               "type": "NumberLiteral",
               "number": "0",
               "subdenomination": null
              }
             ],
             "names": [],
             "identifiers": []
            }
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "+=",
              "left": {
               "type": "Identifier",
               "name": "protocolFeeBalance"
              },
              "right": {
               "type": "Identifier",
               "name": "fee"
              }
             }
            },
            {
             "type": "EmitStatement",
             "eventCall": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "FeePaid"
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "referee"
               },
               {
                "type": "Identifier",
                "name": "referrer"
               },
               {
                "type": "Identifier",
                "name": "fee"
               },
               {
                "type": "Identifier",
                "name": "fee"
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               },
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ReturnStatement",
             "expression": null
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "protocolFee",
            "identifier": {
             "type": "Identifier",
             "name": "protocolFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "fee"
            },
            "right": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "protocolFeePercent"
             },
             "index": {
              "type": "Identifier",
              "name": "referrer"
             }
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "getFeeDenominator"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "Identifier",
            "name": "protocolFeeBalance"
           },
           "right": {
            "type": "Identifier",
            "name": "protocolFee"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "feeForReferrerAndReferee",
            "identifier": {
             "type": "Identifier",
             "name": "feeForReferrerAndReferee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "Identifier",
            "name": "fee"
           },
           "right": {
            "type": "Identifier",
            "name": "protocolFee"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "referrerFee",
            "identifier": {
             "type": "Identifier",
             "name": "referrerFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "/",
           "left": {
            "type": "BinaryOperation",
            "operator": "*",
            "left": {
             "type": "Identifier",
             "name": "feeForReferrerAndReferee"
            },
            "right": {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "referrerFeePercent"
             },
             "index": {
              "type": "Identifier",
              "name": "referrer"
             }
            }
           },
           "right": {
            "type": "FunctionCall",
            "expression": {
             "type": "Identifier",
             "name": "getFeeDenominator"
            },
            "arguments": [],
            "names": [],
            "identifiers": []
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feeBalanceAsReferrer"
            },
            "index": {
             "type": "Identifier",
             "name": "referrer"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "referrerFee"
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "refereeFee",
            "identifier": {
             "type": "Identifier",
             "name": "refereeFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "BinaryOperation",
           "operator": "-",
           "left": {
            "type": "Identifier",
            "name": "feeForReferrerAndReferee"
           },
           "right": {
            "type": "Identifier",
            "name": "referrerFee"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feeBalanceAsReferee"
            },
            "index": {
             "type": "Identifier",
             "name": "referee"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "refereeFee"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "FeePaid"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "referee"
            },
            {
             "type": "Identifier",
             "name": "referrer"
            },
            {
             "type": "Identifier",
             "name": "fee"
            },
            {
             "type": "Identifier",
             "name": "protocolFee"
            },
            {
             "type": "Identifier",
             "name": "referrerFee"
            },
            {
             "type": "Identifier",
             "name": "refereeFee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "registerReferrer",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "referrer",
         "identifier": {
          "type": "Identifier",
          "name": "referrer"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "referee",
         "identifier": {
          "type": "Identifier",
          "name": "referee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "userSignedData",
         "identifier": {
          "type": "Identifier",
          "name": "userSignedData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "referrer"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "zero address",
             "parts": [
              "zero address"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "referee"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "zero address",
             "parts": [
              "zero address"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "referrer"
             },
             "right": {
              "type": "Identifier",
              "name": "referee"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Cannot refer yourself",
             "parts": [
              "Cannot refer yourself"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "protocolFeePercent"
              },
              "index": {
               "type": "Identifier",
               "name": "referrer"
              }
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "protocolFeePercent is 0",
             "parts": [
              "protocolFeePercent is 0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "IndexAccess",
              "base": {
               "type": "Identifier",
               "name": "referral"
              },
              "index": {
               "type": "Identifier",
               "name": "referee"
              }
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "Referrer already exists",
             "parts": [
              "Referrer already exists"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "string",
             "stateMutability": null
            },
            "name": "message",
            "identifier": {
             "type": "Identifier",
             "name": "message"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "string",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodePacked"
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "Register referrer. Nonce: ",
               "parts": [
                "Register referrer. Nonce: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "IndexAccess",
                 "base": {
                  "type": "Identifier",
                  "name": "traderNonce"
                 },
                 "index": {
                  "type": "Identifier",
                  "name": "referee"
                 }
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Chain: ",
               "parts": [
                ", Chain: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "block"
                 },
                 "memberName": "chainid"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Contract: ",
               "parts": [
                ", Contract: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toHexString"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "address"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "this"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "UnaryOperation",
           "operator": "++",
           "subExpression": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "traderNonce"
            },
            "index": {
             "type": "Identifier",
             "name": "referee"
            }
           },
           "isPrefix": false
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkUser"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "message"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "message"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "length"
            },
            {
             "type": "Identifier",
             "name": "userSignedData"
            },
            {
             "type": "Identifier",
             "name": "referee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "referral"
            },
            "index": {
             "type": "Identifier",
             "name": "referee"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "referrer"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "refereeCount"
            },
            "index": {
             "type": "Identifier",
             "name": "referrer"
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "1",
            "subdenomination": null
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ReferralRegistered"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "referrer"
            },
            {
             "type": "Identifier",
             "name": "referee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyAdmin",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "claimProtocolFee",
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "==",
             "left": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "msg"
              },
              "memberName": "sender"
             },
             "right": {
              "type": "Identifier",
              "name": "protocolFeeCollector"
             }
            },
            {
             "type": "StringLiteral",
             "value": "Only collector can call this function",
             "parts": [
              "Only collector can call this function"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "claimedFee",
            "identifier": {
             "type": "Identifier",
             "name": "claimedFee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "Identifier",
           "name": "protocolFeeBalance"
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "safeTransfer"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "protocolFeeCollector"
            },
            {
             "type": "Identifier",
             "name": "claimedFee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "Identifier",
            "name": "protocolFeeBalance"
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ProtocolFeeClaimed"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "protocolFeeCollector"
            },
            {
             "type": "Identifier",
             "name": "claimedFee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "claimFee",
       "parameters": [],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "feeToClaimAsReferrer",
            "identifier": {
             "type": "Identifier",
             "name": "feeToClaimAsReferrer"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "feeBalanceAsReferrer"
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "safeTransfer"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "Identifier",
             "name": "feeToClaimAsReferrer"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "claimedFeeBalanceAsReferrer"
            },
            "index": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "feeToClaimAsReferrer"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feeBalanceAsReferrer"
            },
            "index": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "uint256",
             "stateMutability": null
            },
            "name": "feeToClaimAsReferee",
            "identifier": {
             "type": "Identifier",
             "name": "feeToClaimAsReferee"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "IndexAccess",
           "base": {
            "type": "Identifier",
            "name": "feeBalanceAsReferee"
           },
           "index": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "msg"
            },
            "memberName": "sender"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "usdt"
            },
            "memberName": "safeTransfer"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "Identifier",
             "name": "feeToClaimAsReferee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "+=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "claimedFeeBalanceAsReferee"
            },
            "index": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "feeToClaimAsReferee"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "feeBalanceAsReferee"
            },
            "index": {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            }
           },
           "right": {
            "type": "NumberLiteral",
            "number": "0",
            "subdenomination": null
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ReferralFeeClaimed"
           },
           "arguments": [
            {
             "type": "MemberAccess",
             "expression": {
              "type": "Identifier",
              "name": "msg"
             },
             "memberName": "sender"
            },
            {
             "type": "Identifier",
             "name": "feeToClaimAsReferrer"
            },
            {
             "type": "Identifier",
             "name": "feeToClaimAsReferee"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "nonReentrant",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "setFeePercent",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "referrer",
         "identifier": {
          "type": "Identifier",
          "name": "referrer"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_protocolFeePercent",
         "identifier": {
          "type": "Identifier",
          "name": "_protocolFeePercent"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "_referrerFeePercent",
         "identifier": {
          "type": "Identifier",
          "name": "_referrerFeePercent"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "userSignedData",
         "identifier": {
          "type": "Identifier",
          "name": "userSignedData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "referrer"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "zero address",
             "parts": [
              "zero address"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": ">",
             "left": {
              "type": "Identifier",
              "name": "_protocolFeePercent"
             },
             "right": {
              "type": "NumberLiteral",
              "number": "0",
              "subdenomination": null
             }
            },
            {
             "type": "StringLiteral",
             "value": "protocolFeePercent is 0",
             "parts": [
              "protocolFeePercent is 0"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "&&",
             "left": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "Identifier",
               "name": "_protocolFeePercent"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "getFeeDenominator"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             },
             "right": {
              "type": "BinaryOperation",
              "operator": "<=",
              "left": {
               "type": "Identifier",
               "name": "_referrerFeePercent"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "Identifier",
                "name": "getFeeDenominator"
               },
               "arguments": [],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "StringLiteral",
             "value": "Fee percent must be less than denominator",
             "parts": [
              "Fee percent must be less than denominator"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "string",
             "stateMutability": null
            },
            "name": "message",
            "identifier": {
             "type": "Identifier",
             "name": "message"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "ElementaryTypeName",
            "name": "string",
            "stateMutability": null
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodePacked"
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "Create referral code. Nonce: ",
               "parts": [
                "Create referral code. Nonce: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "IndexAccess",
                 "base": {
                  "type": "Identifier",
                  "name": "traderNonce"
                 },
                 "index": {
                  "type": "Identifier",
                  "name": "referrer"
                 }
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Chain: ",
               "parts": [
                ", Chain: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "block"
                 },
                 "memberName": "chainid"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "StringLiteral",
               "value": ", Contract: ",
               "parts": [
                ", Contract: "
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toHexString"
               },
               "arguments": [
                {
                 "type": "FunctionCall",
                 "expression": {
                  "type": "Identifier",
                  "name": "address"
                 },
                 "arguments": [
                  {
                   "type": "Identifier",
                   "name": "this"
                  }
                 ],
                 "names": [],
                 "identifiers": []
                }
               ],
               "names": [],
               "identifiers": []
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "UnaryOperation",
           "operator": "++",
           "subExpression": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "traderNonce"
            },
            "index": {
             "type": "Identifier",
             "name": "referrer"
            }
           },
           "isPrefix": false
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "checkUser"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "message"
            },
            {
             "type": "MemberAccess",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "ElementaryTypeName",
               "name": "bytes",
               "stateMutability": null
              },
              "arguments": [
               {
                "type": "Identifier",
                "name": "message"
               }
              ],
              "names": [],
              "identifiers": []
             },
             "memberName": "length"
            },
            {
             "type": "Identifier",
             "name": "userSignedData"
            },
            {
             "type": "Identifier",
             "name": "referrer"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "protocolFeePercent"
            },
            "index": {
             "type": "Identifier",
             "name": "referrer"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "_protocolFeePercent"
           }
          }
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "BinaryOperation",
           "operator": "=",
           "left": {
            "type": "IndexAccess",
            "base": {
             "type": "Identifier",
             "name": "referrerFeePercent"
            },
            "index": {
             "type": "Identifier",
             "name": "referrer"
            }
           },
           "right": {
            "type": "Identifier",
            "name": "_referrerFeePercent"
           }
          }
         },
         {
          "type": "EmitStatement",
          "eventCall": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "FeePercentSet"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "referrer"
            },
            {
             "type": "Identifier",
             "name": "_protocolFeePercent"
            },
            {
             "type": "Identifier",
             "name": "_referrerFeePercent"
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [
        {
         "type": "ModifierInvocation",
         "name": "onlyAdmin",
         "arguments": null
        }
       ],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": null
      },
      {
       "type": "FunctionDefinition",
       "name": "checkUser",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "string",
          "stateMutability": null
         },
         "name": "message",
         "identifier": {
          "type": "Identifier",
          "name": "message"
         },
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "length",
         "identifier": {
          "type": "Identifier",
          "name": "length"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "bytes",
          "stateMutability": null
         },
         "name": "signedData",
         "identifier": {
          "type": "Identifier",
          "name": "signedData"
         },
         "storageLocation": "calldata",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "user",
         "identifier": {
          "type": "Identifier",
          "name": "user"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": null,
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "bytes32",
             "stateMutability": null
            },
            "name": "ethHashedMessage",
            "identifier": {
             "type": "Identifier",
             "name": "ethHashedMessage"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "keccak256"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "MemberAccess",
              "expression": {
               "type": "Identifier",
               "name": "abi"
              },
              "memberName": "encodePacked"
             },
             "arguments": [
              {
               "type": "StringLiteral",
               "value": "\\x19Ethereum Signed Message:\\n",
               "parts": [
                "\\x19Ethereum Signed Message:\\n"
               ],
               "isUnicode": [
                false
               ]
              },
              {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "Strings"
                },
                "memberName": "toString"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "length"
                }
               ],
               "names": [],
               "identifiers": []
              },
              {
               "type": "Identifier",
               "name": "message"
              }
             ],
             "names": [],
             "identifiers": []
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "ElementaryTypeName",
             "name": "address",
             "stateMutability": null
            },
            "name": "recoveredAddress",
            "identifier": {
             "type": "Identifier",
             "name": "recoveredAddress"
            },
            "storageLocation": null,
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "MemberAccess",
            "expression": {
             "type": "Identifier",
             "name": "ethHashedMessage"
            },
            "memberName": "recover"
           },
           "arguments": [
            {
             "type": "Identifier",
             "name": "signedData"
            }
           ],
           "names": [],
           "identifiers": []
          }
         },
         {
          "type": "IfStatement",
          "condition": {
           "type": "BinaryOperation",
           "operator": "!=",
           "left": {
            "type": "Identifier",
            "name": "recoveredAddress"
           },
           "right": {
            "type": "Identifier",
            "name": "user"
           }
          },
          "trueBody": {
           "type": "Block",
           "statements": [
            {
             "type": "VariableDeclarationStatement",
             "variables": [
              {
               "type": "VariableDeclaration",
               "typeName": {
                "type": "ElementaryTypeName",
                "name": "bytes32",
                "stateMutability": null
               },
               "name": "klayHashedMessage",
               "identifier": {
                "type": "Identifier",
                "name": "klayHashedMessage"
               },
               "storageLocation": null,
               "isStateVar": false,
               "isIndexed": false,
               "expression": null
              }
             ],
             "initialValue": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "keccak256"
              },
              "arguments": [
               {
                "type": "FunctionCall",
                "expression": {
                 "type": "MemberAccess",
                 "expression": {
                  "type": "Identifier",
                  "name": "abi"
                 },
                 "memberName": "encodePacked"
                },
                "arguments": [
                 {
                  "type": "StringLiteral",
                  "value": "\\x19Klaytn Signed Message:\\n",
                  "parts": [
                   "\\x19Klaytn Signed Message:\\n"
                  ],
                  "isUnicode": [
                   false
                  ]
                 },
                 {
                  "type": "FunctionCall",
                  "expression": {
                   "type": "MemberAccess",
                   "expression": {
                    "type": "Identifier",
                    "name": "Strings"
                   },
                   "memberName": "toString"
                  },
                  "arguments": [
                   {
                    "type": "Identifier",
                    "name": "length"
                   }
                  ],
                  "names": [],
                  "identifiers": []
                 },
                 {
                  "type": "Identifier",
                  "name": "message"
                 }
                ],
                "names": [],
                "identifiers": []
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "BinaryOperation",
              "operator": "=",
              "left": {
               "type": "Identifier",
               "name": "recoveredAddress"
              },
              "right": {
               "type": "FunctionCall",
               "expression": {
                "type": "MemberAccess",
                "expression": {
                 "type": "Identifier",
                 "name": "klayHashedMessage"
                },
                "memberName": "recover"
               },
               "arguments": [
                {
                 "type": "Identifier",
                 "name": "signedData"
                }
               ],
               "names": [],
               "identifiers": []
              }
             }
            },
            {
             "type": "ExpressionStatement",
             "expression": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "require"
              },
              "arguments": [
               {
                "type": "BinaryOperation",
                "operator": "==",
                "left": {
                 "type": "Identifier",
                 "name": "recoveredAddress"
                },
                "right": {
                 "type": "Identifier",
                 "name": "user"
                }
               },
               {
                "type": "StringLiteral",
                "value": "Invalid signed data",
                "parts": [
                 "Invalid signed data"
                ],
                "isUnicode": [
                 false
                ]
               }
              ],
              "names": [],
              "identifiers": []
             }
            }
           ]
          },
          "falseBody": null
         },
         {
          "type": "ExpressionStatement",
          "expression": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "require"
           },
           "arguments": [
            {
             "type": "BinaryOperation",
             "operator": "!=",
             "left": {
              "type": "Identifier",
              "name": "recoveredAddress"
             },
             "right": {
              "type": "FunctionCall",
              "expression": {
               "type": "Identifier",
               "name": "address"
              },
              "arguments": [
               {
                "type": "NumberLiteral",
                "number": "0",
                "subdenomination": null
               }
              ],
              "names": [],
              "identifiers": []
             }
            },
            {
             "type": "StringLiteral",
             "value": "ECDSA: invalid signature",
             "parts": [
              "ECDSA: invalid signature"
             ],
             "isUnicode": [
              false
             ]
            }
           ],
           "names": [],
           "identifiers": []
          }
         }
        ]
       },
       "visibility": "internal",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "pure"
      },
      {
       "type": "StructDefinition",
       "name": "ReferralInfo",
       "members": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "totalFeePercent",
         "identifier": {
          "type": "Identifier",
          "name": "totalFeePercent"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "protocolFeePercent",
         "identifier": {
          "type": "Identifier",
          "name": "protocolFeePercent"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "referrerFeePercent",
         "identifier": {
          "type": "Identifier",
          "name": "referrerFeePercent"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "feeBalanceAsReferrer",
         "identifier": {
          "type": "Identifier",
          "name": "feeBalanceAsReferrer"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "feeBalanceAsReferee",
         "identifier": {
          "type": "Identifier",
          "name": "feeBalanceAsReferee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "claimedFeeBalanceAsReferrer",
         "identifier": {
          "type": "Identifier",
          "name": "claimedFeeBalanceAsReferrer"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "claimedFeeBalanceAsReferee",
         "identifier": {
          "type": "Identifier",
          "name": "claimedFeeBalanceAsReferee"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        },
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "uint256",
          "stateMutability": null
         },
         "name": "refereeCount",
         "identifier": {
          "type": "Identifier",
          "name": "refereeCount"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ]
      },
      {
       "type": "FunctionDefinition",
       "name": "getReferralInfo",
       "parameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "ElementaryTypeName",
          "name": "address",
          "stateMutability": null
         },
         "name": "addr",
         "identifier": {
          "type": "Identifier",
          "name": "addr"
         },
         "storageLocation": null,
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "returnParameters": [
        {
         "type": "VariableDeclaration",
         "typeName": {
          "type": "UserDefinedTypeName",
          "namePath": "ReferralInfo"
         },
         "name": null,
         "identifier": null,
         "storageLocation": "memory",
         "isStateVar": false,
         "isIndexed": false,
         "expression": null
        }
       ],
       "body": {
        "type": "Block",
        "statements": [
         {
          "type": "VariableDeclarationStatement",
          "variables": [
           {
            "type": "VariableDeclaration",
            "typeName": {
             "type": "UserDefinedTypeName",
             "namePath": "ReferralInfo"
            },
            "name": "info",
            "identifier": {
             "type": "Identifier",
             "name": "info"
            },
            "storageLocation": "memory",
            "isStateVar": false,
            "isIndexed": false,
            "expression": null
           }
          ],
          "initialValue": {
           "type": "FunctionCall",
           "expression": {
            "type": "Identifier",
            "name": "ReferralInfo"
           },
           "arguments": [
            {
             "type": "FunctionCall",
             "expression": {
              "type": "Identifier",
              "name": "getTotalFeePercent"
             },
             "arguments": [],
             "names": [],
             "identifiers": []
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "protocolFeePercent"
             },
             "index": {
              "type": "Identifier",
              "name": "addr"
             }
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "referrerFeePercent"
             },
             "index": {
              "type": "Identifier",
              "name": "addr"
             }
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "feeBalanceAsReferrer"
             },
             "index": {
              "type": "Identifier",
              "name": "addr"
             }
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "feeBalanceAsReferee"
             },
             "index": {
              "type": "Identifier",
              "name": "addr"
             }
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "claimedFeeBalanceAsReferrer"
             },
             "index": {
              "type": "Identifier",
              "name": "addr"
             }
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "claimedFeeBalanceAsReferee"
             },
             "index": {
              "type": "Identifier",
              "name": "addr"
             }
            },
            {
             "type": "IndexAccess",
             "base": {
              "type": "Identifier",
              "name": "refereeCount"
             },
             "index": {
              "type": "Identifier",
              "name": "addr"
             }
            }
           ],
           "names": [
            "totalFeePercent",
            "protocolFeePercent",
            "referrerFeePercent",
            "feeBalanceAsReferrer",
            "feeBalanceAsReferee",
            "claimedFeeBalanceAsReferrer",
            "claimedFeeBalanceAsReferee",
            "refereeCount"
           ],
           "identifiers": [
            {
             "type": "Identifier",
             "name": "totalFeePercent"
            },
            {
             "type": "Identifier",
             "name": "protocolFeePercent"
            },
            {
             "type": "Identifier",
             "name": "referrerFeePercent"
            },
            {
             "type": "Identifier",
             "name": "feeBalanceAsReferrer"
            },
            {
             "type": "Identifier",
             "name": "feeBalanceAsReferee"
            },
            {
             "type": "Identifier",
             "name": "claimedFeeBalanceAsReferrer"
            },
            {
             "type": "Identifier",
             "name": "claimedFeeBalanceAsReferee"
            },
            {
             "type": "Identifier",
             "name": "refereeCount"
            }
           ]
          }
         },
         {
          "type": "ReturnStatement",
          "expression": {
           "type": "Identifier",
           "name": "info"
          }
         }
        ]
       },
       "visibility": "external",
       "modifiers": [],
       "override": null,
       "isConstructor": false,
       "isReceiveEther": false,
       "isFallback": false,
       "isVirtual": false,
       "stateMutability": "view"
      }
     ],
     "kind": "contract"
    }
   ]
  }
 }
]